function g(b){throw b;}var i=void 0,j=!0,l=null,m=!1;function ba(){return function(b){return b}}function n(){return function(){}}function ca(b){return function(c){this[b]=c}}function o(b){return function(){return this[b]}}function q(b){return function(){return b}}var s;
function da(){function b(){if(0!==k.length){var c=k.shift(),d=p.shift();setTimeout(function(){d(c)},0);setTimeout(b,0)}}function c(b,c,r,aa){if(0!==d.length&&0===k.length){var hc=d[0];if(1===d.length&&("byte"===hc.type||hc.Ca.length<<1===f+1)){if(h)return c&&(d=[]),b(l,l),j;aa||(k.push(b),p.push(r));return m}var Pa,r=0,aa=f,Y=hc;if("byte"===Y.type)r++,hc=Y.Ca;else{Y=Y.Ca;Pa=Y.charCodeAt(aa>>>1);if(aa&1)return c&&(f++,Y.length<<1<=f&&(d.shift(),f=0)),b(l,Pa),j;hc=Pa>>>8&255;aa++;Y.length<<1<=aa&&(r++,
aa=0)}Y=d[r];"byte"===Y.type?(r++,Pa=Y.Ca):(Y=Y.Ca,Pa=Y.charCodeAt(aa>>>1),Pa=(aa&1?Pa:Pa>>>8)&255,aa++,Y.length<<1<=aa&&(r++,aa=0));if(c){for(;r--;)d.shift();f=aa}b(l,hc<<8|Pa);return j}if(h)return b(l,l),j;aa||(k.push(b),p.push(r));return m}var d=[],f=0,h=m,k=[],p=[],r={},D=r.lc=function(b,c){if(0!==d.length&&0===k.length){var r=d[0];if("byte"===r.type)d.shift(),b(l,r.Ca);else{var r=r.Ca,aa=r.charCodeAt(f>>>1),aa=(f&1?aa:aa>>>8)&255;f++;r.length<<1<=f&&(d.shift(),f=0);b(l,aa)}return j}if(h)return b(l,
l),j;c||(k.push(b),p.push(D));return m},L=r.mc=function(b,d){return c(b,j,L,d)},ka=r.lb=function(b,d){return c(b,m,ka,d)};r.close=n();r.Zc=function(){var b=d.length,c=m,h,k=[],p=0;if(f&1){var r=d[0].Ca,c=j;h=r.charCodeAt(f>>>1)&255;f++;for(var Y=f>>>1,D=r.length;Y<D;Y++){var Db=r.charCodeAt(Y);k.push(String.fromCharCode(h<<8|Db>>>8&255));h=Db&255}f=0;p++}else f&&(k.push(d[0].Ca.substring(f>>>1)),f=0,p++);for(b=d.length;p<b;p++)if(r=d[p],"byte"===r.type)c?(k.push(String.fromCharCode(h<<8|r.Ca)),c=
m):(h=r.Ca,c=j);else if(r=r.Ca,c){Y=0;for(D=r.length;Y<D;Y++)Db=r.charCodeAt(Y),k.push(String.fromCharCode(h<<8|Db>>>8&255)),h=Db&255}else k.push(r);d=c?[{type:"byte",Ca:h}]:[];return k.join("")};return{Va:r,kc:{$a:function(c){h||""===c||(d.push({type:"string",Ca:c}),b())},tc:function(c){h||(d.push({type:"byte",Ca:c}),b())},close:function(){h=j;b()},flush:n()}}}function ea(b,c,d){b.addEventListener?b.addEventListener(c,d,m):b.attachEvent("on"+c,d)}
var fa=da(),ga=da(),ha=da(),ia=da(),ja=ga.Va,la=ha.kc,na=ia.kc;function oa(b){b(new t("No filesystem."));return j}function pa(b,c){c(l,m);return j}function qa(b,c,d){if(d)return c(new t("Can't access the Web synchronously.")),j;d=new XMLHttpRequest;d.open("GET",b,j);d.onerror=function(){c(l,m)};d.onload=function(){c(l,j)};d.send(l);return m}
function ra(b,c,d){if(d)return c(new t("Can't access the Web synchronously.")),j;var f=new XMLHttpRequest;f.open("GET",b,j);f.onerror=function(){c(new t("Couldn't open page: "+b+" because of error: "+f.statusText))};f.onload=function(){c(l,(new sa(f.responseText)).qa())};f.send(l);return m}function ta(b){b(new t("No filesystem."));return j}function ua(b){b(new t("No filesystem."));return j}function va(b){b(new t("No filesystem."));return j}function wa(b){b(new t("No filesystem."));return j}
function xa(b){b(new t("No filesystem."));return j};function ya(b){la.$a(""+b)}function za(b){la.$a(""+b+"\n")}function Aa(b,c){i===c&&(c=na);for(c.$a(""+b+"\n"+(b.stack||b)+"\n");b instanceof t&&(b=b.ed);)b instanceof Ba&&(b=b.wa),c.$a("Caused by: "+b+"\n"+(b.stack||b)+"\n")}var u={};function Ca(){}function Da(){var b=new Ca;b.xc={};return b}Ca.prototype.get=function(b){return this.xc["rainbow_"+b]};Ca.prototype.put=function(b,c){return this.xc["rainbow_"+b]=c};function t(b,c){this.message=b;this.stack=Error().stack;this.ed=c;this.wd=[]}
t.prototype=Error();function v(b,c){this.parent=c;this.hb=Array(~~b);this.Lb=0}s=v.prototype;s.add=function(b){this.hb.length<=this.Lb&&g(new t("Can't add "+b+" to bindings: already full ("+this.Lb+") "+w(this.hb)));this.hb[this.Lb]=b;this.Lb++};s.Eb=function(b){return 0===b?this:this.parent.Eb(b-1)};s.toString=function(){for(var b=[],c=0;c<this.hb.length;c++)b.push(c),b.push(" : "),b.push(this.hb[c]),b.push("\n");return b.join("")+"\nparent: "+(this.parent===l?"<none>":this.parent.toString())};
s.set=function(b,c){return this.hb[b]=c};s.Kb=o("Lb");s.size=function(){return this.hb.length};function Ea(){}Ea.prototype=Error();function x(){}s=x.prototype;s.Ka=m;s.className="ArcObject";s.Ha=q(m);s.h=function(){g(new t("addInstructions not defined on "+this+", a "+this.className))};
s.g=function(b,c){var d=Fa.value();d instanceof Ga||g(new TypeError);d=d.value(this.type());d instanceof y&&g(new t("No handler for "+this.type()+" in call* table: called "+this+" with args "+c));d.g(b,z(new A,this,c))};s.ua=function(b){this.g(b,B)};s.t=function(b,c){this.g(b,z(new A,c,B))};s.U=function(b,c,d){this.g(b,z(new A,c,z(new A,d,B)))};s.Wa=function(b,c,d,f){this.g(b,z(new A,c,z(new A,d,z(new A,f,B))))};s.ka=function(){g(new t("len: expects one string, list or hash argument, got "+this.type()))};
s.Vb=function(){g(new t("Can't set car of "+this.type()))};s.pc=function(b,c){g(new t("Can't sref "+this+"( a "+this.type()+"), other args were "+b+", "+c))};s.ra=q(0);s.uc=function(){return B};s.a=function(){g(new t("Can't take car of "+this))};s.b=function(){g(new t("Can't take cdr of "+this))};s.Cc=q(m);s.type=i;s.copy=function(){return this};s.qa=function(){return this};s.Ga=function(b){return this===b};s.copyTo=ba();s.O=q(j);s.Db=function(){g(new Ha)};s.Oa=function(){g(new Ia)};s.Xc=function(){return this};
function Ja(b,c,d){for(var f=d,h=0;!(d instanceof y);)C(c,d.a()),d=d.b(),h++;E(c,new Ka(f,c.N,b));d=new La(h);d.m(b);E(c,d);d=new Ma(b);d.m(b);E(c,d)}s.Bb=function(){g(new t("has length: not a proper list: ends with "+this))};s.hc=function(){g(new t("longer than: not a proper list: ends with "+this))};s.M=function(){return this};s.l=n();s.Y=function(){return this};s.sc=n();s.Zb=n();s.$b=function(){return B};s.Sa=function(){return this.$b().toString()};
s.add=function(){g(new t("add not implemented for "+this.type()+" "+this))};s.sqrt=function(){g(new t("sqrt not implemented for "+this.type()+" "+this))};s.multiply=function(){g(new t("multiply not implemented for "+this.type()+" "+this))};function Ia(){}s.reduce=function(){return this};s.W=q(m);s.T=function(){return this};s.S=function(){return this};s.ha=q(m);s.bb=function(){return this.toString()};s.Ba=function(){return this.gd||(this.gd=1+Math.random())};s.sa=function(b){return this===b};
function Na(b){var c=l;Oa((new sa(b)).qa(),function(b,f){b&&g(b);c=f},j)||g(new Ea);return c}
function Oa(b,c,d){function f(c){return b.lb(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))},d)}function h(c){return b.mc(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))})}function k(b){for(var c=j,d=m;c&&!d;)d=j,h(function(p,r){if(p)return void b(p);r===l||"\n"===r?b(l):"\r"===r?f(function(d,f){if(d)return void b(d);"\n"===f?h(function(c){if(c)return void b(c);b(l)})||(c=m):b(l)})||(c=m):(d=m,c||k(b))})||(c=m);return c}function p(b){for(var c=j,d=
m;c&&!d;)d=j,f(function(f,r){function D(f){if(f)return void b(f);d=m;c||p(b)}if(f)return void b(f);";"===r?k(D)||(c=m):r===l||/[^ \t\r\n]/.test(r)?b(l):h(D)||(c=m)})||(c=m);return c}function r(b,c){function d(f){var h=b.length-1,k=b[h];b="string"===typeof f&&k instanceof Qa?b.slice(0,h).concat([F(k.value()+f)]):"string"===typeof f?b.concat([F(f)]):b.concat([f]);L=m;W||r(b,c)}function k(b){b===i&&(b=new Ea);c(b)}function D(){ue(function(b,c){if(b)return k(b);p(function(b){if(b)return k(b);h(function(b,
f){if(b)return k(b);")"===f?d(c):k()})||(W=m)})||(W=m)})||(W=m)}for(var W=j,L=m;W&&!L;)L=j,h(function(r,p){if(r)return k(r);p===l?k():'"'===p?c(l,b):"\\"===p?h(function(b,c){if(b)return k(b);'"'===c?d('"'):"\\"===c?d("\\"):"n"===c?d("\n"):"r"===c?d("\r"):"t"===c?d("\t"):"#"===c?h(function(b,c){if(b)return k(b);"("===c?d("#("):k()})||(W=m):k()})||(W=m):"#"===p?f(function(b,c){if(b)return k(b);if("("!==c)return void d("#");h(function(b){if(b)return k(b);D()})||(W=m)})||(W=m):d(p)})||(W=m);return W}
function D(b,c){function d(b){c(l,Ra(b))}for(var k=j,p=m;k&&!p;)p=j,f(function(f,r){if(f)return void c(f);r===l||/[^01-9a-zA-Z]/.test(r)?"newline"===b?d(10):"tab"===b?d(9):"space"===b?d(32):"return"===b?d(13):"null"===b?d(0):/^[01-9][01-9]+$/.test(b)?d(parseInt(b,10)):/^u[0-9a-f]+$/i.test(b)?d(parseInt(b.substring(1),16)):1===b.length?d(b.charCodeAt(0)):c(new Ea):h(function(d,f){if(d)return void c(d);p=m;b+=f;k||D(b,c)})||(k=m)})||(k=m);return k}function L(b,c){for(var d=j,k=m;d&&!k;)k=j,f(function(f,
p){if(f)return void c(f);if(p===l||/[^01-9a-fA-F]/.test(p)){if(""===b)return void c(new Ea);c(l,G(parseInt(b,16)))}else h(function(f,h){if(f)return void c(f);k=m;b+=h;d||L(b,c)})||(d=m)})||(d=m);return d}function ka(b,c){for(var d=j,f=m;d&&!f;)f=j,h(function(h,k){if(h)return void c(h);k===l?c(new Ea):"|"===k?c(l,Sa(b)):(f=m,b+=k,d||ka(b,c))})||(d=m);return d}function W(b,c,d){for(var k=j,r=m;k&&!r;)r=j,p(function(p){if(p)return void d(p);f(function(f,p){if(f)return void d(f);p===l?d(new Ea):p===c?
h(function(c){if(c)return void d(c);d(l,b)})||(k=m):ue(function(f,h){if(f)return void d(f);r=m;b=b.concat([h]);k||W(b,c,d)})||(k=m)})||(k=m)})||(k=m);return k}function bb(b,c){for(var d=j,k=m;d&&!k;)k=j,f(function(f,p){if(f)return void c(f);var r=p!==l&&p.charCodeAt(0);if(p!==l&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(p)||128<=r&&65536>r))h(function(f,h){if(f)return void c(f);k=m;b+=h;d||bb(b,c)})||(d=m);else if("\\"===p)h(function(f){if(f)return void c(f);h(function(f,h){if(f)return void c(f);
"|"===h?(k=m,b+="\\|",d||bb(b,c)):c(new Ea)})||(d=m)})||(d=m);else{var W;/^-?[01-9]+\/[01-9]+$/.test(b)?c(l,Ta(b)):/^-?[01-9]+$/.test(b)?c(l,G(parseInt(b,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)?c(l,Ua(parseFloat(b))):"+inf.0"===b?c(l,new H(1/0)):"-inf.0"===b?c(l,new H(-1/0)):"+nan.0"===b?c(l,new H(0/0)):"+i"===b?c(l,new I(0,1)):"-i"===b?c(l,new I(0,-1)):(W=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(b))?c(l,new I(Ua(parseFloat(W[1])).value(),
Ua(parseFloat(W[2]+(W[3]||"1"))).value())):c(l,Sa(b))}})||(d=m);return d}function ue(b){function c(){r([],function(c,d){if(c)return void b(c);0===d.length?b(l,F("")):1===d.length?b(l,d[0]):b(l,w([Sa("string")].concat(d)))})||(ma=m)}function d(){ka("",function(c,d){if(c)return void b(c);b(l,Sa(d))})||(ma=m)}function k(){h(function(c,d){if(c)return void b(c);d!==l&&/x/i.test(d)?L("",b)||(ma=m):"\\"===d?h(function(c,d){if(c)return void b(c);if(/[^a-zA-Z]/.test(c))return void b(l,Ra(c.charCodeAt(0)));
D(d,b)||(ma=m)})||(ma=m):b(new Ea)})||(ma=m)}function ve(c){ue(function(d,f){if(d)return void b(d);f===l?b(new Ea):b(l,w([J(c),f]))})||(ma=m)}function Db(){f(function(c,d){if(c)return void b(c);d===l?b(new Ea):"@"===d?h(function(c){if(c)return void b(c);ve("unquote-splicing")})||(ma=m):ve("unquote")})||(ma=m)}function mk(){W([],")",function(c,d){if(c)return void b(c);if(0===d.length)b(l,Va);else{try{var f=d===l||0===d.length?B:d[0]===Wa?Xa(d):z(new A,d[0],Ya(d.slice(1)))}catch(h){return void b(h)}b(l,
f)}})||(ma=m)}function nk(){W([],"]",function(c,d){if(c)return void b(c);b(l,w([J("fn"),w([J("_")]),w(d)]))})||(ma=m)}var ma=j;p(function(f){if(f)return void b(f);h(function(f,h){if(f)return void b(f);h===l?b(l,l):'"'===h?c():"|"===h?d():"#"===h?k():"'"===h?ve("quote"):","===h?Db():"`"===h?ve("quasiquote"):"("===h?mk():"["===h?nk():bb(h,b)||(ma=m)})||(ma=m)})||(ma=m);return ma}return ue(c)}function K(b,c){this.ba=b;this.Yc=c;this.hd=b;this.Ab=this.k=l}K.prototype=new x;s=K.prototype;s.className="Symbol";
s.h=function(b){b.push(new Za(this))};function J(b){var c=Sa(b);if(c instanceof K)return c;g(new t("can't make symbol from \""+b+'"'))}
function Sa(b){if("t"===b)b=$a;else if("nil"===b)b=B;else{var c;if(!(c=ab.test(b))){a:if(/^-?[01-9]+\/[01-9]+$/.test(b)||/^-?[01-9]+$/.test(b)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)||"+inf.0"===b||"-inf.0"===b||"+nan.0"===b||"+i"===b||"-i"===b||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(b)||/\\(?!\|)/.test(b))c=j;else{c=0;for(var d=b.length;c<d;c++){var f=b.charCodeAt(c);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(b.charAt(c))||128<=f&&65536>
f)){c=j;break a}}c=m}c=c||"."===b}b=c?cb(b,"|"+b+"|"):db.test(b)?cb(b.replace(/\\\|/g,"|"),b):cb(b,b)}return b}s.bb=o("ba");s.toString=o("Yc");function cb(b,c){if("rainbow_"+b in eb.xc)return eb.get(b);var d=new K(b,c);eb.put(b,d);return d}s.name=o("ba");s.ra=function(b){b instanceof K||g(new TypeError);return this.ba.localeCompare(b.name)};s.type=function(){return fb};s.qa=function(){return this.name()};s.Ba=o("hd");s.sa=function(b){return this===b};
function gb(b,c){return c instanceof K&&c.name()===b}s.ga=function(b){var c=this.k;this.k=b;c!==l&&c.sc(this);b.Zb(this)};s.value=function(){this.k===l&&g(new t("Symbol "+this.ba+" is not bound"));return this.k};s.bound=function(){return this.k!==l};function hb(b,c){try{return b instanceof K||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a Symbol, got "+b))}}function ib(b,c,d){if(b.Ab===l)b.Ab={};b.Ab[c.name()]=d}
var eb=Da(),ab=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,db=/.*\\\|/,fb=J("sym"),Wa=J("."),jb=J("!");function A(){}A.prototype=new x;s=A.prototype;s.className="Pair";function z(b,c,d){c===l&&g(new t("Can't create Pair with null car: use NIL instead"));d===l&&g(new t("Can't create Pair with null cdr: use NIL instead"));b.ab=c;b.nb=d;return b}s.g=function(b,c){var d=kb(c.a(),this);C(b,this.Eb(d.I()).a())};s.uc=o("ab");s.a=o("ab");s.b=o("nb");s.Oa=function(){this.ab!==l&&g(new Ia)};s.O=q(m);
s.Vb=function(b){return this.ab=b};s.pc=function(b,c){return this.Eb(lb(c,this).I()).Vb(b)};s.Cc=function(b){return b===this.ab};s.toString=function(){if(this.a()instanceof K&&this.a().name()in mb&&this.b()instanceof A&&1===this.b().size()){var b=this.a(),b=mb[b.name()],c=this.b();c instanceof A||g(new TypeError);return b+nb(c)}return"("+nb(this)+")"};function nb(b){for(var c=[];!b.O();)c.push(b.a()),b.b().O()||c.push(" "),b=b.b();b instanceof y||c.push(" . ",b);return c.join("")}s.Jc=ca("nb");
function Ya(b){if(0===b.length)return B;if(b[0]===Wa)return 2===b.length?(b=b[1],b instanceof x||g(new TypeError),b):Xa(b);var c=b[0];c instanceof x||g(new TypeError);return z(new A,c,Ya(b.slice(1)))}function Xa(b){g(new t('Error: illegal use of "." in '+b))}function ob(b,c,d){if(d===b.length)return c;var f=b[d];f instanceof x||g(new TypeError);return z(new A,f,ob(b,c,d+1))}function pb(b,c){return b===l||0===b.length?c:ob(b,c,0)}function w(b){return pb(b,B)}s.type=function(){return qb};s.ka=function(){return this.size()};
s.size=function(){if(this instanceof y)return 0;for(var b=1,c=this.nb;!(c instanceof y);)c.O()&&g(new t("cannot take size: not a proper list: "+this)),b++,c=c.b();return b};s.ra=function(){g(new t("Pair.compareTo:unimplemented"))};s.copyTo=function(b){b.push(this.a());if(this.b()instanceof y)return b;this.b()instanceof A||g(new t("Not a list: "+this));this.b().copyTo(b);return b};
s.sa=function(b){if(this===b)return j;var c=this instanceof y;b instanceof x||g(new TypeError);var d=b instanceof y;if(c!==d)return m;if(c&&d)return j;return b instanceof A?(c=b.ab.sa(this.ab),b=b.nb.sa(this.nb),c&&b):m};s.Ba=function(){return this.a().Ba()+this.b().Ba()};s.Eb=function(b){try{for(var c,d=this,f=b;0<f;)d.b()instanceof y&&g(new rb),d=d.b(),f--;c=d;c instanceof A||g(new TypeError);return c}catch(h){h instanceof rb||g(e),g(new t("Error: index "+b+" too large for list "+this))}};
s.Bb=function(b){return this.b().Bb(b-1)};s.hc=function(b){return 0>b||this.b().hc(b-1)};s.Sa=function(){return"ref:"+this.type().toString()};function rb(){}rb.prototype=Error();s=A.prototype;s.copy=function(){return this instanceof y?this:z(new A,this.a(),this.b().copy())};s.qa=function(){var b=[];sb(b,this);return b};s.Ga=function(b){return x.prototype.Ga.call(this,b)||this instanceof y&&b instanceof y};
function sb(b,c){if(!(c instanceof y)){b.push(c.a().qa());var d=c.b();d instanceof A||g(new TypeError);sb(b,d)}}function tb(b){var c=Array(~~b.size());ub(b,c,0);return c}function ub(b,c,d){if(d<c.length)c[d]=b.ab,b=b.nb,b instanceof A||g(new TypeError),b instanceof y||ub(b,c,d+1)}function vb(b,c){try{return b instanceof A||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a cons, got "+b))}}s.Db=n();
s.add=function(b){if(b instanceof A){var c=[];this.copyTo(c);b.copyTo(c);return w(c)}g(new t("+ : expects cons, got "+b.type()+" "+b))};s.l=function(b){b.ya(this);for(var c=this;!c.O();)c.a().l(b),c=c.b();c instanceof y||c.l(b);b.Ja(this)};function Ha(){}var qb=J("cons"),mb={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function y(b){this.ab=this.nb=l;this.wb=b}y.prototype=new A;s=y.prototype;s.className="Nil";s.h=function(b){b.push(new Ma(wb))};
s.g=function(b,c){g(new t("Function dispatch on inappropriate object: "+this+" with args "+c))};s.Db=n();s.Ha=q(j);s.ka=q(0);s.O=q(j);s.Oa=n();s.toString=o("wb");s.uc=function(){return this};s.a=function(){return this};s.b=function(){return this};s.Cc=q(m);s.Jc=function(){g(Error("can't set the cdr of "+this))};s.size=q(0);s.copyTo=ba();s.type=function(){return xb};s.Ba=q("nil");s.sa=function(b){if(this===b)return j;b instanceof x||g(new TypeError);return b instanceof y};s.qa=q(m);
s.Ga=function(b){return b instanceof y};s.Xc=ba();s.Bb=function(b){return 0===b};s.hc=function(b){return 0>b};var xb=fb,wb=new y("nil"),yb=new y("()");function zb(){K.call(this,this.ba,this.Yc);Ab!==i&&g(Error())}var Bb={};zb.prototype=new K("t","t");s=zb.prototype;s.className="Truth";s.Ha=q(j);s.h=function(b){b.push(new Ma(Ab))};s.toString=q("t");s.ra=function(){g(new t("Truth.compareTo:unimplemented"))};s.type=function(){return fb};function Cb(b){return b?Ab:B}s.Ba=q("t");
s.sa=function(b){return this===b};s.qa=q(j);s.ga=function(){g(new t("error: can't rebind t!"))};s.value=function(){return this};var Ab=new zb;function M(){this.d=l}M.prototype=new x;s=M.prototype;s.Nb=m;s.fc=m;s.oa=m;s.Da=m;s.className="Instruction";s.type=function(){return J("instruction")};s.eb=function(){return this.toString()};s.toString=function(){return"("+this.className+")"};s.c=i;s.m=ca("d");s.l=function(b){b.Xb(this)};function Ka(b,c,d){this.d=l;this.md=b;this.Ib=c;this.m(d)}
Ka.prototype=new M;Ka.prototype.fc=j;Ka.prototype.className="ArcObject.ConvertError";Ka.prototype.wc=function(b){return b instanceof Error};Ka.prototype.c=function(b){var c=b.error();if(c!==l)b.Ua=l,b.N=this.Ib,g(new t("error invoking "+this.d+" with args "+this.md+": "+c,c))};var Fa=J("call*"),B=wb,Va=yb,$a=Ab;function Eb(){}Eb.prototype=new x;Eb.prototype.className="LiteralObject";Eb.prototype.Ha=q(j);Eb.prototype.h=function(b){b.push(new Ma(this))};Eb.prototype.Sa=function(){return"ref:"+this.type().toString()};
function N(b){this.k=b;Fb[b]=this}N.prototype=new Eb;s=N.prototype;s.className="ArcCharacter";function Ra(b){return Fb[b]===i?new N(b):Fb[b]}s.Ha=q(j);s.toString=function(){return"#\\"+String.fromCharCode(this.k)};s.ra=function(b){b instanceof N||g(new TypeError);return this.k-other.k};s.type=function(){return Gb};s.qa=function(){return this.value()};s.value=o("k");s.bb=function(){return String.fromCharCode(this.k)};s.Ba=function(){return this.bb()};
s.sa=function(b){return this===b||b instanceof N&&b.k===this.k};function Hb(b,c){try{return b instanceof N||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a character, got "+b))}}var Gb=J("char"),Fb=Array(65536);function Ib(){N.call(this,0)}Ib.prototype=new N(0);Ib.prototype.className="ArcCharacter.Anon_NULL_";Ib.prototype.toString=q("#\\null");var Jb=new Ib;function Kb(){N.call(this,10)}Kb.prototype=new N(10);Kb.prototype.className="ArcCharacter.Anon_named_1_";
Kb.prototype.toString=q("#\\newline");function Lb(){N.call(this,9)}Lb.prototype=new N(9);Lb.prototype.className="ArcCharacter.Anon_named_2_";Lb.prototype.toString=q("#\\tab");function Mb(){N.call(this,13)}Mb.prototype=new N(13);Mb.prototype.className="ArcCharacter.Anon_named_3_";Mb.prototype.toString=q("#\\return");function Nb(){N.call(this,32)}Nb.prototype=new N(32);Nb.prototype.className="ArcCharacter.Anon_named_4_";Nb.prototype.toString=q("#\\space");new Kb;new Lb;new Mb;new Nb;
function Qa(b){this.k=b}Qa.prototype=new Eb;s=Qa.prototype;s.className="ArcString";s.g=function(b,c){Ob(c,this.className,1);var d=lb(c.a(),this);d.ma()||g(new t("string-ref: expects exact integer: got "+d));d=~~d.I();0<=d||d<this.value.length()||g(new t("string-ref: index "+d+" out of range [0, "+(this.k.length-1)+"] for string "+this.toString()));C(b,Ra(this.k.charCodeAt(d)))};s.value=o("k");s.bb=o("k");
s.toString=function(){var b=this.k,c=[];c.push('"');for(var d=0;d<b.length;d++)switch(b.charAt(d)){case '"':c.push('\\"');break;case "\\":c.push("\\\\");break;case "\n":c.push("\\n");break;case "\r":c.push("\\r");break;default:c.push(b.charAt(d))}c.push('"');return c.join("")};s.ra=function(b){b instanceof Qa||g(new TypeError);return this.k.localeCompare(b.k)};s.ka=function(){return this.k.length};s.Vb=function(b){var c=[Hb(b,this).bb()];c.push(this.value().substring(1));this.ga(c.join(""));return b};
s.pc=function(b,c){var d=Hb(b,N),f=lb(c,this),f=f.I();0<=f&&f<this.k.length||g(new RangeError);this.k=this.k.substring(0,f)+String.fromCharCode(d.value())+this.k.substring(f+1);return b};s.type=function(){return Pb};s.qa=function(){return this.value()};function F(b){return new Qa(b)}s.ga=ca("k");s.Ba=o("k");s.sa=function(b){return this===b||b instanceof Qa&&b.k===this.k};s.Ga=function(b){return this.sa(b)};
s.add=function(b){var c=[this.k];if(!(b instanceof Qa)){var d=b.type();d instanceof K||g(new TypeError);d=Qb.Ab[d]||l;d instanceof Rb||g(new TypeError);b=d.Jb(b);b instanceof Qa||g(new TypeError)}c.push(b.value());return F(c.join(""))};function Sb(b,c){try{return b instanceof Qa||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a string, got "+b))}}var Pb=J("string");function Ba(b,c,d){this.ub=c;this.wa=b;this.qd=d}Ba.prototype=new Eb;
Ba.prototype.className="ArcException";Ba.prototype.type=function(){return Tb};Ba.prototype.message=function(){return this.wa!==l?F(this.wa.message):Ub};Ba.prototype.toString=function(){return this.message().toString()};var Tb=J("exn"),Ub=F("no message");function O(){}O.prototype=new Eb;s=O.prototype;s.className="ArcNumber";s.ma=i;s.F=i;s.I=i;s.sb=i;s.round=i;s.nc=function(){g(new t("round[closest] not implemented for "+this.className+"("+this+")"))};s.Ha=q(j);
s.ra=function(b){b instanceof O||g(new TypeError);b=b.F()-this.F();return 0>b?1:0===b?0:-1};s.type=function(){return this.ma()?Vb:Wb};s.Ga=function(b){return this.sa(b)};function kb(b,c){try{return b instanceof O||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a number, got "+b))}}s.Uc=function(){g(new t("mod: not implemented for "+this.className+"("+this+")"))};var Vb=J("int"),Wb=J("num");function Xb(){this.k=l}Xb.prototype=new Eb;
Xb.prototype.className="ArcThreadLocal";Xb.prototype.set=ca("k");Xb.prototype.get=o("k");Xb.prototype.type=function(){return Yb};function Zb(b,c){try{return b instanceof Xb||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a thread-local, got "+b))}}var Yb=J("thread-local");function I(b,c){this.X=b;this.P=c}I.prototype=new O;s=I.prototype;s.className="Complex";
function $b(){var b;if("+i"===soFar)return new I(0,1);if("-i"===soFar)return new I(0,-1);if(b=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(soFar))return new I(Ua(parseFloat(b[1])).value(),Ua(parseFloat(b[2]+(b[3]||"1"))).value());g(new Ea)}s.ma=function(){return 0===this.P&&Math.floor(this.X)===real};s.F=function(){g(new t("Cannot convert complex to double"))};s.I=function(){g(new t("Cannot convert complex to int"))};
s.sb=function(){return new I(-this.X,-this.P)};s.toString=function(){return(new H(this.X)).toString()+(0>this.P?"":"+")+(new H(this.P)).toString()+"i"};function ac(b,c){try{return b instanceof I||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a complex number, got "+b))}}s.round=function(){return new t("Can't convert "+this+" to integer")};function bc(b){var c=argument.F();return new I(b.X*c,b.P*c)}
s.multiply=function(b){if(b instanceof I)return cc(this,b);b instanceof O||g(new TypeError);b=b.F();return new I(this.X*b,this.P*b)};function cc(b,c){var d=b.X,f=c.X,h=b.P,k=c.P;return new I(d*f-h*k,d*k+f*h)}s.add=function(b){if(b instanceof I)return new I(this.X+b.X,this.P+b.P);if(b instanceof P||b instanceof H)return new I(this.X+b.F(),this.P);g(new t("+: expects a number, got "+b.type()+" "+b))};s.log=function(){return new I(Math.log(Math.sqrt(this.X*this.X+this.P*this.P)),Math.atan2(this.P,this.X))};
function dc(b,c){var d;if(c instanceof I)d=cc(b.log(),c).exp();else{d=b.log();var f=c.F();d=(new I(d.X*f,d.P*f)).exp()}return d}s.sqrt=function(){return dc(this,Ua(0.5))};s.exp=function(){var b=Math.exp(this.X);return new I(b*Math.cos(this.P),b*Math.sin(this.P))};s.ra=function(){g(new t("Compare: complex numbers are unordered and cannot be compared"))};s.Ga=function(b){return b instanceof I?b.X===this.X&&b.P===this.P:b instanceof O&&0===this.P&&b.F()===this.X};
function P(b,c){0===c&&0!==b&&g(new t("/: division by zero"));var d=ec(this,b,c);this.ea=b/d;this.R=c/d}P.prototype=new O;s=P.prototype;s.className="Rational";function Ta(b){b=b.split("/");return new P(parseInt(b[0],10),parseInt(b[1],10))}function G(b){return new P(b,1)}s.toString=function(){return this.ea+(1===this.R?"":"/"+this.R)};s.ma=function(){return 1===this.R};s.F=function(){return this.ea/this.R};s.I=function(){if(0===this.ea)return 0;var b=this.ea/this.R;return 0>b?Math.ceil(b):Math.floor(b)};
function ec(b,c,d){return 0===d?c:ec(b,d,c%d)}s.Uc=function(b){(!this.ma()||!b.ma())&&g(new t("modulo: expects integer, got ("+this+" "+b+")"));var b=b.I(),c=this.ea%b;0>c&&(c+=b);return G(c)};function fc(b,c){return new P(b.ea*c.ea,b.R*c.R)}s.Sb=function(b){return new P(this.ea*b.R+b.ea*this.R,this.R*b.R)};s.sb=function(){return new P(-this.ea,this.R)};s.qa=function(){return this.ma()?this.I():this.F()};s.Ba=function(){return this.ma()?this.I():this.F()};
s.Ba=function(){return 37*this.ea+this.R+""};s.sa=function(b){return b instanceof P&&this.ea===b.ea&&this.R===b.R};function lb(b,c){try{return b instanceof P||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected a Rational, got "+b))}}s.round=function(){if(1===this.R)return this;if(2===this.R){var b=this.ea/this.R,b=0>b?Math.ceil(b):Math.floor(b);return G(b+(1===b%2?1:0))}return G(Math.round(this.ea/this.R))};
s.nc=function(){return 1===this.R?this:G(Math.round(this.ea/this.R))};s.stringify=function(b){var c=this.ea.toString(b.I());if(this.ma())return F(c);b=this.R.toString(b.I());return F(c+"/"+b)};s.sqrt=function(){var b=Math.sqrt(this.ea/this.R);return Math.floor(b)===b?G(b):Ua(b)};s.multiply=function(b){if(b instanceof I)return bc(b);if(b instanceof H)return Ua(b.k*this.F());if(b instanceof P)return fc(this,b);g(new t("*: expects a number, got "+b.type()+" "+b))};
s.add=function(b){if(b instanceof I)return new I(b.X+this.F(),b.P);if(b instanceof H)return b.Sb(this);if(b instanceof P)return this.Sb(b);g(new t("+: expects a number, got "+b.type()+" "+b))};var gc=G(0),ic=G(1),jc=G(10);function H(b){this.k=b}H.prototype=new O;s=H.prototype;s.className="Real";function Ua(b){return new H(b)}s.toString=function(){return this.k===-1/0?"-inf.0":this.k===1/0?"+inf.0":this.k!==this.k?"+nan.0":""+this.k};s.qa=function(){this.ma();return this.value()};s.type=function(){return Wb};
s.value=o("k");s.ma=function(){return Math.floor(this.k)===this.k};s.F=o("k");s.I=function(){return 0>this.k?Math.ceil(this.k):Math.floor(this.k)};s.sb=function(){return Ua(-this.k)};s.Ba=function(){return""+this.k};s.sa=function(b){return b instanceof I?b.Ga(this):this===b||b instanceof H&&this.k===b.k};s.round=function(){var b=Math.round(this.k);return 0.5===Math.abs(this.k-b)&&1==b%2?b<this.k?G(b+1):G(b-1):G(b)};s.nc=function(){return G(Math.round(this.k))};s.Sb=function(b){return Ua(this.k+b.F())};
s.sqrt=function(){return Ua(Math.sqrt(this.k))};s.multiply=function(b){if(b instanceof I)return bc(b);if(b instanceof O)return Ua(this.k*b.F());g(new t("*: expects a number, got "+b.type()+" "+b))};s.add=function(b){if(b instanceof I)return new I(b.X+this.F(),b.P);if(b instanceof P||b instanceof H)return this.Sb(b);g(new t("+: expects a number, got "+b.type()+" "+b))};function kc(b,c){this.Gb=b;this.wb=c}kc.prototype=new Eb;s=kc.prototype;s.className="Tagged";
s.g=function(b,c){var d=Fa.value();d instanceof Ga||g(new TypeError);return d.value(this.Gb).g(b,z(new A,this.wb,c))};s.ra=q(0);s.type=o("Gb");function lc(b){return b instanceof kc&&"mac"===b.Gb.toString()?b.wb:l}s.toString=function(){return mc(this)};
function mc(b){if(!nc.bound())return"#<tagged "+b.Gb+" "+b.wb+">";var c=nc.value();c instanceof Ga||g(new TypeError);c=c.value(b.Gb);if(c instanceof y)return"#<tagged "+b.Gb+" "+b.wb+">";b=new oc;c.g(b,w([rep]));var d;pc(b,function(b,c){b&&g(b);d=c},j)||g(new t("An asynchronous operation was attempted during a toString()."));return""+qc(d)}var nc=J("tagged-writers");function rc(b){this.Fc=b}rc.prototype=new Eb;s=rc.prototype;s.className="JsObject";s.type=function(){return sc};s.qa=o("Fc");
s.toString=function(){return""+this.Fc};function tc(b){var c=[];uc(c,b);return c}function uc(b,c){b.push(qc(c.a()));if(!(c.b()instanceof y)){var d=c.b();d instanceof A||g(new TypeError);uc(b,d)}}function qc(b){return b.qa()}
function vc(b){if(b===l)return B;if(b instanceof x)return b;var c=Object.prototype.toString.call(b);if("[object Number]"===c)return b*=1,b===Math.floor(b)?G(b):Ua(b);if("[object String]"===c)b=F(""+b);else if("[object Array]"===c||"[object Arguments]"===c){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=vc(b[d]);b=w(c)}else b="[object Boolean]"===c?b?$a:B:new rc(b);return b}s.close=function(){g(new t("close: unexpected object: "+this))};var sc=J("java-object");
function Ga(){this.ba=B;this.ic=Da();this.qb=this.ec=l;this.jc=new wc;this.Tc=0}Ga.prototype=new Eb;s=Ga.prototype;s.className="Hash";s.sc=function(b){if(this.ba===b)this.ba=B,this.jc=new wc};s.Zb=function(b){this.ba=b;this.jc=new xc(this)};s.$b=o("ba");s.g=function(b,c){C(b,this.value(c.a()).Xc(c.b().a()))};s.toString=function(){return"#hash"+yc(this)};function yc(b){for(var c=[],d=b.ec;d!==l;d=d.next){var f=d.key,f=z(new A,f,z(new A,b.value(f),B));c.push(f)}return pb(c,Va)}s.ka=function(){return this.size()};
s.pc=function(b,c){if(b instanceof y){var d=this.value(c),f=this.ic.get(c.Ba());if(f)for(var h=0,k=f.length;h<k;h++){var p=f[h];if(c.sa(p.key)){f.splice(h,1);if(p.Ub)p.Ub.next=p.next;if(p.next)p.next.Ub=p.Ub;if(this.ec===p)this.ec=p.next;if(this.qb===p)this.qb=p.Ub;this.ka--;break}}this.jc.Lc(d,c)}else{d=c.Ba();d=this.ic.get(d)||this.ic.put(d,[]);f=l;h=0;for(k=d.length;h<k;h++)if(p=d[h],c.sa(p.key)){f=p;break}f===l?(f=this.qb,this.qb={key:c,value:b,Ub:f,next:l},f===l?this.ec=this.qb:f.next=this.qb,
d.push(this.qb),this.Tc++):f.value=b;this.jc.name(b,c)}return b};s.value=function(b){var c=this.ic.get(b.Ba());if(!c)return B;for(var d=0,f=c.length;d<f;d++){var h=c[d];if(b.sa(h.key))return h.value}return B};s.ra=q(0);s.type=function(){return zc};s.size=o("Tc");function Ac(){}Ac.prototype.name=i;Ac.prototype.Lc=i;function xc(b){this.ad=b}xc.prototype=new Ac;xc.prototype.name=function(b,c){b.Zb(z(new A,c,this.ad))};xc.prototype.Lc=function(b,c){b.sc(z(new A,c,this.ad))};function wc(){}
wc.prototype=new Ac;wc.prototype.name=n();wc.prototype.Lc=n();var zc=J("table");function oc(){this.Kc=Bc++;this.ca=Array(100);this.N=-1;this.pa=[];this.ja=Array(100);this.G=Array(100);this.i=-1;this.Ua=this.Mb=this.s=l;this.pb=Cc;this.cc=m;this.Fa=0;this.Ya=l;this.Oc=0;this.ub=l}oc.prototype=new x;s=oc.prototype;s.className="VM";
function pc(b,c,d){var f=b.Fa;b.Fa=b.i;var h=Dc(b,function(){b.Fa=f;if(b.Ua===l)b.pb.end(b),c(l,Q(b));else{var d=b.Ua;b.Ua=l;var h=d.qd,r="\nAt instruction "+d.ub;if(h!==l)for(var D=0,L=h.length;D<L;D++)r+="\n"+h[D].Sa();c(new t("Unhandled exception on thread#"+b.Kc+": "+d.wa.message+r,d.wa))}},d);if(d&&!h)b.Fa=f;return h}
function Dc(b,c,d){function f(){for(;h.Fa<=h.i;)try{if(h.G[h.i]instanceof y)h.i--;else{h.s=h.ja[h.i];h.Mb=h.pa[h.i];var b=h.G[h.i].a();b instanceof M||g(new TypeError);h.ub=b;var r=h.G[h.i].b();r instanceof A||g(new TypeError);h.G[h.i]=r;if(h.ub.Da){var D=j,D=h.ub.La(h,function(b){b?Ec(h,b):h.pb.ib(h);D||f()},d);if(!D){k=m;return}}else h.ub.c(h),h.pb.ib(h)}}catch(L){Ec(h,L)}c()}b.pb.ib(b);var h=b,k=j;f();return k}
function Ec(b,c){for(var d=[],f=[],h=[];b.Fa<=b.i;){var k=Fc(b).a();if(k.fc&&k.wc(c))break;k=Fc(b).a();k.Nb&&(f.push(Fc(b)),h.push(b.ja[b.i]));if(k instanceof M)k=Fc(b).a().d,k!==l&&d.push(k);b.i--}b.Ua=new Ba(c,b.ub,d);for(d=f.length-1;0<=d;d--)R(b,h[d],f[d])}s.error=o("Ua");
s.show=function(){za("Thread Dump for thread#"+threadId);za(""+(this.N+1)+" args");for(var b=5<this.N?this.N-5:0;b<this.N+1;b++)za(""+b+". "+this.ca[b]);za();b=this.i+1;if(this.G[this.i]instanceof y)b=this.i;za(""+b+" instruction frames");for(var b=20<this.i?this.i-20:0,c=this.i;b<=c;c--)if(!(this.G[c]instanceof y)){var d=this.G[c],f=this.ja[c],h=this.pa[c];for(ya("\nInstruction Frame "+c+":");!(d instanceof y);){var k=d.a();k instanceof M||g(new TypeError);d=d.b();newInstructions instanceof A||g(new TypeError);
ya(k.eb(f));ya(" ")}ya("[");k=0;for(d=h.length;k<d;k++)ya(""+h[k]+" ");ya("]");la.$a("\n")}};function E(b,c){b.Fa<=b.i&&Fc(b)instanceof y||(b.i++,0<=b.i&&b.i<b.G.length||(Gc(b,2*b.G.length),Hc(b,2*b.ja.length),Ic(b,2*b.pa.length)));b.G[b.i]=z(new A,c,B)}function R(b,c,d){b.Fa<=b.i&&Fc(b)instanceof y||(b.i++,0<=b.i&&b.i<b.G.length||(Gc(b,2*b.G.length),Hc(b,2*b.ja.length),Ic(b,2*b.pa.length)));b.G[b.i]=d;b.ja[b.i]=c}
function S(b,c,d,f){b.Fa<=b.i&&Fc(b)instanceof y||(b.i++,0<=b.i&&b.i<b.G.length||(Gc(b,2*b.G.length),Hc(b,2*b.ja.length),Ic(b,2*b.pa.length)));b.G[b.i]=d;b.ja[b.i]=c;b.pa[b.i]=f}function Jc(b,c){b.Fa<=b.i&&Fc(b)instanceof y?b.G[b.i]=c:(b.i++,0<=b.i&&b.i<b.G.length||(Gc(b,2*b.G.length),Hc(b,2*b.ja.length),Ic(b,2*b.pa.length)),b.G[b.i]=c,b.ja[b.i]=b.s,b.pa[b.i]=b.Mb)}function Fc(b){return b.G[b.i]}
function C(b,c){b.N++;if(!(0<=b.N&&b.N<b.ca.length)){var d=Array(~~(2*b.ca.length));Kc(b.ca,d);b.ca=d}b.ca[b.N]=c}function Lc(b){return b.ca[b.N]}function Q(b){return b.ca[b.N--]}function Mc(b,c){for(var d=Va,f=0;f<c;f++)d=z(new A,b.ca[b.N-f],d);b.N-=c;return d}function Nc(b,c){b.pb=c;c.Cb(b)}s.type=function(){return Oc};s.copy=function(){var b=new oc;this.copyTo(b);return b};
s.copyTo=function(b){b.N=this.N;b.i=this.i;b.G.length<this.G.length?(b.G=this.G.slice(),b.ja=this.ja.slice(),b.pa=this.pa.slice()):(Kc(this.G,b.G),Kc(this.ja,b.ja),Kc(this.pa,b.pa));b.ca.length!==this.ca.length?b.ca=this.ca.slice():Kc(this.ca,b.ca);b.s=this.s;b.Ua=this.Ua;b.pb=this.pb;b.cc=this.cc;b.Fa=this.Fa};s.toString=function(){return"[thread#"+this.Kc+": instruction stack "+this.i+"; arg stack "+this.N+"]"};function Hc(b,c){var d=Array(~~c);Kc(b.ja,d);b.ja=d}
function Gc(b,c){var d=Array(~~c);Kc(b.G,d);b.G=d}function Ic(b,c){var d=Array(~~c);Kc(b.pa,d);b.pa=d}function Kc(b,c){for(var d=0,f=b.length;d<f;d++)c[d]=b[d]}function Pc(b){if(!(b.Fa<=b.i))return l;return b.G[b.i]instanceof y?(b.i--,Pc(b)):b.G[b.i].a()}var Oc=J("thread"),Bc=0;function Qc(){this.Na=[];this.Sc=B}Qc.prototype=new x;s=Qc.prototype;s.className="ListBuilder";s.append=function(b){this.Na.push(b)};s.Rc=ca("Sc");s.list=function(){return pb(this.Na,this.Sc)};s.type=function(){return J("list-builder")};
s.toString=function(){return"ListBuilder:"+this.list().toString()};function Rc(){this.d=l}Rc.prototype=new M;Rc.prototype.className="Append";Rc.prototype.c=function(b){var c=Q(b),b=Lc(b);b instanceof Qc||g(new TypeError);b.append(c)};Rc.prototype.toString=q("(append)");function Sc(){this.d=l}Sc.prototype=new M;Sc.prototype.className="AppendAll";Sc.prototype.c=function(b){var c=Q(b),b=Lc(b);b instanceof Qc||g(new TypeError);c instanceof A||g(new TypeError);c.copyTo(b.Na)};Sc.prototype.toString=q("(append-all)");
function Tc(){this.d=l}Tc.prototype=new M;Tc.prototype.className="AppendDot";Tc.prototype.c=function(b){var c=Q(b),b=Lc(b);b instanceof Qc||g(new TypeError);b.Rc(c)};Tc.prototype.toString=q("(append-dot)");function Uc(b,c){this.d=l;this.Wc=b;this.Ib=c}Uc.prototype=new M;s=Uc.prototype;s.fc=j;s.className="Catch";s.wc=q(j);s.c=function(b){var c=b.error();if(c!==l)b.Ua=l,b.N=this.Ib,this.Wc.g(b,w([c]))};s.toString=function(){return"(catch "+this.Wc+")"};function Vc(b){this.d=l;this.Qc=b}
Vc.prototype=new M;Vc.prototype.className="Close_Instruction";Vc.prototype.c=function(b){C(b,new Wc(this.Qc,b.s))};Vc.prototype.toString=function(){return"(close "+this.Qc+")"};function Xc(b){this.d=l;this.Mc=b}Xc.prototype=new M;Xc.prototype.Nb=j;Xc.prototype.className="FinallyInvoke";Xc.prototype.c=function(b){this.Mc.g(b,B)};Xc.prototype.toString=function(){return"(finally:"+this.Mc+")"};function Yc(){this.d=l}Yc.prototype=new M;Yc.prototype.className="FinishList";
Yc.prototype.c=function(b){var c=Q(b);c instanceof Qc||g(new TypeError);C(b,c.list())};Yc.prototype.toString=q("(finish-list)");function Za(b){this.d=l;this.Za=b}Za.prototype=new M;Za.prototype.className="FreeSym";Za.prototype.c=function(b){C(b,this.Za.value())};Za.prototype.toString=function(){return"(free-sym "+this.Za+")"};Za.prototype.eb=function(){return"(free-sym "+this.Za+" -> "+(sym.bound()?""+sym.value():"#unbound#")+")"};function Zc(b){this.d=l;this.Za=b}Zc.prototype=new M;
Zc.prototype.className="LexSym";Zc.prototype.c=function(b){C(b,this.Za.v(b.s))};Zc.prototype.toString=function(){return"(lex-sym "+this.Za+")"};Zc.prototype.eb=function(b){return"(lex-sym "+this.Za+" -> "+this.Za.v(b)+")"};function $c(b){this.d=l;this.$c=b}$c.prototype=new M;$c.prototype.className="Listify";$c.prototype.c=function(b){C(b,Mc(b,this.$c))};$c.prototype.toString=function(){return"(listify "+this.$c+")"};function Ma(b){this.d=l;this.Nc=b}Ma.prototype=new M;Ma.prototype.className="Literal";
Ma.prototype.c=function(b){C(b,this.Nc)};Ma.prototype.toString=function(){return"(literal "+this.Nc+")"};function ad(){this.d=l}ad.prototype=new M;ad.prototype.className="NewList";ad.prototype.c=function(b){C(b,new Qc)};ad.prototype.toString=q("(new-list)");function bd(b){this.d=l;this.ba=b}bd.prototype=new M;bd.prototype.className="PopArg";bd.prototype.c=function(b){Q(b)};bd.prototype.toString=function(){return"(pop-arg:"+this.ba+")"};function cd(b,c){this.d=l;this.sd=b;this.k=c}cd.prototype=new M;
cd.prototype.Nb=j;cd.prototype.className="SetThreadLocal";cd.prototype.c=function(){this.sd.value=this.k};function dd(b,c){this.d=l;this.Za=b;this.jb=c}dd.prototype=new M;dd.prototype.className="StackSym";dd.prototype.c=function(b){var c=this.jb;b.N++;if(!(0<=b.N&&b.N<b.ca.length)){var d=Array(~~(2*b.ca.length));Kc(b.ca,d);b.ca=d}b.ca[b.N]=b.Mb[c]};dd.prototype.toString=function(){return"(stack-bound symbol:"+this.Za+")"};function ed(b){this.d=l;this.Pc=b}ed.prototype=new M;
ed.prototype.className="TableMapper";ed.prototype.c=function(b){var c=Q(b);c instanceof A||g(new TypeError);if(!(c instanceof y)){C(b,c.b());E(b,this);c=c.a();c instanceof A||g(new TypeError);var d=new bd("map-table-iterator");d.m(this);E(b,d);this.Pc.g(b,c)}};ed.prototype.toString=function(){return"(table-mapper "+this.Pc+")"};function fd(b){this.d=l;this.name=b}fd.prototype=new M;fd.prototype.className="Assign_Lex";function gd(b,c){fd.call(this,b);this.value=c}gd.prototype=new fd;
gd.prototype.className="Assign_Lex_Free";gd.prototype.c=function(b){var c=this.value.value();hd(this.name,b.s,c);C(b,c)};gd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function id(b,c){gd.call(this,b,c)}id.prototype=new gd;id.prototype.className="Assign_Lex_Free.Intermediate";id.prototype.c=function(b){hd(this.name,b.s,this.value.value())};function jd(b,c){fd.call(this,b);this.value=c}jd.prototype=new fd;jd.prototype.className="Assign_Lex_Lex";
jd.prototype.c=function(b){var c=this.value.v(b.s);hd(this.name,b.s,c);C(b,c)};jd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};jd.prototype.eb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.v(b)+this.value+"--\>"+this.value.v(b)+")"};function kd(b,c){jd.call(this,b,c)}kd.prototype=new jd;kd.prototype.className="Assign_Lex_Lex.Intermediate";kd.prototype.c=function(b){hd(this.name,b.s,this.value.v(b.s))};function ld(b,c){fd.call(this,b);this.cb=c}
ld.prototype=new fd;ld.prototype.className="Assign_Lex_Literal";ld.prototype.c=function(b){hd(this.name,b.s,this.cb);C(b,this.cb)};ld.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.cb+")"};function md(b,c){ld.call(this,b,c)}md.prototype=new ld;md.prototype.className="Assign_Lex_Literal.Intermediate";md.prototype.c=function(b){hd(this.name,b.s,this.cb)};function nd(b){fd.call(this,b)}nd.prototype=new fd;nd.prototype.className="Assign_Lex_Other";
nd.prototype.c=function(b){hd(this.name,b.s,Lc(b))};nd.prototype.toString=function(){return"(assign-lex "+this.name+")"};nd.prototype.eb=function(b){return"(assign-lex "+this.name+" -> "+this.name.v(b)+")"};function od(b){fd.call(this,b)}od.prototype=new nd;od.prototype.className="Assign_Lex_Other.Intermediate";od.prototype.c=function(b){hd(this.name,b.s,Q(b))};function pd(b,c){fd.call(this,b);this.value=c}pd.prototype=new fd;pd.prototype.className="Assign_Lex_Stack";
pd.prototype.c=function(b){var c=this.value.get(b);hd(this.name,b.s,c);C(b,c)};pd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};pd.prototype.eb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.v(b)+" <-- "+this.value+")"};function qd(b,c){pd.call(this,b,c)}qd.prototype=new pd;qd.prototype.className="Assign_Lex_Stack.Intermediate";qd.prototype.c=function(b){hd(this.name,b.s,this.value.get(b))};function rd(b){this.d=l;this.name=b}rd.prototype=new M;
rd.prototype.className="Assign_Free";function sd(b,c){rd.call(this,b);this.value=c}sd.prototype=new rd;sd.prototype.className="Assign_Free_Free";sd.prototype.c=function(b){var c=this.value.value();this.name.ga(c);C(b,c)};sd.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function td(b,c){sd.call(this,b,c)}td.prototype=new sd;td.prototype.className="Assign_Free_Free.Intermediate";td.prototype.c=function(){this.name.ga(this.value.value())};
function ud(b,c){rd.call(this,b);this.value=c}ud.prototype=new rd;ud.prototype.className="Assign_Free_Lex";ud.prototype.c=function(b){var c=this.value.v(b.s);this.name.ga(c);C(b,c)};ud.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function vd(b,c){ud.call(this,b,c)}vd.prototype=new ud;vd.prototype.className="Assign_Free_Lex.Intermediate";vd.prototype.c=function(b){this.name.ga(this.value.v(b.s))};function wd(b,c){rd.call(this,b);this.cb=c}wd.prototype=new rd;
wd.prototype.className="Assign_Free_Literal";wd.prototype.c=function(b){this.name.ga(this.cb);C(b,this.cb)};wd.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.cb+")"};function xd(b,c){wd.call(this,b,c)}xd.prototype=new wd;xd.prototype.className="Assign_Free_Literal.Intermediate";xd.prototype.c=function(){this.name.ga(this.cb)};function yd(b){rd.call(this,b)}yd.prototype=new rd;yd.prototype.className="Assign_Free_Other";yd.prototype.c=function(b){this.name.ga(Lc(b))};
yd.prototype.toString=function(){return"(assign-free-other "+this.name+")"};yd.prototype.eb=function(){return"(assign-free-other "+this.name+" -> "+(name.bound()?""+name.value():"#unbound#")+")"};function zd(b){rd.call(this,b)}zd.prototype=new yd;zd.prototype.className="Assign_Free_Other.Intermediate";zd.prototype.c=function(b){this.name.ga(Q(b))};function Ad(b,c){rd.call(this,b);this.value=c}Ad.prototype=new rd;Ad.prototype.className="Assign_Free_Stack";
Ad.prototype.c=function(b){var c=this.value.get(b);this.name.ga(c);C(b,c)};Ad.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function Bd(b,c){Ad.call(this,b,c)}Bd.prototype=new Ad;Bd.prototype.className="Assign_Free_Stack.Intermediate";Bd.prototype.c=function(b){this.name.ga(this.value.get(b))};function Cd(b){this.d=l;this.name=b}Cd.prototype=new M;Cd.prototype.className="Assign_Stack";function Dd(b,c){Cd.call(this,b);this.value=c}Dd.prototype=new Cd;
Dd.prototype.className="Assign_Stack_Free";Dd.prototype.c=function(b){var c=this.value.value();this.name.set(b,c);C(b,c)};Dd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Ed(b,c){Dd.call(this,b,c)}Ed.prototype=new Dd;Ed.prototype.className="Assign_Stack_Free.Intermediate";Ed.prototype.c=function(b){this.name.set(b,this.value.value())};function Fd(b,c){Cd.call(this,b);this.value=c}Fd.prototype=new Cd;Fd.prototype.className="Assign_Stack_Lex";
Fd.prototype.c=function(b){var c=this.value.v(b.s);this.name.set(b,c);C(b,c)};Fd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Gd(b,c){Fd.call(this,b,c)}Gd.prototype=new Fd;Gd.prototype.className="Assign_Stack_Lex.Intermediate";Gd.prototype.c=function(b){this.name.set(b,this.value.v(b.s))};function Hd(b,c){Cd.call(this,b);this.value=c}Hd.prototype=new Cd;Hd.prototype.className="Assign_Stack_Literal";
Hd.prototype.c=function(b){this.name.set(b,this.value);C(b,this.value)};Hd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Id(b,c){Hd.call(this,b,c)}Id.prototype=new Hd;Id.prototype.className="Assign_Stack_Literal.Intermediate";Id.prototype.c=function(b){this.name.set(b,this.value)};function Jd(b){Cd.call(this,b)}Jd.prototype=new Cd;Jd.prototype.className="Assign_Stack_Other";Jd.prototype.c=function(b){this.name.set(b,Lc(b))};
Jd.prototype.toString=function(){return"(assign-stack "+this.name+")"};function Kd(b){Cd.call(this,b)}Kd.prototype=new Jd;Kd.prototype.className="Assign_Stack_Other.Intermediate";Kd.prototype.c=function(b){this.name.set(b,Q(b))};function Ld(b,c){Cd.call(this,b);this.value=c}Ld.prototype=new Cd;Ld.prototype.className="Assign_Stack_Stack";Ld.prototype.c=function(b){var c=this.value.get(b);this.name.set(b,c);C(b,c)};Ld.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};
function Md(b,c){Ld.call(this,b,c)}Md.prototype=new Ld;Md.prototype.className="Assign_Stack_Stack.Intermediate";Md.prototype.c=function(b){this.name.set(b,this.value.get(b))};function Nd(b,c){this.d=l;this.H=b;this.Ta=Od(b);this.B=c;this.na=Od(c)}Nd.prototype=new M;Nd.prototype.className="Cond";function Od(b){var c=[];b.h(c);return w(c)}Nd.prototype.c=function(b){Jc(b,Q(b)instanceof y?this.na:this.Ta)};Nd.prototype.l=function(b){M.prototype.l.call(this,b);this.Ta.l(b);this.na.l(b)};
Nd.prototype.toString=function(){return"(cond then:"+this.H+", else:"+this.B+")"};function Pd(b,c,d){this.d=l;this.da=b;this.H=c;this.B=d}var Qd={};u["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=Qd;Pd.prototype=new M;Pd.prototype.className="If_bound_bound_literal";Pd.prototype.c=function(b){this.da.v(b.s)instanceof y?C(b,this.B):C(b,this.H.v(b.s))};
Qd.h=function(b,c,d,f){c instanceof T||g(new TypeError);d instanceof T||g(new TypeError);f instanceof Rd||g(new TypeError);Sd(c,d)?f.n instanceof y?c.h(b):b.push(new Td(c,f.n)):b.push(new Pd(c,d,f.n))};Pd.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};function Td(b,c){this.d=l;this.Hb=b;this.B=c}Td.prototype=new M;Td.prototype.className="If_bound_bound_literal.Or";Td.prototype.c=function(b){var c=this.Hb.v(b.s);c instanceof y?C(b,this.B):C(b,c)};
Td.prototype.toString=function(){return"(if[bbl$or] "+a+" "+a+" "+elseExpr+")"};function Ud(b,c,d){this.d=l;this.da=b;this.H=c;this.na=Od(d);this.B=d}var Vd={};u["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=Vd;Ud.prototype=new M;Ud.prototype.className="If_bound_bound_other";Ud.prototype.c=function(b){this.da.v(b.s)instanceof y?Jc(b,this.na):C(b,this.H.v(b.s))};
Vd.h=function(b,c,d,f){c instanceof T||g(new TypeError);d instanceof T||g(new TypeError);Sd(c,d)?b.push(new Wd(c,f)):b.push(new Ud(c,d,f))};Ud.prototype.l=function(b){M.prototype.l.call(this,b);this.na.l(b)};Ud.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};function Wd(b,c){this.d=l;this.Hb=b;this.na=Od(c);this.B=c}Wd.prototype=new M;Wd.prototype.className="If_bound_bound_other.Or";Wd.prototype.c=function(b){var c=this.Hb.v(b.s);c instanceof y?Jc(b,this.na):C(b,c)};
Wd.prototype.l=function(b){M.prototype.l.call(this,b);this.na.l(b)};Wd.prototype.toString=function(){return"(if "+a+" "+a+" "+elseExpr+")"};function Xd(b,c,d){this.d=l;this.da=b;this.H=c;this.B=d}var Yd={};u["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=Yd;Xd.prototype=new M;Xd.prototype.className="If_bound_literal_literal";Xd.prototype.c=function(b){this.da.v(b.s)instanceof y?C(b,this.B):C(b,this.H)};
Xd.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};Yd.h=function(b,c,d,f){f instanceof Rd||g(new TypeError);c instanceof T||g(new TypeError);b.push(new Xd(c,d,f.n))};function Zd(b,c,d){this.d=l;this.da=b;this.H=c;this.Ta=Od(c);this.B=d}var $d={};u["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=$d;Zd.prototype=new M;Zd.prototype.className="If_bound_other_literal";Zd.prototype.c=function(b){this.da.v(b.s)instanceof y?C(b,this.B):Jc(b,this.Ta)};
Zd.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};Zd.prototype.l=function(b){M.prototype.l.call(this,b);this.Ta.l(b)};$d.h=function(b,c,d,f){c instanceof T||g(new TypeError);f instanceof Rd||g(new TypeError);b.push(new Zd(c,d,f.n))};function ae(b,c,d){this.d=l;this.da=b;this.H=c;this.Ta=Od(c);this.B=d;this.na=Od(d)}var be={};u["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=be;ae.prototype=new M;ae.prototype.className="If_bound_other_other";
ae.prototype.c=function(b){this.da.v(b.s)instanceof y?Jc(b,this.na):Jc(b,this.Ta)};ae.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};ae.prototype.l=function(b){M.prototype.l.call(this,b);this.Ta.l(b)};be.h=function(b,c,d,f){c instanceof T||g(new TypeError);b.push(new ae(c,d,f))};function ce(b,c){this.d=l;this.na=Od(c);this.H=b;this.B=c}var de={};u["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=de;ce.prototype=new M;ce.prototype.className="If_other_bound_other";
ce.prototype.c=function(b){Q(b)instanceof y?Jc(b,this.na):C(b,this.H.v(b.s))};ce.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};ce.prototype.l=function(b){M.prototype.l.call(this,b);this.na.l(b)};de.h=function(b,c,d,f){c.h(b);d instanceof T||g(new TypeError);b.push(new ce(d,f))};function ee(b,c){this.d=l;this.Ta=Od(b);this.H=b;this.B=c}var fe={};u["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=fe;ee.prototype=new M;ee.prototype.className="If_other_other_literal";
ee.prototype.c=function(b){Q(b)instanceof y?C(b,this.B):Jc(b,this.Ta)};ee.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};ee.prototype.l=function(b){M.prototype.l.call(this,b);this.Ta.l(b)};fe.h=function(b,c,d,f){f instanceof Rd||g(new TypeError);c.h(b);b.push(new ee(d,f.n))};function ge(b,c){this.d=l;this.H=b;this.B=c}var he={};u["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=he;ge.prototype=new M;ge.prototype.className="If_other_stack_literal";
ge.prototype.c=function(b){Q(b)instanceof y?C(b,this.B):C(b,this.H.get(b))};ge.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};he.h=function(b,c,d,f){f instanceof Rd||g(new TypeError);c.h(b);d instanceof U||g(new TypeError);b.push(new ge(d,f.n))};function ie(b,c){this.d=l;this.H=b;this.na=Od(c);this.B=c}var je={};u["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=je;ie.prototype=new M;ie.prototype.className="If_other_stack_other";
ie.prototype.c=function(b){Q(b)instanceof y?Jc(b,this.na):C(b,this.H.get(b))};ie.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};ie.prototype.l=function(b){M.prototype.l.call(this,b);this.na.l(b)};je.h=function(b,c,d,f){c.h(b);d instanceof U||g(new TypeError);b.push(new ie(d,f))};function ke(b,c,d){this.da=b;this.H=c;this.B=d}var le={};u["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=le;ke.prototype=new M;ke.prototype.className="If_stack_literal_free";
ke.prototype.c=function(b){this.da.get(b)instanceof y?C(b,this.B.value()):C(b,this.H)};ke.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};le.h=function(b,c,d,f){c instanceof U||g(new TypeError);f instanceof Rd||g(new TypeError);f=f.n;f instanceof K||g(new TypeError);b.push(new ke(c,d,f))};function me(b,c,d){this.d=l;this.da=b;this.H=c;this.B=d}var ne={};u["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=ne;me.prototype=new M;me.prototype.className="If_stack_stack_literal";
me.prototype.c=function(b){this.da.get(b)instanceof y?C(b,this.B):C(b,this.H.get(b))};me.prototype.toString=function(){return"(if "+this.da+" "+this.H+" "+this.B+")"};ne.h=function(b,c,d,f){c instanceof U||g(new TypeError);d instanceof U||g(new TypeError);f instanceof Rd||g(new TypeError);oe(c,d)?f.n instanceof y?c.h(b):b.push(new pe(c,f.n)):b.push(new me(c,d,f.n))};function pe(b,c){this.d=l;this.Hb=b;this.B=c}pe.prototype=new M;pe.prototype.className="If_stack_stack_literal.Or";
pe.prototype.c=function(b){var c=this.Hb.get(b);c instanceof y?C(b,this.B):C(b,c)};pe.prototype.toString=function(){return"(if[ssl$or] "+a+" "+a+" "+elseExpr+")"};function qe(b){this.d=l;this.r=b}qe.prototype=new M;s=qe.prototype;s.oa=j;s.className="Invoke_0.Lex";s.c=function(b){this.r.v(b.s).g(b,B)};s.toString=function(){return"(invoke "+this.r+")"};s.ta=function(b){return this.r.v(b.s)};function re(b){this.d=l;this.r=b}re.prototype=new M;s=re.prototype;s.oa=j;s.className="Invoke_0.Free";
s.c=function(b){this.r.value().g(b,B)};s.toString=function(){return"(invoke "+this.r+")"};s.ta=function(){return this.r.value()};function se(){this.d=l}se.prototype=new M;s=se.prototype;s.oa=j;s.className="Invoke_0.Other";s.c=function(b){Q(b).g(b,B)};s.toString=q("(invoke <0>)");s.ta=function(b){return Lc(b)};function te(b){this.d=l;this.r=b}te.prototype=new M;s=te.prototype;s.oa=j;s.className="Invoke_1.Lex";s.c=function(b){this.r.v(b.s).g(b,z(new A,Q(b),B))};
s.toString=function(){return"(invoke "+this.r+" <1>)"};s.ta=function(b){return this.r.v(b.s)};function we(b){this.d=l;this.r=b}we.prototype=new M;s=we.prototype;s.oa=j;s.className="Invoke_1.Free";s.c=function(b){this.r.value().g(b,z(new A,Q(b),B))};s.toString=function(){return"(invoke "+this.r+" <1>)"};s.ta=function(){return this.r.value()};function xe(){this.d=l}xe.prototype=new M;s=xe.prototype;s.oa=j;s.className="Invoke_1.Other";s.c=function(b){Q(b).g(b,z(new A,Q(b),B))};s.toString=q("(invoke <1>)");
s.ta=function(b){return Lc(b)};function ye(b){this.d=l;this.r=b}ye.prototype=new M;s=ye.prototype;s.oa=j;s.className="Invoke_2.Lex";s.c=function(b){var c=Q(b),d=Q(b);this.r.v(b.s).g(b,z(new A,d,z(new A,c,B)))};s.toString=function(){return"(invoke "+this.r+" <2>)"};s.eb=function(b){return"(invoke "+this.r+" -> "+this.r.v(b)+" <2>)"};s.ta=function(b){return this.r.v(b.s)};function ze(b){this.d=l;this.r=b}ze.prototype=new M;s=ze.prototype;s.oa=j;s.className="Invoke_2.Free";
s.c=function(b){var c=Q(b),d=Q(b);this.r.value().g(b,z(new A,d,z(new A,c,B)))};s.toString=function(){return"(invoke_2:free "+this.r+" <2>)"};s.eb=function(){return"(invoke_2:free "+this.r+" -> "+this.r.value()+" <2>)"};s.ta=function(){return this.r.value()};function Ae(){this.d=l}Ae.prototype=new M;s=Ae.prototype;s.oa=j;s.className="Invoke_2.Other";s.c=function(b){var c=Q(b),d=Q(b),f=Q(b);try{c.g(b,z(new A,f,z(new A,d,B)))}catch(h){h instanceof Error||g(h),Aa(h)}};s.toString=q("(invoke <2>)");
s.ta=function(b){return Lc(b)};function Be(b){this.d=l;this.r=b}Be.prototype=new M;s=Be.prototype;s.oa=j;s.className="Invoke_3.Lex";s.c=function(b){var c=Q(b),d=Q(b),f=Q(b);this.r.v(b.s).g(b,z(new A,f,z(new A,d,z(new A,c,B))))};s.toString=function(){return"(invoke "+this.r+" <3>)"};s.ta=function(b){return this.r.v(b.s)};function Ce(b){this.d=l;this.r=b}Ce.prototype=new M;s=Ce.prototype;s.oa=j;s.className="Invoke_3.Free";
s.c=function(b){var c=Q(b),d=Q(b),f=Q(b);this.r.value().g(b,z(new A,f,z(new A,d,z(new A,c,B))))};s.toString=function(){return"(invoke_3:free "+this.r+" <3>)"};s.ta=function(){return this.r.value()};function De(){this.d=l}De.prototype=new M;s=De.prototype;s.oa=j;s.className="Invoke_3.Other";s.c=function(b){var c=Q(b),d=Q(b),f=Q(b),h=Q(b);c.g(b,z(new A,h,z(new A,f,z(new A,d,B))))};s.toString=q("(invoke <3>)");s.ta=function(b){return Lc(b)};function Ee(b,c){this.d=l;this.r=b;this.fb=c}Ee.prototype=new M;
s=Ee.prototype;s.oa=j;s.className="Invoke_N.Lex";s.c=function(b){this.r.v(b.s).g(b,Mc(b,this.fb))};s.toString=function(){return"(invoke "+this.r+" <"+this.fb+">)"};s.ta=function(b){return this.r.v(b.s)};function Fe(b,c){this.d=l;this.r=b;this.fb=c}Fe.prototype=new M;s=Fe.prototype;s.oa=j;s.className="Invoke_N.Free";s.c=function(b){this.r.value().g(b,Mc(b,this.fb))};s.toString=function(){return"(invoke "+this.r+" <"+this.fb+">)"};s.ta=function(){return this.r.value()};
function La(b){this.d=l;this.fb=b}La.prototype=new M;s=La.prototype;s.oa=j;s.className="Invoke_N.Other";s.c=function(b){Q(b).g(b,Mc(b,this.fb))};s.toString=function(){return"(invoke <"+this.fb+">)"};s.ta=function(b){return Lc(b)};function U(b,c){this.name=b;this.jb=c}U.prototype=new x;s=U.prototype;s.className="StackSymbol";s.get=function(b){return b.Mb[this.jb]};s.set=function(b,c){b.pa[b.i][this.jb]=c};s.h=function(b){b.push(new dd(this.name,this.jb))};s.type=function(){return J("stack-symbol")};
s.toString=function(){return this.name.toString()};function oe(b,c){return b.name===c.name&&b.jb===c.jb}s.S=function(b,c,d){return oe(this,b)?c:d<this.jb?new U(this.name,this.index-1):this};function T(b,c,d){this.Pa=c;this.index=d;this.name=b}T.prototype=new x;s=T.prototype;s.className="BoundSymbol";function hd(b,c,d){c.Eb(b.Pa).set(b.index,d)}s.v=function(b){for(var c=this.Pa;0<c;)b=b.parent,c--;return b.hb[this.index]};s.h=function(b){b.push(new Zc(this))};s.type=function(){return Ge};
s.toString=function(){return this.name.toString()};function Sd(b,c){return b.Pa===c.Pa&&b.name===c.name&&b.index===c.index}s.M=function(b){return b<=this.Pa?new T(this.name,this.Pa+1,this.index):this};function He(b){return new T(b.name,b.Pa-1,b.index)}s.T=function(b,c,d,f,h){if(Sd(this,b))return c;return d?(0===this.Pa&&g(new t("can't unnest "+this+", looking for "+b+" to inline with "+c)),He(this)):f===this.Pa&&h<this.index?new T(this.name,this.Pa,this.index-1):this};s.l=function(b){b.vc(this)};
s.Y=function(b){b=b[this.name.name()];if(b===i)return He(this);if(b===this.index)return new U(this.name,b);g(new t("error: parameter index mismatch: expected "+b+", got "+this.index))};var Ge=J("bound-symbol");function Ie(b){this.C=this.name=l;this.Qa=b}Ie.prototype=new x;s=Ie.prototype;s.className="SingleAssignment";s.Ma=function(b){this.name===l?b instanceof K||b instanceof T?this.name=b:g(new t("assign: can't assign to "+b)):this.C===l?this.C=b:this.Qa.Ma(b)};
s.toString=function(){return""+this.name+" "+this.C};s.h=function(b){Je(this,b,m);this.Qa.h(b)};
function Je(b,c,d){if(b.name instanceof T){var f=b.name,b=b.C;b instanceof T?d?c.push(new jd(f,b)):c.push(new kd(f,b)):b instanceof U?d?c.push(new pd(f,b)):c.push(new qd(f,b)):b instanceof K?d?c.push(new gd(f,b)):c.push(new id(f,b)):b.Ha()?d?c.push(new ld(f,b)):c.push(new md(f,b)):b instanceof Ke?(b=b.Fb,d?c.push(new ld(f,b)):c.push(new md(f,b))):(b.h(c),d?c.push(new nd(f)):c.push(new od(f)))}else b.name instanceof U?(f=b.name,b=b.C,b instanceof T?d?c.push(new Fd(f,b)):c.push(new Gd(f,b)):b instanceof
U?d?c.push(new Ld(f,b)):c.push(new Md(f,b)):b instanceof K?d?c.push(new Dd(f,b)):c.push(new Ed(f,b)):b.Ha()?d?c.push(new Hd(f,b)):c.push(new Id(f,b)):b instanceof Ke?(b=b.Fb,d?c.push(new Hd(f,b)):c.push(new Id(f,b))):(b.h(c),d?c.push(new Jd(f)):c.push(new Kd(f)))):b.name instanceof K?(f=b.name,b=b.C,b instanceof T?d?c.push(new ud(f,b)):c.push(new vd(f,b)):b instanceof U?d?c.push(new Ad(f,b)):c.push(new Bd(f,b)):b instanceof K?d?c.push(new sd(f,b)):c.push(new td(f,b)):b.Ha()?d?c.push(new wd(f,b)):
c.push(new xd(f,b)):b instanceof Ke?(b=b.Fb,d?c.push(new wd(f,b)):c.push(new xd(f,b))):(b.h(c),d?c.push(new yd(f)):c.push(new zd(f)))):g(new t("what kind of symbol is "+b.name+"??"))}s.type=function(){return J("assignment")};s.ha=q(j);s.W=function(){return this.C instanceof V?Le(this.C)||this.Qa.W():this.C.W()||this.Qa.W()};
s.T=function(b,c,d,f,h){var k=new Ie(l);this.name instanceof T&&Sd(b,this.name)&&g(new t("Can't inline "+b+" -> "+c+"; assignment"));k.name=this.name;k.C=this.C.T(b,c,d,f,h);k.Qa=this.Ed(b,c,d,f,h);return k};s.S=function(b,c,d){var f=new Ie(l);this.name instanceof U&&oe(b,this.name)&&g(new t("Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name;f.C=this.C.S(b,c,d);f.Qa=this.Dd(b,c,d);return f};s.M=function(b){var c=new Ie(l);c.name=this.name.M(b);c.C=this.C.M(b);c.Qa=this.Qa.M(b);return c};
s.Y=function(b){var c=new Ie(l);c.name=this.name.Y(b);c.C=this.C.Y(b);b=this.Qa.Y(b);b instanceof Ie||g(new TypeError);c.Qa=b;return c};s.l=function(b){b.ya(this);this.name.l(b);this.C.l(b);this.Qa.l(b);b.Ja(this)};function Me(){Ie.call(this,l)}Me.prototype=new Ie(l);s=Me.prototype;s.className="LastAssignment";s.Ma=function(b){this.name===l?b instanceof K||b instanceof T?this.name=b:g(new t("assign: can't assign to "+b)):this.C===l?this.C=b:g(new t("assign: error: unexpected "+b))};
s.toString=function(){return""+this.name+" "+this.C};s.h=function(b){Je(this,b,j)};s.W=function(){return this.C instanceof V?Le(this.C):this.C.W()};s.T=function(b,c,d,f,h){var k=new Me;this.name instanceof T&&Sd(b,this.name)&&g(new t("Can't inline "+b+" -> "+c+"; assignment"));k.name=this.name.T(b,c,d,f,h);k.C=this.C.T(b,c,d,f,h);return k};
s.S=function(b,c,d){var f=new Me;this.name instanceof U&&oe(b,this.name)&&g(new t("Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name.S(b,c,d);f.C=this.C.S(b,c,d);return f};s.M=function(b){var c=new Me;c.name=this.name.M(b);c.C=this.C.M(b);return c};s.Y=function(b){var c=new Me;c.name=this.name.Y(b);c.C=this.C.Y(b);return c};s.l=function(b){b.ya(this);this.name.l(b);this.C.l(b);b.Ja(this)};function Ne(){this.$=l}Ne.prototype=new x;s=Ne.prototype;s.className="Assignment";s.type=function(){return J("assignment")};
s.Ma=function(b){this.$.Ma(b)};s.h=function(b){this.$.h(b)};s.toString=function(){return"(assign "+this.$+")"};s.ha=function(b){return this.$.ha(b)};s.W=function(){return this.$.W()};s.T=function(b,c,d,f,h){var k=new Ne;k.$=this.$.T(b,c,d,f,h);return k};s.S=function(b,c,d){var f=new Ne;f.$=this.$.S(b,c,d);return f};s.M=function(b){var c=new Ne;c.$=this.$.M(b);return c};s.l=function(b){b.ya(this);this.$.l(b);b.Ja(this)};
s.Y=function(b){var c=new Ne,b=this.$.Y(b);b instanceof Ie||g(new TypeError);c.$=b;return c};function Rd(){this.n=l}Rd.prototype=new x;s=Rd.prototype;s.Ka=j;s.className="Else";s.type=function(){return J("else-clause")};s.add=function(b){g(new t("Internal error: if clause: unexpected extra condition: "+b))};s.Ma=function(b){this.n===l?this.n=b:g(new t("Internal error: if clause: unexpected: "+b))};s.h=function(b){this.n.h(b)};s.reduce=function(){return this};s.toString=function(){return""+this.n};
s.ha=function(b){return this.n.ha(b)};s.W=function(){return this.n instanceof V?Le(this.n):this.n.W()};s.T=function(b,c,d,f,h){var k=new Rd;k.n=this.n.T(b,c,d,f,h).reduce();return k};s.S=function(b,c,d){var f=new Rd;f.n=this.n.S(b,c,d).reduce();return f};s.M=function(b){var c=new Rd;c.n=this.n.M(b);return c};s.Y=function(b){var c=new Rd;c.n=this.n.Y(b);return c};s.l=function(b){b.ya(this);this.n.l(b);b.Ja(this)};s.oc=function(){return"_"+Oe(this.n)};function Pe(){this.Z=l}Pe.prototype=new x;s=Pe.prototype;
s.className="IfClause";s.type=function(){return Qe};s.append=function(b){this.Z!==l?this.Z.add(b):this.Z=b};s.reduce=function(){var b=this.Z.reduce();b.Ka||g(new TypeError);this.Z=b;return b instanceof Rd?b.n:this};s.Ma=function(b){this.Z.Ma(b)};s.h=function(b){this.Z.h(b)};s.toString=function(){return"(if "+this.Z+")"};s.ha=function(b){return this.Z.ha(b)};s.W=function(){return this.Z.W()};s.T=function(b,c,d,f,h){var k=new Pe,b=this.Z.T(b,c,d,f,h).reduce();b.Ka||g(new TypeError);k.Z=b;return k};
s.S=function(b,c,d){var f=new Pe,b=this.Z.S(b,c,d).reduce();b.Ka||g(new TypeError);f.Z=b;return f};s.M=function(b){var c=new Pe,b=this.Z.M(b);b.Ka||g(new TypeError);c.Z=b;return c};s.Y=function(b){var c=new Pe,b=this.Z.Y(b);b.Ka||g(new TypeError);c.Z=b;return c};s.l=function(b){b.ya(this);this.Z.l(b);b.Ja(this)};s.Q=function(){var b=this.Z;b instanceof Re||g(new TypeError);return b.Q};var Qe=J("if-clause");function Re(){this.next=this.Q=this.n=l}Re.prototype=new x;s=Re.prototype;s.Ka=j;
s.className="IfThen";s.type=function(){return J("if-then-clause")};s.add=function(b){this.next!==l?this.next.add(b):this.next=b};s.Ma=function(b){this.n===l?this.n=b:this.Q===l?this.Q=b:this.next.Ma(b)};
s.h=function(b){var c=this.oc(),d="rainbow.vm.instructions.cond.optimise.If"+c;try{if(d in Se){var f=Se[d];f===l?this.yc(b,c):f(b,this.n,this.Q,this.next)}else{var h=u[d];if(h===i)Se[d]=l;else{var k=h.h;k===i&&g(new t("couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+d));Se[d]=k}this.h(b)}}catch(p){p instanceof Error||g(p),g(new t("Couldn't instantiate "+d+": "+p,p))}};s.yc=function(b){this.n.h(b);b.push(new Nd(this.Q,this.next))};
s.reduce=function(){var b=this.next.reduce();b.Ka||g(new TypeError);this.next=b;if(this.n instanceof y)return this.next;!(this.n instanceof T)||!(this.Q instanceof T)||!(this.next instanceof Rd)?b=m:(b=this.next,b=Sd(this.n,this.Q)&&b.n instanceof y);if(!b)!(this.n instanceof U)||!(this.Q instanceof U)||!(this.next instanceof Rd)?b=m:(b=this.next,b=oe(this.n,this.Q)&&b.n instanceof y);return b?(b=new Rd,b.Ma(this.n),b):this};s.toString=function(){return""+this.n+" "+this.Q+" "+this.next};
s.ha=function(b){return this.n.ha(b)||this.Q.ha(b)||this.next.ha(b)};s.W=function(){return this.n instanceof V&&Le(this.n)||this.Q instanceof V&&Le(this.Q)?j:this.n.W()||this.Q.W()||this.next.W()};s.T=function(b,c,d,f,h){var k=new Re;k.n=this.n.T(b,c,d,f,h).reduce();k.Q=this.Q.T(b,c,d,f,h).reduce();b=this.next.T(b,c,d,f,h).reduce();b.Ka||g(new TypeError);k.next=b;return k};
s.S=function(b,c,d){var f=new Re;f.n=this.n.S(b,c,d).reduce();f.Q=this.Q.S(b,c,d).reduce();b=this.next.S(b,c,d).reduce();b.Ka||g(new TypeError);f.next=b;return f};s.M=function(b){var c=new Re;c.n=this.n.M(b);c.Q=this.Q.M(b);b=this.next.M(b);b.Ka||g(new TypeError);c.next=b;return c};s.Y=function(b){var c=new Re;c.n=this.n.Y(b);c.Q=this.Q.Y(b);b=this.next.Y(b);b.Ka||g(new TypeError);c.next=b;return c};s.l=function(b){b.ya(this);this.n.l(b);this.Q.l(b);this.next.l(b);b.Ja(this)};
s.oc=function(){var b;b="_"+Oe(this.n);b=b+"_"+Oe(this.Q);return b=this.next instanceof Rd?b+"_"+Oe(this.next.n):b+"_other"};var Se={};function Ke(b){this.Fb=b}Ke.prototype=new x;s=Ke.prototype;s.className="Quotation";s.h=function(b){b.push(new Ma(this.Fb))};s.type=function(){return J("quotation")};s.v=o("Fb");s.toString=function(){return"'"+this.Fb};function Te(b){this.A=b;this.bc={}}Te.prototype=new x;s=Te.prototype;s.className="Invocation";s.type=function(){return J("if-then-clause")};
s.toString=function(){return(this.A.a()instanceof V?Ue(Ve(this.A)):this.A).toString()};s.h=function(b){var c;1===this.A.ka()&&this.A.a()instanceof We?(Xe(this.A.a(),b),c=j):c=m;c||Ye(this,b)||this.yc(b)};
s.reduce=function(){if(this.A.hc(1)&&this.A.a()instanceof V){var b=this.A.a(),c=b.z;if(c.O()||!(c.a()instanceof K))return this;var c=c.a(),d=this.A.b().a();if(b.mb(c,d)){try{var f=b.ob(c,d,j)}catch(h){h instanceof Error||g(h),g(new t("couldn't curry "+c+"->"+d+" for "+b+" in expression "+this+": "+h,h))}return(new Te(z(new A,f,this.A.b().b()))).reduce()}}return this};
function Ye(b,c){for(var d="",f=b.A;!(f instanceof y);)d+="_",d+=Oe(f.a()),f=f.b(),f instanceof A||g(new TypeError);d="rainbow.vm.instructions.invoke.optimise.Invoke"+d;if(d in b.bc){f=b.bc[d];if(f===l)return m;try{var h=new f(b.A),k=b.A.b();for(k instanceof A||g(new TypeError);!(k instanceof y);)"other"===b.oc(k.a())&&k.a().h(c),k=k.b(),k instanceof A||g(new TypeError);"other"===b.oc(b.A.a())&&b.A.a().h(c);c.push(h);return j}catch(p){p instanceof Error||g(p),g(new t("couldn't create optimiser "+
d,p))}}else{h=u[d];if(h===i)return b.bc[d]=l,m;b.bc[d]=h;return Ye(b,c)}}function Oe(b){return b instanceof T?"bound":b instanceof K?"free":b instanceof U?"stack":b.Ha()?"literal":b instanceof Ke?"quote":"other"}
s.yc=function(b){switch(this.A.ka()){case 1:var c=this.A.a();c instanceof T?b.push(new qe(c)):c instanceof K?b.push(new re(c)):(c.h(b),b.push(new se));break;case 2:c=this.A.a();this.A.b().a().h(b);c instanceof T?b.push(new te(c)):c instanceof K?b.push(new we(c)):(c.h(b),b.push(new xe));break;case 3:var c=this.A.a(),d=this.A.b().a(),f=this.A.b().b().a();d.h(b);f.h(b);c instanceof T?b.push(new ye(c)):c instanceof K?b.push(new ze(c)):(c.h(b),b.push(new Ae));break;case 4:var c=this.A.a(),d=this.A.b().a(),
f=this.A.b().b().a(),h=this.A.b().b().b().a();d.h(b);f.h(b);h.h(b);c instanceof T?b.push(new Be(c)):c instanceof K?b.push(new Ce(c)):(c.h(b),b.push(new De));break;default:c=this.A.a();d=this.A.b();d instanceof A||g(new TypeError);for(f=d.ka();!(d instanceof y);)d.a().h(b),d=d.b(),d instanceof A||g(new TypeError);c instanceof T?b.push(new Ee(c,f)):c instanceof K?b.push(new Fe(c,f)):(c.h(b),b.push(new La(f)))}return j};
s.ha=function(b){for(var c=this.A;!(c instanceof y);){if(c.a().ha(b))return j;c=c.b();c instanceof A||g(new TypeError)}return m};s.W=function(){for(var b=this.A;!(b instanceof y);){if(b.a()instanceof V){if(Le(b.a()))return j}else if(b.a().W())return j;b=b.b();b instanceof A||g(new TypeError)}return m};
s.T=function(b,c,d,f,h){for(var k=this.A,p=[];!(k instanceof y);){try{p.push(k.a().T(b,c,d,f,h))}catch(r){r instanceof Error||g(r),g(new t("couldn't inline "+b+"->"+c+"(unnest:"+d+";nesting:"+f+") in "+this+" : "+r,r))}k=k.b();k instanceof A||g(new TypeError)}return new Te(w(p))};s.S=function(b,c,d){for(var f=this.A,h=[];!(f instanceof y);){try{h.push(f.a().S(b,c,d))}catch(k){k instanceof Error||g(k),g(new t("couldn't inline "+b+"->"+c+") in "+this+" : "+k,k))}f=f.b();f instanceof A||g(new TypeError)}return new Te(w(h))};
s.M=function(b){for(var c=this.A,d=[];!(c instanceof y);)d.push(c.a().M(b)),c=c.b(),c instanceof A||g(new TypeError);return new Te(w(d))};s.Y=function(b){for(var c=this.A,d=[];!(c instanceof y);)d.push(c.a().Y(b)),c=c.b(),c instanceof A||g(new TypeError);return new Te(w(d))};s.l=function(b){b.ya(this);for(var c=this.A;!(c instanceof y);)c.a().l(b),c=c.b(),c instanceof A||g(new TypeError);b.Ja(this)};function Ze(b){this.Ia=b}Ze.prototype=new x;s=Ze.prototype;s.className="QuasiQuotation";s.type=function(){return J("quasiquotation")};
s.h=function(b){$e(this,b,this.Ia,1)};s.toString=function(){return"`"+this.Ia};function af(b){var c=[];bf(b,c,b.Ia,1);return c}function bf(b,c,d,f){if(cf(d))1===f?c.push(d.b().a()):bf(b,c,d.b().a(),f-1);else if(df(d))1===f?c.push(d.b().a()):bf(b,c,d.b().a(),f-1);else if(ef(d))bf(b,c,d.b().a(),f+1);else if(!d.O())for(;!d.O();)if(cf(d)||ef(d))bf(b,c,d,f),d=d.b().b();else{var h=d.a(),d=d.b();df(h)?bf(b,c,h,f):(cf(h)||ef(h)||ff(h))&&bf(b,c,h,f)}}
function $e(b,c,d,f){if(cf(d))1===f?d.b().a().h(c):(c.push(new Ma(gf)),$e(b,c,d.b().a(),f-1),c.push(new $c(2)));else if(df(d))1===f?(d.b().a().h(c),c.push(new Sc)):(c.push(new Ma(hf)),$e(b,c,d.b().a(),f-1),c.push(new $c(2)),c.push(new Rc));else if(ef(d))c.push(new Ma(jf)),$e(b,c,d.b().a(),f+1),c.push(new $c(2));else if(d.O())c.push(new Ma(d));else{for(c.push(new ad);!d.O();)if(cf(d)||ef(d))$e(b,c,d,f),d=d.b().b(),c.push(new Tc);else{var h=d.a(),d=d.b();df(h)?$e(b,c,h,f):(cf(h)||ef(h)||ff(h)?$e(b,
c,h,f):c.push(new Ma(h)),c.push(new Rc))}d instanceof y||(c.push(new Ma(d)),c.push(new Tc));c.push(new Yc)}}function kf(b,c){return b instanceof A&&b.Cc(c)&&b.b().b()instanceof y}function cf(b){return kf(b,gf)}function df(b){return kf(b,hf)}function ef(b){return kf(b,jf)}function ff(b){return b instanceof A}s.ha=function(b){for(var c=af(this),d=0,f=c.length;d<f;d++)if(c[d].ha(b))return j;return m};s.W=function(){for(var b=af(this),c=0,d=b.length;c<d;c++){var f=b[c];if(f instanceof V){if(Le(f))return j}else if(f.W())return j}return m};
s.T=function(b,c,d,f,h){return new Ze(lf(b,c,d,f,h,this.Ia,1))};
function lf(b,c,d,f,h,k,p){if(cf(k))return 1===p?w([gf,k.b().a().T(b,c,d,f,h)]):w([gf,lf(b,c,d,f,h,k.b().a(),p-1)]);if(df(k))return 1===p?w([hf,k.b().a().T(b,c,d,f,h)]):w([hf,lf(b,c,d,f,h,k.b().a(),p-1)]);if(ef(k))return w([jf,lf(b,c,d,f,h,k.b().a(),p+1)]);if(k.O())return k;for(var r=[],D=B;!k.O();)if(cf(k)||ef(k))D=lf(b,c,d,f,h,k,p),k=k.b().b();else{var L=k.a(),k=k.b();df(L)?r.push(lf(b,c,d,f,h,L,p)):cf(L)||ef(L)||ff(L)?r.push(lf(b,c,d,f,h,L,p)):r.push(L)}k instanceof y||(D=k);return pb(r,D)}
s.S=function(b,c,d){return new Ze(mf(b,c,d,this.Ia,1))};
function mf(b,c,d,f,h){if(cf(f))return 1===h?w([gf,f.b().a().S(b,c,d)]):w([gf,lf(b,c,d,f.b().a(),h-1)]);if(df(f))return 1===h?w([hf,f.b().a().S(b,c,d)]):w([hf,mf(b,c,d,f.b().a(),h-1)]);if(ef(f))return w([jf,mf(b,c,d,f.b().a(),h+1)]);if(f.O())return f;for(var k=[],p=B;!f.O();)if(cf(f)||ef(f))p=mf(b,c,d,f,h),f=f.b().b();else{var r=f.a(),f=f.b();df(r)?k.push(mf(b,c,d,r,h)):cf(r)||ef(r)||ff(r)?k.push(mf(b,c,d,r,h)):k.push(r)}f instanceof y||(p=f);return pb(k,p)}
s.M=function(b){return new Ze(nf(b,this.Ia,1))};function nf(b,c,d){if(cf(c))return 1===d?w([gf,c.b().a().M(b)]):w([gf,nf(b,c.b().a(),d-1)]);if(df(c))return 1===d?w([hf,c.b().a().M(b)]):w([hf,nf(b,c.b().a(),d-1)]);if(ef(c))return w([jf,nf(b,c.b().a(),d+1)]);if(c.O())return c;for(var f=[],h=B;!c.O();)if(cf(c)||ef(c))h=nf(b,c,d),c=c.b().b();else{var k=c.a(),c=c.b();df(k)||cf(k)||ef(k)||ff(k)?f.push(nf(b,k,d)):f.push(k)}c instanceof y||(h=c);return pb(f,h)}s.Y=function(b){return new Ze(of(b,this.Ia,1))};
function of(b,c,d){if(cf(c))return 1===d?w([gf,c.b().a().Y(b)]):w([gf,of(b,c.b().a(),d-1)]);if(df(c))return 1===d?w([hf,c.b().a().Y(b)]):w([hf,of(b,c.b().a(),d-1)]);if(ef(c))return w([jf,of(b,c.b().a(),d+1)]);if(c.O())return c;for(var f=[],h=B;!c.O();)if(cf(c)||ef(c))h=of(b,c,d),c=c.b().b();else{var k=c.a(),c=c.b();df(k)||cf(k)||ef(k)||ff(k)?f.push(of(b,k,d)):f.push(k)}c instanceof y||(h=c);return pb(f,h)}s.l=function(b){b.ya(this);for(var c=af(this),d=0,f=c.length;d<f;d++)c[d].l(b);b.Ja(this)};
function pf(){}s=pf.prototype;s.ya=n();s.Ja=n();s.Yb=function(b){this.ya(b)};s.vc=function(b){this.ya(b)};s.Xb=function(b){this.ya(b)};s.dc=function(b){this.Ja(b)};function qf(b){this.Qb=z(new A,b,B)}qf.prototype=new pf;qf.prototype.Yb=function(b){b.m(this.Qb.a());this.Qb=z(new A,b,this.Qb)};qf.prototype.dc=function(){this.Qb=this.Qb.b()};function rf(){this.xb=[];this.Ic=[];this.tb=0;this.Hc=-1}rf.prototype=new pf;s=rf.prototype;s.Yb=function(b){b.Pb()&&this.tb++};s.ya=n();s.Ja=n();
s.dc=function(b){b.Pb()&&this.tb--};s.vc=function(b){b=b.Pa-this.tb;if(this.Hc<b)this.Hc=b};function sf(b){this.xb=[];this.Ic=[];this.Ia=b}sf.prototype=new pf;s=sf.prototype;s.Kb=function(){return this.Ic.length};s.Yb=function(b){this.xb.unshift(b);if(b.Pb())this.Ia=this.Ia.M(0)};s.ya=function(b){this.xb.unshift(b)};s.Ja=function(){this.xb.shift()};s.dc=function(b){this.xb.shift();if(b.Pb())this.Ia=He(this.Ia)};s.vc=function(b){Sd(b,this.Ia)&&0<this.xb.length&&this.Ic.push(this.xb[0])};
function tf(){this.name=this.target=l;this.rc=this.Vc=this.jd=0;this.children=[];this.parent=l;this.dd={};this.cd={}}function uf(b,c){var d=c.Sa(),f=b[d];if(f===i&&(f=new tf,f.target=c,f.name=d,b[d]=f,c instanceof V&&(d=c.gc,d!==l)))d=uf(b,d),d.children.push(f),f.parent=d;return f}function vf(b){this.target=b;this.Kb=0;this.key=b.Sa()}function wf(b,c){var d=b[c.Sa()];d===i&&(d=new vf(c),b[d.key]=d);return d}function xf(){this.Bc={};this.zd={};this.Dc=l;this.now=0}function yf(){}yf.prototype.ib=i;
yf.prototype.end=i;yf.prototype.Cb=i;function zf(b){b.show();var c=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");if(c!==l)if(/^q$/i.test(c))Nc(b,Cc);else if(/^f$/i.test(c))b.Oc=b.i-1,Nc(b,Af)}function Bf(){}Bf.prototype=new yf;Bf.prototype.ib=n();Bf.prototype.end=n();Bf.prototype.Cb=n();var Cc=new Bf;function Cf(){}Cf.prototype=new yf;Cf.prototype.ib=function(b){zf(b)};Cf.prototype.end=function(b){za("VM thread finished: returning.");zf(b)};
Cf.prototype.Cb=n();var Df=new Cf;function Ef(){}Ef.prototype=new yf;Ef.prototype.ib=function(b){b.cc=j;for(var c=[],d=[];0<=b.i;)Fc(b).a().Nb&&(c.push(Fc(b)),d.push(b.ja[b.i])),b.i--;for(var f=c.length-1;0<=f;f--)R(b,d[f],c[f])};Ef.prototype.end=n();Ef.prototype.Cb=n();var Ff=new Ef;function Gf(){}Gf.prototype=new yf;Gf.prototype.ib=function(b){b.i<=b.Oc&&Nc(b,Df)};Gf.prototype.end=n();Gf.prototype.Cb=n();var Af=new Gf;function Hf(){}Hf.prototype=new yf;
Hf.prototype.ib=function(b){var c=b.Ya.Dc;if(c!==l){var d=uf(b.Ya.Bc,c),c=1E6*(new Date).getTime()-b.Ya.now;d.Vc+=c;d.rc+=c;for(d=d.parent;d!==l;)d.rc+=c,d=d.parent}var f=Pc(b);if(f!==l)b.s=b.ja[b.i],b.Mb=b.pa[b.i],this.ud(f,b),f.oa?(c=f.ta(b),c instanceof Wc&&(c=c.r()),d=uf(b.Ya.Bc,c),f=f.d,f!==l&&wf(d.dd,f).Kb++,f=uf(b.Ya.Bc,f),c!==l&&wf(f.cd,c).Kb++,d.jd++,b.Ya.Dc=c):b.Ya.Dc=f.d!==l?f.d:B,b.Ya.now=1E6*(new Date).getTime()};Hf.prototype.end=n();
Hf.prototype.Cb=function(b){b.Ya=new xf;b.Ya.now=1E6*(new Date).getTime()};var If=new Hf;function Jf(b,c,d){this.d=l;this.ac=b;this.L=c;this.u=d;this.m(F("AssignmentBuilder.build"))}Jf.prototype=new M;Jf.prototype.className="AssignmentBuilder.BuildAssignment1";Jf.prototype.c=function(b){if(!(this.L instanceof y)){try{this.L.Db()}catch(c){c instanceof Ha||g(c),g(new t("assign: unexpected: "+this.L))}E(b,new Kf(this.ac,this.L.b(),this.u));Lf(b,this.L.a(),this.u)}};
function Kf(b,c,d){this.d=l;this.ac=b;this.L=c;this.u=d;this.m(F("AssignmentBuilder.build"))}Kf.prototype=new M;Kf.prototype.className="AssignmentBuilder.BuildAssignment2";Kf.prototype.c=function(b){this.ac.Ma(Q(b).reduce());E(b,new Jf(this.ac,this.L,this.u))};var Mf=B,Nf=J("at-string");
function Lf(b,c,d){if(c instanceof y)C(b,c);else if(c instanceof Qa&&!(Mf instanceof y))E(b,new Of(d)),Nf.bound()?Ja(Nf.value(),b,z(new A,c,B)):C(b,c);else if(c instanceof K&&Pf(c))Lf(b,Qf(hb(c,"ssexpand")),d);else if(c instanceof A){var f,h=c.a();f=!(h instanceof K)||!h.bound()?l:lc(h.value());if(f!==l)h=c.b(),h instanceof A||g(new TypeError),E(b,new Rf(d)),Ja(f,b,h);else if(f=c.a(),gb("quote",f))C(b,new Ke(c.b().a()));else if(f===jf)E(b,new Sf),Tf(b,c.b().a(),d,1);else if(gb("fn",f))h=c.b(),h instanceof
A||g(new TypeError),c=h,h=d,h===l&&g(new ReferenceError("can't have null lexical bindings!")),f={},d=c.a(),d instanceof y||(h=[f].concat(h)),E(b,new Uf(c,h,f)),d instanceof y?C(b,z(new A,B,B)):(c=h,Vf(d,c[0],[0],m),Wf(b,d,c));else if(gb("if",f)){h=c=c.b();for(f=new Pe;0<c.ka();)switch(c.ka()){case 0:break;case 1:f.append(new Rd);c=c.b();break;case 2:f.append(new Re);c=c.b();c instanceof A||g(new TypeError);c.Jc(z(new A,B,B));c=c.b();break;default:f.append(new Re),c=c.b().b()}c=h;E(b,new Xf(f));E(b,
new Yf(f,c,d))}else if(gb("assign",f)){c=c.b();h=new Ne;f=c.ka();0!==f%2&&g(new t("assign: requires even number of arguments"));f=f/2-1;0>f&&g(new t("assign: nothing to assign"));for(h.$=new Me;0<f;)h.$=new Ie(h.$),f--;f=new Ma(h);f.m(F("AssignmentBuilder.build"));E(b,f);E(b,new Jf(h,c,d))}else gb("compose",f.uc())?(h=f.b(),h instanceof A||g(new TypeError),c=c.b(),c instanceof A||g(new TypeError),Lf(b,Zf(h,c),d)):gb("complement",f.uc())?(h=c.b(),h instanceof A||g(new TypeError),c=Lf,f=f.b().a(),h=
z(new A,J("no"),z(new A,z(new A,f,h),B)),c(b,h,d)):f instanceof K&&Pf(f)?Lf(b,z(new A,Qf(hb(f,"ssexpand")),c.b()),d):E(b,new $f(c,d,c,[]))}else{if(c instanceof K)for(h=0;h<d.length;h++)if(c.name()in d[h]){d=d[h][c.name()];C(b,new T(c,h,d));return}C(b,c)}}function Of(b){this.d=l;this.u=b;this.m(F("Compiler.compile"))}Of.prototype=new M;Of.prototype.className="Compiler.FinishAtString";Of.prototype.c=function(b){var c=Q(b);c instanceof Qa?C(b,c):Lf(b,c,this.u)};
function Rf(b){this.d=l;this.u=b;this.m(F("Compiler.compilePair"))}Rf.prototype=new M;Rf.prototype.className="Compiler.ThenCompile";Rf.prototype.c=function(b){Lf(b,Q(b),this.u)};function Sf(){this.d=l;this.m(F("Compiler.compilePair"))}Sf.prototype=new M;Sf.prototype.className="Compiler.WrapQuasiQuotation";Sf.prototype.c=function(b){C(b,new Ze(Q(b)))};
function Zf(b,c){var d=b.a();if(b.b()instanceof y)return z(new A,d,c);var f=b.b();f instanceof A||g(new TypeError);return z(new A,d,z(new A,Zf(f,c),B))}function Uf(b,c,d){this.d=l;this.gb=b;this.u=c;this.Ec=d;this.m(F("FunctionBodyBuilder.build"))}Uf.prototype=new M;Uf.prototype.className="FunctionBodyBuilder.Intermediate";Uf.prototype.c=function(b){var c=Q(b),d=c.a(),c=c.b(),f=this.gb.b();f instanceof A||g(new TypeError);E(b,new ag(c,this.Ec,f,d,b.N));E(b,new bg(f,this.u,[]))};
function ag(b,c,d,f,h){this.d=l;this.z=b;this.Ec=c;this.L=d;this.za=f;this.Ib=h;this.m(F("FunctionBodyBuilder.build"))}ag.prototype=new M;ag.prototype.fc=j;ag.prototype.className="FunctionBodyBuilder.Finish";ag.prototype.wc=function(b){return b instanceof Error};ag.prototype.c=function(b){var c=b.error();if(c!==l)b.Ua=l,b.N=this.Ib,g(new t("building function fn "+this.z+" "+this.L+": "+c,c));C(b,cg(this.z,this.Ec,Q(b),this.za))};
function cg(b,c,d,f){var h="rainbow.function.interpreted.optimise.Bind"+dg(b,m),k=u[h];if(k===i)return f instanceof y?new eg(b,c,d):new fg(b,c,d);try{var p=k.va(b,c,d);p instanceof x||g(new TypeError);return p}catch(r){r instanceof Error||g(r),g(new t("Couldn't instantiate "+h+": "+r,r))}}
function dg(b,c){if(b instanceof y)return"";if(b instanceof A){if(c){if(gg(b)){var d=b.b().b().a();return d.Ha()?"_Oliteral":d instanceof T?"_Obound":"_Oother"}d=b.a();return"_D"+dg(d,j)+dg(b.b(),m)+"_d"}return dg(b.a(),j)+dg(b.b(),m)}return c?"_A":"_R"}function hg(b,c,d){!(c instanceof y)&&c instanceof A&&(d&&gg(c)?c.b().b().a().l(b):(hg(b,c.a(),j),hg(b,c.b(),m)))}var ig=J("o"),jg=J("#NIL#");function Wf(b,c,d){var f={value:B},h=[];E(b,new kg(h,f));E(b,new lg(h,f,c,d))}
function kg(b,c){this.d=l;this.K=b;this.za=c;this.m(F("FunctionParameterListBuilder.buildParams_"))}kg.prototype=new M;kg.prototype.className="FunctionParameterListBuilder.ReturnParams";kg.prototype.c=function(b){if(0===this.K.length){var c;c=Q(b)}else c=pb(this.K,Q(b));c=z(new A,this.za.value,c);C(b,c)};function lg(b,c,d,f){this.d=l;this.K=b;this.za=c;this.xa=d;this.u=f;this.m(F("FunctionParameterListBuilder.buildParams_"))}lg.prototype=new M;lg.prototype.className="FunctionParameterListBuilder.BuildParams1";
lg.prototype.c=function(b){if(this.xa.O()){var c=new Ma(this.xa);c.m(this);E(b,c)}else{var c=this.xa.a(),d=this.xa.b();if(c instanceof A)if(c instanceof y)this.K.push(jg),E(b,new lg(this.K,this.za,d,this.u));else if(this.za.value=$a,gg(c)){var f=c.b().a();E(b,new mg(this.K,this.za,d,this.u,f));Lf(b,c.b().b().a(),this.u)}else E(b,new ng(this.K,this.za,d,this.u)),Wf(b,c,this.u);else this.K.push(c),E(b,new lg(this.K,this.za,d,this.u))}};
function mg(b,c,d,f,h){this.d=l;this.K=b;this.za=c;this.xa=d;this.u=f;this.ld=h;this.m(F("FunctionParameterListBuilder.buildParams_"))}mg.prototype=new M;mg.prototype.className="FunctionParameterListBuilder.BuildParams2a";mg.prototype.c=function(b){this.K.push(w([ig,this.ld,Q(b)]));E(b,new lg(this.K,this.za,this.xa,this.u))};function ng(b,c,d,f){this.d=l;this.K=b;this.za=c;this.xa=d;this.u=f;this.m(F("FunctionParameterListBuilder.buildParams_"))}ng.prototype=new M;ng.prototype.className="FunctionParameterListBuilder.BuildParams2b";
ng.prototype.c=function(b){this.K.push(Q(b).b());E(b,new lg(this.K,this.za,this.xa,this.u))};function og(b){for(;!b.O();){if(b.a()instanceof A)return $a;b=b.b()}return B}function Vf(b,c,d,f){b instanceof y||(b instanceof A?f&&gg(b)?Vf(b.b().a(),c,d,j):(f=b.a(),f instanceof y?(c[jg.name()]=d[0],d[0]++):Vf(f,c,d,j),Vf(b.b(),c,d,m)):(b instanceof K||g(new TypeError),c[b.name()]=d[0],d[0]++))}
function pg(b,c,d,f){var h=l;f instanceof K&&!f.Ga(b.name)?h=f:gg(f)&&!f.b().a().Ga(b.name)?h=w([ig,f.b().a(),f.b().b().a().S(b,c,d)]):!gg(f)&&f instanceof A&&(h=f);return h}function qg(b,c,d,f){var h=l;f instanceof K&&!f.Ga(b.name)?h=f:gg(f)&&!f.b().a().Ga(b.name)?h=w([ig,f.b().a(),f.b().b().a().T(b,c,m,0,d)]):!gg(f)&&f instanceof A&&(h=f);return h}function Xf(b){this.d=l;this.yb=b;this.m(F("IfBuilder.build"))}Xf.prototype=new M;Xf.prototype.className="IfBuilder.Reduce";
Xf.prototype.c=function(b){C(b,this.yb.reduce())};function Yf(b,c,d){this.d=l;this.yb=b;this.L=c;this.u=d;this.m(F("IfBuilder.build"))}Yf.prototype=new M;Yf.prototype.className="IfBuilder.BuildIf1";Yf.prototype.c=function(b){if(!(this.L instanceof y)){try{this.L.Db()}catch(c){c instanceof Ha||g(c),g(new t("if: unexpected: "+this.L))}E(b,new rg(this.yb,this.L.b(),this.u));Lf(b,this.L.a(),this.u)}};function rg(b,c,d){this.d=l;this.yb=b;this.L=c;this.u=d;this.m(F("IfBuilder.build"))}rg.prototype=new M;
rg.prototype.className="IfBuilder.BuildIf2";rg.prototype.c=function(b){this.yb.Ma(Q(b).reduce());E(b,new Yf(this.yb,this.L,this.u))};function $f(b,c,d,f){this.d=l;this.L=b;this.u=c;this.wa=d;this.Na=f;this.m(F("InvocationBuilder.build"))}$f.prototype=new M;$f.prototype.className="InvocationBuilder.BuildInvocation";
$f.prototype.c=function(b){if(this.L instanceof y)C(b,(new Te(w(this.Na))).reduce());else{try{this.L.Db()}catch(c){c instanceof Ha||g(c),g(new t("can't compile "+this.wa+"; not a proper list"))}E(b,new $f(this.L.b(),this.u,this.wa,this.Na));E(b,new sg(this.Na));Lf(b,this.L.a(),this.u)}};function sg(b){this.d=l;this.Na=b;this.m(F("InvocationBuilder.build"))}sg.prototype=new M;sg.prototype.className="InvocationBuilder.ReducePush";sg.prototype.c=function(b){this.Na.push(Q(b).reduce())};
function bg(b,c,d){this.d=l;this.L=b;this.u=c;this.K=d;this.m(F("PairExpander.expand"))}bg.prototype=new M;bg.prototype.className="PairExpander.ExpandPair";bg.prototype.c=function(b){if(this.L instanceof y||!(this.L instanceof A))E(b,new tg(this.K)),Lf(b,this.L,this.u);else{E(b,new bg(this.L.b(),this.u,this.K));var c=this.L.a();E(b,new ug(this.K));Lf(b,c,this.u)}};function ug(b){this.d=l;this.Na=b;this.m(F("PairExpander.expand"))}ug.prototype=new M;ug.prototype.className="PairExpander.ReducePush";
ug.prototype.c=function(b){this.Na.push(Q(b).reduce())};function tg(b){this.d=l;this.K=b;this.m(F("PairExpander.expand"))}tg.prototype=new M;tg.prototype.className="PairExpander.FinishPair";tg.prototype.c=function(b){var c=pb(this.K,Q(b).reduce());c instanceof A||g(new TypeError);C(b,c)};var jf=J("quasiquote"),gf=J("unquote"),hf=J("unquote-splicing");function Tf(b,c,d,f){c.O()?C(b,c):cf(c)?vg(b,gf,c,f,d):df(c)?vg(b,hf,c,f,d):ef(c)?(E(b,new wg(jf)),Tf(b,c.b().a(),d,f+1)):E(b,new xg([],c,d,f))}
function xg(b,c,d,f){this.d=l;this.K=b;this.Aa=c;this.u=d;this.tb=f;this.m(F("QuasiQuoteCompiler.compile"))}xg.prototype=new M;xg.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";xg.prototype.c=function(b){if(this.Aa.O())E(b,new yg(this.K)),Tf(b,this.Aa,this.u,this.tb);else{var c=this.Aa.a();E(b,new xg(this.K,this.Aa.b(),this.u,this.tb));c.O()?this.K.push(c):(E(b,new zg(this.K)),Tf(b,c,this.u,this.tb))}};function yg(b){this.d=l;this.K=b;this.m(F("QuasiQuoteCompiler.compile"))}
yg.prototype=new M;yg.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";yg.prototype.c=function(b){C(b,pb(this.K,Q(b)))};function zg(b){this.d=l;this.K=b;this.m(F("QuasiQuoteCompiler.compile"))}zg.prototype=new M;zg.prototype.className="QuasiQuoteCompiler.Push";zg.prototype.c=function(b){this.K.push(Q(b))};function vg(b,c,d,f,h){d=d.b().a();E(b,new wg(c));1===f?Lf(b,d,h):Tf(b,d,h,f-1)}function wg(b){this.d=l;this.nd=b;this.m(F("QuasiQuoteCompiler.compile"))}wg.prototype=new M;
wg.prototype.className="QuasiQuoteCompiler.Prefix";wg.prototype.c=function(b){C(b,w([this.nd,Q(b)]))};var Ag={},Bg=J("let"),Cg=J("self"),Dg=J("it");J("afn");var Eg=J("do"),Fg=J("with"),Gg=J("aif");
function Ue(b){if(b.a()===Bg)a:{b=b.b();if(b.a()===Dg){var c=b.b().a(),d=b.b().b();if(d.b()instanceof y&&d.a()instanceof Pe&&(d=d.a(),!(d.Z instanceof Re)?0:"it"===d.Z.n.toString())){b=d.Q();d=d.Z;d instanceof Re||g(new TypeError);b=w([Gg,c,b,d.next]);break a}}else if(b.a()===Cg&&b.b().a()instanceof y&&(d=b.b().b(),d.a()instanceof Ne&&d.b()instanceof y)){c=d.a();var d=c.$,f="self";if(d.name instanceof K)d=d.name.name()===f;else{if(!(d.name instanceof U))f=d.name,f instanceof T||g(new TypeError);d=
d.name.name.name()===f}if(d&&c.$.C instanceof V&&c.$ instanceof Me){b=Ag.Cd(c.$.C);break a}}b=z(new A,Bg,b)}return b}function Ve(b){var c=b.a(),d=b.b(),f=c.z;if(d.ka()===f.ka())if(0===d.ka())c=w([Eg].concat(c.body));else if(1===d.ka())c=w([Bg,f.a(),d.a()].concat(c.body));else{b=d;for(d=[];!(f instanceof y);)d.push(f.a()),d.push(b.a()),f=f.b(),b=b.b();c=w([Fg,w(d)].concat(c.body))}else c=b;return c}function X(){}X.prototype=new x;s=X.prototype;s.className="Builtin";
function Z(b,c){b.ba=c;J(c).ga(b)}s.j=function(b){g(new t("Builtin:invoke(args):provide implementation! "+this.name()+" args "+b))};s.g=function(b,c){C(b,this.j(c))};s.ra=q(0);s.type=function(){return Hg};function Ob(b,c,d){d<b.ka()&&(za(c+" got args "+b+" was expecting expecting at most "+d),g(new t(c.toLowerCase()+" expects at most "+d+" arguments: given "+b)))}function Ig(b,c,d){b.ka()!==c&&g(new t(d.toLowerCase()+" expects "+c+" arguments: given "+b))}
s.toString=function(){return"[builtin:"+(this.ba===l||0===this.ba.length?this.className:this.ba)+"]"};s.Sa=function(){return this.toString()};s.name=function(){return""===this.ba?this.className.toLowerCase():this.ba};var Hg=J("fn");function Wc(b,c){this.Aa=b;this.ia=c}Wc.prototype=new x;s=Wc.prototype;s.className="Closure";s.ua=function(b){this.Aa.la(b,this.ia)};s.t=function(b,c){this.Aa.w(b,this.ia,c)};s.U=function(b,c,d){this.Aa.Ea(b,this.ia,c,d)};s.g=function(b,c){this.Aa.D(b,this.ia,c)};
s.type=function(){return Hg};s.toString=function(){return this.Aa.toString()};s.Sa=function(){return this.Aa.Sa()};s.r=o("Aa");function Jg(b){return 0===b.length?m:b.charCodeAt(0)===Kg?Jg(b.substring(1)):b.charAt(b.length-1)===Kg?Jg(b.substring(0,b.length-1)):-1!==b.indexOf(Lg)}function V(){}V.prototype=new x;s=V.prototype;s.J=V;s.className="InterpretedFunction";function $(b,c,d,f){b.name=B;b.z=c;b.p=d;b.body=tb(f);b.o=l;b.gc=l;b.aa=l;b.vb=l;b.Bd=l;Mg(b);return b}
s.sc=function(b){if(this.name===b)this.name=B};s.Zb=function(b){this.name=b;for(var b=new qf(this),c=0,d=this.body.length;c<d;c++)this.body[c].l(b)};s.$b=o("name");s.Sa=function(){if(this.vb!==l)return this.vb;this.name instanceof y?(this.vb=this.toString(),this.gc!==l&&(this.vb+=" in "+this.gc.Sa())):this.vb=this.$b().toString();return this.vb};
s.reduce=function(){var b;if(Ng&&!this.W()&&!(this.z instanceof y)){var c="rainbow.function.interpreted.optimise.stack.Stack"+dg(this.z,m),d=u[c];if(d===i)b=this;else try{var f=d.Ra(this);f instanceof x||g(new TypeError);b=f}catch(h){h instanceof Error||g(h),g(new t("Couldn't instantiate "+c+": "+h,h))}}else b=this;return b};function Mg(b){var c=[];Xe(b,c);b.o=w(c);b.o.l(new Og(b))}s.m=ca("gc");function Og(b){this.d=b}Og.prototype=new pf;Og.prototype.Xb=function(b){b.m(this.d)};
function Xe(b,c){if(0===b.body.length)c.push(new Ma(B));else for(var d=0;d<b.body.length;d++){var f=d===b.body.length-1;b.body[d].h(c);f||c.push(new bd("intermediate-fn-expression"))}}s=V.prototype;s.mb=function(b,c){return 1===this.body.length&&this.Ac(b,c)&&!this.ha(0)&&!this.W()};
s.Ac=function(b,c){var d=this.p[b.name()],d=new T(b,0,d),f;if(!(f=c.Ha()))if(!(f=c instanceof Ke))if(!(f=c instanceof K))if(!(f=c instanceof T)){d=new sf(d);f=0;for(var h=this.body.length;f<h;f++)this.body[f].l(d);f=1>=d.Kb()}return f};s.W=function(){for(var b=0,c=this.body.length;b<c;b++){var d=this.body[b];if(d instanceof V){if(Le(d))return j}else if(d.W())return j}return m};function Pg(b,c){for(var d=0,f=b.body.length;d<f;d++)if(b.body[d].ha(c))return j;return m}
s.Pb=function(){return!(this.z instanceof y)};s.ha=function(b){return this.z instanceof y?Pg(this,b):Pg(this,b+1)};s.ua=function(b){return this.la(b,l)};s.la=function(b,c){return this.D(b,c,B)};s.t=function(b,c){return this.w(b,l,c)};s.w=function(b,c,d){return this.D(b,c,z(new A,d,B))};s.U=function(b,c,d){return this.Ea(b,l,c,d)};s.Ea=function(b,c,d,f){return this.D(b,c,z(new A,d,z(new A,f,B)))};s.Wa=function(b,c,d,f){return this.Ob(b,l,c,d,f)};
s.Ob=function(b,c,d,f,h){return this.D(b,c,z(new A,d,z(new A,f,z(new A,h,B))))};s.g=function(b,c){return this.D(b,l,c)};s.D=function(){g(new t("error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this))};s.h=function(b){Le(this)?b.push(new Vc(this)):b.push(new Ma(this))};s.Ha=function(){return!Le(this)};function Le(b){var c=new rf;b.l(c);return-1<c.Hc}s.l=function(b){b.Yb(this);hg(b,this.z,m);for(var c=0,d=this.body.length;c<d;c++)this.body[c].l(b);b.dc(this);this.aa!==l&&this.aa.l(b)};
s.ra=function(b){g(new t("Can't compare "+this+" to "+b))};s.toString=function(){if(this.z instanceof A&&this.z.a()===J("_")&&this.z.b()instanceof y&&1===this.body.length&&!(this.body[0]instanceof Eb)){if(this.body[0]instanceof y)return"[]";var b=this.body[0].toString();return"["+b.substring(1,b.length-1)+"]"}return w([J("fn"),this.z].concat(this.body)).toString()};s.type=function(){return Hg};s.Eb=function(b){return this.body[b]};s.Rc=function(){return this.body[this.body.length-1]};s.length=function(){return this.body.length};
function Qg(b,c,d){try{c.b().Oa()}catch(f){f instanceof Ha||g(f),Rg(b,d)}}function Rg(b,c){g(new t("args "+c+" doesn't match signature for "+b))}
s.ob=function(b,c,d){var f=this.p[b.name()];f===i&&g(new ReferenceError);var b=new T(b,0,f),h;for(var k=this.z,p=c,r=B,D=[];!k.O();){var L=qg(b,p,f,k.a());L!==l&&D.push(L);k=k.b()}k instanceof K&&(p=qg(b,p,f,k),p!==l&&(r=p));try{h=pb(D,r)}catch(ka){ka instanceof Error||g(ka),g(new t("couldn't curry params "+k+", got list "+D+" and last "+r))}k={};Vf(h,k,[0],m);r=h instanceof y;!r&&d&&(c=c.M(0));d=[];for(D=0;D<this.body.length;D++)d.push(this.body[D].T(b,c,r,0,f).reduce());c=w(d);f=og(h);return cg(h,
k,c,f)};s.T=function(b,c,d,f,h){for(var b=this.z instanceof y?b:b.M(0),d=Sg(this),k=[],p=0;p<this.body.length;p++)k.push(this.body[p].T(b,c,m,f+1,h).reduce());b=w(k);d.body=tb(b);Mg(d);return d};s.S=function(b,c,d){if(!(this.z instanceof y))return this;for(var f=Sg(this),h=[],k=0;k<this.body.length;k++)h.push(this.body[k].S(b,c,d).reduce());b=w(h);f.body=tb(b);Mg(f);return f};
s.M=function(b){this.z instanceof y||b++;for(var c=Sg(this),d=[],f=0;f<this.body.length;f++)d.push(this.body[f].M(b));b=w(d);c.body=tb(b);Mg(c);return c};function Sg(b){var c=new b.J,d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function Tg(b,c,d){d.Bb(c)||g(new t("error: "+b+" expects "+c+" args, got "+d))}function eg(b,c,d){$(this,b,c,d)}eg.prototype=new V;eg.prototype.J=eg;eg.prototype.className="SimpleArgs";
eg.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;f=c=new v(f,c);for(h=this.z;!(h instanceof y);)if(h instanceof K){f.add(d);break}else f.add(d.a()),d=d.b(),h=h.b();R(b,c,this.o)};function fg(b,c,d){$(this,b,c,d)}fg.prototype=new V;fg.prototype.J=fg;fg.prototype.className="ComplexArgs";fg.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);E(b,new Ug(c,this.o,this));E(b,new Vg(c,this.z,d,this))};function Ug(b,c,d){this.d=l;this.ia=b;this.o=c;this.m(d)}Ug.prototype=new M;
Ug.prototype.className="ComplexArgs.Run";Ug.prototype.c=function(b){R(b,this.ia,this.o)};function Vg(b,c,d,f){this.d=l;this.ia=b;this.xa=c;this.gb=d;this.m(f)}Vg.prototype=new M;Vg.prototype.className="ComplexArgs.BuildComplex";
Vg.prototype.c=function(b){if(this.xa.O())this.xa instanceof K&&this.ia.add(this.gb);else{var c=this.xa.a(),d=this.gb.a();E(b,new Vg(this.ia,this.xa.b(),this.gb.b(),this.d));if(c instanceof K)this.ia.add(d);else if(gg(c))if(c=c.b(),c instanceof A||g(new TypeError),this.gb instanceof y){E(b,new Wg(this.ia,this));var d=this.ia,f=[];c.b().a().h(f);R(b,d,w(f))}else this.ia.add(d);else{try{d.Db()}catch(h){h instanceof Ha||g(h),g(new t("Expected list argument for destructuring parameter "+c+", got "+d))}E(b,
new Vg(this.ia,c,d,this.d))}this.xa=this.xa.b();this.gb=this.gb.b()}};function Wg(b,c){this.d=l;this.ia=b;this.m(c)}Wg.prototype=new M;Wg.prototype.className="ComplexArgs.AddToLc";Wg.prototype.c=function(b){this.ia.add(Q(b))};function gg(b){return!(b instanceof A)?m:b.a()===Xg}var Xg=J("o");function Yg(){}Yg.prototype=new V;s=Yg.prototype;s.J=Yg;s.className="StackFunctionSupport";s.mb=function(b,c){return this.Ac(b,c)&&!this.ha(0)};
s.Ac=function(b,c){var d=this.p[b.name()],d=new U(b,d);return c.Ha()||c instanceof Ke||c instanceof K||1===this.body.length&&this.body[0]instanceof U&&oe(d,this.body[0])};s.Pb=q(m);
s.ob=function(b,c){var d=this.p[b.name()],f=new U(b,d),h;for(var k=this.z,p=B,r=[];!k.O();){var D=pg(f,c,d,k.a());D!==l&&r.push(D);k=k.b()}k instanceof K&&(D=pg(f,c,d,k),D!==l&&(p=D));try{h=pb(r,p)}catch(L){L instanceof Error||g(L),g(new t("couldn't curry params "+k+", got list "+r+" and last "+p))}k={};Vf(h,k,[0],m);p=[];for(r=0;r<this.body.length;r++)p.push(this.body[r].S(f,c,d).reduce());var d=w(p),f=og(h),ka;p=dg(h,m);if(""===p)ka=cg(h,k,d,f);else{f="rainbow.function.interpreted.optimise.stack.Stack"+
p;p=u[f];p===i&&g(new t("no stack-based function implementation for "+h+"; couldn't find "+f));try{var W=p.fa(h,k,d);W instanceof x||g(new TypeError);ka=W}catch(bb){bb instanceof Error||g(bb),g(new t("Couldn't instantiate "+f+": "+bb,bb))}}return ka};function Zg(b,c){for(var d=Array(~~c.length),f=0;f<c.length;f++)d[f]=c[f].Y(b);return w(d)}function We(){}var $g={};u["rainbow.function.interpreted.optimise.Bind"]=$g;We.prototype=new V;We.prototype.J=We;We.prototype.className="Bind";
$g.va=function(b,c,d){return $(new We,b,c,d)};We.prototype.la=function(b,c){R(b,c,this.o)};We.prototype.D=function(b,c,d){try{d.Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 0 args, got "+d))}R(b,c,this.o)};function ah(){}var bh={};u["rainbow.function.interpreted.optimise.Bind_A"]=bh;ah.prototype=new V;ah.prototype.J=ah;ah.prototype.className="Bind_A";bh.va=function(b,c,d){return $(new ah,b,c,d)};ah.prototype.la=function(){g(new t("function "+this+" expects 1 arg, got none"))};
ah.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);R(b,c,this.o)};ah.prototype.D=function(b,c,d){d instanceof y&&this.la(b,c);try{d.b().Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 1 arg, got "+d+" calling "+this))}this.w(b,c,d.a())};function ch(){}var dh={};u["rainbow.function.interpreted.optimise.Bind_A_A"]=dh;ch.prototype=new V;ch.prototype.J=ch;ch.prototype.className="Bind_A_A";dh.va=function(b,c,d){return $(new ch,b,c,d)};ch.prototype.la=function(){g(new t("error: expected 2 args, got none"))};
ch.prototype.w=function(b,c,d){g(new t("error: expected 2 args, got 1: "+d))};ch.prototype.Ea=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=new v(h,c);c.add(d);c.add(f);R(b,c,this.o)};ch.prototype.D=function(b,c,d){try{d.b().b().Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 2 args, got "+d))}this.Ea(b,c,d.a(),d.b().a())};function eh(){}var fh={};u["rainbow.function.interpreted.optimise.Bind_A_A_A"]=fh;eh.prototype=new V;eh.prototype.J=eh;eh.prototype.className="Bind_A_A_A";
fh.va=function(b,c,d){return $(new eh,b,c,d)};eh.prototype.Ob=function(b,c,d,f,h){var k=0,p;for(p in this.p)k++;c=new v(k,c);c.add(d);c.add(f);c.add(h);R(b,c,this.o)};eh.prototype.D=function(b,c,d){Qg(this,d.b().b().b(),d);this.Ob(b,c,d.a(),d.b().a(),d.b().b().a())};function gh(){}var hh={};u["rainbow.function.interpreted.optimise.Bind_A_A_R"]=hh;gh.prototype=new V;gh.prototype.J=gh;gh.prototype.className="Bind_A_A_R";hh.va=function(b,c,d){return $(new gh,b,c,d)};gh.prototype.la=function(){g(new t("error: expected at least 2 arg, got none"))};
gh.prototype.w=function(b,c,d){g(new t("error: expected at least 2 args, got one: "+d))};gh.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d.a());c.add(d.b().a());c.add(d.b().b());R(b,c,this.o)};function ih(){}var jh={};u["rainbow.function.interpreted.optimise.Bind_A_Obound"]=jh;ih.prototype=new V;ih.prototype.J=ih;ih.prototype.className="Bind_A_Obound";
jh.va=function(b,c,d){c=$(new ih,b,c,d);d=b.b().a().b().b().a();d instanceof T||g(new TypeError);c.V=d;b=b.b().a().b().a();b instanceof K||g(new TypeError);if(c.mb(b,c.V))try{var f=c.ob(b,c.V,m);f instanceof V||g(new TypeError);c.aa=f}catch(h){h instanceof Error||g(h),Aa(h)}return c};ih.prototype.w=function(b,c,d){if(this.aa!==l)this.aa.w(b,c,d);else{var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);c.add(this.V.v(c));R(b,c,this.o)}};
ih.prototype.Ea=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=new v(h,c);c.add(d);c.add(f);R(b,c,this.o)};ih.prototype.D=function(b,c,d){d instanceof y&&Rg(this,d);var f=d.a(),h=d.b();h instanceof y?this.w(b,c,f):(Qg(this,h.b(),d),this.Ea(b,c,f,h.a()))};function kh(){}var lh={};u["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=lh;kh.prototype=new V;kh.prototype.J=kh;kh.prototype.className="Bind_A_Oliteral";
lh.va=function(b,c,d){c=$(new kh,b,c,d);c.V=b.b().a().b().b().a();b=b.b().a().b().a();b instanceof K||g(new TypeError);if(c.mb(b,c.V))try{var f=c.ob(b,c.V,m);f instanceof V||g(new TypeError);c.aa=f}catch(h){h instanceof Error||g(h),Aa(h)}return c};kh.prototype.w=function(b,c,d){if(this.aa!==l)this.aa.w(b,c,d);else{var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);c.add(this.V);R(b,c,this.o)}};kh.prototype.Ea=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=new v(h,c);c.add(d);c.add(f);R(b,c,this.o)};
kh.prototype.D=function(b,c,d){d instanceof y&&Rg(this,d);var f=d.a(),h=d.b();h instanceof y?this.w(b,c,f):(Qg(this,h.b(),d),this.Ea(b,c,f,h.a()))};function mh(){}var nh={};u["rainbow.function.interpreted.optimise.Bind_A_Oother"]=nh;mh.prototype=new V;mh.prototype.J=mh;mh.prototype.className="Bind_A_Oother";nh.va=function(b,c,d){c=$(new mh,b,c,d);d=[];b.b().a().b().b().a().h(d);c.Gc=w(d);return c};
mh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);E(b,new oh(c,this.o,this));R(b,c,this.Gc)};mh.prototype.Ea=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=new v(h,c);c.add(d);c.add(f);R(b,c,this.o)};mh.prototype.D=function(b,c,d){d instanceof y&&Rg(this,d);var f=d.a(),h=d.b();h instanceof y?this.w(b,c,f):(Qg(this,h.b(),d),this.Ea(b,c,f,h.a()))};function ph(){}var qh={};u["rainbow.function.interpreted.optimise.Bind_A_R"]=qh;ph.prototype=new V;ph.prototype.J=ph;
ph.prototype.className="Bind_A_R";qh.va=function(b,c,d){return $(new ph,b,c,d)};ph.prototype.la=function(){g(new t("error: expected at least 1 arg, got none"))};ph.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d.a());c.add(d.b());R(b,c,this.o)};function rh(){}var sh={};u["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=sh;rh.prototype=new V;rh.prototype.J=rh;rh.prototype.className="Bind_D_A_A_A_d";sh.va=function(b,c,d){return $(new rh,b,c,d)};
rh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);d instanceof A||g(new TypeError);c.add(d.a());d=d.b();d instanceof A||g(new TypeError);c.add(d.a());d=d.b();d instanceof A||g(new TypeError);c.add(d.a());R(b,c,this.o)};rh.prototype.D=function(b,c,d){try{d.b().Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 1 arg, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())};function th(){}var uh={};u["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=uh;th.prototype=new V;
th.prototype.J=th;th.prototype.className="Bind_D_A_A_d";uh.va=function(b,c,d){return $(new th,b,c,d)};th.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);d instanceof A||g(new TypeError);c.add(d.a());d=d.b();d instanceof A||g(new TypeError);c.add(d.a());R(b,c,this.o)};th.prototype.D=function(b,c,d){Qg(this,d.b(),d);this.w(b,c,d.a())};function vh(){}var wh={};u["rainbow.function.interpreted.optimise.Bind_Obound"]=wh;vh.prototype=new V;vh.prototype.J=vh;
vh.prototype.className="Bind_Obound";wh.va=function(b,c,d){c=$(new vh,b,c,d);b=b.a();b instanceof A||g(new TypeError);b=b.b().b().a();b instanceof T||g(new TypeError);c.kd=b;return c};vh.prototype.la=function(b,c){var d=0,f;for(f in this.p)d++;c=new v(d,c);c.add(this.kd.v(c));R(b,c,this.o)};vh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);R(b,c,this.o)};
vh.prototype.D=function(b,c,d){if(d instanceof y)this.la(b,c);else{try{d.b().Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())}};function xh(){}var yh={};u["rainbow.function.interpreted.optimise.Bind_Oliteral"]=yh;xh.prototype=new V;xh.prototype.J=xh;xh.prototype.className="Bind_Oliteral";
yh.va=function(b,c,d){c=$(new xh,b,c,d);c.V=b.a().b().b().a();b=b.a().b().a();b instanceof K||g(new TypeError);if(c.mb(b,c.V))b=c.ob(b,c.V,m),b instanceof V||g(new TypeError),c.aa=b;return c};xh.prototype.la=function(b,c){if(this.aa!==l)this.aa.la(b,c);else{var d=0,f;for(f in this.p)d++;c=new v(d,c);c.add(this.V);R(b,c,this.o)}};xh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);R(b,c,this.o)};
xh.prototype.D=function(b,c,d){if(d instanceof y)this.la(b,c);else{try{d.b().Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())}};function zh(){}var Ah={};u["rainbow.function.interpreted.optimise.Bind_Oother"]=Ah;zh.prototype=new V;zh.prototype.J=zh;zh.prototype.className="Bind_Oother";Ah.va=function(b,c,d){c=$(new zh,b,c,d);c.V=b.a().b().b().a();b=[];c.V.h(b);c.Gc=w(b);return c};
zh.prototype.la=function(b,c){var d=0,f;for(f in this.p)d++;c=new v(d,c);E(b,new oh(c,this.o,this));R(b,c,this.Gc)};zh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);R(b,c,this.o)};zh.prototype.D=function(b,c,d){if(d instanceof y)this.la(b,c);else{try{d.b().Oa()}catch(f){f instanceof Ia||g(f),g(new t("expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())}};function Bh(){}var Ch={};u["rainbow.function.interpreted.optimise.Bind_R"]=Ch;
Bh.prototype=new V;Bh.prototype.J=Bh;Bh.prototype.className="Bind_R";Ch.va=function(b,c,d){return $(new Bh,b,c,d)};Bh.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=new v(f,c);c.add(d);R(b,c,this.o)};function Dh(){}var Eh={};u["rainbow.function.interpreted.optimise.stack.Stack_A"]=Eh;Dh.prototype=new Yg;Dh.prototype.J=Dh;Dh.prototype.className="Stack_A";Eh.Ra=function(b){return Eh.fa(b.z,b.p,Zg(b.p,b.body))};Eh.fa=function(b,c,d){return $(new Dh,b,c,d)};
Dh.prototype.t=function(b,c){S(b,l,this.o,[c])};Dh.prototype.w=function(b,c,d){S(b,c,this.o,[d])};Dh.prototype.g=function(b,c){Tg(this,1,c);this.t(b,c.a())};Dh.prototype.D=function(b,c,d){Tg(this,1,d);this.w(b,c,d.a())};function Fh(){}var Gh={};u["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=Gh;Fh.prototype=new Yg;Fh.prototype.J=Fh;Fh.prototype.className="Stack_A_A";Gh.Ra=function(b){return Gh.fa(b.z,b.p,Zg(b.p,b.body))};Gh.fa=function(b,c,d){return $(new Fh,b,c,d)};
Fh.prototype.U=function(b,c,d){S(b,l,this.o,[c,d])};Fh.prototype.Ea=function(b,c,d,f){S(b,c,this.o,[d,f])};Fh.prototype.g=function(b,c){Tg(this,2,c);this.U(b,c.a(),c.b().a())};Fh.prototype.D=function(b,c,d){Tg(this,2,d);this.Ea(b,c,d.a(),d.b().a())};function Hh(){}var Ih={};u["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=Ih;Hh.prototype=new Yg;Hh.prototype.J=Hh;Hh.prototype.className="Stack_A_A_A";Ih.Ra=function(b){return Ih.fa(b.z,b.p,Zg(b.p,b.body))};
Ih.fa=function(b,c,d){return $(new Hh,b,c,d)};Hh.prototype.Wa=function(b,c,d,f){S(b,l,this.o,[c,d,f])};Hh.prototype.Ob=function(b,c,d,f,h){S(b,c,this.o,[d,f,h])};Hh.prototype.g=function(b,c){Tg(this,3,c);this.Wa(b,c.a(),c.b().a(),c.b().b().a())};Hh.prototype.D=function(b,c,d){Tg(this,3,d);this.Ob(b,c,d.a(),d.b().a(),d.b().b().a())};function Jh(){}var Kh={};u["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=Kh;Jh.prototype=new Yg;Jh.prototype.J=Jh;Jh.prototype.className="Stack_A_A_A_A";
Kh.Ra=function(b){return Kh.fa(b.z,b.p,Zg(b.p,b.body))};Kh.fa=function(b,c,d){return $(new Jh,b,c,d)};Jh.prototype.g=function(b,c){Tg(this,4,c);var d=c.a(),f=c.b().a(),h=c.b().b().a(),k=c.b().b().b().a();S(b,l,this.o,[d,f,h,k])};Jh.prototype.D=function(b,c,d){Tg(this,4,d);var f=d.a(),h=d.b().a(),k=d.b().b().a(),d=d.b().b().b().a();S(b,c,this.o,[f,h,k,d])};function Lh(){}var Mh={};u["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=Mh;Lh.prototype=new Yg;Lh.prototype.J=Lh;
Lh.prototype.className="Stack_A_A_R";Mh.Ra=function(b){return Mh.fa(b.z,b.p,Zg(b.p,b.body))};Mh.fa=function(b,c,d){return $(new Lh,b,c,d)};Lh.prototype.D=function(b,c,d){S(b,c,this.o,[d.a(),d.b().a(),d.b().b()])};function Nh(){}var Oh={};u["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=Oh;Nh.prototype=new Yg;Nh.prototype.J=Nh;Nh.prototype.className="Stack_A_R";Oh.Ra=function(b){return Oh.fa(b.z,b.p,Zg(b.p,b.body))};Oh.fa=function(b,c,d){return $(new Nh,b,c,d)};
Nh.prototype.D=function(b,c,d){S(b,c,this.o,[d.a(),d.b()])};function Ph(){}var Qh={};u["rainbow.function.interpreted.optimise.stack.Stack_R"]=Qh;Ph.prototype=new Yg;Ph.prototype.J=Ph;Ph.prototype.className="Stack_R";Qh.Ra=function(b){return Qh.fa(b.z,b.p,Zg(b.p,b.body))};Qh.fa=function(b,c,d){return $(new Ph,b,c,d)};Ph.prototype.D=function(b,c,d){S(b,c,this.o,[d])};function Rh(){}var Sh={};u["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=Sh;Rh.prototype=new Yg;Rh.prototype.J=Rh;
Rh.prototype.className="Stack_D_A_A_A_A_d";Sh.Ra=function(b){return Sh.fa(b.z,b.p,Zg(b.p,b.body))};Sh.fa=function(b,c,d){return $(new Rh,b,c,d)};Rh.prototype.t=function(b,c){S(b,l,this.o,[c.a(),c.b().a(),c.b().b().a(),c.b().b().b().a()])};Rh.prototype.w=function(b,c,d){S(b,c,this.o,[d.a(),d.b().a(),d.b().b().a(),d.b().b().b().a()])};Rh.prototype.g=function(b,c){Tg(this,1,c);this.t(b,c.a())};Rh.prototype.D=function(b,c,d){Tg(this,1,d);this.w(b,c,d.a())};function Th(){}var Uh={};
u["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=Uh;Th.prototype=new Yg;Th.prototype.J=Th;Th.prototype.className="Stack_D_A_A_d";Uh.Ra=function(b){return Uh.fa(b.z,b.p,Zg(b.p,b.body))};Uh.fa=function(b,c,d){return $(new Th,b,c,d)};Th.prototype.t=function(b,c){S(b,l,this.o,[c.a(),c.b().a()])};Th.prototype.w=function(b,c,d){S(b,c,this.o,[d.a(),d.b().a()])};Th.prototype.g=function(b,c){Tg(this,1,c);this.t(b,c.a())};Th.prototype.D=function(b,c,d){Tg(this,1,d);this.w(b,c,d.a())};
function Vh(){}var Wh={};u["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=Wh;Vh.prototype=new Yg;Vh.prototype.J=Vh;Vh.prototype.className="Stack_A_Oliteral";Wh.Ra=function(b){var c=new Vh,d=Zg(b.p,b.body),b=$(c,b.z,b.p,d);b.V=b.z.b().a().b().b().a();c=b.z.b().a().b().a();c instanceof K||g(new TypeError);if(b.mb(c,b.V))c=b.ob(c,b.V,m),c instanceof V||g(new TypeError),b.aa=c;return b};Wh.fa=function(b,c,d){c=$(new Vh,b,c,d);c.V=b.a().b().b().a();return c};s=Vh.prototype;
s.t=function(b,c){this.aa!==l?this.aa.t(b,c):S(b,l,this.o,[c,this.V])};s.U=function(b,c,d){S(b,l,this.o,[c,d])};s.w=function(b,c,d){this.aa!==l?this.aa.w(b,c,d):S(b,c,this.o,[d,this.V])};s.Ea=function(b,c,d,f){S(b,c,this.o,[d,f])};s.g=function(b,c){if(c instanceof y)Rg(this,c);else{var d=c.a();c.b()instanceof y?this.t(b,d):this.U(b,d,c.b().a())}};s.D=function(b,c,d){if(d instanceof y)Rg(this,d);else{var f=d.a();d.b()instanceof y?this.w(b,c,f):this.Ad(b,c,f,d.b().a())}};function Xh(){}var Yh={};
u["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=Yh;Xh.prototype=new Yg;Xh.prototype.J=Xh;Xh.prototype.className="Stack_Oliteral";Yh.Ra=function(b){var c=new Xh,d=Zg(b.p,b.body),b=$(c,b.z,b.p,d);b.V=b.z.a().b().b().a();c=b.z.a().b().a();c instanceof K||g(new TypeError);if(b.mb(c,b.V))c=b.ob(c,b.V,m),c instanceof V||g(new TypeError),b.aa=c;return b};Yh.fa=function(b,c,d){c=$(new Xh,b,c,d);c.V=b.a().b().b().a();return c};s=Xh.prototype;
s.ua=function(b){this.aa!==l?this.aa.ua(b):S(b,l,this.o,[this.V])};s.t=function(b,c){S(b,l,this.o,[c])};s.la=function(b,c){this.aa!==l?this.aa.w(b,c):S(b,c,this.o,[this.V])};s.w=function(b,c,d){S(b,c,this.o,[d])};s.g=function(b,c){c instanceof y?this.ua(b):(Tg(this,1,c),this.t(b,c.a()))};s.D=function(b,c,d){d instanceof y?this.la(b):(Tg(this,1,d),this.w(b,c,d.a()))};function Zh(){Z(this,"macex")}Zh.prototype=new X;Zh.prototype.className="Macex";
Zh.prototype.g=function(b,c){if(c instanceof y)C(b,B);else{var d=c.a();if(d instanceof A){var f=d.a();f instanceof K?f.bound()?(f=f.value(),f=lc(f),f===l?C(b,d):(d=d.b(),d instanceof A||g(new TypeError),E(b,new $h(this)),Ja(f,b,d))):C(b,d):C(b,d)}else C(b,d)}};function $h(b){this.d=l;this.m(b)}$h.prototype=new M;$h.prototype.className="Macex.Again";$h.prototype.c=function(b){this.d.g(b,z(new A,Q(b),B))};function ai(){Z(this,"uniq")}ai.prototype=new X;ai.prototype.className="Uniq";
ai.prototype.ua=function(b){C(b,J("gs"+ ++bi))};ai.prototype.j=function(b){try{b.Oa()}catch(c){c instanceof Ia||g(new t("uniq: expects no args, got "+b))}return J("gs"+ ++bi)};var bi=0;function ci(){Z(this,"details")}ci.prototype=new X;ci.prototype.className="Details";ci.prototype.j=function(b){b=b.a();try{b instanceof Ba||g(new TypeError)}catch(c){c instanceof TypeError||g(c),g(new t("Wrong argument type: "+this+" expected an exception, got "+b))}return b.message()};function di(){Z(this,"err")}
di.prototype=new X;di.prototype.className="Err";di.prototype.j=function(b){g(new t(Sb(b.a(),this).value()))};function ei(){Z(this,"on-err")}ei.prototype=new X;ei.prototype.className="OnErr";ei.prototype.g=function(b,c){var d=new Uc(c.a(),b.N);d.m(this);E(b,d);c.b().a().g(b,B)};function fi(){Z(this,"protect");this.td=new gi(this)}fi.prototype=new X;fi.prototype.className="Protect";function gi(b){this.rd=b}gi.prototype=new pf;gi.prototype.Xb=function(b){b.m(this.rd)};
fi.prototype.g=function(b,c){var d=z(new A,new Xc(c.b().a()),z(new A,new bd("clear up 'protect/after' return value"),B));d.l(this.td);R(b,l,d);c.a().g(b,B)};function hi(){Z(this,"apply")}hi.prototype=new X;s=hi.prototype;s.className="Apply";s.ua=function(){g(new t("apply: expects at least 2 args, got none"))};s.t=function(b,c){g(new t("apply: expects at least 2 args, got "+c))};s.U=function(b,c,d){d instanceof A||g(new TypeError);c.g(b,d)};s.Wa=function(b,c,d,f){c.g(b,z(new A,d,f))};
s.g=function(b,c){var d=c.a(),f=c.b();f instanceof A||g(new TypeError);d.g(b,ii(this,f))};function ii(b,c){return c.b()instanceof y?vb(c.a(),b):z(new A,c.a(),ii(b,vb(c.b(),b)))}function ji(){Z(this,"eval")}ji.prototype=new X;ji.prototype.className="Eval";ji.prototype.g=function(b,c){E(b,new ki(this));Lf(b,c.a(),[])};function ki(b){this.d=l;this.m(b)}ki.prototype=new M;ki.prototype.className="Eval.ReduceAndExecute";ki.prototype.c=function(b){var c=[];Q(b).reduce().h(c);R(b,l,w(c))};
function li(){Z(this,"ssexpand")}li.prototype=new X;li.prototype.className="SSExpand";li.prototype.j=function(b){return Qf(hb(b.a(),this))};
function Qf(b){b=b.name();if(/:/.test(b)||/^~/.test(b)){b=b.split(":");if(1===b.length)b=mi(b[0]);else{for(var c=[J("compose")],d=0,f=b.length;d<f;d++)c.push(mi(b[d]));b=pb(c,B)}return b}if(Jg(b)){c=[J("andf")];b=ni(b);d=0;for(f=b.length;d<f;d++){var h=Sa(b[d]);h instanceof K||g(new TypeError);c.push(oi(h))}return w(c)}if(/[.!]/.test(b)){for(var c=b.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/),d=[],f=m,h=0,k=c.length;h<k;h++)if(""!==c[h]){var p=Sa(c[h].replace(/#p/g,
"%").replace(/#h/g,"#"));p===Wa||p===jb?(f&&g(new t("Bad syntax "+b)),f=j):f=m;d.unshift(p)}f&&d.unshift(J("#<eof>"));return pi(d,0)}g(new t("Unknown syntax "+b))}function ni(b){if(0===b.length)return[""];if(b.charCodeAt(0)===Kg)return b=ni(b.substring(1)),b[0]=Lg+b[0],b;return b.charCodeAt(b.length-1)===Kg?(b=ni(b.substring(0,b.length-1)),b[b.length-1]+=Lg,b):b.split(Lg)}
function pi(b,c){var d=oi(b[c++]),f=l;c<b.length&&(f=b[c++],f instanceof K||g(new TypeError));d=f===jb?w([J("quote"),d]):d;return c<b.length?w([pi(b,c),d]):f!==l?w([J("get"),d]):d}function qi(b){try{return Na(b)}catch(c){c instanceof Ea||g(c),g(new t("Couldn't read value of symbol: "+b,c))}}function oi(b){if(b instanceof y)return b;b instanceof K||g(new TypeError);return qi(b.name())}function mi(b){return/^~/.test(b)?w([J("complement"),qi(b.substring(1))]):qi(b)}var Lg="&",Kg=38;
function ri(){Z(this,"ssyntax")}ri.prototype=new X;ri.prototype.className="SSyntax";ri.prototype.j=function(b){return b.a()instanceof K&&Pf(b.a())?$a:B};function Pf(b){var c;c=b.name();if(!(c=/:/.test(c)||/^~/.test(c)))if(!(c=Jg(b.name())))c=/[.!]/.test(b.name());return c}function si(){Z(this,"java-debug")}si.prototype=new X;si.prototype.className="JavaDebug";si.prototype.j=function(b){return b.a()};function ti(){Z(this,"java-invoke")}ti.prototype=new X;ti.prototype.className="JavaInvoke";
ti.prototype.j=function(b){var c;var d=b.a();try{d instanceof rc||g(new TypeError),c=d}catch(f){f instanceof TypeError||g(f),g(new t("Wrong argument type: "+this+" expected a java-object, got "+d))}var d=hb(b.b().a(),this).name(),h=b.b().b().a();h instanceof A||g(new TypeError);b=vc;c=c.Fc;var k=Object(c)[d];"[object Function]"!==Object.prototype.toString.call(k)&&g(new t("Field "+d+" is not a method on "+c));d=k.apply(c,tc(h));return b(d)};function ui(){Z(this,"car")}ui.prototype=new X;
ui.prototype.className="Car";ui.prototype.t=function(b,c){C(b,c.a())};ui.prototype.j=function(b){Ig(b,1,this.className);return b.a().a()};function vi(){Z(this,"cdr")}vi.prototype=new X;vi.prototype.className="Cdr";vi.prototype.t=function(b,c){C(b,c.b())};vi.prototype.j=function(b){Ig(b,1,this.className);return b.a().b()};function wi(){Z(this,"cons")}wi.prototype=new X;wi.prototype.className="Cons";wi.prototype.U=function(b,c,d){C(b,z(new A,c,d))};
wi.prototype.j=function(b){Ig(b,2,this.className);return z(new A,b.a(),b.b().a())};function xi(){Z(this,"len")}xi.prototype=new X;xi.prototype.className="Len";xi.prototype.j=function(b){Ob(b,this.className,1);return new P(b.a().ka(),1)};function yi(){Z(this,"newstring")}yi.prototype=new X;yi.prototype.className="NewString";
yi.prototype.j=function(b){var c=b.a();c instanceof O||g(new TypeError);var d=Jb;b.b()instanceof y||(d=b.b().a(),d instanceof N||g(new TypeError));for(var b=[],f=0;f<c.I();f++)b.push(d.value());return F(b.join(""))};function zi(){Z(this,"scar")}zi.prototype=new X;zi.prototype.className="Scar";zi.prototype.U=function(b,c,d){C(vm,c.Vb(d))};zi.prototype.j=function(b){return b.a().Vb(b.b().a())};function Ai(){Z(this,"scdr")}Ai.prototype=new X;Ai.prototype.className="Scdr";
Ai.prototype.j=function(b){var c=b.a();c instanceof A||g(new TypeError);b=b.b().a();c.Jc(b);return b};function Bi(){Z(this,"acos")}Bi.prototype=new X;Bi.prototype.className="Acos";Bi.prototype.j=function(b){Ob(b,this.className,1);b=Math.acos(kb(b.a(),this).F());return new H(b)};function Ci(){Z(this,"+")}Ci.prototype=new X;s=Ci.prototype;s.className="Add";s.ua=function(b){C(b,gc)};s.t=function(b,c){C(b,c)};s.U=function(b,c,d){C(b,c.add(d))};s.Wa=function(b,c,d,f){C(b,c.add(d).add(f))};
s.j=function(b){if(b instanceof y)return gc;for(var c=b.a(),b=b.b();!(b instanceof y);)c=c.add(b.a()),b=b.b();return c};function Di(){Z(this,"asin")}Di.prototype=new X;Di.prototype.className="Asin";Di.prototype.j=function(b){Ob(b,this.className,1);b=Math.asin(kb(b.a(),this).F());return new H(b)};function Ei(){Z(this,"atan")}Ei.prototype=new X;Ei.prototype.className="Atan";Ei.prototype.j=function(b){Ob(b,this.className,1);b=Math.atan(kb(b.a(),this).F());return new H(b)};
function Fi(){Z(this,"complex-parts")}Fi.prototype=new X;Fi.prototype.className="ComplexParts";Fi.prototype.j=function(b){Ob(b,this.className,1);b=ac(b.a(),this);return w([new H(b.X),new H(b.P)])};function Gi(){Z(this,"cos")}Gi.prototype=new X;Gi.prototype.className="Cosine";Gi.prototype.j=function(b){Ob(b,this.className,1);b=Math.cos(kb(b.a(),this).F());return new H(b)};function Hi(){Z(this,"/")}Hi.prototype=new X;Hi.prototype.className="Divide";
Hi.prototype.j=function(b){b instanceof y&&g(new t("Function `/` expected at least 1 arg"));return Ii(b).zc(b)};function Ji(){Z(this,"expt")}Ji.prototype=new X;Ji.prototype.className="Expt";Ji.prototype.j=function(b){Ob(b,this.className,2);var c=b.a();c instanceof O||g(new TypeError);b=b.b().a();b instanceof O||g(new TypeError);if(c instanceof I)return dc(c,b);if(b instanceof I)return dc(new I(c.F(),0),b);c=c.F();b=b.F();return new H(Math.pow(c,b))};function Ki(){Z(this,"log")}Ki.prototype=new X;
Ki.prototype.className="Logarithm";Ki.prototype.j=function(b){Ob(b,this.className,1);b=kb(b.a(),this);return b instanceof I?b.log():new H(Math.log(b.F()))};function Li(){Z(this,"make-complex")}Li.prototype=new X;Li.prototype.className="MakeComplex";Li.prototype.j=function(b){Ob(b,this.className,2);var c=kb(b.a(),this),b=kb(b.b().a(),this);return new I(c.F(),b.F())};function Mi(){for(;;){var b=Math.floor(9007199254740992*Math.od());if(9007199254740992>b)return b}}
function Ii(b){if(b instanceof y)return Ni;if(b.a()instanceof H)return Oi;if(b.a()instanceof I)return complexOps;b.b()instanceof A||g(new TypeError);return Ii(b.b())}function Pi(){}Pi.prototype.qc=i;Pi.prototype.multiply=i;Pi.prototype.zc=i;function Qi(){}Qi.prototype=new Pi;Qi.prototype.qc=function(b){return Ua(Ri(this,b))};function Ri(b,c){if(c instanceof y)return 0;var d=c.a();d instanceof O||g(new TypeError);var d=d.F(),f=c.b();f instanceof A||g(new TypeError);return d+Ri(b,f)}
Qi.prototype.multiply=function(b){return Ua(Si(this,b))};Qi.prototype.zc=function(b){var c=b.b(),d=b.a();d instanceof O||g(new TypeError);c=c instanceof y?1/d.F():d.F();b=b.b();b instanceof A||g(new TypeError);return Ua(c/Si(this,b))};function Si(b,c){if(c instanceof y)return 1;var d=c.a();d instanceof O||g(new TypeError);var d=d.F(),f=c.b();f instanceof A||g(new TypeError);f=Si(b,f);return d*f}var Oi=new Qi;function Ti(){}Ti.prototype=new Pi;
Ti.prototype.qc=function(b){if(b instanceof y)return gc;var c=b.a();c instanceof P||g(new TypeError);b=b.b();b instanceof A||g(new TypeError);return c.Sb(this.qc(b))};Ti.prototype.multiply=function(b){if(b instanceof y)return ic;var c=b.a();c instanceof P||g(new TypeError);b=b.b();b instanceof A||g(new TypeError);return fc(c,this.multiply(b))};
Ti.prototype.zc=function(b){var c=b.b(),d=b.a();d instanceof P||g(new TypeError);c=c instanceof y?new P(d.R,d.ea):d;b=b.b();b instanceof A||g(new TypeError);b=this.multiply(b);b=new P(b.R,b.ea);return fc(c,b)};var Ni=new Ti;function Ui(){Z(this,"mod")}Ui.prototype=new X;Ui.prototype.className="Mod";Ui.prototype.U=function(b,c,d){c instanceof O||g(new TypeError);d instanceof O||g(new TypeError);C(b,c.Uc(d))};Ui.prototype.g=function(b,c){Ob(c,this.className,2);this.U(b,c.a(),c.b().a())};
function Vi(){Z(this,"*")}Vi.prototype=new X;s=Vi.prototype;s.className="Multiply";s.ua=function(b){C(b,ic)};s.t=function(b,c){C(b,c)};s.U=function(b,c,d){C(b,c.multiply(d))};s.Wa=function(b,c,d,f){C(b,c.multiply(d).multiply(f))};s.j=function(b){if(b instanceof y)return ic;for(var c=b.a(),b=b.b();!(b instanceof y);)c=c.multiply(b.a()),b=b.b();return c};function Wi(){Z(this,"polar-coordinates")}Wi.prototype=new X;Wi.prototype.className="PolarCoordinates";
Wi.prototype.j=function(b){Ob(b,this.className,1);b=ac(b.a(),this);return w([new H(Math.sqrt(b.X*b.X+b.P*b.P)),new H(Math.atan2(b.P,b.X))])};function Xi(){Z(this,"quotient")}Xi.prototype=new X;Xi.prototype.className="Quotient";Xi.prototype.j=function(b){Ig(b,2,this.className);var c=lb(b.a(),this),d=lb(b.b().a(),this);(!c.ma()||!d.ma())&&g(new t("Type error: "+this+" : expected integer, got "+b));b=c.I()/d.I();return G(0>b?Math.ceil(b):Math.floor(b))};function Yi(){Z(this,"rand")}Yi.prototype=new X;
Yi.prototype.className="Rand";Yi.prototype.j=function(b){if(b instanceof y)return new H(Math.od());var c=b.a();c instanceof O||g(new TypeError);c.ma()||g(new t("rand: requires one exact integer argument, got "+b));return new P(Math.abs(Mi()%c.I()),1)};function Zi(){Z(this,"sin")}Zi.prototype=new X;Zi.prototype.className="Sine";Zi.prototype.j=function(b){Ob(b,this.className,1);b=Math.sin(kb(b.a(),this).F());return new H(b)};function $i(){Z(this,"sqrt")}$i.prototype=new X;$i.prototype.className="Sqrt";
$i.prototype.t=function(b,c){C(b,c.sqrt())};$i.prototype.g=function(b,c){Ig(c,1,this.className);this.t(b,c.a())};function aj(){Z(this,"-")}aj.prototype=new X;s=aj.prototype;s.className="Subtract";s.t=function(){g(new t("- : expected at least 1 arg"))};s.t=function(b,c){c instanceof O||g(new TypeError);C(b,c.sb())};s.U=function(b,c,d){d instanceof O||g(new TypeError);C(b,c.add(d.sb()))};
s.j=function(b){b instanceof y&&g(new t("Function `-` expected at least 1 arg"));var c=b.a();c instanceof O||g(new TypeError);c=c.sb();b=b.b();b instanceof A||g(new TypeError);b instanceof y?b=c:(b=z(new A,c,b),b=Ii(b).qc(b).sb());return b};function bj(){Z(this,"tan")}bj.prototype=new X;bj.prototype.className="Tangent";bj.prototype.j=function(b){Ob(b,this.className,1);b=Math.tan(kb(b.a(),this).F());return new H(b)};function cj(){Z(this,"trunc")}cj.prototype=new X;cj.prototype.className="Trunc";
cj.prototype.j=function(b){Ob(b,this.className,1);b=b.a();b instanceof O||g(new TypeError);b=b.F();return new P(Math.floor(b),1)};function dj(){Z(this,"bound")}dj.prototype=new X;dj.prototype.className="Bound";dj.prototype.ua=function(){g(new t("bound: requires 1 arg"))};dj.prototype.t=function(b,c){c instanceof K||g(new TypeError);C(b,Cb(c.bound()))};dj.prototype.j=function(b){Ob(b,this.className,1);b=hb(b.a(),this);return Cb(b.bound())};function ej(){Z(this,"exact")}ej.prototype=new X;
ej.prototype.className="Exact";ej.prototype.j=function(b){b=kb(b.a(),this);return Cb(b instanceof P&&b.ma())};function fj(){Z(this,">")}fj.prototype=new X;s=fj.prototype;s.className="GreaterThan";s.ua=function(b){C(b,$a)};s.t=function(b){C(b,$a)};s.U=function(b,c,d){C(b,0>=c.ra(d)?B:$a)};s.j=function(b){if(2>b.ka())return $a;var c=b.a(),b=b.b();for(b instanceof A||g(new TypeError);!(b instanceof y);){var d=b.a();if(0>=c.ra(d))return B;c=d;b=b.b();b instanceof A||g(new TypeError)}return $a};
function gj(){Z(this,"is")}gj.prototype=new X;s=gj.prototype;s.className="Is";s.ua=function(b){C(b,$a)};s.t=function(b){C(b,$a)};s.U=function(b,c,d){C(b,Cb(c.Ga(d)))};s.j=function(b){return hj(this,b.a(),b.b())};function hj(b,c,d){return d instanceof y?$a:!c.Ga(d.a())?B:hj(b,c,d.b())}function ij(){Z(this,"<")}ij.prototype=new X;s=ij.prototype;s.className="LessThan";s.ua=function(b){C(b,$a)};s.t=function(b){C(b,$a)};s.U=function(b,c,d){C(b,0>c.ra(d)?$a:B)};
s.j=function(b){var c=b.a(),b=b.b();for(b instanceof A||g(new TypeError);!(b instanceof y);){var d=b.a();if(0<=c.ra(d))return B;c=d;b=b.b();b instanceof A||g(new TypeError)}return $a};function jj(){Z(this,"rainbow-debug")}jj.prototype=new X;jj.prototype.className="RainbowDebug";jj.prototype.g=function(b){Nc(b,Df);C(b,J(this.ba))};function kj(){Z(this,"rainbow-profile")}kj.prototype=new X;kj.prototype.className="RainbowProfile";kj.prototype.ua=function(b){this.profile(b);C(b,B)};
kj.prototype.t=function(b,c){c instanceof oc||g(new TypeError);this.profile(c);C(b,B)};kj.prototype.profile=function(b){Nc(b,If)};function lj(){Z(this,"rainbow-profile-report")}lj.prototype=new X;lj.prototype.className="RainbowProfileReport";lj.prototype.ua=function(b){C(b,this.pd(b))};lj.prototype.t=function(b,c){c instanceof oc||g(new TypeError);C(b,this.pd(b))};function mj(){Z(this,"current-gc-milliseconds")}mj.prototype=new X;mj.prototype.className="CurrentGcMilliseconds";
mj.prototype.g=function(b){C(b,G(1))};function nj(){Z(this,"current-process-milliseconds")}nj.prototype=new X;nj.prototype.className="CurrentProcessMilliseconds";nj.prototype.g=function(b){C(b,G(1))};function oj(){Z(this,"declare")}oj.prototype=new X;oj.prototype.className="Declare";oj.prototype.U=function(b,c,d){c===pj?(c=Mf,Mf=d,C(b,c)):C(b,B)};oj.prototype.g=function(b,c){this.U(b,c.a(),c.b().a())};var pj=J("atstrings");function qj(){Z(this,"msec")}qj.prototype=new X;qj.prototype.className="MSec";
qj.prototype.j=function(){return G((new Date).getTime())};function rj(){Z(this,"seconds")}rj.prototype=new X;rj.prototype.className="Seconds";rj.prototype.j=function(){var b=(new Date).getTime()/1E3;return G(0>b?Math.ceil(b):Math.floor(b))};function sj(){Z(this,"maptable")}sj.prototype=new X;sj.prototype.className="MapTable";sj.prototype.U=function(b,c,d){C(b,d);d instanceof Ga||g(new TypeError);C(b,yc(d));c=new ed(c);c.m(this);E(b,c)};
sj.prototype.g=function(b,c){Ig(c,2,this.className);this.U(b,c.a(),c.b().a())};function tj(){Z(this,"sref")}tj.prototype=new X;tj.prototype.className="Sref";tj.prototype.Wa=function(b,c,d,f){C(b,c.pc(d,f))};tj.prototype.g=function(b,c){Ig(c,3,this.className);this.Wa(b,c.a(),c.b().a(),c.b().b().a())};function uj(){Z(this,"table")}uj.prototype=new X;uj.prototype.className="Table";
uj.prototype.g=function(b,c){var d=new Ga;C(b,d);if(!(c instanceof y)){var f=new bd("table-initialiser");f.m(this);E(b,f);c.a().g(b,w([d]))}};function vj(){Z(this,"atomic-invoke")}vj.prototype=new X;vj.prototype.className="AtomicInvoke";vj.prototype.t=function(b,c){for(;b!==wj&&wj!==l;);wj=b;xj++;var d=new yj;d.m(this);E(b,d);c.g(b,B)};vj.prototype.g=function(b,c){this.t(b,c.a())};function yj(){this.d=l}yj.prototype=new M;yj.prototype.className="AtomicInvoke.ReleaseLock";
yj.prototype.c=function(){xj--;0===xj&&(wj=l)};var wj=l,xj=0;function zj(){Z(this,"break-thread")}zj.prototype=new X;zj.prototype.className="BreakThread";zj.prototype.j=function(b){b=b.a();b instanceof oc||g(new TypeError);Nc(b,Ff);return B};function Aj(){Z(this,"ccc")}Aj.prototype=new X;Aj.prototype.className="CCC";Aj.prototype.t=function(b,c){c instanceof y&&g(new t("Can't ccc nil!"));var d=new Bj(b);c.t(b,d)};Aj.prototype.g=function(b,c){Ob(c,this.className,1);this.t(b,c.a())};
function Bj(b){this.Wb=b.copy();this.yd=m}Bj.prototype=new x;s=Bj.prototype;s.className="CCC.ContinuationWrapper";s.t=function(b,c){var d;a:{for(d=0;d<b.i;d++)if(b.G[d]!==this.Wb.G[d]){d-=1;break a}d=b.i}for(var f=[],h=[];d<b.i;)Fc(b).a().Nb&&(f.push(Fc(b)),h.push(b.ja[b.i])),b.i--;d=[f,h];this.Wb.copyTo(b);C(b,c);for(f=d[0].length-1;0<=f;f--)h=d[1][f],h instanceof v||g(new TypeError),d[0][f]instanceof A||g(new TypeError),R(b,h,instructions)};s.g=function(b,c){this.t(b,c.a())};s.type=function(){return Hg};
s.toString=function(){return"#<continuation ip:"+this.Wb.i+";ap:"+this.Wb.N+";VM#"+this.Wb.Kc+">"};function Cj(){Z(this,"dead")}Cj.prototype=new X;Cj.prototype.className="Dead";Cj.prototype.g=function(b,c){var d=c.a();d instanceof oc||g(new TypeError);C(b,Cb(d.cc))};function Dj(){Z(this,"kill-thread")}Dj.prototype=new X;Dj.prototype.className="KillThread";Dj.prototype.g=function(b,c){var d=c.a();d instanceof oc||g(new TypeError);Nc(d,Ff);C(b,B)};function Ej(){Z(this,"thread-local")}Ej.prototype=new X;
Ej.prototype.className="NewThreadLocal";Ej.prototype.j=function(){return new Xb};function Fj(){Z(this,"thread-local-ref")}Fj.prototype=new X;Fj.prototype.className="ThreadLocalGet";Fj.prototype.j=function(b){return Zb(b.a(),this).get()};function Gj(){Z(this,"thread-local-set")}Gj.prototype=new X;Gj.prototype.className="ThreadLocalSet";Gj.prototype.j=function(b){var c=Zb(b.a(),this),b=b.b().a();c.set(b);return b};function Hj(){Z(this,"annotate")}Hj.prototype=new X;Hj.prototype.className="Annotate";
Hj.prototype.j=function(b){var c=b.a(),b=b.b().a();return c===b.type()?b:new kc(c,b)};function Ij(){Z(this,"coerce");Jj()}Ij.prototype=new X;Ij.prototype.className="Coerce";Ij.prototype.U=function(b,c,d){var f=c.type();if(f===d)C(b,c);else try{d instanceof K||g(new TypeError),f instanceof K||g(new TypeError),(d.Ab[f]||l).t(b,c)}catch(h){h instanceof Kj&&g(new t("Can't coerce "+c+" to "+d)),g(new t("Can't coerce "+c+" ( a "+c.type()+" ) to "+d,h))}};
Ij.prototype.Wa=function(b,c,d,f){var h=c.type();if(h===d)C(b,c);else try{d instanceof K||g(new TypeError),h instanceof K||g(new TypeError),(d.Ab[h]||l).U(b,c,f)}catch(k){k instanceof Kj&&g(new t("Can't coerce "+c+" to "+d)),g(new t("Can't coerce "+c+" ( a "+c.type()+" ) to "+d,k))}};Ij.prototype.g=function(b,c){c.Bb(2)?this.U(b,c.a(),c.b().a()):c.Bb(3)?this.Wa(b,c.a(),c.b().a(),c.b().b().a()):g(new t("coerce expects 2 or 3 args, got "+c))};function Lj(){Z(this,"rep")}Lj.prototype=new X;
Lj.prototype.className="Rep";Lj.prototype.j=function(b){var c=b.a();if(c instanceof kc){b=b.a();try{b instanceof kc||g(new TypeError)}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+this+" expected a Tagged, got "+b))}b=b.wb}else b=c;return b};function Mj(){Z(this,"type")}Mj.prototype=new X;Mj.prototype.className="Type";Mj.prototype.t=function(b,c){C(b,c.type())};Mj.prototype.j=function(b){Ob(b,this.className,1);return b.a().type()};
var Qb=J("string"),Nj=J("sym"),Oj=J("int"),Pj=J("num"),Qj=J("cons"),Rj=J("char");
function Jj(){ib(Qj,Qb,new Rb("string-cons",function(b){b instanceof Qa||g(new TypeError);for(var b=b.value(),c=[],d=0;d<b.length;d++)c.push(Ra(b.charCodeAt(d)));return w(c)}));ib(Qb,Qj,new Rb("cons-string",function(b){b instanceof A||g(new TypeError);for(var c=[];!(b instanceof y);)c.push(b.a().bb()),b=b.b(),b instanceof A||g(new TypeError);return F(c.join(""))}));ib(Qb,Oj,new Rb("int-string",function(b){return this.zb(b,jc)},function(b,c){c instanceof O||g(new TypeError);b instanceof O||g(new TypeError);
var d;b instanceof I?d=F(b.toString()):(b instanceof H&&10!==c.I()&&g(new Kj),d=b instanceof P?b.stringify(c):Sj(b,c));return d}));ib(Qb,Pj,new Rb("num-string",function(b){return this.zb(b,jc)},function(b,c){c instanceof O||g(new TypeError);b instanceof O||g(new TypeError);var d;b instanceof I?d=F(b.toString()):(b instanceof H&&10!==c.I()&&g(new Kj),d=b instanceof P?b.stringify(c):Sj(b,c));return d}));ib(Nj,Qb,new Rb("string-sym",function(b){b instanceof Qa||g(new TypeError);return Sa(b.value())}));
ib(Qb,Nj,new Rb("sym-string",function(b){return b instanceof y?F(""):F(b.bb())}));ib(Oj,Rj,new Rb("char-int",function(b){b instanceof N||g(new TypeError);b=b.value();return G(b)},function(b){return this.Jb(b)}));ib(Oj,Pj,new Rb("num-int",function(b){b instanceof O||g(new TypeError);return b.round()},function(b){return this.Jb(b)}));ib(Pj,Oj,new Rb("int-num",ba()));ib(Rj,Oj,new Rb("int-char",function(b){b instanceof O||g(new TypeError);b.ma()||g(new Kj);return Ra(b.I())}));ib(Qb,Rj,new Rb("char-string",
function(b){b instanceof N||g(new TypeError);b=b.value();return F(String.fromCharCode(b))}));ib(Nj,Rj,new Rb("char-sym",function(b){b instanceof N||g(new TypeError);b=b.value();return Sa(String.fromCharCode(b))}));ib(Pj,Qb,new Rb("string-num",function(b){return this.zb(b,jc)},function(b,c){c instanceof O||g(new TypeError);b instanceof Qa||g(new TypeError);var d=b.value().toLowerCase();if("+inf.0"===d)d=new H(1/0);else if("-inf.0"===d)d=new H(-1/0);else if("+nan.0"===d)d=new H(0/0);else{var f;if(/i$/i.test(d))try{f=
$b()}catch(h){h instanceof Ea||g(h),g(new Kj)}else/\./.test(d)||15>c.I()&&/.e./.test(d)?d=Tj(d,c.I()):/\//.test(d)?d=Uj(d,c.I()):(f=c.I(),d=G(parseInt(d,~~f))),f=d;d=f}return d}));ib(Oj,Qb,new Rb("string-int",function(b){return this.zb(b,jc)},function(b,c){c instanceof O||g(new TypeError);b instanceof Qa||g(new TypeError);var d=b.value().toLowerCase();("+inf.0"===d||"-inf.0"===d||"+nan.0"===d||/i$/i.test(d))&&g(new Kj);if(/\./.test(d)||15>c.I()&&/.e./i.test(d))return d=Tj(d,c.I()),d instanceof H||
g(new TypeError),d.nc();if(/\//.test(d))return d=Uj(d,c.I()),d instanceof P||g(new TypeError),d.nc();var f=c.I();return G(parseInt(d,~~f))}))}function Sj(b,c){if(10===c.I())return F(b.toString());var d=b.I().toString(~~c.I());return F(""+d+".0")}function Uj(b,c){var d=b.split(/\//g);2<d.length&&g(new Kj);return new P(parseInt(d[0],~~c),parseInt(d[1],~~c))}
function Tj(b,c){var d=m;/^-/.test(b)&&(d=j,b=b.substring(1));b=b.toUpperCase();/E/.test(b)||(b+="E0");if(/\./.test(b))/^\./.test(b)&&(b="0"+b);else var f=b.split(/E/g),b=f[0]+".0E"+f[1];var f=b.split(/\./g),h=parseInt(f[0],~~c),f=f[1].split(/E/g);/^\+/.test(f[1])&&(f[1]=f[1].substring(1));f=(h+parseInt(f[0],~~c)/Math.pow(c,f[0].length))*Math.pow(c,parseInt(f[1],~~c));d&&(f=-f);return Ua(f)}function Rb(b,c,d){this.ba=b;if(c!==i)this.Jb=c;if(d!==i)this.zb=d}Rb.prototype=new x;s=Rb.prototype;
s.className="Typing.Coercion";s.type=function(){return J("fn")};s.Jb=function(){g(new t("not implemented: "+name+".coerce 1 arg"))};s.zb=function(){g(new t("not implemented: "+name+".coerce 2 args"))};s.t=function(b,c){C(b,this.Jb(c))};s.U=function(b,c,d){C(b,this.zb(c,d))};function Kj(){}Kj.prototype=Error();function Vj(b){this.wa=b}Vj.prototype=new Eb;s=Vj.prototype;s.className="Input";
s.lc=function(b,c){return this.wa.lc(function(c,f){return c?b(new t("Cannot read byte from "+this,c)):f===l?b(l,B):b(l,G(f))},c)};function Wj(b,c,d){return b.wa.mc(function(b,d){return b?c(new t("reading character: "+b)):d===l?c(l,B):c(l,Ra(d))},d)}function Xj(b,c,d,f){return Oa(b.wa,function(b,f){return b?d(new t("Can't parse input: "+b,b)):f===l?d(l,c):d(l,f)},f)}s.type=function(){return Yj};s.qa=o("wa");s.close=function(){this.xd=j;this.wa.close()};
function Zj(b,c){try{return b instanceof Vj||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected input-port, got "+b))}}var Yj=J("input");function $j(b){this.kb=b}$j.prototype=new Eb;s=$j.prototype;s.className="Output";s.write=function(b){this.kb.$a(""+b)};s.type=function(){return ak};s.qa=o("kb");s.close=function(){this.kb.close()};s.tc=function(b){this.kb.tc(b)};
function bk(b,c){try{return b instanceof $j||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new t("Wrong argument type: "+c+" expected output-port, got "+b))}}s.flush=function(){this.kb.flush()};var ak=J("output");
function sa(b){function c(){if(b.length<=h)return m;var c=b.charCodeAt(h++);f.push(c>>>8&255,c&255);return j}function d(){return 0!==f.length||c()?f.shift():l}var f=[],h=0;Vj.call(this,{lc:function(b){b(l,d());return j},mc:function(b){var c=d(),f=d();b(l,f===l?l:c<<8|f);return j},lb:function(b){b(l,2<=f.length||c()?f[0]<<8|f[1]:l);return j},close:n()})}sa.prototype=new Vj(i);sa.prototype.className="StringInputPort";
function ck(){var b=this;b.Rb=[];b.rb=l;$j.call(this,{$a:function(c){if(b.rb===l)b.Rb.push(c);else for(var d=0,f=c.length;d<f;d++){var h=c.charCodeAt(d);b.Rb.push(String.fromCharCode(b.rb<<8|h>>>8&255));b.rb=h&255}},tc:function(c){b.rb===l?b.rb=c:(b.Rb.push(String.fromCharCode(b.rb<<8|c)),b.rb=l)},close:n(),flush:n()})}ck.prototype=new $j(i);ck.prototype.className="StringOutputPort";ck.prototype.value=function(){var b=this.Rb.join("");this.Rb=[b];return F(b)};ck.prototype.toString=q("#<string-output-port>");
function dk(){this.kb=la}dk.prototype=new $j(i);dk.prototype.className="IO.Anon_STD_OUT_";dk.prototype.close=n();dk.prototype.toString=q("IO.STD_OUT");var ek=new dk;function fk(){this.kb=na}fk.prototype=new $j(i);fk.prototype.className="IO.Anon_STD_ERR_";fk.prototype.close=n();fk.prototype.toString=q("IO.STD_ERR");var gk=new fk;function hk(){this.wa=ja}hk.prototype=new Vj(i);hk.prototype.className="IO.Anon_STD_IN_";hk.prototype.close=n();hk.prototype.toString=q("IO.STD_IN");
var ik={value:new hk},jk={value:ek};function kk(b,c){return b instanceof y?jk.value:bk(b,c)}function lk(b,c){return b instanceof y?ik.value:Zj(b,c)}function ok(b){for(;!(b instanceof y);){var c=b.a();c instanceof Vj?c.close():c instanceof $j?c.close():c instanceof rc?c.close():g(new t("close: expected Input or Output object; got "+c));b=b.b();b instanceof A||g(new TypeError)}return B}function pk(){Z(this,"close")}pk.prototype=new X;pk.prototype.className="Close_Builtin";pk.prototype.j=function(b){return ok(b)};
function qk(){Z(this,"disp")}qk.prototype=new X;qk.prototype.className="Disp";qk.prototype.t=function(b,c){jk.value.write(c.bb());C(b,B)};qk.prototype.j=function(b){var c=kk(b.b().a(),this),b=b.a();c.write(b.bb());return B};function rk(){Z(this,"flushout")}rk.prototype=new X;rk.prototype.className="FlushOut";rk.prototype.j=function(){jk.value.flush();return $a};function sk(){Z(this,"force-close")}sk.prototype=new X;sk.prototype.className="ForceClose";sk.prototype.j=function(b){return ok(b)};
function tk(){Z(this,"stderr")}tk.prototype=new X;tk.prototype.className="StdErr";tk.prototype.j=function(){return gk};function uk(){Z(this,"stdin")}uk.prototype=new X;uk.prototype.className="StdIn";uk.prototype.j=function(b){Ig(b,0,this.className);return ik.value};function vk(){Z(this,"stdout")}vk.prototype=new X;vk.prototype.className="StdOut";vk.prototype.j=function(){return jk.value};function wk(){Z(this,"write")}wk.prototype=new X;wk.prototype.className="Write";
wk.prototype.j=function(b){kk(b.b().a(),this).write(b.a());return B};function xk(){Z(this,"writeb")}xk.prototype=new X;xk.prototype.className="WriteB";xk.prototype.j=function(b){var c=kk(b.b().a(),this),b=lb(b.a(),this);b.ma()||g(new t("write byte: expected byte, got "+b));c.tc(b.I());return B};function yk(){Z(this,"writec")}yk.prototype=new X;yk.prototype.className="WriteC";yk.prototype.j=function(b){var c=kk(b.b().a(),this),d=Hb(b.a(),this);c.kb.$a(String.fromCharCode(d.value()));return b.a()};
function zk(){Z(this,"instring")}zk.prototype=new X;zk.prototype.className="InString";zk.prototype.j=function(b){return new sa(Sb(b.a(),this).value())};function Ak(){Z(this,"inside")}Ak.prototype=new X;Ak.prototype.className="Inside";Ak.prototype.j=function(b){b=b.a();try{b instanceof ck||g(new TypeError)}catch(c){c instanceof TypeError||g(c),g(new t("Wrong argument type: "+this+" expected a StringOutputPort, got "+b))}return b.value()};function Bk(){Z(this,"outstring")}Bk.prototype=new X;
Bk.prototype.className="OutString";Bk.prototype.j=function(){return new ck};function Ck(){Z(this,"call-w/stdin")}Ck.prototype=new X;Ck.prototype.className="CallWStdIn";Ck.prototype.g=function(b,c){var d=new cd(ik,ik.value);d.m(this);E(b,d);ik.value=Zj(c.a(),this);c.b().a().g(b,B)};function Dk(){Z(this,"call-w/stdout")}Dk.prototype=new X;Dk.prototype.className="CallWStdOut";Dk.prototype.g=function(b,c){var d=new cd(jk,jk.value);d.m(this);E(b,d);jk.value=bk(c.a(),this);c.b().a().g(b,B)};
function Ek(){Z(this,"readb")}Ek.prototype=new X;Ek.prototype.className="ReadB";Ek.prototype.t=function(b,c){E(b,new Fk(lk(c,this),this))};Ek.prototype.g=function(b,c){E(b,new Fk(lk(c.a(),this),this))};function Fk(b,c){this.d=l;this.Tb=b;this.m(c)}Fk.prototype=new M;Fk.prototype.Da=j;Fk.prototype.className="ReadB.Go";Fk.prototype.La=function(b,c,d){return this.Tb.lc(function(d,h){if(d)return void c(d);C(b,h);c(l)},d)};Fk.prototype.c=function(){g(Error())};function Gk(){Z(this,"readc")}
Gk.prototype=new X;Gk.prototype.className="ReadC";Gk.prototype.t=function(b,c){E(b,new Hk(lk(c,this),this))};Gk.prototype.g=function(b,c){E(b,new Hk(lk(c.a(),this),this))};function Hk(b,c){this.d=l;this.Tb=b;this.m(c)}Hk.prototype=new M;Hk.prototype.Da=j;Hk.prototype.className="ReadC.Go";Hk.prototype.La=function(b,c,d){return Wj(this.Tb,function(d,h){if(d)return void c(d);C(b,h);c(l)},d)};Hk.prototype.c=function(){g(Error())};function Ik(){Z(this,"sread")}Ik.prototype=new X;
Ik.prototype.className="Sread";Ik.prototype.g=function(b,c){E(b,new Jk(Zj(c.a(),this),c.b().a(),this))};function Jk(b,c,d){this.d=l;this.Tb=b;this.fd=c;this.m(d)}Jk.prototype=new M;Jk.prototype.Da=j;Jk.prototype.className="Sread.Go";Jk.prototype.La=function(b,c,d){return Xj(this.Tb,this.fd,function(d,h){if(d)return void c(d);C(b,h);c(l)},d)};Jk.prototype.c=function(){g(Error())};function Kk(){Z(this,"dir")}Kk.prototype=new X;Kk.prototype.className="Dir";
Kk.prototype.g=function(b,c){E(b,new Lk(Sb(c.a(),this).value(),this))};function Lk(b,c){this.d=l;this.Xa=b;this.m(c)}Lk.prototype=new M;Lk.prototype.Da=j;Lk.prototype.className="Dir.Go";Lk.prototype.La=function(b,c){return oa(function(d,f){if(d)return void c(d);C(b,f);c(l)})};Lk.prototype.c=function(){g(Error())};function Mk(){Z(this,"dir-exists")}Mk.prototype=new X;Mk.prototype.className="DirExists";Mk.prototype.g=function(b,c){E(b,new Nk(c.a(),this))};
function Nk(b,c){this.d=l;this.Xa=b;this.m(c)}Nk.prototype=new M;Nk.prototype.Da=j;Nk.prototype.className="DirExists.Go";Nk.prototype.La=function(b,c){return pa(Sb(this.Xa,this.d).value(),function(d,f){if(d)return void c(d);C(b,f?this.Xa:B);c(l)})};Nk.prototype.c=function(){g(Error())};function Ok(){Z(this,"file-exists")}Ok.prototype=new X;Ok.prototype.className="FileExists";Ok.prototype.g=function(b,c){E(b,new Pk(c.a(),this))};function Pk(b,c){this.d=l;this.Xa=b;this.m(c)}Pk.prototype=new M;
Pk.prototype.Da=j;Pk.prototype.className="FileExists.Go";Pk.prototype.La=function(b,c,d){return qa(Sb(this.Xa,this.d).value(),function(d,h){if(d)return void c(d);C(b,h);c(l)},d)};Pk.prototype.c=function(){g(Error())};function Qk(){Z(this,"infile")}Qk.prototype=new X;Qk.prototype.className="InFile";Qk.prototype.g=function(b,c){E(b,new Rk(Sb(c.a(),this).value(),this))};function Rk(b,c){this.d=l;this.Xa=b;this.m(c)}Rk.prototype=new M;Rk.prototype.Da=j;Rk.prototype.className="InFile.Go";
Rk.prototype.La=function(b,c,d){return ra(this.Xa,function(d,h){if(d)return void c(d);C(b,new Vj(h));c(l)},d)};Rk.prototype.c=function(){g(Error())};function Sk(){Z(this,"outfile")}Sk.prototype=new X;Sk.prototype.className="OutFile";Sk.prototype.g=function(b,c){var d=Sb(c.a(),this).value(),f=c.b().a(),f=!(f instanceof y)&&"append"===hb(f,this).name();E(b,new Tk(d,f,this))};function Tk(b,c,d){this.d=l;this.ba=b;this.vd=c;this.m(d)}Tk.prototype=new M;Tk.prototype.Da=j;Tk.prototype.className="OutFile.Go";
Tk.prototype.La=function(b,c){return ta(function(d,f){if(d)return void c(d);C(b,new $j(f));c(l)})};Tk.prototype.c=function(){g(Error())};function Uk(){Z(this,"make-directory")}Uk.prototype=new X;Uk.prototype.className="MakeDirectory";Uk.prototype.g=function(b,c){E(b,new Vk(Sb(c.a(),this).value(),this))};function Vk(b,c){this.d=l;this.Xa=b;this.m(c)}Vk.prototype=new M;Vk.prototype.Da=j;Vk.prototype.className="MakeDirectory.Go";
Vk.prototype.La=function(b,c){return ua(function(d,f){if(d)return void c(d);C(b,f?Ab:Bb.bd);c(l)})};Vk.prototype.c=function(){g(Error())};function Wk(){Z(this,"make-directory*")}Wk.prototype=new X;Wk.prototype.className="MakeDirectories";Wk.prototype.g=function(b,c){E(b,new Xk(Sb(c.a(),this).value(),this))};function Xk(b,c){this.d=l;this.Xa=b;this.m(c)}Xk.prototype=new M;Xk.prototype.Da=j;Xk.prototype.className="MakeDirectories.Go";
Xk.prototype.La=function(b,c){return va(function(d,f){if(d)return void c(d);C(b,f?Ab:Bb.bd);c(l)})};Xk.prototype.c=function(){g(Error())};function Yk(){Z(this,"mvfile")}Yk.prototype=new X;Yk.prototype.className="MvFile";Yk.prototype.g=function(b,c){E(b,new Zk(Sb(c.a(),this).value(),Sb(c.b().a(),this).value(),this))};function Zk(b,c,d){this.d=l;this.Gd=b;this.Fd=c;this.m(d)}Zk.prototype=new M;Zk.prototype.Da=j;Zk.prototype.className="MvFile.Go";
Zk.prototype.La=function(b,c){return wa(function(d){if(d)return void c(d);C(b,B);c(l)})};Zk.prototype.c=function(){g(Error())};function $k(){Z(this,"rmfile")}$k.prototype=new X;$k.prototype.className="RmFile";$k.prototype.g=function(b,c){E(b,new al(Sb(c.a(),this).value(),this))};function al(b,c){this.d=l;this.Xa=b;this.m(c)}al.prototype=new M;al.prototype.Da=j;al.prototype.className="RmFile.Go";al.prototype.La=function(b,c){return xa(function(d){if(d)return void c(d);C(b,B);c(l)})};
al.prototype.c=function(){g(Error())};var Ng=j;
function bl(b){var c={noLibs:j,e:['(assign load-from-web  (fn ()    ( (fn (eof f loop)        (assign loop          (fn ()            ( (fn (command)              (if (is command eof)                (eval                  \'(do (load "strings.arc")                       (load "lib/bag-of-tricks.arc")                       (load "rainbow/rainbow.arc")                       (load "rainbow/rainbow-libs.arc")                       ))                ( (fn ()                  eval.command                  (loop)                ) ))            ) (sread f eof))))        (loop)    ) (uniq) (infile "arc.arc") nil)))'].concat("#libs"!==location.hash?
[]:["(load-from-web)"])},d=(new Date).getTime(),f=c.ARC_PATH||[];-1===f.indexOf(".")&&(f=["."].concat(f));var h=cl(c.args||[]);c.nosf&&(Ng=m);new qj;new rj;new nj;new mj;new oj;J("pi").ga(new H(Math.PI));J("e").ga(new H(Math.E));new cj;new Ji;new Yi;new $i;new Xi;new Ui;new Ci;new aj;new Vi;new Hi;new Zi;new Gi;new bj;new Di;new Bi;new Ei;new Ki;new Fi;new Li;new Wi;new Mj;new Hj;new Lj;new Ij;new ti;new si;new dl;new Dj;new zj;new Cj;new vj;new Aj;new Ej;new Fj;new Gj;new ai;new Zh;new fi;new di;
new ei;new ci;new yi;new ui;new vi;new zi;new Ai;new wi;new xi;new dj;new ij;new fj;new ej;new gj;new hi;new ji;new li;new ri;new uj;new sj;new tj;new Ga;new Ck;new Dk;new uk;new vk;new tk;new qk;new wk;new Ik;new xk;new yk;new Ek;new Gk;new rk;new pk;new sk;new Sk;new Qk;new Mk;new Ok;new Kk;new $k;new Yk;new Uk;new Wk;new zk;new Bk;new Ak;new jj;new kj;new lj;var k=new oc;J("*argv*").ga(w(h));J("call*").ga(new Ga);J("sig").ga(new Ga);el(k,f,(c.noLibs?[]:["arc","strings","lib/bag-of-tricks","rainbow/rainbow",
"rainbow/rainbow-libs"]).concat(c.f||[]),function(f){if(f)return void b(f);fl(k,c.e||[],function(f){if(f)return void b(f);c.q?b():(za("repl in "+((new Date).getTime()-d)+"ms"),gl(k,b,i))})})}function cl(b){for(var c=[],d=0,f=b.length;d<f;d++){var h=b[d];"[object String]"!==Object.prototype.toString.call(h)&&g(new TypeError);c.push(Na(""+h))}return c}function el(b,c,d,f){var h=i;function k(r){r===p?f():hl(b,c,d[r],function(b){if(b)return void f(b);k(r+1)},h)}var p=d.length;k(0)}
function fl(b,c,d){var f=i;function h(c,k){if(c)return void d(c);if(k===l)return void d();il(b,k,function(b){if(b)return void d(b);Oa(L,h,f)},f)}for(var k=[],p=0,r=c.length;p<r;p++){var D=c[p];"[object String]"!==Object.prototype.toString.call(D)&&g(new TypeError);k.push(D+" ")}var L=(new sa(k.join(""))).qa();Oa(L,h,f)}
function gl(b,c,d){ya("arc> ");for(var f=j,h=m;!h;)if(Oa(ja,function(k,p){if(k){if(!(k instanceof Ea))return void c(k);Aa(k);f||gl(b,c,d)}else p===l?(h=j,f||c()):il(b,p,function(h){if(h)return void c(h);f||gl(b,c,d)},d)||(f=m)},d)||(f=m),!f)return;c()}function il(b,c,d,f){return jl(b,c,function(b,c){if(b){if(!(b instanceof t))return void d(b);za("Message    : "+b.message);ya("Java stack : ");Aa(b,la)}else za(c);d()},f)}
function kl(b,c,d,f){function h(p){if(p===L)d(Error("Could not find "+c+" under "+JSON.stringify(b)));else{var r=k[p];qa(r,function(b,c){if(b)return void d(b);if(c)return void d(l,r);h(p+1)},f)}}for(var k=[],p=b.length,r=0;r<p;r++){var D=""+b[r]+"/"+c;k.push(D,D+".arc")}var L=k.length;h(0)}function hl(b,c,d,f,h){function k(c){ra(c,function(c,d){if(c)return void f(c);ll(b,d,f,h)},h)}qa(d,function(b,r){if(b)return void f(b);r?k(d):kl(c,d,function(b,c){if(b)return void f(b);k(c)},h)},h)}
function ll(b,c,d,f){var h=j;Oa(c,function(k,p){if(k)return void d(k);if(p===l)return void d();jl(b,p,function(k){if(k)return void d(k);ll(b,c,d,f)||(h=m)},f)||(h=m)},f)||(h=m);return h}function ml(b){this.d=b}ml.prototype=new pf;ml.prototype.className="Console.Anon_mkVisitor_";ml.prototype.Xb=function(b){b.m(this.d)};function jl(b,c,d,f){E(b,new nl(c));return pc(b,d,f)}function nl(b){this.d=l;this.Aa=b;this.m(F("Console.compileAndEvalAsync_"))}nl.prototype=new M;nl.prototype.className="Console.CompileAndEval";
nl.prototype.c=function(b){E(b,new ol);Lf(b,this.Aa,[])};function ol(){this.d=l;this.m(F("Console.compileAndEvalAsync_"))}ol.prototype=new M;ol.prototype.className="Console.AndEval";ol.prototype.c=function(b){var c=Q(b).reduce(),d=[];c.h(d);d=w(d);d.l(new ml(c));R(b,l,d)};function dl(){Z(this,"new-thread")}dl.prototype=new X;dl.prototype.className="NewThread";dl.prototype.j=function(){g(new t("Rainbow.js doesn't support new-thread."))};function oh(b,c,d){this.d=l;this.ia=b;this.o=c;this.m(d)}
oh.prototype=new M;oh.prototype.className="BindAndRun";oh.prototype.c=function(b){this.ia.add(Q(b));R(b,this.ia,this.o)};Sa("window").ga(new rc(window));ea(window,"hashchange",function(){location.reload(m)});
ea(window,"load",function(){function b(){var b=D.value+"\n";D.value="";fa.kc.$a(b)}function c(b){if(b.Zc!==i)return b.Zc();for(var c=[],d=j;d;)b.mc(function(b,f){b&&g(b);f!==l?d=m:c.push(String.fromCharCode(f))},j)||(d=m);return c.join("")}function d(b){r.appendChild(document.createTextNode(b));ka||(ka=j,setTimeout(function(){ka=m;r.scrollTop=r.scrollHeight},0))}function f(b){b&&g(b);b=c(fa.Va);""!==b&&(d(b),ga.kc.$a(b),fa.Va.lb(f))}function h(b){b&&g(b);b=c(ha.Va);""!==b&&(d(b),ha.Va.lb(h))}function k(b){b&&
g(b);b=c(ia.Va);""!==b&&(d(b),ia.Va.lb(k))}var p=document.getElementById("repl"),r=document.createElement("pre");r.className="scrollback";r.appendChild(document.createTextNode(""));p.appendChild(r);var D=document.createElement("textarea");D.className="prompt";ea(D,"keydown",function(b){if(13===(b.which||b.keyCode))b.preventDefault?b.preventDefault():b.returnValue=m});ea(D,"keyup",function(c){13===(c.which||c.keyCode)&&b()});p.appendChild(D);var L=document.createElement("button");L.className="eval";
L.appendChild(document.createTextNode("Eval"));ea(L,"click",function(){b()});p.appendChild(L);var ka=m;fa.Va.lb(f);ha.Va.lb(h);ia.Va.lb(k);bl(n())});
