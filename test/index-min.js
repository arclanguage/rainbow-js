function g(b){throw b;}var i=void 0,j=null;function aa(){return function(b){return b}}function l(){return function(){}}function ba(b){return function(c){this[b]=c}}function m(b){return function(){return this[b]}}function n(b){return function(){return b}}var q;
function ca(){function b(){if(k!==j){var b=k,c=o;k=j;o=j;c(b)}}function c(b,c,p,X){if(d.length!==0){var sc=d[0];if(d.length===1&&(sc.type==="byte"||sc.xa.length<<1===f+1))return h?(c&&(d=[]),b(j,j),!0):(X||(k=b,o=p),!1);var db,p=0,X=f,U=sc;if(U.type==="byte")p++,sc=U.xa;else{U=U.xa;db=U.charCodeAt(X>>>1);if(X&1)return c&&(f++,U.length<<1<=f&&(d.shift(),f=0)),b(j,db),!0;sc=db>>>8&255;X++;U.length<<1<=X&&(p++,X=0)}U=d[p];U.type==="byte"?(p++,db=U.xa):(U=U.xa,db=U.charCodeAt(X>>>1),db=(X&1?db:db>>>8)&
255,X++,U.length<<1<=X&&(p++,X=0));c&&(p&&d.shift(),f=X);b(j,sc<<8|db);return!0}else return h?(b(j,j),!0):(X||(k=b,o=p),!1)}var d=[],f=0,h=!1,k=j,o=j,p={},z=p.dc=function(b,c){if(d.length!==0){var p=d[0];if(p.type==="byte")d.shift(),b(j,p.xa);else{var p=p.xa,X=p.charCodeAt(f>>>1),X=(f&1?X:X>>>8)&255;f++;p.length<<1<=f&&(d.shift(),f=0);b(j,X)}return!0}else return h?(b(j,j),!0):(c||(k=b,o=z),!1)},K=p.ec=function(b,d){return c(b,!0,K,d)},ga=p.cb=function(b,d){return c(b,!1,ga,d)};p.close=l();p.Qc=function(){var b=
d.length,c=!1,h,k=[],o=0;if(f&1){var p=d[0].xa,c=!0;h=p.charCodeAt(f>>>1)&255;f++;for(var U=f>>>1,z=p.length;U<z;U++){var Pb=p.charCodeAt(U);k.push(String.fromCharCode(h<<8|Pb>>>8&255));h=Pb&255}f=0;o++}else f&&(k.push(d[0].xa.substring(f>>>1)),f=0,o++);for(b=d.length;o<b;o++)if(p=d[o],p.type==="byte")c?(k.push(String.fromCharCode(h<<8|p.xa)),c=!1):(h=p.xa,c=!0);else if(p=p.xa,c){U=0;for(z=p.length;U<z;U++)Pb=p.charCodeAt(U),k.push(String.fromCharCode(h<<8|Pb>>>8&255)),h=Pb&255}else k.push(p);d=c?
[{type:"byte",xa:h}]:[];return k.join("")};return{Oa:p,cc:{Sa:function(c){!h&&c!==""&&(d.push({type:"string",xa:c}),b())},kc:function(c){h||(d.push({type:"byte",xa:c}),b())},close:function(){h=!0;b()},flush:l()}}}var da=ca(),ea=ca(),fa=ca(),ha=ca(),ja=ea.Oa,ka=fa.cc,la=ha.cc;function ma(b){ka.Sa(""+b)}function na(b){ka.Sa(""+b+"\n")}function oa(b,c){i===c&&(c=la);for(c.Sa(""+b+"\n"+(b.stack||b)+"\n");b instanceof r&&(b=b.Xc);)b instanceof pa&&(b=b.pa),c.Sa("Caused by: "+b+"\n"+(b.stack||b)+"\n")}var t={};function r(b,c){this.message=b;this.stack=Error().stack;this.Xc=c;this.nd=[]}r.prototype=Error();function u(b,c){this.parent=c;this.Za=Array(~~b);this.Db=0}q=u.prototype;
q.add=function(b){this.Za.length<=this.Db&&g(new r("Can't add "+b+" to bindings: already full ("+this.Db+") "+w(this.Za)));this.Za[this.Db]=b;this.Db++};q.vb=function(b){return b===0?this:this.parent.vb(b-1)};q.toString=function(){for(var b=[],c=0;c<this.Za.length;c++)b.push(c),b.push(" : "),b.push(this.Za[c]),b.push("\n");return b.join("")+"\nparent: "+(this.parent===j?"<none>":this.parent.toString())};q.set=function(b,c){return this.Za[b]=c};q.count=m("Db");q.size=function(){return this.Za.length};
function qa(){}qa.prototype=Error();function x(){}q=x.prototype;q.Fa=!1;q.className="ArcObject";q.Ca=n(!1);q.l=function(){g(new r("addInstructions not defined on "+this+", a "+this.className))};q.f=function(b,c){var d=ra.value();d instanceof sa||g(new TypeError);d=d.value(this.type());d instanceof y&&g(new r("No handler for "+this.type()+" in call* table: called "+this+" with args "+c));d.f(b,new A(this,c))};q.wa=function(b){this.f(b,B)};q.r=function(b,c){this.f(b,new A(c,B))};
q.S=function(b,c,d){this.f(b,new A(c,new A(d,B)))};q.Pa=function(b,c,d,f){this.f(b,new A(c,new A(d,new A(f,B))))};q.ha=function(){g(new r("len: expects one string, list or hash argument, got "+this.type()))};q.Mb=function(){g(new r("Can't set car of "+this.type()))};q.hc=function(b,c){g(new r("Can't sref "+this+"( a "+this.type()+"), other args were "+b+", "+c))};q.na=n(0);q.lc=function(){return B};q.a=function(){g(new r("Can't take car of "+this))};q.b=function(){g(new r("Can't take cdr of "+this))};
q.sc=n(!1);q.type=i;q.ra=function(){return this};q.Ba=function(b){return this===b};q.copyTo=aa();q.M=n(!0);q.ub=function(){g(new ta)};q.Ia=function(){g(new ua)};q.Oc=function(){return this};function va(b,c,d){for(var f=d,h=0;!(d instanceof y);)C(c,d.a()),d=d.b(),h++;D(c,new wa(f,c.N,b));d=new xa(h);d.n(b);D(c,d);d=new E(b);d.n(b);D(c,d)}q.sb=function(){g(new r("has length: not a proper list: ends with "+this))};q.$b=function(){g(new r("longer than: not a proper list: ends with "+this))};q.L=function(){return this};
q.j=l();q.W=function(){return this};q.jc=l();q.Qb=l();q.Rb=function(){return B};q.La=function(){return this.Rb().toString()};q.add=function(){g(new r("add not implemented for "+this.type()+" "+this))};q.sqrt=function(){g(new r("sqrt not implemented for "+this.type()+" "+this))};q.multiply=function(){g(new r("multiply not implemented for "+this.type()+" "+this))};function ua(){}q.reduce=function(){return this};q.V=n(!1);q.R=function(){return this};q.Q=function(){return this};q.ea=n(!1);q.Ua=function(){return this.toString()};
function ya(b){var c=j;Aa((new Ba(b)).ra(),function(b,f){b&&g(b);c=f},!0)||g(new qa);return c}
function Aa(b,c,d){function f(c){return b.cb(function(b,d){if(b)return void c(b);c(j,d===j?j:String.fromCharCode(d))},d)}function h(c){return b.ec(function(b,d){if(b)return void c(b);c(j,d===j?j:String.fromCharCode(d))})}function k(b){for(var c=!0,d=!1;c&&!d;)d=!0,h(function(o,p){if(o)return void b(o);p===j||p==="\n"?b(j):p==="\r"?f(function(d,f){if(d)return void b(d);f==="\n"?h(function(c){if(c)return void b(c);b(j)})||(c=!1):b(j)})||(c=!1):(d=!1,c||k(b))})||(c=!1);return c}function o(b){for(var c=
!0,d=!1;c&&!d;)d=!0,f(function(f,p){function za(f){if(f)return void b(f);d=!1;c||o(b)}if(f)return void b(f);p===";"?k(za)||(c=!1):p===j||/[^ \t\r\n]/.test(p)?b(j):h(za)||(c=!1)})||(c=!1);return c}function p(b,c){function d(f){var h=b.length-1,k=b[h];b=typeof f==="string"&&k instanceof Ca?b.slice(0,h).concat([F(k.value()+f)]):typeof f==="string"?b.concat([F(f)]):b.concat([f]);K=!1;z||p(b,c)}function k(b){b===i&&(b=new qa);c(b)}function za(){fe(function(b,c){if(b)return k(b);o(function(b){if(b)return k(b);
h(function(b,f){if(b)return k(b);f===")"?d(c):k()})||(z=!1)})||(z=!1)})||(z=!1)}for(var z=!0,K=!1;z&&!K;)K=!0,h(function(o,p){if(o)return k(o);p===j?k():p==='"'?c(j,b):p==="\\"?h(function(b,c){if(b)return k(b);c==='"'?d('"'):c==="\\"?d("\\"):c==="n"?d("\n"):c==="r"?d("\r"):c==="t"?d("\t"):c==="#"?h(function(b,c){if(b)return k(b);c==="("?d("#("):k()})||(z=!1):k()})||(z=!1):p==="#"?f(function(b,c){if(b)return k(b);if(c!=="(")return void d("#");h(function(b){if(b)return k(b);za()})||(z=!1)})||(z=!1):
d(p)})||(z=!1);return z}function z(b,c){function d(b){c(j,Da(b))}for(var k=!0,o=!1;k&&!o;)o=!0,f(function(f,p){if(f)return void c(f);p===j||/[^01-9a-zA-Z]/.test(p)?b==="newline"?d("\n".charCodeAt(0)):b==="tab"?d("\t".charCodeAt(0)):b==="space"?d(" ".charCodeAt(0)):b==="return"?d("\r".charCodeAt(0)):b==="null"?d("\x00".charCodeAt(0)):/^[01-9][01-9]+$/.test(b)?d(parseInt(b,10)):/^u[0-9a-f]+$/i.test(b)?d(parseInt(b.substring(1),16)):b.length===1?d(b.charCodeAt(0)):c(new qa):h(function(d,f){if(d)return void c(d);
o=!1;b+=f;k||z(b,c)})||(k=!1)})||(k=!1);return k}function K(b,c){for(var d=!0,k=!1;d&&!k;)k=!0,f(function(f,o){if(f)return void c(f);if(o===j||/[^01-9a-fA-F]/.test(o)){if(b==="")return void c(new qa);c(j,G(parseInt(b,16)))}else h(function(f,h){if(f)return void c(f);k=!1;b+=h;d||K(b,c)})||(d=!1)})||(d=!1);return d}function ga(b,c){for(var d=!0,f=!1;d&&!f;)f=!0,h(function(h,k){if(h)return void c(h);k===j?c(new qa):k==="|"?c(j,Ea(b)):(f=!1,b+=k,d||ga(b,c))})||(d=!1);return d}function za(b,c,d){for(var k=
!0,p=!1;k&&!p;)p=!0,o(function(o){if(o)return void d(o);f(function(f,o){if(f)return void d(f);o===j?d(new qa):o===c?h(function(c){if(c)return void d(c);d(j,b)})||(k=!1):fe(function(f,h){if(f)return void d(f);p=!1;b=b.concat([h]);k||za(b,c,d)})||(k=!1)})||(k=!1)})||(k=!1);return k}function pb(b,c){for(var d=!0,k=!1;d&&!k;)k=!0,f(function(f,o){if(f)return void c(f);var p=o!==j&&o.charCodeAt(0);if(o!==j&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(o)||128<=p&&p<65536))h(function(f,h){if(f)return void c(f);
k=!1;b+=h;d||pb(b,c)})||(d=!1);else if(o==="\\")h(function(f){if(f)return void c(f);h(function(f,h){if(f)return void c(f);h==="|"?(k=!1,b+="\\|",d||pb(b,c)):c(new qa)})||(d=!1)})||(d=!1);else{var z;/^-?[01-9]+\/[01-9]+$/.test(b)?c(j,Fa(b)):/^-?[01-9]+$/.test(b)?c(j,G(parseInt(b,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)?c(j,Ga(parseFloat(b))):b==="+inf.0"?c(j,new H(1/0)):b==="-inf.0"?c(j,new H(-1/0)):b==="+nan.0"?c(j,new H(0/0)):b==="+i"?c(j,new I(0,1)):b==="-i"?c(j,new I(0,-1)):(z=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(b))?
c(j,new I(Ga(parseFloat(z[1])).value(),Ga(parseFloat(z[2]+(z[3]||"1"))).value())):c(j,Ea(b))}})||(d=!1);return d}function fe(b){function c(){p([],function(c,d){if(c)return void b(c);d.length===0?b(j,F("")):d.length===1?b(j,d[0]):b(j,w([Ea("string")].concat(d)))})||(ia=!1)}function d(){ga("",function(c,d){if(c)return void b(c);b(j,Ea(d))})||(ia=!1)}function k(){h(function(c,d){if(c)return void b(c);d!==j&&/x/i.test(d)?K("",b)||(ia=!1):d==="\\"?h(function(c,d){if(c)return void b(c);if(/[^a-zA-Z]/.test(c))return void b(j,
Da(c.charCodeAt(0)));z(d,b)||(ia=!1)})||(ia=!1):b(new qa)})||(ia=!1)}function ge(c){fe(function(d,f){if(d)return void b(d);f===j?b(new qa):b(j,w([J(c),f]))})||(ia=!1)}function Pb(){f(function(c,d){if(c)return void b(c);d===j?b(new qa):d==="@"?h(function(c){if(c)return void b(c);ge("unquote-splicing")})||(ia=!1):ge("unquote")})||(ia=!1)}function Ti(){za([],")",function(c,d){if(c)return void b(c);if(d.length===0)b(j,Ha);else{try{var f=d===j||d.length===0?B:d[0]===Ia?Ja(d):new A(d[0],Ka(d.slice(1)))}catch(h){return void b(h)}b(j,
f)}})||(ia=!1)}function Ui(){za([],"]",function(c,d){if(c)return void b(c);b(j,w([J("fn"),w([J("_")]),w(d)]))})||(ia=!1)}var ia=!0;o(function(f){if(f)return void b(f);h(function(f,h){if(f)return void b(f);h===j?b(j,j):h==='"'?c():h==="|"?d():h==="#"?k():h==="'"?ge("quote"):h===","?Pb():h==="`"?ge("quasiquote"):h==="("?Ti():h==="["?Ui():pb(h,b)||(ia=!1)})||(ia=!1)})||(ia=!1);return ia}return fe(c)}function L(b,c){this.ba=b;this.Pc=c;this.Zc=b;this.rb=this.i=j}L.prototype=new x;q=L.prototype;
q.className="Symbol";q.l=function(b){b.push(new La(this))};function J(b){var c=Ea(b);if(c instanceof L)return c;else g(new r("can't make symbol from \""+b+'"'))}
function Ea(b){if(b==="t")b=Ma;else if(b==="nil")b=B;else{var c;if(!(c=Na.test(b))){a:if(/^-?[01-9]+\/[01-9]+$/.test(b)||/^-?[01-9]+$/.test(b)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)||b==="+inf.0"||b==="-inf.0"||b==="+nan.0"||b==="+i"||b==="-i"||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(b)||/\\(?!\|)/.test(b))c=!0;else{c=0;for(var d=b.length;c<d;c++){var f=b.charCodeAt(c);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(b.charAt(c))||128<=f&&
f<65536)){c=!0;break a}}c=!1}c=c||b==="."}b=c?Oa(b,"|"+b+"|"):Pa.test(b)?Oa(b.replace(/\\\|/g,"|"),b):Oa(b,b)}return b}q.Ua=m("ba");q.toString=m("Pc");function Oa(b,c){if(b in Qa)return Qa[b];var d=new L(b,c);return Qa[b]=d}q.name=m("ba");q.na=function(b){b instanceof L||g(new TypeError);return this.ba.localeCompare(b.name)};q.type=function(){return Ra};q.ra=function(){return this.name()};q.ya=m("Zc");q.ua=function(b){return this===b};function Sa(b,c){return c instanceof L&&c.name()===b}
q.da=function(b){var c=this.i;this.i=b;c!==j&&c.jc(this);b.Qb(this)};q.value=function(){this.i===j&&g(new r("Symbol "+this.ba+" is not bound"));return this.i};q.bound=function(){return this.i!==j};function Ta(b,c){try{return b instanceof L||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a Symbol, got "+b))}}function Ua(b,c,d){if(b.rb===j)b.rb={};b.rb[c.name()]=d}
var Qa={},Na=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,Pa=/.*\\\|/,Ra=J("sym"),Ia=J("."),Va=J("!");function A(b,c){b===j&&g(new r("Can't create Pair with null car: use NIL instead"));c===j&&g(new r("Can't create Pair with null cdr: use NIL instead"));this.Ta=b;this.fb=c}A.prototype=new x;q=A.prototype;q.className="Pair";q.f=function(b,c){var d=Wa(c.a(),this);C(b,this.vb(d.H()).a())};q.lc=m("Ta");q.a=m("Ta");q.b=m("fb");q.Ia=function(){this.Ta!==j&&g(new ua)};q.M=n(!1);q.Mb=function(b){return this.Ta=b};
q.hc=function(b,c){return this.vb(Xa(c,this).H()).Mb(b)};q.sc=function(b){return b===this.Ta};q.toString=function(){if(this.a()instanceof L&&this.a().name()in Ya&&this.b()instanceof A&&this.b().size()===1){var b=this.a(),b=Ya[b.name()],c=this.b();c instanceof A||g(new TypeError);return b+Za(c)}else return"("+Za(this)+")"};function Za(b){for(var c=[];!b.M();)c.push(b.a()),b.b().M()||c.push(" "),b=b.b();b instanceof y||c.push(" . ",b);return c.join("")}q.Ac=ba("fb");
function Ka(b){if(b.length===0)return B;if(b[0]===Ia)return b.length===2?(b=b[1],b instanceof x||g(new TypeError),b):Ja(b);var c=b[0];c instanceof x||g(new TypeError);return new A(c,Ka(b.slice(1)))}function Ja(b){g(new r('Error: illegal use of "." in '+b))}function $a(b,c,d){if(d===b.length)return c;else{var f=b[d];f instanceof x||g(new TypeError);return new A(f,$a(b,c,d+1))}}function ab(b,c){return b===j||b.length===0?c:$a(b,c,0)}function w(b){return ab(b,B)}q.type=function(){return bb};q.ha=function(){return this.size()};
q.size=function(){if(this instanceof y)return 0;else{for(var b=1,c=this.fb;!(c instanceof y);)c.M()&&g(new r("cannot take size: not a proper list: "+this)),b++,c=c.b();return b}};q.na=function(){g(new r("Pair.compareTo:unimplemented"))};q.copyTo=function(b){b.push(this.a());if(this.b()instanceof y)return b;else this.b()instanceof A||g(new r("Not a list: "+this));this.b().copyTo(b);return b};
q.ua=function(b){if(this===b)return!0;var c=this instanceof y;b instanceof x||g(new TypeError);var d=b instanceof y;return c!==d?!1:c&&d?!0:b instanceof A?(c=b.Ta.ua(this.Ta),b=b.fb.ua(this.fb),c&&b):!1};q.ya=function(){return this.a().ya()+this.b().ya()};q.vb=function(b){try{for(var c,d=this,f=b;0<f;)d.b()instanceof y&&g(new cb),d=d.b(),f--;c=d;c instanceof A||g(new TypeError);return c}catch(h){h instanceof cb||g(e),g(new r("Error: index "+b+" too large for list "+this))}};
q.sb=function(b){return this.b().sb(b-1)};q.$b=function(b){return b<0||this.b().$b(b-1)};q.La=function(){return"ref:"+this.type().toString()};function cb(){}cb.prototype=Error();q=A.prototype;q.ra=function(){var b=[];eb(b,this);return b};q.Ba=function(b){return x.prototype.Ba.call(this,b)||this instanceof y&&b instanceof y};function eb(b,c){if(!(c instanceof y)){b.push(c.a().ra());var d=c.b();d instanceof A||g(new TypeError);eb(b,d)}}function fb(b){var c=Array(~~b.size());gb(b,c,0);return c}
function gb(b,c,d){if(d<c.length)c[d]=b.Ta,b=b.fb,b instanceof A||g(new TypeError),b instanceof y||gb(b,c,d+1)}function hb(b,c){try{return b instanceof A||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a cons, got "+b))}}q.ub=l();q.add=function(b){if(b instanceof A){var c=[];this.copyTo(c);b.copyTo(c);return w(c)}else g(new r("+ : expects cons, got "+b.type()+" "+b))};
q.j=function(b){b.sa(this);for(var c=this;!c.M();)c.a().j(b),c=c.b();c instanceof y||c.j(b);b.Ea(this)};function ta(){}var bb=J("cons"),Ya={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function y(b){this.Ta=this.fb=j;this.nb=b}var ib=new A(i,i);ib.O=ib.K=j;y.prototype=ib;q=y.prototype;q.className="Nil";q.l=function(b){b.push(new E(jb))};q.f=function(b,c){g(new r("Function dispatch on inappropriate object: "+this+" with args "+c))};q.ub=l();q.Ca=n(!0);q.ha=n(0);q.M=n(!0);q.Ia=l();
q.toString=m("nb");q.lc=function(){return this};q.a=function(){return this};q.b=function(){return this};q.sc=n(!1);q.Ac=function(){g(Error("can't set the cdr of "+this))};q.size=n(0);q.copyTo=aa();q.type=function(){return kb};q.ya=n("nil");q.ua=function(b){if(this===b)return!0;b instanceof x||g(new TypeError);return b instanceof y};q.ra=n(!1);q.Ba=function(b){return b instanceof y};q.Oc=aa();q.sb=function(b){return b===0};q.$b=function(b){return b<0};var kb=Ra,jb=new y("nil"),lb=new y("()");
function mb(){L.call(this,this.ba,this.Pc);nb!==i&&g(Error())}mb.prototype=new L("t","t");q=mb.prototype;q.className="Truth";q.Ca=n(!0);q.l=function(b){b.push(new E(nb))};q.toString=n("t");q.na=function(){g(new r("Truth.compareTo:unimplemented"))};q.type=function(){return Ra};function ob(b){return b?nb:B}q.ya=n("t");q.ua=function(b){return this===b};q.ra=n(!0);q.da=function(){g(new r("error: can't rebind t!"))};q.value=function(){return this};var nb=new mb;function M(){this.e=j}M.prototype=new x;
q=M.prototype;q.Fb=!1;q.Yb=!1;q.la=!1;q.Xb=!1;q.className="Instruction";q.type=function(){return J("instruction")};q.Wa=function(){return this.toString()};q.toString=function(){return"("+this.className+")"};q.d=i;q.n=ba("e");q.j=function(b){b.Ob(this)};function wa(b,c,d){this.e=j;this.dd=b;this.Bb=c;this.n(d)}wa.prototype=new M;wa.prototype.Yb=!0;wa.prototype.className="ArcObject.ConvertError";wa.prototype.nc=function(b){return b instanceof Error};
wa.prototype.d=function(b){var c=b.error();if(c!==j)b.Na=j,b.N=this.Bb,g(new r("error invoking "+this.e+" with args "+this.dd+": "+c,c))};var ra=J("call*"),B=jb,Ha=lb,Ma=nb;function qb(){}qb.prototype=new x;qb.prototype.className="LiteralObject";qb.prototype.Ca=n(!0);qb.prototype.l=function(b){b.push(new E(this))};qb.prototype.La=function(){return"ref:"+this.type().toString()};function N(b){this.i=b;rb[b]=this}N.prototype=new qb;q=N.prototype;q.className="ArcCharacter";
function Da(b){return rb[b]===i?new N(b):rb[b]}q.Ca=n(!0);q.toString=function(){return"#\\"+String.fromCharCode(this.i)};q.na=function(b){b instanceof N||g(new TypeError);return this.i-other.i};q.type=function(){return sb};q.ra=function(){return this.value()};q.value=m("i");q.Ua=function(){return String.fromCharCode(this.i)};q.ya=function(){return this.Ua()};q.ua=function(b){return this===b||b instanceof N&&b.i===this.i};
function tb(b,c){try{return b instanceof N||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a character, got "+b))}}var sb=J("char"),rb=Array(65536);function ub(){N.call(this,0)}ub.prototype=new N(0);ub.prototype.className="ArcCharacter.Anon_NULL_";ub.prototype.toString=n("#\\null");var vb=new ub;function wb(){N.call(this,"\n".charCodeAt(0))}wb.prototype=new N("\n".charCodeAt(0));wb.prototype.className="ArcCharacter.Anon_named_1_";
wb.prototype.toString=n("#\\newline");function xb(){N.call(this,"\t".charCodeAt(0))}xb.prototype=new N("\t".charCodeAt(0));xb.prototype.className="ArcCharacter.Anon_named_2_";xb.prototype.toString=n("#\\tab");function yb(){N.call(this,"\r".charCodeAt(0))}yb.prototype=new N("\r".charCodeAt(0));yb.prototype.className="ArcCharacter.Anon_named_3_";yb.prototype.toString=n("#\\return");function zb(){N.call(this," ".charCodeAt(0))}zb.prototype=new N(" ".charCodeAt(0));zb.prototype.className="ArcCharacter.Anon_named_4_";
zb.prototype.toString=n("#\\space");new wb;new xb;new yb;new zb;function Ca(b){this.i=b}Ca.prototype=new qb;q=Ca.prototype;q.className="ArcString";q.f=function(b,c){Ab(c,this.className,1);var d=Xa(c.a(),this);d.ja()||g(new r("string-ref: expects exact integer: got "+d));d=~~d.H();0<=d||d<this.value.length()||g(new r("string-ref: index "+d+" out of range [0, "+(this.i.length-1)+"] for string "+this.toString()));C(b,Da(this.i.charCodeAt(d)))};q.value=m("i");q.Ua=m("i");
q.toString=function(){var b=this.i,c=[];c.push('"');for(var d=0;d<b.length;d++)switch(b.charAt(d)){case '"':c.push('\\"');break;case "\\":c.push("\\\\");break;case "\n":c.push("\\n");break;case "\r":c.push("\\r");break;default:c.push(b.charAt(d))}c.push('"');return c.join("")};q.na=function(b){b instanceof Ca||g(new TypeError);return this.i.localeCompare(b.i)};q.ha=function(){return this.i.length};q.Mb=function(b){var c=[tb(b,this).Ua()];c.push(this.value().substring(1));this.da(c.join(""));return b};
q.hc=function(b,c){var d=tb(b,N),f=Xa(c,this),f=f.H();0<=f&&f<this.i.length||g(new RangeError);this.i=this.i.substring(0,f-1)+String.fromCharCode(d.value())+this.i.substring(f+1);return b};q.type=function(){return Bb};q.ra=function(){return this.value()};function F(b){return new Ca(b)}q.da=ba("i");q.ya=m("i");q.ua=function(b){return this===b||b instanceof Ca&&b.i===this.i};q.Ba=function(b){return this.ua(b)};
q.add=function(b){var c=[this.i];if(!(b instanceof Ca)){var d=b.type();d instanceof L||g(new TypeError);d=Cb.rb[d]||j;d instanceof Db||g(new TypeError);b=d.Cb(b);b instanceof Ca||g(new TypeError)}c.push(b.value());return F(c.join(""))};function Eb(b,c){try{return b instanceof Ca||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a string, got "+b))}}var Bb=J("string");function pa(b,c,d){this.mb=c;this.pa=b;this.hd=d}pa.prototype=new qb;
pa.prototype.className="ArcException";pa.prototype.type=function(){return Fb};pa.prototype.message=function(){return this.pa!==j?F(this.pa.message):Gb};pa.prototype.toString=function(){return this.message().toString()};var Fb=J("exn"),Gb=F("no message");function O(){}O.prototype=new qb;q=O.prototype;q.className="ArcNumber";q.ja=i;q.B=i;q.H=i;q.kb=i;q.round=i;q.fc=function(){g(new r("round[closest] not implemented for "+this.className+"("+this+")"))};q.Ca=n(!0);
q.na=function(b){b instanceof O||g(new TypeError);b=b.B()-this.B();return b<0?1:b===0?0:-1};q.type=function(){return this.ja()?Hb:Ib};q.Ba=function(b){return this.ua(b)};function Wa(b,c){try{return b instanceof O||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a number, got "+b))}}q.Mc=function(){g(new r("mod: not implemented for "+this.className+"("+this+")"))};var Hb=J("int"),Ib=J("num");function Jb(){this.i=j}Jb.prototype=new qb;
Jb.prototype.className="ArcThreadLocal";Jb.prototype.set=ba("i");Jb.prototype.get=m("i");Jb.prototype.type=function(){return Kb};function Lb(b,c){try{return b instanceof Jb||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a thread-local, got "+b))}}var Kb=J("thread-local");function I(b,c){this.O=b;this.K=c}I.prototype=new O;q=I.prototype;q.className="Complex";
function Mb(){var b;if(soFar==="+i")return new I(0,1);else if(soFar==="-i")return new I(0,-1);else if(b=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(soFar))return new I(Ga(parseFloat(b[1])).value(),Ga(parseFloat(b[2]+(b[3]||"1"))).value());else g(new qa)}q.ja=function(){return this.K===0&&Math.floor(this.O)===real};q.B=function(){g(new r("Cannot convert complex to double"))};q.H=function(){g(new r("Cannot convert complex to int"))};
q.kb=function(){return new I(-this.O,-this.K)};q.toString=function(){return(new H(this.O)).toString()+(this.K<0?"":"+")+(new H(this.K)).toString()+"i"};function Nb(b,c){try{return b instanceof I||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a complex number, got "+b))}}q.round=function(){return new r("Can't convert "+this+" to integer")};function Ob(b){var c=argument.B();return new I(b.O*c,b.K*c)}
q.multiply=function(b){return b instanceof I?Qb(this,b):(b instanceof O||g(new TypeError),b=b.B(),new I(this.O*b,this.K*b))};function Qb(b,c){var d=b.O,f=c.O,h=b.K,k=c.K;return new I(d*f-h*k,d*k+f*h)}q.add=function(b){if(b instanceof I)return new I(this.O+b.O,this.K+b.K);else if(b instanceof P)return new I(this.O+b.B(),this.K);else if(b instanceof H)return new I(this.O+b.B(),this.K);else g(new r("+: expects a number, got "+b.type()+" "+b))};
q.log=function(){return new I(Math.log(Math.sqrt(this.O*this.O+this.K*this.K)),Math.atan2(this.K,this.O))};function Rb(b,c){var d;if(c instanceof I)d=Qb(b.log(),c).exp();else{d=b.log();var f=c.B();d=(new I(d.O*f,d.K*f)).exp()}return d}q.sqrt=function(){return Rb(this,Ga(0.5))};q.exp=function(){var b=Math.exp(this.O);return new I(b*Math.cos(this.K),b*Math.sin(this.K))};q.na=function(){g(new r("Compare: complex numbers are unordered and cannot be compared"))};
q.Ba=function(b){return b instanceof I?b.O===this.O&&b.K===this.K:b instanceof O&&this.K===0&&b.B()===this.O};function P(b,c){c===0&&b!==0&&g(new r("/: division by zero"));var d=Sb(this,b,c);this.ca=b/d;this.U=c/d}P.prototype=new O;q=P.prototype;q.className="Rational";function Fa(b){b=b.split("/");return new P(parseInt(b[0],10),parseInt(b[1],10))}function G(b){return new P(b,1)}q.toString=function(){return this.ca+(this.U===1?"":"/"+this.U)};q.ja=function(){return this.U===1};
q.B=function(){return this.ca/this.U};q.H=function(){if(this.ca===0)return 0;else{var b=this.ca/this.U;return b<0?Math.ceil(b):Math.floor(b)}};function Sb(b,c,d){return d===0?c:Sb(b,d,c%d)}q.Mc=function(b){(!this.ja()||!b.ja())&&g(new r("modulo: expects integer, got ("+this+" "+b+")"));var b=b.H(),c=this.ca%b;c<0&&(c+=b);return G(c)};function Tb(b,c){return new P(b.ca*c.ca,b.U*c.U)}q.wb=function(b){return new P(this.ca*b.U+b.ca*this.U,this.U*b.U)};q.kb=function(){return new P(-this.ca,this.U)};
q.ra=function(){return this.ja()?this.H():this.B()};q.ya=function(){return this.ja()?this.H():this.B()};q.ya=function(){return 37*this.ca+this.U+""};q.ua=function(b){return b instanceof P&&this.ca===b.ca&&this.U===b.qd};function Xa(b,c){try{return b instanceof P||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected a Rational, got "+b))}}
q.round=function(){if(this.U===1)return this;else if(this.U===2){var b=this.ca/this.U,b=b<0?Math.ceil(b):Math.floor(b);return G(b+(b%2===1?1:0))}else return G(Math.round(this.ca/this.U))};q.fc=function(){return this.U===1?this:G(Math.round(this.ca/this.U))};q.stringify=function(b){var c=this.ca.toString(b.H());return this.ja()?F(c):(b=this.U.toString(b.H()),F(c+"/"+b))};q.sqrt=function(){var b=Math.sqrt(this.ca/this.U);return Math.floor(b)===b?G(b):Ga(b)};
q.multiply=function(b){if(b instanceof I)return Ob(b);else if(b instanceof H)return Ga(b.i*this.B());else if(b instanceof P)return Tb(this,b);else g(new r("*: expects a number, got "+b.type()+" "+b))};q.add=function(b){if(b instanceof I)return new I(b.O+this.B(),b.K);else if(b instanceof H)return b.wb(this);else if(b instanceof P)return this.wb(b);else g(new r("+: expects a number, got "+b.type()+" "+b))};var Ub=G(0),Vb=G(1),Wb=G(10);function H(b){this.i=b}H.prototype=new O;q=H.prototype;
q.className="Real";function Ga(b){return new H(b)}q.toString=function(){return this.i===-1/0?"-inf.0":this.i===1/0?"+inf.0":this.i!==this.i?"+nan.0":""+this.i};q.ra=function(){this.ja();return this.value()};q.type=function(){return Ib};q.value=m("i");q.ja=function(){return Math.floor(this.i)===this.i};q.B=m("i");q.H=function(){return this.i<0?Math.ceil(this.i):Math.floor(this.i)};q.kb=function(){return Ga(-this.i)};q.ya=function(){return""+this.i};
q.ua=function(b){return b instanceof I?b.Ba(this):this===b||b instanceof H&&this.i===b.i};q.round=function(){var b=Math.round(this.i);return Math.abs(this.i-b)===0.5&&b%2==1?b<this.i?G(b+1):G(b-1):G(b)};q.fc=function(){return G(Math.round(this.i))};q.wb=function(b){return Ga(this.i+b.B())};q.sqrt=function(){return Ga(Math.sqrt(this.i))};q.multiply=function(b){if(b instanceof I)return Ob(b);else if(b instanceof O)return Ga(this.i*b.B());else g(new r("*: expects a number, got "+b.type()+" "+b))};
q.add=function(b){if(b instanceof I)return new I(b.O+this.B(),b.K);else if(b instanceof P)return this.wb(b);else if(b instanceof H)return this.wb(b);else g(new r("+: expects a number, got "+b.type()+" "+b))};function Xb(b,c){this.zb=b;this.nb=c}Xb.prototype=new qb;q=Xb.prototype;q.className="Tagged";q.f=function(b,c){var d=ra.value();d instanceof sa||g(new TypeError);return d.value(this.zb).f(b,new A(this.nb,c))};q.na=n(0);q.type=m("zb");
function Yb(b){return b instanceof Xb&&b.zb.toString()==="mac"?b.nb:j}q.toString=function(){return Zb(this)};function Zb(b){var c=$b;if(!c.bound())return"#<tagged "+b.zb+" "+b.nb+">";c=c.value();c instanceof sa||g(new TypeError);c=c.value(b.zb);if(c instanceof y)return"#<tagged "+b.zb+" "+b.nb+">";b=new ac;c.f(b,w([rep]));var d;bc(b,function(b,c){b&&g(b);d=c},!0)||g(new r("An asynchronous operation was attempted during a toString()."));return""+cc(d)}var $b=J("tagged-writers");
function dc(b){this.vc=b}dc.prototype=new qb;q=dc.prototype;q.className="JsObject";q.type=function(){return ec};q.ra=m("vc");q.toString=function(){return""+this.vc};function fc(b){var c=[];gc(c,b);return c}function gc(b,c){b.push(cc(c.a()));if(!(c.b()instanceof y)){var d=c.b();d instanceof A||g(new TypeError);gc(b,d)}}function cc(b){return b.ra()}
function hc(b){if(b===j)return B;else if(b instanceof x)return b;var c=Object.prototype.toString.call(b);if(c==="[object Number]")return b*=1,b===Math.floor(b)?G(b):Ga(b);else{if(c==="[object String]")b=F(""+b);else if(c==="[object Array]"||c==="[object Arguments]"){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=hc(b[d]);b=w(c)}else b=c==="[object Boolean]"?b?Ma:B:new dc(b);return b}}q.close=function(){g(new r("close: unexpected object: "+this))};var ec=J("java-object");
function sa(){this.ba=B;this.ac={};this.ib=this.Wb=j;this.bc=new ic;this.Lc=0}sa.prototype=new qb;q=sa.prototype;q.className="Hash";q.jc=function(b){if(this.ba===b)this.ba=B,this.bc=new ic};q.Qb=function(b){this.ba=b;this.bc=new jc(this)};q.Rb=m("ba");q.f=function(b,c){C(b,this.value(c.a()).Oc(c.b().a()))};q.toString=function(){return"#hash"+kc(this)};function kc(b){for(var c=[],d=b.Wb;d!==j;d=d.next){var f=d.key,f=new A(f,new A(b.value(f),B));c.push(f)}return ab(c,Ha)}q.ha=function(){return this.size()};
q.hc=function(b,c){if(b instanceof y){var d=this.value(c),f=this.ac[c.ya()];if(f)for(var h=0,k=f.length;h<k;h++){var o=f[h];if(c.ua(o.key)){f.splice(h,1);if(o.Lb)o.Lb.next=o.next;if(o.next)o.next.Lb=o.Lb;if(this.Wb===o)this.Wb=o.next;if(this.ib===o)this.ib=o.Lb;this.ha--;break}}this.bc.Cc(d,c)}else{d=c.ya();d=this.ac[d]||(this.ac[d]=[]);f=j;h=0;for(k=d.length;h<k;h++)if(o=d[h],c.ua(o.key)){f=o;break}f===j?(f=this.ib,this.ib={key:c,value:b,Lb:f,next:j},f===j?this.Wb=this.ib:f.next=this.ib,d.push(this.ib),
this.Lc++):f.value=b;this.bc.name(b,c)}return b};q.value=function(b){var c=this.ac[b.ya()];if(!c)return B;for(var d=0,f=c.length;d<f;d++){var h=c[d];if(b.ua(h.key))return h.value}return B};q.na=n(0);q.type=function(){return lc};q.size=m("Lc");function mc(){}mc.prototype.name=i;mc.prototype.Cc=i;function jc(b){this.Tc=b}jc.prototype=new mc;jc.prototype.name=function(b,c){b.Qb(new A(c,this.Tc))};jc.prototype.Cc=function(b,c){b.jc(new A(c,this.Tc))};function ic(){}ic.prototype=new mc;
ic.prototype.name=l();ic.prototype.Cc=l();var lc=J("table");function ac(){this.Bc=nc++;this.$=Array(100);this.N=-1;this.ma=[];this.ga=Array(100);this.D=Array(100);this.g=-1;this.Na=this.Eb=this.q=j;this.hb=oc;this.Ub=!1;this.Aa=0;this.Qa=j;this.Fc=0;this.mb=j}ac.prototype=new x;q=ac.prototype;q.className="VM";
function bc(b,c,d){var f=b.Aa;b.Aa=b.g;var h=pc(b,function(){b.Aa=f;if(b.Na===j)b.hb.end(b),c(j,Q(b));else{var d=b.Na;b.Na=j;var h=d.hd,p="\nAt instruction "+d.mb;if(h!==j)for(var z=0,K=h.length;z<K;z++)p+="\n"+h[z].La();c(new r("Unhandled exception on thread#"+b.Bc+": "+d.pa.message+p,d.pa))}},d);if(d&&!h)b.Aa=f;return h}
function pc(b,c,d){function f(){for(;h.Aa<=h.g;)try{if(h.D[h.g]instanceof y)h.g--;else{h.q=h.ga[h.g];h.Eb=h.ma[h.g];var b=h.D[h.g].a();b instanceof M||g(new TypeError);h.mb=b;var p=h.D[h.g].b();p instanceof A||g(new TypeError);h.D[h.g]=p;if(h.mb.Xb){var z=!0,z=h.mb.wc(h,function(b){b?qc(h,b):h.hb.$a(h);z||f()},d);if(!z){k=!1;return}}else h.mb.d(h),h.hb.$a(h)}}catch(K){qc(h,K)}c()}b.hb.$a(b);var h=b,k=!0;f();return k}
function qc(b,c){for(var d=[],f=[],h=[];b.Aa<=b.g;){var k=rc(b).a();if(k.Yb&&k.nc(c))break;k=rc(b).a();k.Fb&&(f.push(rc(b)),h.push(b.ga[b.g]));if(k instanceof M)k=rc(b).a().e,k!==j&&d.push(k);b.g--}b.Na=new pa(c,b.mb,d);for(d=f.length-1;0<=d;d--)R(b,h[d],f[d])}q.error=m("Na");
q.show=function(){na("Thread Dump for thread#"+threadId);na(""+(this.N+1)+" args");for(var b=5<this.N?this.N-5:0;b<this.N+1;b++)na(""+b+". "+this.$[b]);na();b=this.g+1;if(this.D[this.g]instanceof y)b=this.g;na(""+b+" instruction frames");for(var b=20<this.g?this.g-20:0,c=this.g;b<=c;c--)if(!(this.D[c]instanceof y)){var d=this.D[c],f=this.ga[c],h=this.ma[c];for(ma("\nInstruction Frame "+c+":");!(d instanceof y);){var k=d.a();k instanceof M||g(new TypeError);d=d.b();newInstructions instanceof A||g(new TypeError);
ma(k.Wa(f));ma(" ")}ma("[");k=0;for(d=h.length;k<d;k++)ma(""+h[k]+" ");ma("]");ka.Sa("\n")}};function D(b,c){b.Aa<=b.g&&rc(b)instanceof y||(b.g++,0<=b.g&&b.g<b.D.length||(tc(b,b.D.length*2),uc(b,b.ga.length*2),vc(b,b.ma.length*2)));b.D[b.g]=new A(c,B)}function R(b,c,d){b.Aa<=b.g&&rc(b)instanceof y||(b.g++,0<=b.g&&b.g<b.D.length||(tc(b,b.D.length*2),uc(b,b.ga.length*2),vc(b,b.ma.length*2)));b.D[b.g]=d;b.ga[b.g]=c}
function S(b,c,d,f){b.Aa<=b.g&&rc(b)instanceof y||(b.g++,0<=b.g&&b.g<b.D.length||(tc(b,b.D.length*2),uc(b,b.ga.length*2),vc(b,b.ma.length*2)));b.D[b.g]=d;b.ga[b.g]=c;b.ma[b.g]=f}function wc(b,c){b.Aa<=b.g&&rc(b)instanceof y?b.D[b.g]=c:(b.g++,0<=b.g&&b.g<b.D.length||(tc(b,b.D.length*2),uc(b,b.ga.length*2),vc(b,b.ma.length*2)),b.D[b.g]=c,b.ga[b.g]=b.q,b.ma[b.g]=b.Eb)}function rc(b){return b.D[b.g]}
function C(b,c){b.N++;if(!(0<=b.N&&b.N<b.$.length)){var d=Array(~~(b.$.length*2));xc(b.$,d);b.$=d}b.$[b.N]=c}function yc(b){return b.$[b.N]}function Q(b){return b.$[b.N--]}function zc(b,c){for(var d=Ha,f=0;f<c;f++)d=new A(b.$[b.N-f],d);b.N-=c;return d}function Ac(b,c){b.hb=c;c.tb(b)}q.type=function(){return Bc};
q.copyTo=function(b){b.N=this.N;b.g=this.g;b.D.length<this.D.length?(b.D=this.D.slice(),b.ga=this.ga.slice(),b.ma=this.ma.slice()):(xc(this.D,b.D),xc(this.ga,b.ga),xc(this.ma,b.ma));b.$.length!==this.$.length?b.$=this.$.slice():xc(this.$,b.$);b.q=this.q;b.Na=this.Na;b.hb=this.hb;b.Ub=this.Ub;b.Aa=this.Aa};q.toString=function(){return"[thread#"+this.Bc+": instruction stack "+this.g+"; arg stack "+this.N+"]"};function uc(b,c){var d=Array(~~c);xc(b.ga,d);b.ga=d}
function tc(b,c){var d=Array(~~c);xc(b.D,d);b.D=d}function vc(b,c){var d=Array(~~c);xc(b.ma,d);b.ma=d}function xc(b,c){for(var d=0,f=b.length;d<f;d++)c[d]=b[d]}function Cc(b){if(!(b.Aa<=b.g))return j;return b.D[b.g]instanceof y?(b.g--,Cc(b)):b.D[b.g].a()}var Bc=J("thread"),nc=0;function Dc(){this.Ha=[];this.Kc=B}Dc.prototype=new x;q=Dc.prototype;q.className="ListBuilder";q.append=function(b){this.Ha.push(b)};q.Jc=ba("Kc");q.list=function(){return ab(this.Ha,this.Kc)};q.type=function(){return J("list-builder")};
q.toString=function(){return"ListBuilder:"+this.list().toString()};function Ec(){this.e=j}Ec.prototype=new M;Ec.prototype.className="Append";Ec.prototype.d=function(b){var c=Q(b),b=yc(b);b instanceof Dc||g(new TypeError);b.append(c)};Ec.prototype.toString=n("(append)");function Fc(){this.e=j}Fc.prototype=new M;Fc.prototype.className="AppendAll";Fc.prototype.d=function(b){var c=Q(b),b=yc(b);b instanceof Dc||g(new TypeError);c instanceof A||g(new TypeError);c.copyTo(b.Ha)};Fc.prototype.toString=n("(append-all)");
function Gc(){this.e=j}Gc.prototype=new M;Gc.prototype.className="AppendDot";Gc.prototype.d=function(b){var c=Q(b),b=yc(b);b instanceof Dc||g(new TypeError);b.Jc(c)};Gc.prototype.toString=n("(append-dot)");function Hc(b,c){this.e=j;this.Nc=b;this.Bb=c}Hc.prototype=new M;q=Hc.prototype;q.Yb=!0;q.className="Catch";q.nc=n(!0);q.d=function(b){var c=b.error();if(c!==j)b.Na=j,b.N=this.Bb,this.Nc.f(b,w([c]))};q.toString=function(){return"(catch "+this.Nc+")"};function Ic(b){this.e=j;this.Ic=b}
Ic.prototype=new M;Ic.prototype.className="Close_Instruction";Ic.prototype.d=function(b){C(b,new Jc(this.Ic,b.q))};Ic.prototype.toString=function(){return"(close "+this.Ic+")"};function Kc(b){this.e=j;this.Dc=b}Kc.prototype=new M;Kc.prototype.Fb=!0;Kc.prototype.className="FinallyInvoke";Kc.prototype.d=function(b){this.Dc.f(b,B)};Kc.prototype.toString=function(){return"(finally:"+this.Dc+")"};function Lc(){this.e=j}Lc.prototype=new M;Lc.prototype.className="FinishList";
Lc.prototype.d=function(b){var c=Q(b);c instanceof Dc||g(new TypeError);C(b,c.list())};Lc.prototype.toString=n("(finish-list)");function La(b){this.e=j;this.Ra=b}La.prototype=new M;La.prototype.className="FreeSym";La.prototype.d=function(b){C(b,this.Ra.value())};La.prototype.toString=function(){return"(free-sym "+this.Ra+")"};La.prototype.Wa=function(){return"(free-sym "+this.Ra+" -> "+(sym.bound()?""+sym.value():"#unbound#")+")"};function Mc(b){this.e=j;this.Ra=b}Mc.prototype=new M;
Mc.prototype.className="LexSym";Mc.prototype.d=function(b){C(b,this.Ra.t(b.q))};Mc.prototype.toString=function(){return"(lex-sym "+this.Ra+")"};Mc.prototype.Wa=function(b){return"(lex-sym "+this.Ra+" -> "+this.Ra.t(b)+")"};function Nc(b){this.e=j;this.Sc=b}Nc.prototype=new M;Nc.prototype.className="Listify";Nc.prototype.d=function(b){C(b,zc(b,this.Sc))};Nc.prototype.toString=function(){return"(listify "+this.Sc+")"};function E(b){this.e=j;this.Ec=b}E.prototype=new M;E.prototype.className="Literal";
E.prototype.d=function(b){C(b,this.Ec)};E.prototype.toString=function(){return"(literal "+this.Ec+")"};function Oc(){this.e=j}Oc.prototype=new M;Oc.prototype.className="NewList";Oc.prototype.d=function(b){C(b,new Dc)};Oc.prototype.toString=n("(new-list)");function Pc(b){this.e=j;this.ba=b}Pc.prototype=new M;Pc.prototype.className="PopArg";Pc.prototype.d=function(b){Q(b)};Pc.prototype.toString=function(){return"(pop-arg:"+this.ba+")"};function Qc(b,c){this.e=j;this.kd=b;this.i=c}Qc.prototype=new M;
Qc.prototype.Fb=!0;Qc.prototype.className="SetThreadLocal";Qc.prototype.d=function(){this.kd.value=this.i};function Rc(b,c){this.e=j;this.Ra=b;this.ab=c}Rc.prototype=new M;Rc.prototype.className="StackSym";Rc.prototype.d=function(b){var c=this.ab;b.N++;if(!(0<=b.N&&b.N<b.$.length)){var d=Array(~~(b.$.length*2));xc(b.$,d);b.$=d}b.$[b.N]=b.Eb[c]};Rc.prototype.toString=function(){return"(stack-bound symbol:"+this.Ra+")"};function Sc(b){this.e=j;this.Gc=b}Sc.prototype=new M;Sc.prototype.className="TableMapper";
Sc.prototype.d=function(b){var c=Q(b);c instanceof A||g(new TypeError);if(!(c instanceof y)){C(b,c.b());D(b,this);c=c.a();c instanceof A||g(new TypeError);var d=new Pc("map-table-iterator");d.n(this);D(b,d);this.Gc.f(b,c)}};Sc.prototype.toString=function(){return"(table-mapper "+this.Gc+")"};function Tc(b){this.e=j;this.name=b}Tc.prototype=new M;Tc.prototype.className="Assign_Lex";function Uc(b,c){Tc.call(this,b);this.value=c}Uc.prototype=new Tc;Uc.prototype.className="Assign_Lex_Free";
Uc.prototype.d=function(b){var c=this.value.value();Vc(this.name,b.q,c);C(b,c)};Uc.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function Wc(b,c){Uc.call(this,b,c)}Wc.prototype=new Uc;Wc.prototype.className="Assign_Lex_Free.Intermediate";Wc.prototype.d=function(b){Vc(this.name,b.q,this.value.value())};function Xc(b,c){Tc.call(this,b);this.value=c}Xc.prototype=new Tc;Xc.prototype.className="Assign_Lex_Lex";
Xc.prototype.d=function(b){var c=this.value.t(b.q);Vc(this.name,b.q,c);C(b,c)};Xc.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};Xc.prototype.Wa=function(b){return"(assign-lex "+this.name+"--\>"+this.name.t(b)+this.value+"--\>"+this.value.t(b)+")"};function Yc(b,c){Xc.call(this,b,c)}Yc.prototype=new Xc;Yc.prototype.className="Assign_Lex_Lex.Intermediate";Yc.prototype.d=function(b){Vc(this.name,b.q,this.value.t(b.q))};function Zc(b,c){Tc.call(this,b);this.Va=c}
Zc.prototype=new Tc;Zc.prototype.className="Assign_Lex_Literal";Zc.prototype.d=function(b){Vc(this.name,b.q,this.Va);C(b,this.Va)};Zc.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.Va+")"};function $c(b,c){Zc.call(this,b,c)}$c.prototype=new Zc;$c.prototype.className="Assign_Lex_Literal.Intermediate";$c.prototype.d=function(b){Vc(this.name,b.q,this.Va)};function ad(b){Tc.call(this,b)}ad.prototype=new Tc;ad.prototype.className="Assign_Lex_Other";
ad.prototype.d=function(b){Vc(this.name,b.q,yc(b))};ad.prototype.toString=function(){return"(assign-lex "+this.name+")"};ad.prototype.Wa=function(b){return"(assign-lex "+this.name+" -> "+this.name.t(b)+")"};function bd(b){Tc.call(this,b)}bd.prototype=new ad;bd.prototype.className="Assign_Lex_Other.Intermediate";bd.prototype.d=function(b){Vc(this.name,b.q,Q(b))};function cd(b,c){Tc.call(this,b);this.value=c}cd.prototype=new Tc;cd.prototype.className="Assign_Lex_Stack";
cd.prototype.d=function(b){var c=this.value.get(b);Vc(this.name,b.q,c);C(b,c)};cd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};cd.prototype.Wa=function(b){return"(assign-lex "+this.name+"--\>"+this.name.t(b)+" <-- "+this.value+")"};function dd(b,c){cd.call(this,b,c)}dd.prototype=new cd;dd.prototype.className="Assign_Lex_Stack.Intermediate";dd.prototype.d=function(b){Vc(this.name,b.q,this.value.get(b))};function ed(b){this.e=j;this.name=b}ed.prototype=new M;
ed.prototype.className="Assign_Free";function fd(b,c){ed.call(this,b);this.value=c}fd.prototype=new ed;fd.prototype.className="Assign_Free_Free";fd.prototype.d=function(b){var c=this.value.value();this.name.da(c);C(b,c)};fd.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function gd(b,c){fd.call(this,b,c)}gd.prototype=new fd;gd.prototype.className="Assign_Free_Free.Intermediate";gd.prototype.d=function(){this.name.da(this.value.value())};
function hd(b,c){ed.call(this,b);this.value=c}hd.prototype=new ed;hd.prototype.className="Assign_Free_Lex";hd.prototype.d=function(b){var c=this.value.t(b.q);this.name.da(c);C(b,c)};hd.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function id(b,c){hd.call(this,b,c)}id.prototype=new hd;id.prototype.className="Assign_Free_Lex.Intermediate";id.prototype.d=function(b){this.name.da(this.value.t(b.q))};function jd(b,c){ed.call(this,b);this.Va=c}jd.prototype=new ed;
jd.prototype.className="Assign_Free_Literal";jd.prototype.d=function(b){this.name.da(this.Va);C(b,this.Va)};jd.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.Va+")"};function kd(b,c){jd.call(this,b,c)}kd.prototype=new jd;kd.prototype.className="Assign_Free_Literal.Intermediate";kd.prototype.d=function(){this.name.da(this.Va)};function ld(b){ed.call(this,b)}ld.prototype=new ed;ld.prototype.className="Assign_Free_Other";ld.prototype.d=function(b){this.name.da(yc(b))};
ld.prototype.toString=function(){return"(assign-free-other "+this.name+")"};ld.prototype.Wa=function(){return"(assign-free-other "+this.name+" -> "+(name.bound()?""+name.value():"#unbound#")+")"};function md(b){ed.call(this,b)}md.prototype=new ld;md.prototype.className="Assign_Free_Other.Intermediate";md.prototype.d=function(b){this.name.da(Q(b))};function nd(b,c){ed.call(this,b);this.value=c}nd.prototype=new ed;nd.prototype.className="Assign_Free_Stack";
nd.prototype.d=function(b){v=this.value.get(b);this.name.da(v);C(b,v)};nd.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function od(b,c){nd.call(this,b,c)}od.prototype=new nd;od.prototype.className="Assign_Free_Stack.Intermediate";od.prototype.d=function(b){this.name.da(this.value.get(b))};function pd(b){this.e=j;this.name=b}pd.prototype=new M;pd.prototype.className="Assign_Stack";function qd(b,c){pd.call(this,b);this.value=c}qd.prototype=new pd;
qd.prototype.className="Assign_Stack_Free";qd.prototype.d=function(b){var c=this.value.value();this.name.set(b,c);C(b,c)};qd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function rd(b,c){qd.call(this,b,c)}rd.prototype=new qd;rd.prototype.className="Assign_Stack_Free.Intermediate";rd.prototype.d=function(b){this.name.set(b,this.value.value())};function sd(b,c){pd.call(this,b);this.value=c}sd.prototype=new pd;sd.prototype.className="Assign_Stack_Lex";
sd.prototype.d=function(b){var c=this.value.t(b.q);this.name.set(b,c);C(b,c)};sd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function td(b,c){sd.call(this,b,c)}td.prototype=new sd;td.prototype.className="Assign_Stack_Lex.Intermediate";td.prototype.d=function(b){this.name.set(b,this.value.t(b.q))};function ud(b,c){pd.call(this,b);this.value=c}ud.prototype=new pd;ud.prototype.className="Assign_Stack_Literal";
ud.prototype.d=function(b){this.name.set(b,this.value);C(b,this.value)};ud.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function vd(b,c){ud.call(this,b,c)}vd.prototype=new ud;vd.prototype.className="Assign_Stack_Literal.Intermediate";vd.prototype.d=function(b){this.name.set(b,this.value)};function wd(b){pd.call(this,b)}wd.prototype=new pd;wd.prototype.className="Assign_Stack_Other";wd.prototype.d=function(b){this.name.set(b,yc(b))};
wd.prototype.toString=function(){return"(assign-stack "+this.name+")"};function xd(b){pd.call(this,b)}xd.prototype=new wd;xd.prototype.className="Assign_Stack_Other.Intermediate";xd.prototype.d=function(b){this.name.set(b,Q(b))};function yd(b,c){pd.call(this,b);this.value=c}yd.prototype=new pd;yd.prototype.className="Assign_Stack_Stack";yd.prototype.d=function(b){var c=this.value.get(b);this.name.set(b,c);C(b,c)};yd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};
function zd(b,c){yd.call(this,b,c)}zd.prototype=new yd;zd.prototype.className="Assign_Stack_Stack.Intermediate";zd.prototype.d=function(b){this.name.set(b,this.value.get(b))};function Ad(b,c){this.e=j;this.G=b;this.Ma=Bd(b);this.z=c;this.ka=Bd(c)}Ad.prototype=new M;Ad.prototype.className="Cond";function Bd(b){var c=[];b.l(c);return w(c)}Ad.prototype.d=function(b){wc(b,Q(b)instanceof y?this.ka:this.Ma)};Ad.prototype.j=function(b){M.prototype.j.call(this,b);this.Ma.j(b);this.ka.j(b)};
Ad.prototype.toString=function(){return"(cond then:"+this.G+", else:"+this.z+")"};function Cd(b,c,d){this.e=j;this.aa=b;this.G=c;this.z=d}t["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=Cd;Cd.prototype=new M;Cd.prototype.className="If_bound_bound_literal";Cd.prototype.d=function(b){this.aa.t(b.q)instanceof y?C(b,this.z):C(b,this.G.t(b.q))};
Cd.addInstructions=function(b,c,d,f){c instanceof T||g(new TypeError);d instanceof T||g(new TypeError);f instanceof V||g(new TypeError);Dd(c,d)?f.k instanceof y?c.l(b):b.push(new Ed(c,f.k)):b.push(new Cd(c,d,f.k))};Cd.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};function Ed(b,c){this.e=j;this.Ab=b;this.z=c}Ed.prototype=new M;Ed.prototype.className="If_bound_bound_literal.Or";Ed.prototype.d=function(b){var c=this.Ab.t(b.q);c instanceof y?C(b,this.z):C(b,c)};
Ed.prototype.toString=function(){return"(if[bbl$or] "+a+" "+a+" "+elseExpr+")"};function Fd(b,c,d){this.e=j;this.aa=b;this.G=c;this.ka=Bd(d);this.z=d}t["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=Fd;Fd.prototype=new M;Fd.prototype.className="If_bound_bound_other";Fd.prototype.d=function(b){this.aa.t(b.q)instanceof y?wc(b,this.ka):C(b,this.G.t(b.q))};
Fd.addInstructions=function(b,c,d,f){c instanceof T||g(new TypeError);d instanceof T||g(new TypeError);Dd(c,d)?b.push(new Gd(c,f)):b.push(new Fd(c,d,f))};Fd.prototype.j=function(b){M.prototype.j.call(this,b);this.ka.j(b)};Fd.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};function Gd(b,c){this.e=j;this.Ab=b;this.ka=Bd(c);this.z=c}Gd.prototype=new M;Gd.prototype.className="If_bound_bound_other.Or";
Gd.prototype.d=function(b){var c=this.Ab.t(b.q);c instanceof y?wc(b,this.ka):C(b,c)};Gd.prototype.j=function(b){M.prototype.j.call(this,b);this.ka.j(b)};Gd.prototype.toString=function(){return"(if "+a+" "+a+" "+elseExpr+")"};function Hd(b,c,d){this.e=j;this.aa=b;this.G=c;this.z=d}t["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=Hd;Hd.prototype=new M;Hd.prototype.className="If_bound_literal_literal";Hd.prototype.d=function(b){this.aa.t(b.q)instanceof y?C(b,this.z):C(b,this.G)};
Hd.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};Hd.addInstructions=function(b,c,d,f){f instanceof V||g(new TypeError);c instanceof T||g(new TypeError);b.push(new Hd(c,d,f.k))};function Id(b,c,d){this.e=j;this.aa=b;this.G=c;this.Ma=Bd(c);this.z=d}t["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=Id;Id.prototype=new M;Id.prototype.className="If_bound_other_literal";Id.prototype.d=function(b){this.aa.t(b.q)instanceof y?C(b,this.z):wc(b,this.Ma)};
Id.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};Id.prototype.j=function(b){M.prototype.j.call(this,b);this.Ma.j(b)};Id.addInstructions=function(b,c,d,f){c instanceof T||g(new TypeError);f instanceof V||g(new TypeError);b.push(new Id(c,d,f.k))};function Jd(b,c,d){this.e=j;this.aa=b;this.G=c;this.Ma=Bd(c);this.z=d;this.ka=Bd(d)}t["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=Jd;Jd.prototype=new M;Jd.prototype.className="If_bound_other_other";
Jd.prototype.d=function(b){this.aa.t(b.q)instanceof y?wc(b,this.ka):wc(b,this.Ma)};Jd.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};Jd.prototype.j=function(b){M.prototype.j.call(this,b);this.Ma.j(b)};Jd.addInstructions=function(b,c,d,f){c instanceof T||g(new TypeError);b.push(new Jd(c,d,f))};function Kd(b,c){this.e=j;this.ka=Bd(c);this.G=b;this.z=c}t["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=Kd;Kd.prototype=new M;Kd.prototype.className="If_other_bound_other";
Kd.prototype.d=function(b){Q(b)instanceof y?wc(b,this.ka):C(b,this.G.t(b.q))};Kd.prototype.toString=function(){return"(if ? "+this.G+" "+this.z+")"};Kd.prototype.j=function(b){M.prototype.j.call(this,b);this.ka.j(b)};Kd.addInstructions=function(b,c,d,f){c.l(b);d instanceof T||g(new TypeError);b.push(new Kd(d,f))};function Ld(b,c){this.e=j;this.Ma=Bd(b);this.G=b;this.z=c}t["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=Ld;Ld.prototype=new M;Ld.prototype.className="If_other_other_literal";
Ld.prototype.d=function(b){Q(b)instanceof y?C(b,this.z):wc(b,this.Ma)};Ld.prototype.toString=function(){return"(if ? "+this.G+" "+this.z+")"};Ld.prototype.j=function(b){M.prototype.j.call(this,b);this.Ma.j(b)};Ld.addInstructions=function(b,c,d,f){f instanceof V||g(new TypeError);c.l(b);b.push(new Ld(d,f.k))};function Md(b,c){this.e=j;this.G=b;this.z=c}t["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=Md;Md.prototype=new M;Md.prototype.className="If_other_stack_literal";
Md.prototype.d=function(b){Q(b)instanceof y?C(b,this.z):C(b,this.G.get(b))};Md.prototype.toString=function(){return"(if ? "+this.G+" "+this.z+")"};Md.addInstructions=function(b,c,d,f){f instanceof V||g(new TypeError);c.l(b);d instanceof W||g(new TypeError);b.push(new Md(d,f.k))};function Nd(b,c){this.e=j;this.G=b;this.ka=Bd(c);this.z=c}t["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=Nd;Nd.prototype=new M;Nd.prototype.className="If_other_stack_other";
Nd.prototype.d=function(b){Q(b)instanceof y?wc(b,this.ka):C(b,this.G.get(b))};Nd.prototype.toString=function(){return"(if ? "+this.G+" "+this.z+")"};Nd.prototype.j=function(b){M.prototype.j.call(this,b);this.ka.j(b)};Nd.addInstructions=function(b,c,d,f){c.l(b);d instanceof W||g(new TypeError);b.push(new Nd(d,f))};function Od(b,c,d){this.aa=b;this.G=c;this.z=d}t["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=Od;Od.prototype=new M;Od.prototype.className="If_stack_literal_free";
Od.prototype.d=function(b){this.aa.get(b)instanceof y?C(b,this.z.value()):C(b,this.G)};Od.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};Od.addInstructions=function(b,c,d,f){c instanceof W||g(new TypeError);f instanceof V||g(new TypeError);f=f.k;f instanceof L||g(new TypeError);b.push(new Od(c,d,f))};function Pd(b,c,d){this.e=j;this.aa=b;this.G=c;this.z=d}t["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=Pd;Pd.prototype=new M;Pd.prototype.className="If_stack_stack_literal";
Pd.prototype.d=function(b){this.aa.get(b)instanceof y?C(b,this.z):C(b,this.G.get(b))};Pd.prototype.toString=function(){return"(if "+this.aa+" "+this.G+" "+this.z+")"};Pd.addInstructions=function(b,c,d,f){c instanceof W||g(new TypeError);d instanceof W||g(new TypeError);f instanceof V||g(new TypeError);Qd(c,d)?f.k instanceof y?c.l(b):b.push(new Rd(c,f.k)):b.push(new Pd(c,d,f.k))};function Rd(b,c){this.e=j;this.Ab=b;this.z=c}Rd.prototype=new M;Rd.prototype.className="If_stack_stack_literal.Or";
Rd.prototype.d=function(b){var c=this.Ab.get(b);c instanceof y?C(b,this.z):C(b,c)};Rd.prototype.toString=function(){return"(if[ssl$or] "+a+" "+a+" "+elseExpr+")"};function Sd(b){this.e=j;this.p=b}Sd.prototype=new M;q=Sd.prototype;q.la=!0;q.className="Invoke_0.Lex";q.d=function(b){this.p.t(b.q).f(b,B)};q.toString=function(){return"(invoke "+this.p+")"};q.oa=function(b){return this.p.t(b.q)};function Td(b){this.e=j;this.p=b}Td.prototype=new M;q=Td.prototype;q.la=!0;q.className="Invoke_0.Free";
q.d=function(b){this.p.value().f(b,B)};q.toString=function(){return"(invoke "+this.p+")"};q.oa=function(){return this.p.value()};function Ud(){this.e=j}Ud.prototype=new M;q=Ud.prototype;q.la=!0;q.className="Invoke_0.Other";q.d=function(b){Q(b).f(b,B)};q.toString=n("(invoke <0>)");q.oa=function(b){return yc(b)};function Vd(b){this.e=j;this.p=b}Vd.prototype=new M;q=Vd.prototype;q.la=!0;q.className="Invoke_1.Lex";q.d=function(b){this.p.t(b.q).f(b,new A(Q(b),B))};
q.toString=function(){return"(invoke "+this.p+" <1>)"};q.oa=function(b){return this.p.t(b.q)};function Wd(b){this.e=j;this.p=b}Wd.prototype=new M;q=Wd.prototype;q.la=!0;q.className="Invoke_1.Free";q.d=function(b){this.p.value().f(b,new A(Q(b),B))};q.toString=function(){return"(invoke "+this.p+" <1>)"};q.oa=function(){return this.p.value()};function Xd(){this.e=j}Xd.prototype=new M;q=Xd.prototype;q.la=!0;q.className="Invoke_1.Other";q.d=function(b){Q(b).f(b,new A(Q(b),B))};q.toString=n("(invoke <1>)");
q.oa=function(b){return yc(b)};function Yd(b){this.e=j;this.p=b}Yd.prototype=new M;q=Yd.prototype;q.la=!0;q.className="Invoke_2.Lex";q.d=function(b){var c=Q(b),d=Q(b);this.p.t(b.q).f(b,new A(d,new A(c,B)))};q.toString=function(){return"(invoke "+this.p+" <2>)"};q.Wa=function(b){return"(invoke "+this.p+" -> "+this.p.t(b)+" <2>)"};q.oa=function(b){return this.p.t(b.q)};function Zd(b){this.e=j;this.p=b}Zd.prototype=new M;q=Zd.prototype;q.la=!0;q.className="Invoke_2.Free";
q.d=function(b){var c=Q(b),d=Q(b);this.p.value().f(b,new A(d,new A(c,B)))};q.toString=function(){return"(invoke_2:free "+this.p+" <2>)"};q.Wa=function(){return"(invoke_2:free "+this.p+" -> "+this.p.value()+" <2>)"};q.oa=function(){return this.p.value()};function $d(){this.e=j}$d.prototype=new M;q=$d.prototype;q.la=!0;q.className="Invoke_2.Other";q.d=function(b){var c=Q(b),d=Q(b),f=Q(b);try{c.f(b,new A(f,new A(d,B)))}catch(h){h instanceof Error||g(h),oa(h)}};q.toString=n("(invoke <2>)");q.oa=function(b){return yc(b)};
function ae(b){this.e=j;this.p=b}ae.prototype=new M;q=ae.prototype;q.la=!0;q.className="Invoke_3.Lex";q.d=function(b){var c=Q(b),d=Q(b),f=Q(b);this.p.t(b.q).f(b,new A(f,new A(d,new A(c,B))))};q.toString=function(){return"(invoke "+this.p+" <3>)"};q.oa=function(b){return this.p.t(b.q)};function be(b){this.e=j;this.p=b}be.prototype=new M;q=be.prototype;q.la=!0;q.className="Invoke_3.Free";q.d=function(b){var c=Q(b),d=Q(b),f=Q(b);this.p.value().f(b,new A(f,new A(d,new A(c,B))))};
q.toString=function(){return"(invoke_3:free "+this.p+" <3>)"};q.oa=function(){return this.p.value()};function ce(){this.e=j}ce.prototype=new M;q=ce.prototype;q.la=!0;q.className="Invoke_3.Other";q.d=function(b){var c=Q(b),d=Q(b),f=Q(b),h=Q(b);c.f(b,new A(h,new A(f,new A(d,B))))};q.toString=n("(invoke <3>)");q.oa=function(b){return yc(b)};function de(b,c){this.e=j;this.p=b;this.Xa=c}de.prototype=new M;q=de.prototype;q.la=!0;q.className="Invoke_N.Lex";q.d=function(b){this.p.t(b.q).f(b,zc(b,this.Xa))};
q.toString=function(){return"(invoke "+this.p+" <"+this.Xa+">)"};q.oa=function(b){return this.p.t(b.q)};function ee(b,c){this.e=j;this.p=b;this.Xa=c}ee.prototype=new M;q=ee.prototype;q.la=!0;q.className="Invoke_N.Free";q.d=function(b){this.p.value().f(b,zc(b,this.Xa))};q.toString=function(){return"(invoke "+this.p+" <"+this.Xa+">)"};q.oa=function(){return this.p.value()};function xa(b){this.e=j;this.Xa=b}xa.prototype=new M;q=xa.prototype;q.la=!0;q.className="Invoke_N.Other";
q.d=function(b){Q(b).f(b,zc(b,this.Xa))};q.toString=function(){return"(invoke <"+this.Xa+">)"};q.oa=function(b){return yc(b)};function W(b,c){this.name=b;this.ab=c}W.prototype=new x;q=W.prototype;q.className="StackSymbol";q.get=function(b){return b.Eb[this.ab]};q.set=function(b,c){b.ma[b.g][this.ab]=c};q.l=function(b){b.push(new Rc(this.name,this.ab))};q.type=function(){return J("stack-symbol")};q.toString=function(){return this.name.toString()};
function Qd(b,c){return b.name===c.name&&b.ab===c.ab}q.Q=function(b,c,d){return Qd(this,b)?c:d<this.ab?new W(this.name,this.index-1):this};function T(b,c,d){this.Ja=c;this.index=d;this.name=b}T.prototype=new x;q=T.prototype;q.className="BoundSymbol";function Vc(b,c,d){c.vb(b.Ja).set(b.index,d)}q.t=function(b){for(var c=this.Ja;0<c;)b=b.parent,c--;return b.Za[this.index]};q.l=function(b){b.push(new Mc(this))};q.type=function(){return he};q.toString=function(){return this.name.toString()};
function Dd(b,c){return b.Ja===c.Ja&&b.name===c.name&&b.index===c.index}q.L=function(b){return b<=this.Ja?new T(this.name,this.Ja+1,this.index):this};function ie(b){return new T(b.name,b.Ja-1,b.index)}q.R=function(b,c,d,f,h){return Dd(this,b)?c:d?(this.Ja===0&&g(new r("can't unnest "+this+", looking for "+b+" to inline with "+c)),ie(this)):f===this.Ja&&h<this.index?new T(this.name,this.Ja,this.index-1):this};q.j=function(b){b.mc(this)};
q.W=function(b){b=b[this.name.name()];if(b===i)return ie(this);else if(b===this.index)return new W(this.name,b);else g(new r("error: parameter index mismatch: expected "+b+", got "+this.index))};var he=J("bound-symbol");function je(b){this.A=this.name=j;this.Ka=b}je.prototype=new x;q=je.prototype;q.className="SingleAssignment";q.Ga=function(b){this.name===j?b instanceof L||b instanceof T?this.name=b:g(new r("assign: can't assign to "+b)):this.A===j?this.A=b:this.Ka.Ga(b)};
q.toString=function(){return""+this.name+" "+this.A};q.l=function(b){ke(this,b,!1);this.Ka.l(b)};
function ke(b,c,d){if(b.name instanceof T){var f=b.name,b=b.A;b instanceof T?d?c.push(new Xc(f,b)):c.push(new Yc(f,b)):b instanceof W?d?c.push(new cd(f,b)):c.push(new dd(f,b)):b instanceof L?d?c.push(new Uc(f,b)):c.push(new Wc(f,b)):b.Ca()?d?c.push(new Zc(f,b)):c.push(new $c(f,b)):b instanceof le?(b=b.yb,d?c.push(new Zc(f,b)):c.push(new $c(f,b))):(b.l(c),d?c.push(new ad(f)):c.push(new bd(f)))}else b.name instanceof W?(f=b.name,b=b.A,b instanceof T?d?c.push(new sd(f,b)):c.push(new td(f,b)):b instanceof
W?d?c.push(new yd(f,b)):c.push(new zd(f,b)):b instanceof L?d?c.push(new qd(f,b)):c.push(new rd(f,b)):b.Ca()?d?c.push(new ud(f,b)):c.push(new vd(f,b)):b instanceof le?(b=b.yb,d?c.push(new ud(f,b)):c.push(new vd(f,b))):(b.l(c),d?c.push(new wd(f)):c.push(new xd(f)))):b.name instanceof L?(f=b.name,b=b.A,b instanceof T?d?c.push(new hd(f,b)):c.push(new id(f,b)):b instanceof W?d?c.push(new nd(f,b)):c.push(new od(f,b)):b instanceof L?d?c.push(new fd(f,b)):c.push(new gd(f,b)):b.Ca()?d?c.push(new jd(f,b)):
c.push(new kd(f,b)):b instanceof le?(b=b.yb,d?c.push(new jd(f,b)):c.push(new kd(f,b))):(b.l(c),d?c.push(new ld(f)):c.push(new md(f)))):g(new r("what kind of symbol is "+b.name+"??"))}q.type=function(){return J("assignment")};q.ea=n(!0);q.V=function(){return this.A instanceof Y?me(this.A)||this.Ka.V():this.A.V()||this.Ka.V()};
q.R=function(b,c,d,f,h){var k=new je(j);this.name instanceof T&&Dd(b,this.name)&&g(new r("Can't inline "+b+" -> "+c+"; assignment"));k.name=this.name;k.A=this.A.R(b,c,d,f,h);k.Ka=this.wd(b,c,d,f,h);return k};q.Q=function(b,c,d){var f=new je(j);this.name instanceof W&&Qd(b,this.name)&&g(new r("Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name;f.A=this.A.Q(b,c,d);f.Ka=this.vd(b,c,d);return f};q.L=function(b){var c=new je(j);c.name=this.name.L(b);c.A=this.A.L(b);c.Ka=this.Ka.L(b);return c};
q.W=function(b){var c=new je(j);c.name=this.name.W(b);c.A=this.A.W(b);b=this.Ka.W(b);b instanceof je||g(new TypeError);c.Ka=b;return c};q.j=function(b){b.sa(this);this.name.j(b);this.A.j(b);this.Ka.j(b);b.Ea(this)};function ne(){je.call(this,j)}ne.prototype=new je(j);q=ne.prototype;q.className="LastAssignment";q.Ga=function(b){this.name===j?b instanceof L||b instanceof T?this.name=b:g(new r("assign: can't assign to "+b)):this.A===j?this.A=b:g(new r("assign: error: unexpected "+b))};
q.toString=function(){return""+this.name+" "+this.A};q.l=function(b){ke(this,b,!0)};q.V=function(){return this.A instanceof Y?me(this.A):this.A.V()};q.R=function(b,c,d,f,h){var k=new ne;this.name instanceof T&&Dd(b,this.name)&&g(new r("Can't inline "+b+" -> "+c+"; assignment"));k.name=this.name.R(b,c,d,f,h);k.A=this.A.R(b,c,d,f,h);return k};
q.Q=function(b,c,d){var f=new ne;this.name instanceof W&&Qd(b,this.name)&&g(new r("Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name.Q(b,c,d);f.A=this.A.Q(b,c,d);return f};q.L=function(b){var c=new ne;c.name=this.name.L(b);c.A=this.A.L(b);return c};q.W=function(b){var c=new ne;c.name=this.name.W(b);c.A=this.A.W(b);return c};q.j=function(b){b.sa(this);this.name.j(b);this.A.j(b);b.Ea(this)};function oe(){this.Y=j}oe.prototype=new x;q=oe.prototype;q.className="Assignment";q.type=function(){return J("assignment")};
q.Ga=function(b){this.Y.Ga(b)};q.l=function(b){this.Y.l(b)};q.toString=function(){return"(assign "+this.Y+")"};q.ea=function(b){return this.Y.ea(b)};q.V=function(){return this.Y.V()};q.R=function(b,c,d,f,h){var k=new oe;k.Y=this.Y.R(b,c,d,f,h);return k};q.Q=function(b,c,d){var f=new oe;f.Y=this.Y.Q(b,c,d);return f};q.L=function(b){var c=new oe;c.Y=this.Y.L(b);return c};q.j=function(b){b.sa(this);this.Y.j(b);b.Ea(this)};
q.W=function(b){var c=new oe,b=this.Y.W(b);b instanceof je||g(new TypeError);c.Y=b;return c};function V(){this.k=j}V.prototype=new x;q=V.prototype;q.Fa=!0;q.className="Else";q.type=function(){return J("else-clause")};q.add=function(b){g(new r("Internal error: if clause: unexpected extra condition: "+b))};q.Ga=function(b){this.k===j?this.k=b:g(new r("Internal error: if clause: unexpected: "+b))};q.l=function(b){this.k.l(b)};q.reduce=function(){return this};q.toString=function(){return""+this.k};
q.ea=function(b){return this.k.ea(b)};q.V=function(){return this.k instanceof Y?me(this.k):this.k.V()};q.R=function(b,c,d,f,h){var k=new V;k.k=this.k.R(b,c,d,f,h).reduce();return k};q.Q=function(b,c,d){var f=new V;f.k=this.k.Q(b,c,d).reduce();return f};q.L=function(b){var c=new V;c.k=this.k.L(b);return c};q.W=function(b){var c=new V;c.k=this.k.W(b);return c};q.j=function(b){b.sa(this);this.k.j(b);b.Ea(this)};q.gc=function(){return"_"+pe(this.k)};function qe(){this.X=j}qe.prototype=new x;q=qe.prototype;
q.className="IfClause";q.type=function(){return re};q.append=function(b){this.X!==j?this.X.add(b):this.X=b};q.reduce=function(){var b=this.X.reduce();b.Fa||g(new TypeError);this.X=b;return b instanceof V?b.k:this};q.Ga=function(b){this.X.Ga(b)};q.l=function(b){this.X.l(b)};q.toString=function(){return"(if "+this.X+")"};q.ea=function(b){return this.X.ea(b)};q.V=function(){return this.X.V()};q.R=function(b,c,d,f,h){var k=new qe,b=this.X.R(b,c,d,f,h).reduce();b.Fa||g(new TypeError);k.X=b;return k};
q.Q=function(b,c,d){var f=new qe,b=this.X.Q(b,c,d).reduce();b.Fa||g(new TypeError);f.X=b;return f};q.L=function(b){var c=new qe,b=this.X.L(b);b.Fa||g(new TypeError);c.X=b;return c};q.W=function(b){var c=new qe,b=this.X.W(b);b.Fa||g(new TypeError);c.X=b;return c};q.j=function(b){b.sa(this);this.X.j(b);b.Ea(this)};q.P=function(){var b=this.X;b instanceof se||g(new TypeError);return b.P};var re=J("if-clause");function se(){this.next=this.P=this.k=j}se.prototype=new x;q=se.prototype;q.Fa=!0;
q.className="IfThen";q.type=function(){return J("if-then-clause")};q.add=function(b){this.next!==j?this.next.add(b):this.next=b};q.Ga=function(b){this.k===j?this.k=b:this.P===j?this.P=b:this.next.Ga(b)};
q.l=function(b){var c=this.gc(),d="rainbow.vm.instructions.cond.optimise.If"+c;try{if(d in te){var f=te[d];f===j?this.oc(b,c):f(b,this.k,this.P,this.next)}else{var h=t[d];if(h===i)te[d]=j;else{var k=h.addInstructions;k===i&&g(new r("couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+d));te[d]=k}this.l(b)}}catch(o){o instanceof Error||g(o),g(new r("Couldn't instantiate "+d+": "+o,o))}};q.oc=function(b){this.k.l(b);b.push(new Ad(this.P,this.next))};
q.reduce=function(){var b=this.next.reduce();b.Fa||g(new TypeError);this.next=b;if(this.k instanceof y)return this.next;else{!(this.k instanceof T)||!(this.P instanceof T)||!(this.next instanceof V)?b=!1:(b=this.next,b=Dd(this.k,this.P)&&b.k instanceof y);if(!b)!(this.k instanceof W)||!(this.P instanceof W)||!(this.next instanceof V)?b=!1:(b=this.next,b=Qd(this.k,this.P)&&b.k instanceof y);return b?(b=new V,b.Ga(this.k),b):this}};q.toString=function(){return""+this.k+" "+this.P+" "+this.next};
q.ea=function(b){return this.k.ea(b)||this.P.ea(b)||this.next.ea(b)};q.V=function(){return this.k instanceof Y&&me(this.k)?!0:this.P instanceof Y&&me(this.P)?!0:this.k.V()||this.P.V()||this.next.V()};q.R=function(b,c,d,f,h){var k=new se;k.k=this.k.R(b,c,d,f,h).reduce();k.P=this.P.R(b,c,d,f,h).reduce();b=this.next.R(b,c,d,f,h).reduce();b.Fa||g(new TypeError);k.next=b;return k};
q.Q=function(b,c,d){var f=new se;f.k=this.k.Q(b,c,d).reduce();f.P=this.P.Q(b,c,d).reduce();b=this.next.Q(b,c,d).reduce();b.Fa||g(new TypeError);f.next=b;return f};q.L=function(b){var c=new se;c.k=this.k.L(b);c.P=this.P.L(b);b=this.next.L(b);b.Fa||g(new TypeError);c.next=b;return c};q.W=function(b){var c=new se;c.k=this.k.W(b);c.P=this.P.W(b);b=this.next.W(b);b.Fa||g(new TypeError);c.next=b;return c};q.j=function(b){b.sa(this);this.k.j(b);this.P.j(b);this.next.j(b);b.Ea(this)};
q.gc=function(){var b="";b+="_";b+=pe(this.k);b+="_";b+=pe(this.P);this.next instanceof V?(b+="_",b+=pe(this.next.k)):b+="_other";return b};var te={};function le(b){this.yb=b}le.prototype=new x;q=le.prototype;q.className="Quotation";q.l=function(b){b.push(new E(this.yb))};q.type=function(){return J("quotation")};q.t=m("yb");q.toString=function(){return"'"+this.yb};function ue(b){this.w=b;this.Tb={}}ue.prototype=new x;q=ue.prototype;q.className="Invocation";q.type=function(){return J("if-then-clause")};
q.toString=function(){return(this.w.a()instanceof Y?ve(we(this.w)):this.w).toString()};q.l=function(b){var c;this.w.ha()===1&&this.w.a()instanceof xe?(ye(this.w.a(),b),c=!0):c=!1;c||ze(this,b)||this.oc(b)};
q.reduce=function(){if(this.w.$b(1)&&this.w.a()instanceof Y){var b=this.w.a(),c=b.v;if(c.M()||!(c.a()instanceof L))return this;var c=c.a(),d=this.w.b().a();if(b.eb(c,d)){try{var f=b.gb(c,d,!0)}catch(h){h instanceof Error||g(h),g(new r("couldn't curry "+c+"->"+d+" for "+b+" in expression "+this+": "+h,h))}return(new ue(new A(f,this.w.b().b()))).reduce()}}return this};
function ze(b,c){for(var d="",f=b.w;!(f instanceof y);)d+="_",d+=pe(f.a()),f=f.b(),f instanceof A||g(new TypeError);d="rainbow.vm.instructions.invoke.optimise.Invoke"+d;if(d in b.Tb){f=b.Tb[d];if(f===j)return!1;try{var h=new f(b.w),k=b.w.b();for(k instanceof A||g(new TypeError);!(k instanceof y);)b.gc(k.a())==="other"&&k.a().l(c),k=k.b(),k instanceof A||g(new TypeError);b.gc(b.w.a())==="other"&&b.w.a().l(c);c.push(h);return!0}catch(o){o instanceof Error||g(o),g(new r("couldn't create optimiser "+
d,o))}}else{h=t[d];if(h===i)return b.Tb[d]=j,!1;b.Tb[d]=h;return ze(b,c)}}function pe(b){return b instanceof T?"bound":b instanceof L?"free":b instanceof W?"stack":b.Ca()?"literal":b instanceof le?"quote":"other"}
q.oc=function(b){switch(this.w.ha()){case 1:var c=this.w.a();c instanceof T?b.push(new Sd(c)):c instanceof L?b.push(new Td(c)):(c.l(b),b.push(new Ud));break;case 2:c=this.w.a();this.w.b().a().l(b);c instanceof T?b.push(new Vd(c)):c instanceof L?b.push(new Wd(c)):(c.l(b),b.push(new Xd));break;case 3:var c=this.w.a(),d=this.w.b().a(),f=this.w.b().b().a();d.l(b);f.l(b);c instanceof T?b.push(new Yd(c)):c instanceof L?b.push(new Zd(c)):(c.l(b),b.push(new $d));break;case 4:var c=this.w.a(),d=this.w.b().a(),
f=this.w.b().b().a(),h=this.w.b().b().b().a();d.l(b);f.l(b);h.l(b);c instanceof T?b.push(new ae(c)):c instanceof L?b.push(new be(c)):(c.l(b),b.push(new ce));break;default:c=this.w.a();d=this.w.b();d instanceof A||g(new TypeError);for(f=d.ha();!(d instanceof y);)d.a().l(b),d=d.b(),d instanceof A||g(new TypeError);c instanceof T?b.push(new de(c,f)):c instanceof L?b.push(new ee(c,f)):(c.l(b),b.push(new xa(f)))}return!0};
q.ea=function(b){for(var c=this.w;!(c instanceof y);){if(c.a().ea(b))return!0;c=c.b();c instanceof A||g(new TypeError)}return!1};q.V=function(){for(var b=this.w;!(b instanceof y);){if(b.a()instanceof Y){if(me(b.a()))return!0}else if(b.a().V())return!0;b=b.b();b instanceof A||g(new TypeError)}return!1};
q.R=function(b,c,d,f,h){for(var k=this.w,o=[];!(k instanceof y);){try{o.push(k.a().R(b,c,d,f,h))}catch(p){p instanceof Error||g(p),g(new r("couldn't inline "+b+"->"+c+"(unnest:"+d+";nesting:"+f+") in "+this+" : "+p,p))}k=k.b();k instanceof A||g(new TypeError)}return new ue(w(o))};q.Q=function(b,c,d){for(var f=this.w,h=[];!(f instanceof y);){try{h.push(f.a().Q(b,c,d))}catch(k){k instanceof Error||g(k),g(new r("couldn't inline "+b+"->"+c+") in "+this+" : "+k,k))}f=f.b();f instanceof A||g(new TypeError)}return new ue(w(h))};
q.L=function(b){for(var c=this.w,d=[];!(c instanceof y);)d.push(c.a().L(b)),c=c.b(),c instanceof A||g(new TypeError);return new ue(w(d))};q.W=function(b){for(var c=this.w,d=[];!(c instanceof y);)d.push(c.a().W(b)),c=c.b(),c instanceof A||g(new TypeError);return new ue(w(d))};q.j=function(b){b.sa(this);for(var c=this.w;!(c instanceof y);)c.a().j(b),c=c.b(),c instanceof A||g(new TypeError);b.Ea(this)};function Ae(b){this.Da=b}Ae.prototype=new x;q=Ae.prototype;q.className="QuasiQuotation";q.type=function(){return J("quasiquotation")};
q.l=function(b){Be(this,b,this.Da,1)};q.toString=function(){return"`"+this.Da};function Ce(b){var c=[];De(b,c,b.Da,1);return c}function De(b,c,d,f){if(Z(d))f===1?c.push(d.b().a()):De(b,c,d.b().a(),f-1);else if(Ee(d))f===1?c.push(d.b().a()):De(b,c,d.b().a(),f-1);else if(Fe(d))De(b,c,d.b().a(),f+1);else if(!d.M())for(;!d.M();)if(Z(d)||Fe(d))De(b,c,d,f),d=d.b().b();else{var h=d.a(),d=d.b();Ee(h)?De(b,c,h,f):(Z(h)||Fe(h)||Ge(h))&&De(b,c,h,f)}}
function Be(b,c,d,f){if(Z(d))f===1?d.b().a().l(c):(c.push(new E(He)),Be(b,c,d.b().a(),f-1),c.push(new Nc(2)));else if(Ee(d))f===1?(d.b().a().l(c),c.push(new Fc)):(c.push(new E(Ie)),Be(b,c,d.b().a(),f-1),c.push(new Nc(2)),c.push(new Ec));else if(Fe(d))c.push(new E(Je)),Be(b,c,d.b().a(),f+1),c.push(new Nc(2));else if(d.M())c.push(new E(d));else{for(c.push(new Oc);!d.M();)if(Z(d)||Fe(d))Be(b,c,d,f),d=d.b().b(),c.push(new Gc);else{var h=d.a(),d=d.b();Ee(h)?Be(b,c,h,f):(Z(h)||Fe(h)||Ge(h)?Be(b,c,h,f):
c.push(new E(h)),c.push(new Ec))}d instanceof y||(c.push(new E(d)),c.push(new Gc));c.push(new Lc)}}function Ke(b,c){return b instanceof A&&b.sc(c)&&b.b().b()instanceof y}function Z(b){return Ke(b,He)}function Ee(b){return Ke(b,Ie)}function Fe(b){return Ke(b,Je)}function Ge(b){return b instanceof A}q.ea=function(b){for(var c=Ce(this),d=0,f=c.length;d<f;d++)if(c[d].ea(b))return!0;return!1};q.V=function(){for(var b=Ce(this),c=0,d=b.length;c<d;c++){var f=b[c];if(f instanceof Y){if(me(f))return!0}else if(f.V())return!0}return!1};
q.R=function(b,c,d,f,h){return new Ae(Le(b,c,d,f,h,this.Da,1))};
function Le(b,c,d,f,h,k,o){if(Z(k))return o===1?w([He,k.b().a().R(b,c,d,f,h)]):w([He,Le(b,c,d,f,h,k.b().a(),o-1)]);else if(Ee(k))return o===1?w([Ie,k.b().a().R(b,c,d,f,h)]):w([Ie,Le(b,c,d,f,h,k.b().a(),o-1)]);else if(Fe(k))return w([Je,Le(b,c,d,f,h,k.b().a(),o+1)]);else if(k.M())return k;for(var p=[],z=B;!k.M();)if(Z(k)||Fe(k))z=Le(b,c,d,f,h,k,o),k=k.b().b();else{var K=k.a(),k=k.b();Ee(K)?p.push(Le(b,c,d,f,h,K,o)):Z(K)||Fe(K)||Ge(K)?p.push(Le(b,c,d,f,h,K,o)):p.push(K)}k instanceof y||(z=k);return ab(p,
z)}q.Q=function(b,c,d){return new Ae(Me(b,c,d,this.Da,1))};
function Me(b,c,d,f,h){if(Z(f))return h===1?w([He,f.b().a().Q(b,c,d)]):w([He,Le(b,c,d,f.b().a(),h-1)]);else if(Ee(f))return h===1?w([Ie,f.b().a().Q(b,c,d)]):w([Ie,Me(b,c,d,f.b().a(),h-1)]);else if(Fe(f))return w([Je,Me(b,c,d,f.b().a(),h+1)]);else if(f.M())return f;for(var k=[],o=B;!f.M();)if(Z(f)||Fe(f))o=Me(b,c,d,f,h),f=f.b().b();else{var p=f.a(),f=f.b();Ee(p)?k.push(Me(b,c,d,p,h)):Z(p)||Fe(p)||Ge(p)?k.push(Me(b,c,d,p,h)):k.push(p)}f instanceof y||(o=f);return ab(k,o)}
q.L=function(b){return new Ae(Ne(b,this.Da,1))};function Ne(b,c,d){if(Z(c))return d===1?w([He,c.b().a().L(b)]):w([He,Ne(b,c.b().a(),d-1)]);else if(Ee(c))return d===1?w([Ie,c.b().a().L(b)]):w([Ie,Ne(b,c.b().a(),d-1)]);else if(Fe(c))return w([Je,Ne(b,c.b().a(),d+1)]);else if(c.M())return c;for(var f=[],h=B;!c.M();)if(Z(c)||Fe(c))h=Ne(b,c,d),c=c.b().b();else{var k=c.a(),c=c.b();Ee(k)||Z(k)||Fe(k)||Ge(k)?f.push(Ne(b,k,d)):f.push(k)}c instanceof y||(h=c);return ab(f,h)}
q.W=function(b){return new Ae(Oe(b,this.Da,1))};function Oe(b,c,d){if(Z(c))return d===1?w([He,c.b().a().W(b)]):w([He,Oe(b,c.b().a(),d-1)]);else if(Ee(c))return d===1?w([Ie,c.b().a().W(b)]):w([Ie,Oe(b,c.b().a(),d-1)]);else if(Fe(c))return w([Je,Oe(b,c.b().a(),d+1)]);else if(c.M())return c;for(var f=[],h=B;!c.M();)if(Z(c)||Fe(c))h=Oe(b,c,d),c=c.b().b();else{var k=c.a(),c=c.b();Ee(k)||Z(k)||Fe(k)||Ge(k)?f.push(Oe(b,k,d)):f.push(k)}c instanceof y||(h=c);return ab(f,h)}
q.j=function(b){b.sa(this);for(var c=Ce(this),d=0,f=c.length;d<f;d++)c[d].j(b);b.Ea(this)};function Pe(){}q=Pe.prototype;q.sa=l();q.Ea=l();q.Pb=function(b){this.sa(b)};q.mc=function(b){this.sa(b)};q.Ob=function(b){this.sa(b)};q.Vb=function(b){this.Ea(b)};function Qe(b){this.Ib=new A(b,B)}Qe.prototype=new Pe;Qe.prototype.Pb=function(b){b.n(this.Ib.a());this.Ib=new A(b,this.Ib)};Qe.prototype.Vb=function(){this.Ib=this.Ib.b()};function Re(){this.ob=[];this.zc=[];this.lb=0;this.yc=-1}Re.prototype=new Pe;
q=Re.prototype;q.Pb=function(b){b.Hb()&&this.lb++};q.sa=l();q.Ea=l();q.Vb=function(b){b.Hb()&&this.lb--};q.mc=function(b){b=b.Ja-this.lb;if(this.yc<b)this.yc=b};function Se(b){this.ob=[];this.zc=[];this.Da=b}Se.prototype=new Pe;q=Se.prototype;q.count=function(){return this.zc.length};q.Pb=function(b){this.ob.unshift(b);if(b.Hb())this.Da=this.Da.L(0)};q.sa=function(b){this.ob.unshift(b)};q.Ea=function(){this.ob.shift()};q.Vb=function(b){this.ob.shift();if(b.Hb())this.Da=ie(this.Da)};
q.mc=function(b){Dd(b,this.Da)&&0<this.ob.length&&this.zc.push(this.ob[0])};function Te(){this.name=this.target=j;this.Uc=this.ad=this.$c=0;this.children=[];this.parent=j;this.Wc={};this.Vc={}}function Ue(b,c){var d=c.La(),f=b[d];if(f===i&&(f=new Te,f.target=c,f.name=d,b[d]=f,c instanceof Y&&(d=c.Zb,d!==j)))d=Ue(b,d),d.children.push(f),f.parent=d;return f}function Ve(b){this.target=b;this.count=0;this.key=b.La()}function We(b,c){var d=b[c.La()];d===i&&(d=new Ve(c),b[d.key]=d);return d}
function Xe(){this.rc={};this.rd={};this.tc=j;this.now=0}function Ye(){}Ye.prototype.$a=i;Ye.prototype.end=i;Ye.prototype.tb=i;function Ze(b){b.show();var c=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");if(c!==j)if(/^q$/i.test(c))Ac(b,oc);else if(/^f$/i.test(c))b.Fc=b.g-1,Ac(b,$e)}function af(){}af.prototype=new Ye;af.prototype.$a=l();af.prototype.end=l();af.prototype.tb=l();var oc=new af;function bf(){}bf.prototype=new Ye;bf.prototype.$a=function(b){Ze(b)};
bf.prototype.end=function(b){na("VM thread finished: returning.");Ze(b)};bf.prototype.tb=l();var cf=new bf;function df(){}df.prototype=new Ye;df.prototype.$a=function(b){b.Ub=!0;for(var c=[],d=[];0<=b.g;)rc(b).a().Fb&&(c.push(rc(b)),d.push(b.ga[b.g])),b.g--;for(var f=c.length-1;0<=f;f--)R(b,d[f],c[f])};df.prototype.end=l();df.prototype.tb=l();var ef=new df;function ff(){}ff.prototype=new Ye;ff.prototype.$a=function(b){b.g<=b.Fc&&Ac(b,cf)};ff.prototype.end=l();ff.prototype.tb=l();var $e=new ff;
function gf(){}gf.prototype=new Ye;gf.prototype.$a=function(b){var c=b.Qa.tc;if(c!==j){var d=Ue(b.Qa.rc,c),c=(new Date).getTime()*1E6-b.Qa.now;d.ad+=c;d.Uc+=c;for(d=d.parent;d!==j;)d.Uc+=c,d=d.parent}var f=Cc(b);if(f!==j)b.q=b.ga[b.g],b.Eb=b.ma[b.g],this.md(f,b),f.la?(c=f.oa(b),c instanceof Jc&&(c=c.p()),d=Ue(b.Qa.rc,c),f=f.e,f!==j&&We(d.Wc,f).count++,f=Ue(b.Qa.rc,f),c!==j&&We(f.Vc,c).count++,d.$c++,b.Qa.tc=c):b.Qa.tc=f.e!==j?f.e:B,b.Qa.now=(new Date).getTime()*1E6};gf.prototype.end=l();
gf.prototype.tb=function(b){b.Qa=new Xe;b.Qa.now=(new Date).getTime()*1E6};var hf=new gf;function jf(b,c,d){this.e=j;this.Sb=b;this.J=c;this.s=d;this.n(F("AssignmentBuilder.build"))}jf.prototype=new M;jf.prototype.className="AssignmentBuilder.BuildAssignment1";jf.prototype.d=function(b){if(!(this.J instanceof y)){try{this.J.ub()}catch(c){c instanceof ta||g(c),g(new r("assign: unexpected: "+this.J))}D(b,new kf(this.Sb,this.J.b(),this.s));lf(b,this.J.a(),this.s)}};
function kf(b,c,d){this.e=j;this.Sb=b;this.J=c;this.s=d;this.n(F("AssignmentBuilder.build"))}kf.prototype=new M;kf.prototype.className="AssignmentBuilder.BuildAssignment2";kf.prototype.d=function(b){this.Sb.Ga(Q(b).reduce());D(b,new jf(this.Sb,this.J,this.s))};var mf=B,nf=J("at-string");
function lf(b,c,d){if(c instanceof y)C(b,c);else if(c instanceof Ca&&!(mf instanceof y))D(b,new of(d)),nf.bound()?va(nf.value(),b,new A(c,B)):C(b,c);else if(c instanceof L&&pf(c))lf(b,qf(Ta(c,"ssexpand")),d);else if(c instanceof A){var f,h=c.a();f=!(h instanceof L)?j:!h.bound()?j:Yb(h.value());if(f!==j)h=c.b(),h instanceof A||g(new TypeError),D(b,new rf(d)),va(f,b,h);else if(f=c.a(),Sa("quote",f))C(b,new le(c.b().a()));else if(f===Je)D(b,new sf),tf(b,c.b().a(),d,1);else if(Sa("fn",f))h=c.b(),h instanceof
A||g(new TypeError),c=h,h=d,h===j&&g(new ReferenceError("can't have null lexical bindings!")),f={},d=c.a(),d instanceof y||(h=[f].concat(h)),D(b,new uf(c,h,f)),d instanceof y?C(b,new A(B,B)):(c=h,vf(d,c[0],[0],!1),wf(b,d,c));else if(Sa("if",f)){h=c=c.b();for(f=new qe;0<c.ha();)switch(c.ha()){case 0:break;case 1:f.append(new V);c=c.b();break;case 2:f.append(new se);c=c.b();c instanceof A||g(new TypeError);c.Ac(new A(B,B));c=c.b();break;default:f.append(new se),c=c.b().b()}c=h;D(b,new xf(f));D(b,new yf(f,
c,d))}else if(Sa("assign",f)){c=c.b();h=new oe;f=c.ha();f%2!==0&&g(new r("assign: requires even number of arguments"));f=f/2-1;f<0&&g(new r("assign: nothing to assign"));for(h.Y=new ne;0<f;)h.Y=new je(h.Y),f--;f=new E(h);f.n(F("AssignmentBuilder.build"));D(b,f);D(b,new jf(h,c,d))}else Sa("compose",f.lc())?(h=f.b(),h instanceof A||g(new TypeError),c=c.b(),c instanceof A||g(new TypeError),lf(b,zf(h,c),d)):Sa("complement",f.lc())?(h=c.b(),h instanceof A||g(new TypeError),c=lf,f=f.b().a(),h=new A(J("no"),
new A(new A(f,h),B)),c(b,h,d)):f instanceof L&&pf(f)?lf(b,new A(qf(Ta(f,"ssexpand")),c.b()),d):D(b,new Af(c,d,c,[]))}else{if(c instanceof L)for(h=0;h<d.length;h++)if(c.name()in d[h]){d=d[h][c.name()];C(b,new T(c,h,d));return}C(b,c)}}function of(b){this.e=j;this.s=b;this.n(F("Compiler.compile"))}of.prototype=new M;of.prototype.className="Compiler.FinishAtString";of.prototype.d=function(b){var c=Q(b);c instanceof Ca?C(b,c):lf(b,c,this.s)};
function rf(b){this.e=j;this.s=b;this.n(F("Compiler.compilePair"))}rf.prototype=new M;rf.prototype.className="Compiler.ThenCompile";rf.prototype.d=function(b){lf(b,Q(b),this.s)};function sf(){this.e=j;this.n(F("Compiler.compilePair"))}sf.prototype=new M;sf.prototype.className="Compiler.WrapQuasiQuotation";sf.prototype.d=function(b){C(b,new Ae(Q(b)))};function zf(b,c){var d=b.a();if(b.b()instanceof y)return new A(d,c);var f=b.b();f instanceof A||g(new TypeError);return new A(d,new A(zf(f,c),B))}
function uf(b,c,d){this.e=j;this.Ya=b;this.s=c;this.uc=d;this.n(F("FunctionBodyBuilder.build"))}uf.prototype=new M;uf.prototype.className="FunctionBodyBuilder.Intermediate";uf.prototype.d=function(b){var c=Q(b),d=c.a(),c=c.b(),f=this.Ya.b();f instanceof A||g(new TypeError);D(b,new Bf(c,this.uc,f,d,b.N));D(b,new Cf(f,this.s,[]))};function Bf(b,c,d,f,h){this.e=j;this.v=b;this.uc=c;this.J=d;this.ta=f;this.Bb=h;this.n(F("FunctionBodyBuilder.build"))}Bf.prototype=new M;Bf.prototype.Yb=!0;
Bf.prototype.className="FunctionBodyBuilder.Finish";Bf.prototype.nc=function(b){return b instanceof Error};Bf.prototype.d=function(b){var c=b.error();if(c!==j)b.Na=j,b.N=this.Bb,g(new r("building function fn "+this.v+" "+this.J+": "+c,c));C(b,Df(this.v,this.uc,Q(b),this.ta))};
function Df(b,c,d,f){var h="rainbow.function.interpreted.optimise.Bind"+Ef(b,!1),k=t[h];if(k===i)return f instanceof y?new Ff(b,c,d):new Gf(b,c,d);try{var o=k.of(b,c,d);o instanceof x||g(new TypeError);return o}catch(p){p instanceof Error||g(p),g(new r("Couldn't instantiate "+h+": "+p,p))}}
function Ef(b,c){if(b instanceof y)return"";if(b instanceof A)if(c)if(Hf(b)){var d=b.b().b().a();return d.Ca()?"_Oliteral":d instanceof T?"_Obound":"_Oother"}else return d=b.a(),"_D"+Ef(d,!0)+Ef(b.b(),!1)+"_d";else return Ef(b.a(),!0)+Ef(b.b(),!1);else return c?"_A":"_R"}function If(b,c,d){!(c instanceof y)&&c instanceof A&&(d&&Hf(c)?c.b().b().a().j(b):(If(b,c.a(),!0),If(b,c.b(),!1)))}var Jf=J("o"),Kf=J("#NIL#");function wf(b,c,d){var f={value:B},h=[];D(b,new Lf(h,f));D(b,new Mf(h,f,c,d))}
function Lf(b,c){this.e=j;this.F=b;this.ta=c;this.n(F("FunctionParameterListBuilder.buildParams_"))}Lf.prototype=new M;Lf.prototype.className="FunctionParameterListBuilder.ReturnParams";Lf.prototype.d=function(b){if(this.F.length===0){var c;c=Q(b)}else c=ab(this.F,Q(b));c=new A(this.ta.value,c);C(b,c)};function Mf(b,c,d,f){this.e=j;this.F=b;this.ta=c;this.qa=d;this.s=f;this.n(F("FunctionParameterListBuilder.buildParams_"))}Mf.prototype=new M;Mf.prototype.className="FunctionParameterListBuilder.BuildParams1";
Mf.prototype.d=function(b){if(this.qa.M()){var c=new E(this.qa);c.n(this);D(b,c)}else{var c=this.qa.a(),d=this.qa.b();if(c instanceof A)if(c instanceof y)this.F.push(Kf),D(b,new Mf(this.F,this.ta,d,this.s));else if(this.ta.value=Ma,Hf(c)){var f=c.b().a();D(b,new Nf(this.F,this.ta,d,this.s,f));lf(b,c.b().b().a(),this.s)}else D(b,new Of(this.F,this.ta,d,this.s)),wf(b,c,this.s);else this.F.push(c),D(b,new Mf(this.F,this.ta,d,this.s))}};
function Nf(b,c,d,f,h){this.e=j;this.F=b;this.ta=c;this.qa=d;this.s=f;this.cd=h;this.n(F("FunctionParameterListBuilder.buildParams_"))}Nf.prototype=new M;Nf.prototype.className="FunctionParameterListBuilder.BuildParams2a";Nf.prototype.d=function(b){this.F.push(w([Jf,this.cd,Q(b)]));D(b,new Mf(this.F,this.ta,this.qa,this.s))};function Of(b,c,d,f){this.e=j;this.F=b;this.ta=c;this.qa=d;this.s=f;this.n(F("FunctionParameterListBuilder.buildParams_"))}Of.prototype=new M;Of.prototype.className="FunctionParameterListBuilder.BuildParams2b";
Of.prototype.d=function(b){this.F.push(Q(b).b());D(b,new Mf(this.F,this.ta,this.qa,this.s))};function Pf(b){for(;!b.M();){if(b.a()instanceof A)return Ma;b=b.b()}return B}function vf(b,c,d,f){b instanceof y||(b instanceof A?f&&Hf(b)?vf(b.b().a(),c,d,!0):(f=b.a(),f instanceof y?(c[Kf.name()]=d[0],d[0]++):vf(f,c,d,!0),vf(b.b(),c,d,!1)):(b instanceof L||g(new TypeError),c[b.name()]=d[0],d[0]++))}
function Qf(b,c,d,f){var h=j;f instanceof L&&!f.Ba(b.name)?h=f:Hf(f)&&!f.b().a().Ba(b.name)?h=w([Jf,f.b().a(),f.b().b().a().Q(b,c,d)]):!Hf(f)&&f instanceof A&&(h=f);return h}function Rf(b,c,d,f){var h=j;f instanceof L&&!f.Ba(b.name)?h=f:Hf(f)&&!f.b().a().Ba(b.name)?h=w([Jf,f.b().a(),f.b().b().a().R(b,c,!1,0,d)]):!Hf(f)&&f instanceof A&&(h=f);return h}function xf(b){this.e=j;this.pb=b;this.n(F("IfBuilder.build"))}xf.prototype=new M;xf.prototype.className="IfBuilder.Reduce";
xf.prototype.d=function(b){C(b,this.pb.reduce())};function yf(b,c,d){this.e=j;this.pb=b;this.J=c;this.s=d;this.n(F("IfBuilder.build"))}yf.prototype=new M;yf.prototype.className="IfBuilder.BuildIf1";yf.prototype.d=function(b){if(!(this.J instanceof y)){try{this.J.ub()}catch(c){c instanceof ta||g(c),g(new r("if: unexpected: "+this.J))}D(b,new Sf(this.pb,this.J.b(),this.s));lf(b,this.J.a(),this.s)}};function Sf(b,c,d){this.e=j;this.pb=b;this.J=c;this.s=d;this.n(F("AssignmentBuilder.build"))}
Sf.prototype=new M;Sf.prototype.className="IfBuilder.BuildIf2";Sf.prototype.d=function(b){this.pb.Ga(Q(b).reduce());D(b,new yf(this.pb,this.J,this.s))};function Af(b,c,d,f){this.e=j;this.J=b;this.s=c;this.pa=d;this.Ha=f;this.n(F("InvocationBuilder.build"))}Af.prototype=new M;Af.prototype.className="InvocationBuilder.BuildInvocation";
Af.prototype.d=function(b){if(this.J instanceof y)C(b,(new ue(w(this.Ha))).reduce());else{try{this.J.ub()}catch(c){c instanceof ta||g(c),g(new r("can't compile "+this.pa+"; not a proper list"))}D(b,new Af(this.J.b(),this.s,this.pa,this.Ha));D(b,new Tf(this.Ha));lf(b,this.J.a(),this.s)}};function Tf(b){this.e=j;this.Ha=b;this.n(F("InvocationBuilder.build"))}Tf.prototype=new M;Tf.prototype.className="InvocationBuilder.ReducePush";Tf.prototype.d=function(b){this.Ha.push(Q(b).reduce())};
function Cf(b,c,d){this.e=j;this.J=b;this.s=c;this.F=d;this.n(F("PairExpander.expand"))}Cf.prototype=new M;Cf.prototype.className="PairExpander.ExpandPair";Cf.prototype.d=function(b){if(this.J instanceof y||!(this.J instanceof A))D(b,new Uf(this.F)),lf(b,this.J,this.s);else{D(b,new Cf(this.J.b(),this.s,this.F));var c=this.J.a();D(b,new Vf(this.F));lf(b,c,this.s)}};function Vf(b){this.e=j;this.Ha=b;this.n(F("PairExpander.expand"))}Vf.prototype=new M;Vf.prototype.className="PairExpander.ReducePush";
Vf.prototype.d=function(b){this.Ha.push(Q(b).reduce())};function Uf(b){this.e=j;this.F=b;this.n(F("PairExpander.expand"))}Uf.prototype=new M;Uf.prototype.className="PairExpander.FinishPair";Uf.prototype.d=function(b){var c=ab(this.F,Q(b).reduce());c instanceof A||g(new TypeError);C(b,c)};var Je=J("quasiquote"),He=J("unquote"),Ie=J("unquote-splicing");function tf(b,c,d,f){c.M()?C(b,c):Z(c)?Wf(b,He,c,f,d):Ee(c)?Wf(b,Ie,c,f,d):Fe(c)?(D(b,new Xf(Je)),tf(b,c.b().a(),d,f+1)):D(b,new Yf([],c,d,f))}
function Yf(b,c,d,f){this.e=j;this.F=b;this.va=c;this.s=d;this.lb=f;this.n(F("QuasiQuoteCompiler.compile"))}Yf.prototype=new M;Yf.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";Yf.prototype.d=function(b){if(this.va.M())D(b,new Zf(this.F)),tf(b,this.va,this.s,this.lb);else{var c=this.va.a();D(b,new Yf(this.F,this.va.b(),this.s,this.lb));c.M()?this.F.push(c):(D(b,new $f(this.F)),tf(b,c,this.s,this.lb))}};function Zf(b){this.e=j;this.F=b;this.n(F("QuasiQuoteCompiler.compile"))}
Zf.prototype=new M;Zf.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";Zf.prototype.d=function(b){C(b,ab(this.F,Q(b)))};function $f(b){this.e=j;this.F=b;this.n(F("QuasiQuoteCompiler.compile"))}$f.prototype=new M;$f.prototype.className="QuasiQuoteCompiler.Push";$f.prototype.d=function(b){this.F.push(Q(b))};function Wf(b,c,d,f,h){d=d.b().a();D(b,new Xf(c));f===1?lf(b,d,h):tf(b,d,h,f-1)}function Xf(b){this.e=j;this.ed=b;this.n(F("QuasiQuoteCompiler.compile"))}Xf.prototype=new M;
Xf.prototype.className="QuasiQuoteCompiler.Prefix";Xf.prototype.d=function(b){C(b,w([this.ed,Q(b)]))};var ag={},bg=J("let"),cg=J("self"),dg=J("it");J("afn");var eg=J("do"),fg=J("with"),gg=J("aif");
function ve(b){if(b.a()===bg)a:{b=b.b();if(b.a()===dg){var c=b.b().a(),d=b.b().b();if(d.b()instanceof y&&d.a()instanceof qe&&(d=d.a(),!(d.X instanceof se)?0:d.X.k.toString()==="it")){b=d.P();d=d.X;d instanceof se||g(new TypeError);b=w([gg,c,b,d.next]);break a}}else if(b.a()===cg&&b.b().a()instanceof y&&(d=b.b().b(),d.a()instanceof oe&&d.b()instanceof y)){c=d.a();var d=c.Y,f="self";if(d.name instanceof L)d=d.name.name()===f;else{if(!(d.name instanceof W))f=d.name,f instanceof T||g(new TypeError);d=
d.name.name.name()===f}if(d&&c.Y.A instanceof Y&&c.Y instanceof ne){b=ag.ud(c.Y.A);break a}}b=new A(bg,b)}return b}function we(b){var c=b.a(),d=b.b(),f=c.v;if(d.ha()===f.ha())if(d.ha()===0)c=w([eg].concat(c.body));else if(d.ha()===1)c=w([bg,f.a(),d.a()].concat(c.body));else{b=d;for(d=[];!(f instanceof y);)d.push(f.a()),d.push(b.a()),f=f.b(),b=b.b();c=w([fg,w(d)].concat(c.body))}else c=b;return c}function $(){}$.prototype=new x;q=$.prototype;q.className="Builtin";
q.c=function(b){this.ba=b;J(b).da(this);return this};q.h=function(b){g(new r("Builtin:invoke(args):provide implementation! "+this.name()+" args "+b))};q.f=function(b,c){C(b,this.h(c))};q.na=n(0);q.type=function(){return hg};function Ab(b,c,d){d<b.ha()&&(na(c+" got args "+b+" was expecting expecting at most "+d),g(new r(c.toLowerCase()+" expects at most "+d+" arguments: given "+b)))}function ig(b,c,d){b.ha()!==c&&g(new r(d.toLowerCase()+" expects "+c+" arguments: given "+b))}
q.toString=function(){return"[builtin:"+(this.ba===j||this.ba.length===0?this.className:this.ba)+"]"};q.La=function(){return this.toString()};q.name=function(){return this.ba===""?this.className.toLowerCase():this.ba};var hg=J("fn");function Jc(b,c){this.va=b;this.fa=c}Jc.prototype=new x;q=Jc.prototype;q.className="Closure";q.wa=function(b){this.va.ia(b,this.fa)};q.r=function(b,c){this.va.u(b,this.fa,c)};q.S=function(b,c,d){this.va.za(b,this.fa,c,d)};q.f=function(b,c){this.va.C(b,this.fa,c)};
q.type=function(){return hg};q.toString=function(){return this.va.toString()};q.La=function(){return this.va.La()};q.p=m("va");function jg(b){return b.length===0?!1:b.charCodeAt(0)===kg?jg(b.substring(1)):b.charAt(b.length-1)===kg?jg(b.substring(0,b.length-1)):b.indexOf(lg)!==-1}function Y(){}Y.prototype=new x;q=Y.prototype;q.I=Y;q.className="InterpretedFunction";q.c=function(b,c,d){this.name=B;this.v=b;this.o=c;this.body=fb(d);this.td=this.xb=this.Z=this.Zb=this.m=j;mg(this);return this};
q.jc=function(b){if(this.name===b)this.name=B};q.Qb=function(b){this.name=b;for(var b=new Qe(this),c=0,d=this.body.length;c<d;c++)this.body[c].j(b)};q.Rb=function(){return name};q.La=function(){if(this.xb!==j)return this.xb;this.name instanceof y?(this.xb=this.toString(),this.Zb!==j&&(this.xb+=" in "+this.Zb.La())):this.xb=this.Rb().toString();return this.xb};
q.reduce=function(){var b;if(ng&&!this.V()&&!(this.v instanceof y)){var c="rainbow.function.interpreted.optimise.stack.Stack"+Ef(this.v,!1),d=t[c];if(d===i)b=this;else try{var f=d.of1(this);f instanceof x||g(new TypeError);b=f}catch(h){h instanceof Error||g(h),g(new r("Couldn't instantiate "+c+": "+h,h))}}else b=this;return b};function mg(b){var c=[];ye(b,c);b.m=w(c);b.m.j(new og(b))}q.n=ba("Zb");function og(b){this.e=b}og.prototype=new Pe;og.prototype.Ob=function(b){b.n(this.e)};
function ye(b,c){if(b.body.length===0)c.push(new E(B));else for(var d=0;d<b.body.length;d++){var f=d===b.body.length-1;b.body[d].l(c);f||c.push(new Pc("intermediate-fn-expression"))}}q=Y.prototype;q.eb=function(b,c){return this.body.length===1&&this.qc(b,c)&&!this.ea(0)&&!this.V()};
q.qc=function(b,c){var d=this.o[b.name()],d=new T(b,0,d),f;if(!(f=c.Ca()))if(!(f=c instanceof le))if(!(f=c instanceof L))if(!(f=c instanceof T)){d=new Se(d);f=0;for(var h=this.body.length;f<h;f++)this.body[f].j(d);f=d.count()<=1}return f};q.V=function(){for(var b=0,c=this.body.length;b<c;b++){var d=this.body[b];if(d instanceof Y){if(me(d))return!0}else if(d.V())return!0}return!1};function pg(b,c){for(var d=0,f=b.body.length;d<f;d++)if(b.body[d].ea(c))return!0;return!1}
q.Hb=function(){return!(this.v instanceof y)};q.ea=function(b){return this.v instanceof y?pg(this,b):pg(this,b+1)};q.wa=function(b){return this.ia(b,j)};q.ia=function(b,c){return this.C(b,c,B)};q.r=function(b,c){return this.u(b,j,c)};q.u=function(b,c,d){return this.C(b,c,new A(d,B))};q.S=function(b,c,d){return this.za(b,j,c,d)};q.za=function(b,c,d,f){return this.C(b,c,new A(d,new A(f,B)))};q.Pa=function(b,c,d,f){return this.Gb(b,j,c,d,f)};
q.Gb=function(b,c,d,f,h){return this.C(b,c,new A(d,new A(f,new A(h,B))))};q.f=function(b,c){return this.C(b,j,c)};q.C=function(){g(new r("error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this))};q.l=function(b){me(this)?b.push(new Ic(this)):b.push(new E(this))};q.Ca=function(){return!me(this)};function me(b){var c=new Re;b.j(c);return-1<c.yc}q.j=function(b){b.Pb(this);If(b,this.v,!1);for(var c=0,d=this.body.length;c<d;c++)this.body[c].j(b);b.Vb(this);this.Z!==j&&this.Z.j(b)};
q.na=function(b){g(new r("Can't compare "+this+" to "+b))};q.toString=function(){if(this.v instanceof A&&this.v.a()===J("_")&&this.v.b()instanceof y&&this.body.length===1&&!(this.body[0]instanceof qb))if(this.body[0]instanceof y)return"[]";else{var b=this.body[0].toString();return"["+b.substring(1,b.length-1)+"]"}return w([J("fn"),this.v].concat(this.body)).toString()};q.type=function(){return hg};q.vb=function(b){return this.body[b]};q.Jc=function(){return this.body[this.body.length-1]};
q.length=function(){return this.body.length};function qg(b,c,d){try{c.b().Ia()}catch(f){f instanceof ta||g(f),rg(b,d)}}function rg(b,c){g(new r("args "+c+" doesn't match signature for "+b))}
q.gb=function(b,c,d){var f=this.o[b.name()];f===i&&g(new ReferenceError);var b=new T(b,0,f),h;for(var k=this.v,o=c,p=B,z=[];!k.M();){var K=Rf(b,o,f,k.a());K!==j&&z.push(K);k=k.b()}k instanceof L&&(o=Rf(b,o,f,k),o!==j&&(p=o));try{h=ab(z,p)}catch(ga){ga instanceof Error||g(ga),g(new r("couldn't curry params "+k+", got list "+z+" and last "+p))}k={};vf(h,k,[0],!1);p=h instanceof y;!p&&d&&(c=c.L(0));d=[];for(z=0;z<this.body.length;z++)d.push(this.body[z].R(b,c,p,0,f).reduce());c=w(d);f=Pf(h);return Df(h,
k,c,f)};q.R=function(b,c,d,f,h){for(var b=this.v instanceof y?b:b.L(0),d=sg(this),k=[],o=0;o<this.body.length;o++)k.push(this.body[o].R(b,c,!1,f+1,h).reduce());b=w(k);d.body=fb(b);mg(d);return d};q.Q=function(b,c,d){if(!(this.v instanceof y))return this;for(var f=sg(this),h=[],k=0;k<this.body.length;k++)h.push(this.body[k].Q(b,c,d).reduce());b=w(h);f.body=fb(b);mg(f);return f};
q.L=function(b){this.v instanceof y||b++;for(var c=sg(this),d=[],f=0;f<this.body.length;f++)d.push(this.body[f].L(b));b=w(d);c.body=fb(b);mg(c);return c};function sg(b){var c=new b.I,d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function tg(b,c,d){d.sb(c)||g(new r("error: "+b+" expects "+c+" args, got "+d))}function Ff(b,c,d){this.c(b,c,d)}Ff.prototype=new Y;Ff.prototype.I=Ff;Ff.prototype.className="SimpleArgs";
Ff.prototype.C=function(b,c,d){var f=0,h;for(h in this.o)f++;f=c=new u(f,c);for(h=this.v;!(h instanceof y);)if(h instanceof L){f.add(d);break}else f.add(d.a()),d=d.b(),h=h.b();R(b,c,this.m)};function Gf(b,c,d){this.c(b,c,d)}Gf.prototype=new Y;Gf.prototype.I=Gf;Gf.prototype.className="ComplexArgs";Gf.prototype.C=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);D(b,new ug(c,this.m,this));D(b,new vg(c,this.v,d,this))};function ug(b,c,d){this.e=j;this.fa=b;this.m=c;this.n(d)}ug.prototype=new M;
ug.prototype.className="ComplexArgs.Run";ug.prototype.d=function(b){R(b,this.fa,this.m)};function vg(b,c,d,f){this.e=j;this.fa=b;this.qa=c;this.Ya=d;this.n(f)}vg.prototype=new M;vg.prototype.className="ComplexArgs.BuildComplex";
vg.prototype.d=function(b){if(this.qa.M())this.qa instanceof L&&this.fa.add(this.Ya);else{var c=this.qa.a(),d=this.Ya.a();D(b,new vg(this.fa,this.qa.b(),this.Ya.b(),this.e));if(c instanceof L)this.fa.add(d);else if(Hf(c))if(c=c.b(),c instanceof A||g(new TypeError),this.Ya instanceof y){D(b,new wg(this.fa,this));var d=this.fa,f=[];c.b().a().l(f);R(b,d,w(f))}else this.fa.add(d);else{try{d.ub()}catch(h){h instanceof ta||g(h),g(new r("Expected list argument for destructuring parameter "+c+", got "+d))}D(b,
new vg(this.fa,c,d,this.e))}this.qa=this.qa.b();this.Ya=this.Ya.b()}};function wg(b,c){this.e=j;this.fa=b;this.n(c)}wg.prototype=new M;wg.prototype.className="ComplexArgs.AddToLc";wg.prototype.d=function(b){this.fa.add(Q(b))};function Hf(b){return!(b instanceof A)?!1:b.a()===xg}var xg=J("o");function yg(){}yg.prototype=new Y;q=yg.prototype;q.I=yg;q.className="StackFunctionSupport";q.eb=function(b,c){return this.qc(b,c)&&!this.ea(0)};
q.qc=function(b,c){var d=this.o[b.name()],d=new W(b,d);return c.Ca()||c instanceof le||c instanceof L||this.body.length===1&&this.body[0]instanceof W&&Qd(d,this.body[0])};q.Hb=n(!1);
q.gb=function(b,c){var d=this.o[b.name()],f=new W(b,d),h;for(var k=this.v,o=B,p=[];!k.M();){var z=Qf(f,c,d,k.a());z!==j&&p.push(z);k=k.b()}k instanceof L&&(z=Qf(f,c,d,k),z!==j&&(o=z));try{h=ab(p,o)}catch(K){K instanceof Error||g(K),g(new r("couldn't curry params "+k+", got list "+p+" and last "+o))}k={};vf(h,k,[0],!1);o=[];for(p=0;p<this.body.length;p++)o.push(this.body[p].Q(f,c,d).reduce());var d=w(o),f=Pf(h),ga;o=Ef(h,!1);if(o==="")ga=Df(h,k,d,f);else{f="rainbow.function.interpreted.optimise.stack.Stack"+
o;o=t[f];o===i&&g(new r("no stack-based function implementation for "+h+"; couldn't find "+f));try{var za=o.of3(h,k,d);za instanceof x||g(new TypeError);ga=za}catch(pb){pb instanceof Error||g(pb),g(new r("Couldn't instantiate "+f+": "+pb,pb))}}return ga};function zg(b,c){for(var d=Array(~~c.length),f=0;f<c.length;f++)d[f]=c[f].W(b);return w(d)}function xe(){}t["rainbow.function.interpreted.optimise.Bind"]=xe;xe.prototype=new Y;xe.prototype.I=xe;xe.prototype.className="Bind";
xe.of=function(b,c,d){return(new xe).c(b,c,d)};xe.prototype.ia=function(b,c){R(b,c,this.m)};xe.prototype.C=function(b,c,d){try{d.Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 0 args, got "+d))}R(b,c,this.m)};function Ag(){}t["rainbow.function.interpreted.optimise.Bind_A"]=Ag;Ag.prototype=new Y;Ag.prototype.I=Ag;Ag.prototype.className="Bind_A";Ag.of=function(b,c,d){return(new Ag).c(b,c,d)};Ag.prototype.ia=function(){g(new r("function "+this+" expects 1 arg, got none"))};
Ag.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);R(b,c,this.m)};Ag.prototype.C=function(b,c,d){d instanceof y&&this.ia(b,c);try{d.b().Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 1 arg, got "+d+" calling "+this))}this.u(b,c,d.a())};function Bg(){}t["rainbow.function.interpreted.optimise.Bind_A_A"]=Bg;Bg.prototype=new Y;Bg.prototype.I=Bg;Bg.prototype.className="Bind_A_A";Bg.of=function(b,c,d){return(new Bg).c(b,c,d)};Bg.prototype.ia=function(){g(new r("error: expected 2 args, got none"))};
Bg.prototype.u=function(b,c,d){g(new r("error: expected 2 args, got 1: "+d))};Bg.prototype.za=function(b,c,d,f){var h=0,k;for(k in this.o)h++;c=new u(h,c);c.add(d);c.add(f);R(b,c,this.m)};Bg.prototype.C=function(b,c,d){try{d.b().b().Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 2 args, got "+d))}this.za(b,c,d.a(),d.b().a())};function Cg(){}t["rainbow.function.interpreted.optimise.Bind_A_A_A"]=Cg;Cg.prototype=new Y;Cg.prototype.I=Cg;Cg.prototype.className="Bind_A_A_A";
Cg.of=function(b,c,d){return(new Cg).c(b,c,d)};Cg.prototype.Gb=function(b,c,d,f,h){var k=0,o;for(o in this.o)k++;c=new u(k,c);c.add(d);c.add(f);c.add(h);R(b,c,this.m)};Cg.prototype.C=function(b,c,d){qg(this,d.b().b().b(),d);this.Gb(b,c,d.a(),d.b().a(),d.b().b().a())};function Dg(){}t["rainbow.function.interpreted.optimise.Bind_A_A_R"]=Dg;Dg.prototype=new Y;Dg.prototype.I=Dg;Dg.prototype.className="Bind_A_A_R";Dg.of=function(b,c,d){return(new Dg).c(b,c,d)};Dg.prototype.ia=function(){g(new r("error: expected at least 2 arg, got none"))};
Dg.prototype.u=function(b,c,d){g(new r("error: expected at least 2 args, got one: "+d))};Dg.prototype.C=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d.a());c.add(d.b().a());c.add(d.b().b());R(b,c,this.m)};function Eg(){}t["rainbow.function.interpreted.optimise.Bind_A_Obound"]=Eg;Eg.prototype=new Y;Eg.prototype.I=Eg;Eg.prototype.className="Bind_A_Obound";
Eg.of=function(b,c,d){c=(new Eg).c(b,c,d);d=b.b().a().b().b().a();d instanceof T||g(new TypeError);c.T=d;b=b.b().a().b().a();b instanceof L||g(new TypeError);if(c.eb(b,c.T))try{var f=c.gb(b,c.T,!1);f instanceof Y||g(new TypeError);c.Z=f}catch(h){h instanceof Error||g(h),oa(h)}return c};Eg.prototype.u=function(b,c,d){if(this.Z!==j)this.Z.u(b,c,d);else{var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);c.add(this.T.t(c));R(b,c,this.m)}};
Eg.prototype.za=function(b,c,d,f){var h=0,k;for(k in this.o)h++;c=new u(h,c);c.add(d);c.add(f);R(b,c,this.m)};Eg.prototype.C=function(b,c,d){d instanceof y&&rg(this,d);var f=d.a(),h=d.b();h instanceof y?this.u(b,c,f):(qg(this,h.b(),d),this.za(b,c,f,h.a()))};function Fg(){}t["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=Fg;Fg.prototype=new Y;Fg.prototype.I=Fg;Fg.prototype.className="Bind_A_Oliteral";
Fg.of=function(b,c,d){c=(new Fg).c(b,c,d);c.T=b.b().a().b().b().a();b=b.b().a().b().a();b instanceof L||g(new TypeError);if(c.eb(b,c.T))try{var f=c.gb(b,c.T,!1);f instanceof Y||g(new TypeError);c.Z=f}catch(h){h instanceof Error||g(h),oa(h)}return c};Fg.prototype.u=function(b,c,d){if(this.Z!==j)this.Z.u(b,c,d);else{var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);c.add(this.T);R(b,c,this.m)}};Fg.prototype.za=function(b,c,d,f){var h=0,k;for(k in this.o)h++;c=new u(h,c);c.add(d);c.add(f);R(b,c,this.m)};
Fg.prototype.C=function(b,c,d){d instanceof y&&rg(this,d);var f=d.a(),h=d.b();h instanceof y?this.u(b,c,f):(qg(this,h.b(),d),this.za(b,c,f,h.a()))};function Gg(){}t["rainbow.function.interpreted.optimise.Bind_A_Oother"]=Gg;Gg.prototype=new Y;Gg.prototype.I=Gg;Gg.prototype.className="Bind_A_Oother";Gg.of=function(b,c,d){c=(new Gg).c(b,c,d);d=[];b.b().a().b().b().a().l(d);c.xc=w(d);return c};
Gg.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);D(b,new Hg(c,this.m,this));R(b,c,this.xc)};Gg.prototype.za=function(b,c,d,f){var h=0,k;for(k in this.o)h++;c=new u(h,c);c.add(d);c.add(f);R(b,c,this.m)};Gg.prototype.C=function(b,c,d){d instanceof y&&rg(this,d);var f=d.a(),h=d.b();h instanceof y?this.u(b,c,f):(qg(this,h.b(),d),this.za(b,c,f,h.a()))};function Ig(){}t["rainbow.function.interpreted.optimise.Bind_A_R"]=Ig;Ig.prototype=new Y;Ig.prototype.I=Ig;
Ig.prototype.className="Bind_A_R";Ig.of=function(b,c,d){return(new Ig).c(b,c,d)};Ig.prototype.ia=function(){g(new r("error: expected at least 1 arg, got none"))};Ig.prototype.C=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d.a());c.add(d.b());R(b,c,this.m)};function Jg(){}t["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=Jg;Jg.prototype=new Y;Jg.prototype.I=Jg;Jg.prototype.className="Bind_D_A_A_A_d";Jg.of=function(b,c,d){return(new Jg).c(b,c,d)};
Jg.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);d instanceof A||g(new TypeError);c.add(d.a());d=d.b();d instanceof A||g(new TypeError);c.add(d.a());d=d.b();d instanceof A||g(new TypeError);c.add(d.a());R(b,c,this.m)};Jg.prototype.C=function(b,c,d){try{d.b().Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 1 arg, got extra "+d.b()+" calling "+this))}this.u(b,c,d.a())};function Kg(){}t["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=Kg;Kg.prototype=new Y;
Kg.prototype.I=Kg;Kg.prototype.className="Bind_D_A_A_d";Kg.of=function(b,c,d){return(new Kg).c(b,c,d)};Kg.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);d instanceof A||g(new TypeError);c.add(d.a());d=d.b();d instanceof A||g(new TypeError);c.add(d.a());R(b,c,this.m)};Kg.prototype.C=function(b,c,d){qg(this,d.b(),d);this.u(b,c,d.a())};function Lg(){}t["rainbow.function.interpreted.optimise.Bind_Obound"]=Lg;Lg.prototype=new Y;Lg.prototype.I=Lg;Lg.prototype.className="Bind_Obound";
Lg.of=function(b,c,d){c=(new Lg).c(b,c,d);b=b.a();b instanceof A||g(new TypeError);b=b.b().b().a();b instanceof T||g(new TypeError);c.bd=b;return c};Lg.prototype.ia=function(b,c){var d=0,f;for(f in this.o)d++;c=new u(d,c);c.add(this.bd.t(c));R(b,c,this.m)};Lg.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);R(b,c,this.m)};
Lg.prototype.C=function(b,c,d){if(d instanceof y)this.ia(b,c);else{try{d.b().Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.u(b,c,d.a())}};function Mg(){}t["rainbow.function.interpreted.optimise.Bind_Oliteral"]=Mg;Mg.prototype=new Y;Mg.prototype.I=Mg;Mg.prototype.className="Bind_Oliteral";
Mg.of=function(b,c,d){c=(new Mg).c(b,c,d);c.T=b.a().b().b().a();b=b.a().b().a();b instanceof L||g(new TypeError);if(c.eb(b,c.T))b=c.gb(b,c.T,!1),b instanceof Y||g(new TypeError),c.Z=b;return c};Mg.prototype.ia=function(b,c){if(this.Z!==j)this.Z.ia(b,c);else{var d=0,f;for(f in this.o)d++;c=new u(d,c);c.add(this.T);R(b,c,this.m)}};Mg.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);R(b,c,this.m)};
Mg.prototype.C=function(b,c,d){if(d instanceof y)this.ia(b,c);else{try{d.b().Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.u(b,c,d.a())}};function Ng(){}t["rainbow.function.interpreted.optimise.Bind_Oother"]=Ng;Ng.prototype=new Y;Ng.prototype.I=Ng;Ng.prototype.className="Bind_Oother";Ng.of=function(b,c,d){var f=(new Ng).c(b,c,d);f.c(b,c,d);f.T=b.a().b().b().a();b=[];f.T.l(b);f.xc=w(b);return f};
Ng.prototype.ia=function(b,c){var d=0,f;for(f in this.o)d++;c=new u(d,c);D(b,new Hg(c,this.m,this));R(b,c,this.xc)};Ng.prototype.u=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);R(b,c,this.m)};Ng.prototype.C=function(b,c,d){if(d instanceof y)this.ia(b,c);else{try{d.b().Ia()}catch(f){f instanceof ua||g(f),g(new r("expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.u(b,c,d.a())}};function Og(){}t["rainbow.function.interpreted.optimise.Bind_R"]=Og;Og.prototype=new Y;
Og.prototype.I=Og;Og.prototype.className="Bind_R";Og.of=function(b,c,d){return(new Og).c(b,c,d)};Og.prototype.C=function(b,c,d){var f=0,h;for(h in this.o)f++;c=new u(f,c);c.add(d);R(b,c,this.m)};function Pg(){}t["rainbow.function.interpreted.optimise.stack.Stack_A"]=Pg;Pg.prototype=new yg;Pg.prototype.I=Pg;Pg.prototype.className="Stack_A";Pg.of1=function(b){return Pg.of3(b.v,b.o,zg(b.o,b.body))};Pg.of3=function(b,c,d){return(new Pg).c(b,c,d)};Pg.prototype.r=function(b,c){S(b,j,this.m,[c])};
Pg.prototype.u=function(b,c,d){S(b,c,this.m,[d])};Pg.prototype.f=function(b,c){tg(this,1,c);this.r(b,c.a())};Pg.prototype.C=function(b,c,d){tg(this,1,d);this.u(b,c,d.a())};function Qg(){}t["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=Qg;Qg.prototype=new yg;Qg.prototype.I=Qg;Qg.prototype.className="Stack_A_A";Qg.of1=function(b){return Qg.of3(b.v,b.o,zg(b.o,b.body))};Qg.of3=function(b,c,d){return(new Qg).c(b,c,d)};Qg.prototype.S=function(b,c,d){S(b,j,this.m,[c,d])};
Qg.prototype.za=function(b,c,d,f){S(b,c,this.m,[d,f])};Qg.prototype.f=function(b,c){tg(this,2,c);this.S(b,c.a(),c.b().a())};Qg.prototype.C=function(b,c,d){tg(this,2,d);this.za(b,c,d.a(),d.b().a())};function Rg(){}t["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=Rg;Rg.prototype=new yg;Rg.prototype.I=Rg;Rg.prototype.className="Stack_A_A_A";Rg.of1=function(b){return Rg.of3(b.v,b.o,zg(b.o,b.body))};Rg.of3=function(b,c,d){return(new Rg).c(b,c,d)};
Rg.prototype.Pa=function(b,c,d,f){S(b,j,this.m,[c,d,f])};Rg.prototype.Gb=function(b,c,d,f,h){S(b,c,this.m,[d,f,h])};Rg.prototype.f=function(b,c){tg(this,3,c);this.Pa(b,c.a(),c.b().a(),c.b().b().a())};Rg.prototype.C=function(b,c,d){tg(this,3,d);this.Gb(b,c,d.a(),d.b().a(),d.b().b().a())};function Sg(){}t["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=Sg;Sg.prototype=new yg;Sg.prototype.I=Sg;Sg.prototype.className="Stack_A_A_A_A";Sg.of1=function(b){return Sg.of3(b.v,b.o,zg(b.o,b.body))};
Sg.of3=function(b,c,d){return(new Sg).c(b,c,d)};Sg.prototype.f=function(b,c){tg(this,4,c);var d=c.a(),f=c.b().a(),h=c.b().b().a(),k=c.b().b().b().a();S(b,j,this.m,[d,f,h,k])};Sg.prototype.C=function(b,c,d){tg(this,4,d);var f=d.a(),h=d.b().a(),k=d.b().b().a(),d=d.b().b().b().a();S(b,c,this.m,[f,h,k,d])};function Tg(){}t["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=Tg;Tg.prototype=new yg;Tg.prototype.I=Tg;Tg.prototype.className="Stack_A_A_R";
Tg.of1=function(b){return Tg.of3(b.v,b.o,zg(b.o,b.body))};Tg.of3=function(b,c,d){return(new Tg).c(b,c,d)};Tg.prototype.C=function(b,c,d){S(b,c,this.m,[d.a(),d.b().a(),d.b().b()])};function Ug(){}t["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=Ug;Ug.prototype=new yg;Ug.prototype.I=Ug;Ug.prototype.className="Stack_A_R";Ug.of1=function(b){return Ug.of3(b.v,b.o,zg(b.o,b.body))};Ug.of3=function(b,c,d){return(new Ug).c(b,c,d)};Ug.prototype.C=function(b,c,d){S(b,c,this.m,[d.a(),d.b()])};
function Vg(){}t["rainbow.function.interpreted.optimise.stack.Stack_R"]=Vg;Vg.prototype=new yg;Vg.prototype.I=Vg;Vg.prototype.className="Stack_R";Vg.of1=function(b){return Vg.of3(b.v,b.o,zg(b.o,b.body))};Vg.of3=function(b,c,d){return(new Vg).c(b,c,d)};Vg.prototype.C=function(b,c,d){S(b,c,this.m,[d])};function Wg(){}t["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=Wg;Wg.prototype=new yg;Wg.prototype.I=Wg;Wg.prototype.className="Stack_D_A_A_A_A_d";
Wg.of1=function(b){return Wg.of3(b.v,b.o,zg(b.o,b.body))};Wg.of3=function(b,c,d){return(new Wg).c(b,c,d)};Wg.prototype.r=function(b,c){S(b,j,this.m,[c.a(),c.b().a(),c.b().b().a(),c.b().b().b().a()])};Wg.prototype.u=function(b,c,d){S(b,c,this.m,[d.a(),d.b().a(),d.b().b().a(),d.b().b().b().a()])};Wg.prototype.f=function(b,c){tg(this,1,c);this.r(b,c.a())};Wg.prototype.C=function(b,c,d){tg(this,1,d);this.u(b,c,d.a())};function Xg(){}t["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=Xg;
Xg.prototype=new yg;Xg.prototype.I=Xg;Xg.prototype.className="Stack_D_A_A_d";Xg.of1=function(b){return Xg.of3(b.v,b.o,zg(b.o,b.body))};Xg.of3=function(b,c,d){return(new Xg).c(b,c,d)};Xg.prototype.r=function(b,c){S(b,j,this.m,[c.a(),c.b().a()])};Xg.prototype.u=function(b,c,d){S(b,c,this.m,[d.a(),d.b().a()])};Xg.prototype.f=function(b,c){tg(this,1,c);this.r(b,c.a())};Xg.prototype.C=function(b,c,d){tg(this,1,d);this.u(b,c,d.a())};function Yg(){}
t["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=Yg;Yg.prototype=new yg;Yg.prototype.I=Yg;Yg.prototype.className="Stack_A_Oliteral";Yg.of1=function(b){var c=new Yg,d=zg(b.o,b.body),b=c.c(b.v,b.o,d);b.T=b.v.b().a().b().b().a();c=b.v.b().a().b().a();c instanceof L||g(new TypeError);if(b.eb(c,b.T))c=b.gb(c,b.T,!1),c instanceof Y||g(new TypeError),b.Z=c;return b};Yg.of3=function(b,c,d){c=(new Yg).c(b,c,d);c.T=b.a().b().b().a();return c};q=Yg.prototype;
q.r=function(b,c){this.Z!==j?this.Z.r(b,c):S(b,j,this.m,[c,this.T])};q.S=function(b,c,d){S(b,j,this.m,[c,d])};q.u=function(b,c,d){this.Z!==j?this.Z.u(b,c,d):S(b,c,this.m,[d,this.T])};q.za=function(b,c,d,f){S(b,c,this.m,[d,f])};q.f=function(b,c){if(c instanceof y)rg(this,c);else{var d=c.a();c.b()instanceof y?this.r(b,d):this.S(b,d,c.b().a())}};q.C=function(b,c,d){if(d instanceof y)rg(this,d);else{var f=d.a();d.b()instanceof y?this.u(b,c,f):this.sd(b,c,f,d.b().a())}};function Zg(){}
t["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=Zg;Zg.prototype=new yg;Zg.prototype.I=Zg;Zg.prototype.className="Stack_Oliteral";Zg.of1=function(b){var c=new Zg,d=zg(b.o,b.body),b=c.c(b.v,b.o,d);b.T=b.v.a().b().b().a();c=b.v.a().b().a();c instanceof L||g(new TypeError);if(b.eb(c,b.T))c=b.gb(c,b.T,!1),c instanceof Y||g(new TypeError),b.Z=c;return b};Zg.of3=function(b,c,d){c=(new Zg).c(b,c,d);c.T=b.a().b().b().a();return c};q=Zg.prototype;
q.wa=function(b){this.Z!==j?this.Z.r(b):S(b,j,this.m,[this.T])};q.r=function(b,c){S(b,j,this.m,[c])};q.ia=function(b,c){this.Z!==j?this.Z.u(b,c):S(b,c,this.m,[this.T])};q.u=function(b,c,d){S(b,c,this.m,[d])};q.f=function(b,c){c instanceof y?this.wa(b):(tg(this,1,c),this.r(b,c.a()))};q.C=function(b,c,d){d instanceof y?this.ia(b):(tg(this,1,d),this.u(b,c,d.a()))};function $g(){this.c("macex")}$g.prototype=new $;$g.prototype.className="Macex";
$g.prototype.f=function(b,c){if(c instanceof y)C(b,B);else{var d=c.a();if(d instanceof A){var f=d.a();f instanceof L?f.bound()?(f=f.value(),f=Yb(f),f===j?C(b,d):(d=d.b(),d instanceof A||g(new TypeError),D(b,new ah(this)),va(f,b,d))):C(b,d):C(b,d)}else C(b,d)}};function ah(b){this.e=j;this.n(b)}ah.prototype=new M;ah.prototype.className="Macex.Again";ah.prototype.d=function(b){this.e.f(b,new A(Q(b),B))};function bh(){this.c("uniq")}bh.prototype=new $;bh.prototype.className="Uniq";
bh.prototype.wa=function(b){C(b,J("gs"+ ++ch))};bh.prototype.h=function(b){try{b.Ia()}catch(c){c instanceof ua||g(new r("uniq: expects no args, got "+b))}return J("gs"+ ++ch)};var ch=0;function dh(){this.c("details")}dh.prototype=new $;dh.prototype.className="Details";dh.prototype.h=function(b){b=b.a();try{b instanceof pa||g(new TypeError)}catch(c){c instanceof TypeError||g(c),g(new r("Wrong argument type: "+this+" expected an exception, got "+b))}return b.message()};function eh(){this.c("err")}
eh.prototype=new $;eh.prototype.className="Err";eh.prototype.h=function(b){g(new r(Eb(b.a(),this).value()))};function fh(){this.c("on-err")}fh.prototype=new $;fh.prototype.className="OnErr";fh.prototype.h=function(b){var c=new Hc(b.a(),vm.N);c.n(this);D(vm,c);b.b().a().f(vm,B)};function gh(){this.c("protect");this.ld=new hh(this)}gh.prototype=new $;gh.prototype.className="Protect";function hh(b){this.jd=b}hh.prototype=new Pe;hh.prototype.Ob=function(b){b.n(this.jd)};
gh.prototype.f=function(b,c){var d=new A(new Kc(c.b().a()),new A(new Pc("clear up 'protect/after' return value"),B));d.j(this.ld);R(b,j,d);c.a().f(b,B)};function ih(){this.c("apply")}ih.prototype=new $;q=ih.prototype;q.className="Apply";q.wa=function(){g(new r("apply: expects at least 2 args, got none"))};q.r=function(b,c){g(new r("apply: expects at least 2 args, got "+c))};q.S=function(b,c,d){d instanceof A||g(new TypeError);c.f(b,d)};q.Pa=function(b,c,d,f){c.f(b,new A(d,f))};
q.f=function(b,c){var d=c.a(),f=c.b();f instanceof A||g(new TypeError);d.f(b,jh(this,f))};function jh(b,c){return c.b()instanceof y?hb(c.a(),b):new A(c.a(),jh(b,hb(c.b(),b)))}function kh(){this.c("eval")}kh.prototype=new $;kh.prototype.className="Eval";kh.prototype.f=function(b,c){D(b,new lh(this));lf(b,c.a(),[])};function lh(b){this.e=j;this.n(b)}lh.prototype=new M;lh.prototype.className="Eval.ReduceAndExecute";lh.prototype.d=function(b){var c=[];Q(b).reduce().l(c);R(b,j,w(c))};
function mh(){this.c("ssexpand")}mh.prototype=new $;mh.prototype.className="SSExpand";mh.prototype.h=function(b){return qf(Ta(b.a(),this))};
function qf(b){b=b.name();if(/:/.test(b)||/^~/.test(b)){b=b.split(":");if(b.length===1)b=nh(b[0]);else{for(var c=[J("compose")],d=0,f=b.length;d<f;d++)c.push(nh(b[d]));b=ab(c,B)}return b}else if(jg(b)){c=[J("andf")];d=0;for(b=oh(b).length;d<b;d++)f=Ea(s),f instanceof L||g(new TypeError),c.add(ph(f));return w(c)}else if(/[.!]/.test(b)){for(var c=b.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/),d=[],f=!1,h=0,k=c.length;h<k;h++)if(c[h]!==""){var o=Ea(c[h].replace(/#p/g,"%").replace(/#h/g,
"#"));o===Ia||o===Va?f?g(new r("Bad syntax "+b)):f=!0:f=!1;d.unshift(o)}f&&d.unshift(J("#<eof>"));return qh(d,0)}else g(new r("Unknown syntax "+b))}function oh(b){return b.length===0?[""]:b.charCodeAt(0)===kg?(b=oh(b.substring(1)),b[0]=lg+b[0],b):b.charCodeAt(b.length-1)===kg?(b=oh(b.substring(0,b.length-1)),b[b.length-1]+=lg,b):b.split(lg)}
function qh(b,c){var d=ph(b[c++]),f=j;c<b.length&&(f=b[c++],f instanceof L||g(new TypeError));d=f===Va?w([J("quote"),d]):d;return c<b.length?w([qh(b,c),d]):f!==j?w([J("get"),d]):d}function rh(b){try{return ya(b)}catch(c){c instanceof qa||g(c),g(new r("Couldn't read value of symbol: "+b,c))}}function ph(b){if(b instanceof y)return b;b instanceof L||g(new TypeError);return rh(b.name())}function nh(b){return/^~/.test(b)?w([J("complement"),rh(b.substring(1))]):rh(b)}var lg="&",kg="&".charCodeAt(0);
function sh(){this.c("ssyntax")}sh.prototype=new $;sh.prototype.className="SSyntax";sh.prototype.h=function(b){return b.a()instanceof L&&pf(b.a())?Ma:B};function pf(b){var c;c=b.name();if(!(c=/:/.test(c)||/^~/.test(c)))if(!(c=jg(b.name())))c=/[.!]/.test(b.name());return c}function th(){this.c("java-debug")}th.prototype=new $;th.prototype.className="JavaDebug";th.prototype.h=function(b){return b.a()};function uh(){this.c("java-invoke")}uh.prototype=new $;uh.prototype.className="JavaInvoke";
uh.prototype.h=function(b){var c;var d=b.a();try{d instanceof dc||g(new TypeError),c=d}catch(f){f instanceof TypeError||g(f),g(new r("Wrong argument type: "+this+" expected a java-object, got "+d))}var d=Ta(b.b().a(),this).name(),h=b.b().b().a();h instanceof A||g(new TypeError);b=hc;c=c.vc;var k=Object(c)[d];Object.prototype.toString.call(k)!=="[object Function]"&&g(new r("Field "+d+" is not a method on "+c));d=k.apply(c,fc(h));return b(d)};function vh(){this.c("car")}vh.prototype=new $;
vh.prototype.className="Car";vh.prototype.r=function(b,c){C(b,c.a())};vh.prototype.h=function(b){ig(b,1,this.className);return b.a().a()};function wh(){this.c("cdr")}wh.prototype=new $;wh.prototype.className="Cdr";wh.prototype.r=function(b,c){C(b,c.b())};wh.prototype.h=function(b){ig(b,1,this.className);return b.a().b()};function xh(){this.c("cons")}xh.prototype=new $;xh.prototype.className="Cons";xh.prototype.S=function(b,c,d){C(b,new A(c,d))};
xh.prototype.h=function(b){ig(b,2,this.className);return new A(b.a(),b.b().a())};function yh(){this.c("len")}yh.prototype=new $;yh.prototype.className="Len";yh.prototype.h=function(b){Ab(b,this.className,1);return new P(b.a().ha(),1)};function zh(){this.c("newstring")}zh.prototype=new $;zh.prototype.className="NewString";
zh.prototype.h=function(b){var c=b.a();c instanceof O||g(new TypeError);var d=vb;b.b()instanceof y||(d=b.b().a(),d instanceof N||g(new TypeError));for(var b=[],f=0;f<c.H();f++)b.push(d.value());return F(b.join(""))};function Ah(){this.c("scar")}Ah.prototype=new $;Ah.prototype.className="Scar";Ah.prototype.S=function(b,c,d){C(vm,c.Mb(d))};Ah.prototype.h=function(b){return b.a().Mb(b.b().a())};function Bh(){this.c("scdr")}Bh.prototype=new $;Bh.prototype.className="Scdr";
Bh.prototype.h=function(b){var c=b.a();c instanceof A||g(new TypeError);b=b.b().a();c.Ac(b);return b};function Ch(){this.c("acos")}Ch.prototype=new $;Ch.prototype.className="Acos";Ch.prototype.h=function(b){Ab(b,this.className,1);b=Math.acos(Wa(b.a(),this).B());return new H(b)};function Dh(){this.c("+")}Dh.prototype=new $;q=Dh.prototype;q.className="Add";q.wa=function(b){C(b,Ub)};q.r=function(b,c){C(b,c)};q.S=function(b,c,d){C(b,c.add(d))};q.Pa=function(b,c,d,f){C(b,c.add(d).add(f))};
q.h=function(b){if(b instanceof y)return Ub;for(var c=b.a(),b=b.b();!(b instanceof y);)c=c.add(b.a()),b=b.b();return c};function Eh(){this.c("asin")}Eh.prototype=new $;Eh.prototype.className="Asin";Eh.prototype.h=function(b){Ab(b,this.className,1);b=Math.asin(Wa(b.a(),this).B());return new H(b)};function Fh(){this.c("atan")}Fh.prototype=new $;Fh.prototype.className="Atan";Fh.prototype.h=function(b){Ab(b,this.className,1);b=Math.atan(Wa(b.a(),this).B());return new H(b)};
function Gh(){this.c("complex-parts")}Gh.prototype=new $;Gh.prototype.className="ComplexParts";Gh.prototype.h=function(b){Ab(b,this.className,1);b=Nb(b.a(),this);return w([new H(b.O),new H(b.K)])};function Hh(){this.c("cos")}Hh.prototype=new $;Hh.prototype.className="Cosine";Hh.prototype.h=function(b){Ab(b,this.className,1);b=Math.cos(Wa(b.a(),this).B());return new H(b)};function Ih(){this.c("/")}Ih.prototype=new $;Ih.prototype.className="Divide";
Ih.prototype.h=function(b){b instanceof y&&g(new r("Function `/` expected at least 1 arg"));return Jh(b).pc(b)};function Kh(){this.c("expt")}Kh.prototype=new $;Kh.prototype.className="Expt";Kh.prototype.h=function(b){Ab(b,this.className,2);var c=b.a();c instanceof O||g(new TypeError);b=b.b().a();b instanceof O||g(new TypeError);return c instanceof I?Rb(c,b):b instanceof I?Rb(new I(c.B(),0),b):(c=c.B(),b=b.B(),new H(Math.pow(c,b)))};function Lh(){this.c("log")}Lh.prototype=new $;
Lh.prototype.className="Logarithm";Lh.prototype.h=function(b){Ab(b,this.className,1);b=Wa(b.a(),this);return b instanceof I?b.log():new H(Math.log(b.B()))};function Mh(){this.c("make-complex")}Mh.prototype=new $;Mh.prototype.className="MakeComplex";Mh.prototype.h=function(b){Ab(b,this.className,2);var c=Wa(b.a(),this),b=Wa(b.b().a(),this);return new I(c.B(),b.B())};function Nh(){for(;;){var b=Math.floor(Math.fd()*9007199254740992);if(b<9007199254740992)return b}}
function Jh(b){return b instanceof y?Oh:b.a()instanceof H?Ph:b.a()instanceof I?complexOps:(b.b()instanceof A||g(new TypeError),Jh(b.b()))}function Qh(){}Qh.prototype.ic=i;Qh.prototype.multiply=i;Qh.prototype.pc=i;function Rh(){}Rh.prototype=new Qh;Rh.prototype.ic=function(b){return Ga(Sh(this,b))};function Sh(b,c){if(c instanceof y)return 0;var d=c.a();d instanceof O||g(new TypeError);var d=d.B(),f=c.b();f instanceof A||g(new TypeError);return d+Sh(b,f)}
Rh.prototype.multiply=function(b){return Ga(Th(this,b))};Rh.prototype.pc=function(b){var c=b.b(),d=b.a();d instanceof O||g(new TypeError);c=c instanceof y?1/d.B():d.B();b=b.b();b instanceof A||g(new TypeError);return Ga(c/Th(this,b))};function Th(b,c){if(c instanceof y)return 1;var d=c.a();d instanceof O||g(new TypeError);var d=d.B(),f=c.b();f instanceof A||g(new TypeError);f=Th(b,f);return d*f}var Ph=new Rh;function Uh(){}Uh.prototype=new Qh;
Uh.prototype.ic=function(b){if(b instanceof y)return Ub;else{var c=b.a();c instanceof P||g(new TypeError);b=b.b();b instanceof A||g(new TypeError);return c.wb(this.ic(b))}};Uh.prototype.multiply=function(b){if(b instanceof y)return Vb;var c=b.a();c instanceof P||g(new TypeError);b=b.b();b instanceof A||g(new TypeError);return Tb(c,this.multiply(b))};
Uh.prototype.pc=function(b){var c=b.b(),d=b.a();d instanceof P||g(new TypeError);c=c instanceof y?new P(d.U,d.ca):d;b=b.b();b instanceof A||g(new TypeError);b=this.multiply(b);b=new P(b.U,b.ca);return Tb(c,b)};var Oh=new Uh;function Vh(){this.c("mod")}Vh.prototype=new $;Vh.prototype.className="Mod";Vh.prototype.S=function(b,c,d){c instanceof O||g(new TypeError);d instanceof O||g(new TypeError);C(b,c.Mc(d))};Vh.prototype.f=function(b,c){Ab(c,this.className,2);this.S(b,c.a(),c.b().a())};
function Wh(){this.c("*")}Wh.prototype=new $;q=Wh.prototype;q.className="Multiply";q.wa=function(b){C(b,Vb)};q.r=function(b,c){C(b,c)};q.S=function(b,c,d){C(b,c.multiply(d))};q.Pa=function(b,c,d,f){C(b,c.multiply(d).multiply(f))};q.h=function(b){if(b instanceof y)return Vb;for(var c=b.a(),b=b.b();!(b instanceof y);)c=c.multiply(b.a()),b=b.b();return c};function Xh(){this.c("polar-coordinates")}Xh.prototype=new $;Xh.prototype.className="PolarCoordinates";
Xh.prototype.h=function(b){Ab(b,this.className,1);b=Nb(b.a(),this);return w([new H(Math.sqrt(b.O*b.O+b.K*b.K)),new H(Math.atan2(b.K,b.O))])};function Yh(){this.c("quotient")}Yh.prototype=new $;Yh.prototype.className="Quotient";Yh.prototype.h=function(b){ig(b,2,this.className);var c=Xa(b.a(),this),d=Xa(b.b().a(),this);(!c.ja()||!d.ja())&&g(new r("Type error: "+this+" : expected integer, got "+b));b=c.H()/d.H();return G(b<0?Math.ceil(b):Math.floor(b))};function Zh(){this.c("rand")}Zh.prototype=new $;
Zh.prototype.className="Rand";Zh.prototype.h=function(b){if(b instanceof y)return new H(Math.fd());else{var c=b.a();c instanceof O||g(new TypeError);c.ja()||g(new r("rand: requires one exact integer argument, got "+b));return new P(Math.abs(Nh()%c.H()),1)}};function $h(){this.c("sin")}$h.prototype=new $;$h.prototype.className="Sine";$h.prototype.h=function(b){Ab(b,this.className,1);b=Math.sin(Wa(b.a(),this).B());return new H(b)};function ai(){this.c("sqrt")}ai.prototype=new $;
ai.prototype.className="Sqrt";ai.prototype.r=function(b,c){C(b,c.sqrt())};ai.prototype.f=function(b,c){ig(c,1,this.className);this.r(b,c.a())};function bi(){this.c("-")}bi.prototype=new $;q=bi.prototype;q.className="Subtract";q.r=function(){g(new r("- : expected at least 1 arg"))};q.r=function(b,c){c instanceof O||g(new TypeError);C(b,c.kb())};q.S=function(b,c,d){d instanceof O||g(new TypeError);C(b,c.add(d.kb()))};
q.h=function(b){b instanceof y&&g(new r("Function `-` expected at least 1 arg"));var c=b.a();c instanceof O||g(new TypeError);c=c.kb();b=b.b();b instanceof A||g(new TypeError);b instanceof y?b=c:(b=new A(c,b),b=Jh(b).ic(b).kb());return b};function ci(){this.c("tan")}ci.prototype=new $;ci.prototype.className="Tangent";ci.prototype.h=function(b){Ab(b,this.className,1);b=Math.tan(Wa(b.a(),this).B());return new H(b)};function di(){this.c("trunc")}di.prototype=new $;di.prototype.className="Trunc";
di.prototype.h=function(b){Ab(b,this.className,1);b=b.a();b instanceof O||g(new TypeError);b=b.B();return new P(Math.floor(b),1)};function ei(){this.c("bound")}ei.prototype=new $;ei.prototype.className="Bound";ei.prototype.wa=function(){g(new r("bound: requires 1 arg"))};ei.prototype.r=function(b,c){c instanceof L||g(new TypeError);C(b,ob(c.bound()))};ei.prototype.h=function(b){Ab(b,this.className,1);b=Ta(b.a(),this);return ob(b.bound())};function fi(){this.c("exact")}fi.prototype=new $;
fi.prototype.className="Exact";fi.prototype.h=function(b){b=Wa(b.a(),this);return ob(b instanceof P&&b.ja())};function gi(){this.c(">")}gi.prototype=new $;q=gi.prototype;q.className="GreaterThan";q.wa=function(b){C(b,Ma)};q.r=function(b){C(b,Ma)};q.S=function(b,c,d){C(b,c.na(d)<=0?B:Ma)};q.h=function(b){if(b.ha()<2)return Ma;var c=b.a(),b=b.b();for(b instanceof A||g(new TypeError);!(b instanceof y);){var d=b.a();if(c.na(d)<=0)return B;c=d;b=b.b();b instanceof A||g(new TypeError)}return Ma};
function hi(){this.c("is")}hi.prototype=new $;q=hi.prototype;q.className="Is";q.wa=function(b){C(b,Ma)};q.r=function(b){C(b,Ma)};q.S=function(b,c,d){C(b,ob(c.Ba(d)))};q.h=function(b){return ii(this,b.a(),b.b())};function ii(b,c,d){return d instanceof y?Ma:!c.Ba(d.a())?B:ii(b,c,d.b())}function ji(){this.c("<")}ji.prototype=new $;q=ji.prototype;q.className="LessThan";q.wa=function(b){C(b,Ma)};q.r=function(b){C(b,Ma)};q.S=function(b,c,d){C(b,c.na(d)<0?Ma:B)};
q.h=function(b){var c=b.a(),b=b.b();for(b instanceof A||g(new TypeError);!(b instanceof y);){var d=b.a();if(c.na(d)>=0)return B;c=d;b=b.b();b instanceof A||g(new TypeError)}return Ma};function ki(){this.c("rainbow-debug")}ki.prototype=new $;ki.prototype.className="RainbowDebug";ki.prototype.f=function(b){Ac(b,cf);C(b,J(this.ba))};function li(){this.c("rainbow-profile")}li.prototype=new $;li.prototype.className="RainbowProfile";li.prototype.wa=function(b){this.profile(b);C(b,B)};
li.prototype.r=function(b,c){c instanceof ac||g(new TypeError);this.profile(c);C(b,B)};li.prototype.profile=function(b){Ac(b,hf)};function mi(){this.c("rainbow-profile-report")}mi.prototype=new $;mi.prototype.className="RainbowProfileReport";mi.prototype.wa=function(b){C(b,this.gd(b))};mi.prototype.r=function(b,c){c instanceof ac||g(new TypeError);C(b,this.gd(b))};function ni(){this.c("current-gc-milliseconds")}ni.prototype=new $;ni.prototype.className="CurrentGcMilliseconds";ni.prototype.f=function(){return G(1)};
function oi(){this.c("current-process-milliseconds")}oi.prototype=new $;oi.prototype.className="CurrentProcessMilliseconds";oi.prototype.f=function(){return G(1)};function pi(){this.c("declare")}pi.prototype=new $;pi.prototype.className="Declare";pi.prototype.S=function(b,c,d){c===qi?(c=mf,mf=d,C(b,c)):C(b,B)};pi.prototype.f=function(b,c){this.S(b,c.a(),c.b().a())};var qi=J("atstrings");function ri(){this.c("msec")}ri.prototype=new $;ri.prototype.className="MSec";ri.prototype.h=function(){return G((new Date).getTime())};
function si(){this.c("seconds")}si.prototype=new $;si.prototype.className="Seconds";si.prototype.h=function(){var b=(new Date).getTime()/1E3;return G(b<0?Math.ceil(b):Math.floor(b))};function ti(){this.c("maptable")}ti.prototype=new $;ti.prototype.className="MapTable";ti.prototype.S=function(b,c,d){C(b,d);d instanceof sa||g(new TypeError);C(b,kc(d));c=new Sc(c);c.n(this);D(b,c)};ti.prototype.f=function(b,c){ig(c,2,this.className);this.S(b,c.a(),c.b().a())};function ui(){this.c("sref")}
ui.prototype=new $;ui.prototype.className="Sref";ui.prototype.Pa=function(b,c,d,f){C(b,c.hc(d,f))};ui.prototype.f=function(b,c){ig(c,3,this.className);this.Pa(b,c.a(),c.b().a(),c.b().b().a())};function vi(){this.c("table")}vi.prototype=new $;vi.prototype.className="Table";vi.prototype.f=function(b,c){var d=new sa;C(b,d);if(!(c instanceof y)){var f=new Pc("table-initialiser");f.n(this);D(b,f);c.a().f(b,w([d]))}};function wi(){this.c("atomic-invoke")}wi.prototype=new $;wi.prototype.className="AtomicInvoke";
wi.prototype.r=function(b,c){for(;b!==xi&&xi!==j;);xi=b;yi++;var d=new zi;d.n(this);D(b,d);c.f(b,B)};wi.prototype.f=function(b,c){this.r(b,c.a())};function zi(){this.e=j}zi.prototype=new M;zi.prototype.className="AtomicInvoke.ReleaseLock";zi.prototype.d=function(){yi--;yi===0&&(xi=j)};var xi=j,yi=0;function Ai(){this.c("break-thread")}Ai.prototype=new $;Ai.prototype.className="BreakThread";Ai.prototype.h=function(b){b=b.a();b instanceof ac||g(new TypeError);Ac(b,ef);return B};
function Bi(){this.c("ccc")}Bi.prototype=new $;Bi.prototype.className="CCC";Bi.prototype.r=function(b,c){c instanceof y&&g(new r("Can't ccc nil!"));c.r(b,new Ci(b))};Bi.prototype.f=function(b,c){Ab(c,this.className,1);this.r(b,c.a())};function Ci(b){this.Nb=b;this.pd=!1}Ci.prototype=new x;q=Ci.prototype;q.className="CCC.ContinuationWrapper";
q.r=function(b,c){var d;a:{for(d=0;d<b.g;d++)if(b.D[d]!==this.Nb.D[d]){d-=1;break a}d=b.g}for(var f=[],h=[];d<b.g;)rc(b).a().Fb&&(f.push(rc(b)),h.push(b.ga[b.g])),b.g--;d=[f,h];this.Nb.copyTo(b);C(b,c);for(f=d[0].length-1;0<=f;f--)h=d[1][f],h instanceof u||g(new TypeError),d[0][f]instanceof A||g(new TypeError),R(b,h,instructions)};q.f=function(b,c){this.r(b,c.a())};q.type=function(){return hg};q.toString=function(){return"#<continuation ip:"+this.Nb.g+";ap:"+this.Nb.N+";VM#"+this.Nb.Bc+">"};
function Di(){this.c("dead")}Di.prototype=new $;Di.prototype.className="Dead";Di.prototype.f=function(b,c){var d=c.a();d instanceof ac||g(new TypeError);return ob(d.Ub)};function Ei(){this.c("kill-thread")}Ei.prototype=new $;Ei.prototype.className="KillThread";Ei.prototype.f=function(b,c){var d=c.a();d instanceof ac||g(new TypeError);Ac(d,ef);return B};function Fi(){this.c("thread-local")}Fi.prototype=new $;Fi.prototype.className="NewThreadLocal";Fi.prototype.h=function(){return new Jb};
function Gi(){this.c("thread-local-ref")}Gi.prototype=new $;Gi.prototype.className="ThreadLocalGet";Gi.prototype.h=function(b){return Lb(b.a(),this).get()};function Hi(){this.c("thread-local-set")}Hi.prototype=new $;Hi.prototype.className="ThreadLocalSet";Hi.prototype.h=function(b){var c=Lb(b.a(),this),b=b.b().a();c.set(b);return b};function Ii(){this.c("annotate")}Ii.prototype=new $;Ii.prototype.className="Annotate";
Ii.prototype.h=function(b){var c=b.a(),b=b.b().a();return c===b.type()?b:new Xb(c,b)};function Ji(){this.c("coerce");Ki()}Ji.prototype=new $;Ji.prototype.className="Coerce";Ji.prototype.S=function(b,c,d){var f=c.type();if(f===d)C(b,c);else try{d instanceof L||g(new TypeError),f instanceof L||g(new TypeError),(d.rb[f]||j).r(b,c)}catch(h){h instanceof Li&&g(new r("Can't coerce "+c+" to "+d)),g(new r("Can't coerce "+c+" ( a "+c.type()+" ) to "+d,h))}};
Ji.prototype.Pa=function(b,c,d,f){var h=c.type();if(h===d)C(b,c);else try{d instanceof L||g(new TypeError),h instanceof L||g(new TypeError),(d.rb[h]||j).S(b,c,f)}catch(k){k instanceof Li&&g(new r("Can't coerce "+c+" to "+d)),g(new r("Can't coerce "+c+" ( a "+c.type()+" ) to "+d,k))}};Ji.prototype.f=function(b,c){c.sb(2)?this.S(b,c.a(),c.b().a()):c.sb(3)?this.Pa(b,c.a(),c.b().a(),c.b().b().a()):g(new r("coerce expects 2 or 3 args, got "+c))};function Mi(){this.c("rep")}Mi.prototype=new $;
Mi.prototype.className="Rep";Mi.prototype.h=function(b){var c=b.a();if(c instanceof Xb){b=b.a();try{b instanceof Xb||g(new TypeError)}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+this+" expected a Tagged, got "+b))}b=b.nb}else b=c;return b};function Ni(){this.c("type")}Ni.prototype=new $;Ni.prototype.className="Type";Ni.prototype.r=function(b,c){C(b,c.type())};Ni.prototype.h=function(b){Ab(b,this.className,1);return b.a().type()};
var Cb=J("string"),Oi=J("sym"),Pi=J("int"),Qi=J("num"),Ri=J("cons"),Si=J("char");
function Ki(){Ua(Ri,Cb,new Db("string-cons",function(b){b instanceof Ca||g(new TypeError);for(var b=b.value(),c=[],d=0;d<b.length;d++)c.push(Da(b.charCodeAt(d)));return w(c)}));Ua(Cb,Ri,new Db("cons-string",function(b){b instanceof A||g(new TypeError);for(var c=[];!(b instanceof y);)c.push(b.a().Ua()),b=b.b(),b instanceof A||g(new TypeError);return F(c.join(""))}));Ua(Cb,Pi,new Db("int-string",function(b){return this.qb(b,Wb)},function(b,c){c instanceof O||g(new TypeError);b instanceof O||g(new TypeError);
var d;b instanceof I?d=F(b.toString()):b instanceof H&&c.H()!==10?g(new Li):d=b instanceof P?b.stringify(c):Vi(b,c);return d}));Ua(Cb,Qi,new Db("num-string",function(b){return this.qb(b,Wb)},function(b,c){c instanceof O||g(new TypeError);b instanceof O||g(new TypeError);var d;b instanceof I?d=F(b.toString()):b instanceof H&&c.H()!==10?g(new Li):d=b instanceof P?b.stringify(c):Vi(b,c);return d}));Ua(Oi,Cb,new Db("string-sym",function(b){b instanceof Ca||g(new TypeError);return Ea(b.value())}));Ua(Cb,
Oi,new Db("sym-string",function(b){return b instanceof y?F(""):F(b.Ua())}));Ua(Pi,Si,new Db("char-int",function(b){b instanceof N||g(new TypeError);b=b.value();return G(b)},function(b){return this.Cb(b)}));Ua(Pi,Qi,new Db("num-int",function(b){b instanceof O||g(new TypeError);return b.round()},function(b){return this.Cb(b)}));Ua(Qi,Pi,new Db("int-num",aa()));Ua(Si,Pi,new Db("int-char",function(b){b instanceof O||g(new TypeError);b.ja()||g(new Li);return Da(b.H())}));Ua(Cb,Si,new Db("char-string",
function(b){b instanceof N||g(new TypeError);b=b.value();return F(String.fromCharCode(b))}));Ua(Oi,Si,new Db("char-sym",function(b){b instanceof N||g(new TypeError);b=b.value();return Ea(String.fromCharCode(b))}));Ua(Qi,Cb,new Db("string-num",function(b){return this.qb(b,Wb)},function(b,c){c instanceof O||g(new TypeError);b instanceof Ca||g(new TypeError);var d=b.value().toLowerCase();if(d==="+inf.0")d=new H(1/0);else if(d==="-inf.0")d=new H(-1/0);else if(d==="+nan.0")d=new H(0/0);else{var f;if(/i$/i.test(d))try{f=
Mb()}catch(h){h instanceof qa||g(h),g(new Li)}else/\./.test(d)||c.H()<15&&/.e./.test(d)?d=Wi(d,c.H()):/\//.test(d)?d=Xi(d,c.H()):(f=c.H(),d=G(parseInt(d,~~f))),f=d;d=f}return d}));Ua(Pi,Cb,new Db("string-int",function(b){return this.qb(b,Wb)},function(b,c){c instanceof O||g(new TypeError);b instanceof Ca||g(new TypeError);var d=b.value().toLowerCase();if(d==="+inf.0"||d==="-inf.0"||d==="+nan.0"||/i$/i.test(d))g(new Li);else if(/\./.test(d)||c.H()<15&&/.e./i.test(d))return d=Wi(d,c.H()),d instanceof
H||g(new TypeError),d.fc();else if(/\//.test(d))return d=Xi(d,c.H()),d instanceof P||g(new TypeError),d.fc();else{var f=c.H();return G(parseInt(d,~~f))}}))}function Vi(b,c){if(c.H()===10)return F(b.toString());else{var d=b.H().toString(~~c.H());return F(""+d+".0")}}function Xi(b,c){var d=b.split(/\//g);2<d.length&&g(new Li);return new P(parseInt(d[0],~~c),parseInt(d[1],~~c))}
function Wi(b,c){var d=!1;/^-/.test(b)&&(d=!0,b=b.substring(1));b=b.toUpperCase();/E/.test(b)||(b+="E0");if(/\./.test(b))/^\./.test(b)&&(b="0"+b);else var f=b.split(/E/g),b=f[0]+".0E"+f[1];var f=b.split(/\./g),h=parseInt(f[0],~~c),f=f[1].split(/E/g);/^\+/.test(f[1])&&(f[1]=f[1].substring(1));f=(h+parseInt(f[0],~~c)/Math.pow(c,f[0].length))*Math.pow(c,parseInt(f[1],~~c));d&&(f=-f);return Ga(f)}function Db(b,c,d){this.ba=b;if(c!==i)this.Cb=c;if(d!==i)this.qb=d}Db.prototype=new x;q=Db.prototype;
q.className="Typing.Coercion";q.type=function(){return J("fn")};q.Cb=function(){g(new r("not implemented: "+name+".coerce 1 arg"))};q.qb=function(){g(new r("not implemented: "+name+".coerce 2 args"))};q.r=function(b,c){C(b,this.Cb(c))};q.S=function(b,c,d){C(b,this.qb(c,d))};function Li(){}Li.prototype=Error();function Yi(b){this.pa=b}Yi.prototype=new qb;q=Yi.prototype;q.className="Input";
q.dc=function(b,c){return this.pa.dc(function(c,f){return c?b(new r("Cannot read byte from "+this,c)):f===j?b(j,B):b(j,G(f))},c)};function Zi(b,c,d){return b.pa.ec(function(b,d){return b?c(new r("reading character: "+b)):d===j?c(j,B):c(j,Da(d))},d)}function $i(b,c,d,f){return Aa(b.pa,function(b,f){return b?d(new r("Can't parse input: "+b,b)):f===j?d(j,c):d(j,f)},f)}q.type=function(){return aj};q.ra=m("pa");q.close=function(){this.od=!0;this.pa.close()};
function bj(b,c){try{return b instanceof Yi||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected input-port, got "+b))}}var aj=J("input");function cj(b){this.bb=b}cj.prototype=new qb;q=cj.prototype;q.className="Output";q.write=function(b){this.bb.Sa(""+b)};q.type=function(){return dj};q.ra=m("bb");q.close=function(){this.bb.close()};q.kc=function(b){this.bb.kc(b)};
function ej(b,c){try{return b instanceof cj||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(new r("Wrong argument type: "+c+" expected output-port, got "+b))}}q.flush=function(){this.bb.flush()};var dj=J("output");
function Ba(b){function c(){if(b.length<=h)return!1;var c=b.charCodeAt(h++);f.push(c>>>8&255,c&255);return!0}function d(){return f.length!==0||c()?f.shift():j}var f=[],h=0;Yi.call(this,{dc:function(b){b(j,d());return!0},ec:function(b){var c=d(),f=d();b(j,f===j?j:c<<8|f);return!0},cb:function(b){b(j,2<=f.length||c()?f[0]<<8|f[1]:j);return!0},close:l()})}Ba.prototype=new Yi(i);Ba.prototype.className="StringInputPort";
function fj(){var b=this;b.Jb=[];b.jb=j;cj.call(this,{Sa:function(c){if(b.jb===j)b.Jb.push(c);else for(var d=0,f=c.length;d<f;d++){var h=c.charCodeAt(d);b.Jb.push(String.fromCharCode(b.jb<<8|h>>>8&255));b.jb=h&255}},kc:function(c){b.jb===j?b.jb=c:(b.Jb.push(String.fromCharCode(b.jb<<8|c)),b.jb=j)},close:l(),flush:l()})}fj.prototype=new cj(i);fj.prototype.className="StringOutputPort";fj.prototype.value=function(){var b=this.Jb.join("");this.Jb=[b];return F(b)};fj.prototype.toString=n("#<string-output-port>");
function gj(){this.bb=ka}gj.prototype=new cj(i);gj.prototype.className="IO.Anon_STD_OUT_";gj.prototype.close=l();gj.prototype.toString=n("IO.STD_OUT");var hj=new gj;function ij(){this.bb=la}ij.prototype=new cj(i);ij.prototype.className="IO.Anon_STD_ERR_";ij.prototype.close=l();ij.prototype.toString=n("IO.STD_ERR");var jj=new ij;function kj(){this.pa=ja}kj.prototype=new Yi(i);kj.prototype.className="IO.Anon_STD_IN_";kj.prototype.close=l();kj.prototype.toString=n("IO.STD_IN");
var lj={value:new kj},mj={value:hj};function nj(b,c){return b instanceof y?mj.value:ej(b,c)}function oj(b,c){return b instanceof y?lj.value:bj(b,c)}function pj(b){for(;!(b instanceof y);){var c=b.a();c instanceof Yi?c.close():c instanceof cj?c.close():c instanceof ArcSocket?c.close():c instanceof dc?c.close():g(new r("close: expected Input or Output object; got "+c));b=b.b();b instanceof A||g(new TypeError)}return B}function qj(){this.c("close")}qj.prototype=new $;qj.prototype.className="Close_Builtin";
qj.prototype.h=function(b){return pj(b)};function rj(){this.c("disp")}rj.prototype=new $;rj.prototype.className="Disp";rj.prototype.r=function(b,c){mj.value.write(c.Ua());C(b,B)};rj.prototype.h=function(b){var c=nj(b.b().a(),this),b=b.a();c.write(b.Ua());return B};function sj(){this.c("flushout")}sj.prototype=new $;sj.prototype.className="FlushOut";sj.prototype.h=function(){mj.value.flush();return Ma};function tj(){this.c("force-close")}tj.prototype=new $;tj.prototype.className="ForceClose";
tj.prototype.h=function(b){return pj(b)};function uj(){this.c("stderr")}uj.prototype=new $;uj.prototype.className="StdErr";uj.prototype.h=function(){return jj};function vj(){this.c("stderr")}vj.prototype=new $;vj.prototype.className="StdIn";vj.prototype.h=function(b){ig(b,0,this.className);return lj.value};function wj(){this.c("stdout")}wj.prototype=new $;wj.prototype.className="StdOut";wj.prototype.h=function(){return mj.value};function xj(){this.c("write")}xj.prototype=new $;
xj.prototype.className="Write";xj.prototype.h=function(b){nj(b.b().a(),this).write(b.a());return B};function yj(){this.c("writeb")}yj.prototype=new $;yj.prototype.className="WriteB";yj.prototype.h=function(b){var c=nj(b.b().a(),this),b=Xa(b.a(),this);b.ja()||g(new r("write byte: expected byte, got "+b));c.kc(b.H());return B};function zj(){this.c("writec")}zj.prototype=new $;zj.prototype.className="WriteC";
zj.prototype.h=function(b){var c=nj(b.b().a(),this),d=tb(b.a(),this);c.bb.Sa(String.fromCharCode(d.value()));return b.a()};function Aj(){this.c("instring")}Aj.prototype=new $;Aj.prototype.className="InString";Aj.prototype.h=function(b){return new Ba(Eb(b.a(),this).value())};function Bj(){this.c("inside")}Bj.prototype=new $;Bj.prototype.className="Inside";
Bj.prototype.h=function(b){b=b.a();try{b instanceof fj||g(new TypeError)}catch(c){c instanceof TypeError||g(c),g(new r("Wrong argument type: "+this+" expected a StringOutputPort, got "+b))}return b.value()};function Cj(){this.c("outstring")}Cj.prototype=new $;Cj.prototype.className="OutString";Cj.prototype.h=function(){return new fj};function Dj(){this.c("call-w/stdin")}Dj.prototype=new $;Dj.prototype.className="CallWStdIn";
Dj.prototype.f=function(b,c){var d=new Qc(lj,lj.value);d.n(this);D(b,d);lj.value=bj(c.a(),this);c.b().a().f(b,B)};function Ej(){this.c("call-w/stdout")}Ej.prototype=new $;Ej.prototype.className="CallWStdOut";Ej.prototype.f=function(b,c){var d=new Qc(mj,mj.value);d.n(this);D(b,d);mj.value=ej(c.a(),this);c.b().a().f(b,B)};function Fj(){this.c("readb")}Fj.prototype=new $;Fj.prototype.className="ReadB";Fj.prototype.r=function(b,c){D(b,new Gj(oj(c,this)))};
Fj.prototype.f=function(b,c){D(b,new Gj(oj(c.a(),this)))};function Gj(b){this.e=j;this.Kb=b;this.n(parent);this.Hc=this.Rc=!1;this.F=i}Gj.prototype=new M;Gj.prototype.Xb=!0;Gj.prototype.className="ReadB.Go";Gj.prototype.wc=function(b,c,d){return this.Kb.dc(function(d,h){if(d)return void c(d);C(b,h);c(j)},d)};Gj.prototype.d=function(){g(Error())};function Hj(){this.c("readc")}Hj.prototype=new $;Hj.prototype.className="ReadC";Hj.prototype.r=function(b,c){D(b,new Ij(oj(c,this)))};
Hj.prototype.f=function(b,c){D(b,new Ij(oj(c.a(),this)))};function Ij(b){this.e=j;this.Kb=b;this.n(parent);this.Hc=this.Rc=!1;this.F=i}Ij.prototype=new M;Ij.prototype.Xb=!0;Ij.prototype.className="ReadC.Go";Ij.prototype.wc=function(b,c,d){return Zi(this.Kb,function(d,h){if(d)return void c(d);C(b,h);c(j)},d)};Ij.prototype.d=function(){g(Error())};function Jj(){this.c("sread")}Jj.prototype=new $;Jj.prototype.className="Sread";Jj.prototype.f=function(b,c){D(b,new Kj(bj(c.a(),this),c.b().a()))};
function Kj(b,c){this.e=j;this.Kb=b;this.Yc=c;this.n(parent);this.Hc=this.Rc=!1;this.F=i}Kj.prototype=new M;Kj.prototype.Xb=!0;Kj.prototype.className="Sread.Go";Kj.prototype.wc=function(b,c,d){return $i(this.Kb,this.Yc,function(d,h){if(d)return void c(d);C(b,h);c(j)},d)};Kj.prototype.d=function(){g(Error())};var ng=!0;
function Lj(b){var c=(new Date).getTime(),d=Mj();new ri;new si;new oi;new ni;new pi;J("pi").da(new H(Math.PI));J("e").da(new H(Math.E));new di;new Kh;new Zh;new ai;new Yh;new Vh;new Dh;new bi;new Wh;new Ih;new $h;new Hh;new ci;new Eh;new Ch;new Fh;new Lh;new Gh;new Mh;new Xh;new Ni;new Ii;new Mi;new Ji;new uh;new th;new Nj;new Ei;new Ai;new Di;new wi;new Bi;new Fi;new Gi;new Hi;new bh;new $g;new gh;new eh;new fh;new dh;new zh;new vh;new wh;new Ah;new Bh;new xh;new yh;new ei;new ji;new gi;new fi;new hi;
new ih;new kh;new mh;new sh;new vi;new ti;new ui;new Dj;new Ej;new vj;new wj;new uj;new rj;new xj;new Jj;new yj;new zj;new Fj;new Hj;new sj;new qj;new tj;new Aj;new Cj;new Bj;new ki;new li;new mi;var f=new ac;J("*argv*").da(w(d));J("call*").da(new sa);J("sig").da(new sa);Oj(f,function(d){if(d)return void b(d);na("repl in "+((new Date).getTime()-c)+"ms");Pj(f,b,i)})}
function Mj(){for(var b=[],c=[],d=0,f=b.length;d<f;d++){var h=b[d];Object.prototype.toString.call(h)!=="[object String]"&&g(new TypeError);c.push(ya(""+h))}return c}function Oj(b,c){var d=[],f=i;function h(d,k){if(d)return void c(d);if(k===j)return void c();Qj(b,k,function(b){if(b)return void c(b);Aa(K,h,f)},f)}for(var k=[],o=0,p=d.length;o<p;o++){var z=d[o];Object.prototype.toString.call(z)!=="[object String]"&&g(new TypeError);k.push(z+" ")}var K=(new Ba(k.join(""))).ra();Aa(K,h,f)}
function Pj(b,c,d){ma("arc> ");for(var f=!0,h=!1;!h;)if(Aa(ja,function(k,o){if(k){if(!(k instanceof qa))return void c(k);oa(k);f||Pj(b,c,d)}else o===j?(h=!0,f||c()):Qj(b,o,function(h){if(h)return void c(h);f||Pj(b,c,d)},d)||(f=!1)},d)||(f=!1),!f)return;c()}function Qj(b,c,d,f){return Rj(b,c,function(b,c){if(b){if(!(b instanceof r))return void d(b);na("Message    : "+b.message);ma("Java stack : ");oa(b,ka)}else na(c);d()},f)}function Sj(b){this.e=b}Sj.prototype=new Pe;Sj.prototype.className="Console.Anon_mkVisitor_";
Sj.prototype.Ob=function(b){b.n(this.e)};function Rj(b,c,d,f){D(b,new Tj(c));return bc(b,d,f)}function Tj(b){this.e=j;this.va=b;this.n(F("Console.compileAndEvalAsync_"))}Tj.prototype=new M;Tj.prototype.className="Console.CompileAndEval";Tj.prototype.d=function(b){D(b,new Uj);lf(b,this.va,[])};function Uj(){this.e=j;this.n(F("Console.compileAndEvalAsync_"))}Uj.prototype=new M;Uj.prototype.className="Console.AndEval";
Uj.prototype.d=function(b){var c=Q(b).reduce(),d=[];c.l(d);d=w(d);d.j(new Sj(c));R(b,j,d)};function Nj(){this.c("new-thread")}Nj.prototype=new $;Nj.prototype.className="NewThread";Nj.prototype.h=function(){g(new r("Rainbow.js doesn't support new-thread."))};function Hg(b,c,d){this.e=j;this.fa=b;this.m=c;this.n(d)}Hg.prototype=new M;Hg.prototype.className="BindAndRun";Hg.prototype.d=function(b){this.fa.add(Q(b));R(b,this.fa,this.m)};Ea("window").da(new dc(window));function Vj(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)}
Vj(window,"load",function(){function b(){var b=z.value+"\n";z.value="";da.cc.Sa(b)}function c(b){if(b.Qc!==i)return b.Qc();for(var c=[],d=!0;d;)b.ec(function(b,f){b&&g(b);f!==j?d=!1:c.push(String.fromCharCode(f))},!0)||(d=!1);return c.join("")}function d(b){p.appendChild(document.createTextNode(b));ga||(ga=!0,setTimeout(function(){ga=!1;p.scrollTop=p.scrollHeight},0))}function f(b){b&&g(b);b=c(da.Oa);b!==""&&(d(b),ea.cc.Sa(b),da.Oa.cb(f))}function h(b){b&&g(b);b=c(fa.Oa);b!==""&&(d(b),fa.Oa.cb(h))}
function k(b){b&&g(b);b=c(ha.Oa);b!==""&&(d(b),ha.Oa.cb(k))}var o=document.getElementById("repl"),p=document.createElement("pre");p.className="scrollback";p.appendChild(document.createTextNode(""));o.appendChild(p);var z=document.createElement("textarea");z.className="prompt";Vj(z,"keydown",function(b){if((b.which||b.keyCode)===13)b.preventDefault?b.preventDefault():b.returnValue=!1});Vj(z,"keyup",function(c){(c.which||c.keyCode)===13&&b()});o.appendChild(z);var K=document.createElement("button");
K.className="eval";K.appendChild(document.createTextNode("Eval"));Vj(K,"click",function(){b()});o.appendChild(K);var ga=!1;da.Oa.cb(f);fa.Oa.cb(h);ha.Oa.cb(k);Lj(l())});
