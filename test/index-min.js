function g(b){throw b;}var i=void 0,j=!0,l=null,m=!1;function aa(){return function(b){return b}}function n(){return function(){}}function ca(b){return function(c){this[b]=c}}function o(b){return function(){return this[b]}}function p(b){return function(){return b}}var r;
function da(){function b(){if(0!==k.length){var c=k.shift(),d=q.shift();setTimeout(function(){d(c)},0);setTimeout(b,0)}}function c(b,c,s,ba){if(0!==d.length&&0===k.length){var ic=d[0];if(1===d.length&&("byte"===ic.type||ic.Da.length<<1===f+1)){if(h)return c&&(d=[]),b(l,l),j;ba||(k.push(b),q.push(s));return m}var Qa,s=0,ba=f,Z=ic;if("byte"===Z.type)s++,ic=Z.Da;else{Z=Z.Da;Qa=Z.charCodeAt(ba>>>1);if(ba&1)return c&&(f++,Z.length<<1<=f&&(d.shift(),f=0)),b(l,Qa),j;ic=Qa>>>8&255;ba++;Z.length<<1<=ba&&(s++,
ba=0)}Z=d[s];"byte"===Z.type?(s++,Qa=Z.Da):(Z=Z.Da,Qa=Z.charCodeAt(ba>>>1),Qa=(ba&1?Qa:Qa>>>8)&255,ba++,Z.length<<1<=ba&&(s++,ba=0));if(c){for(;s--;)d.shift();f=ba}b(l,ic<<8|Qa);return j}if(h)return b(l,l),j;ba||(k.push(b),q.push(s));return m}var d=[],f=0,h=m,k=[],q=[],s={},E=s.mc=function(b,c){if(0!==d.length&&0===k.length){var s=d[0];if("byte"===s.type)d.shift(),b(l,s.Da);else{var s=s.Da,ba=s.charCodeAt(f>>>1),ba=(f&1?ba:ba>>>8)&255;f++;s.length<<1<=f&&(d.shift(),f=0);b(l,ba)}return j}if(h)return b(l,
l),j;c||(k.push(b),q.push(E));return m},M=s.nc=function(b,d){return c(b,j,M,d)},ma=s.mb=function(b,d){return c(b,m,ma,d)};s.close=n();s.Zc=function(){var b=d.length,c=m,h,k=[],q=0;if(f&1){var s=d[0].Da,c=j;h=s.charCodeAt(f>>>1)&255;f++;for(var Z=f>>>1,E=s.length;Z<E;Z++){var Eb=s.charCodeAt(Z);k.push(String.fromCharCode(h<<8|Eb>>>8&255));h=Eb&255}f=0;q++}else f&&(k.push(d[0].Da.substring(f>>>1)),f=0,q++);for(b=d.length;q<b;q++)if(s=d[q],"byte"===s.type)c?(k.push(String.fromCharCode(h<<8|s.Da)),c=
m):(h=s.Da,c=j);else if(s=s.Da,c){Z=0;for(E=s.length;Z<E;Z++)Eb=s.charCodeAt(Z),k.push(String.fromCharCode(h<<8|Eb>>>8&255)),h=Eb&255}else k.push(s);d=c?[{type:"byte",Da:h}]:[];return k.join("")};return{Wa:s,lc:{ab:function(c){h||""===c||(d.push({type:"string",Da:c}),b())},uc:function(c){h||(d.push({type:"byte",Da:c}),b())},close:function(){h=j;b()},flush:n()}}}function ea(b,c,d){b.addEventListener?b.addEventListener(c,d,m):b.attachEvent("on"+c,d)}
var fa=da(),ga=da(),ha=da(),ia=da(),ja=ga.Wa,ka=ha.lc,la=ia.lc;function oa(b){b(t(new u,"No filesystem."));return j}function pa(b,c){c(l,m);return j}function qa(b,c,d){if(d)return c(t(new u,"Can't access the Web synchronously.")),j;d=new XMLHttpRequest;d.open("GET",b,j);d.onerror=function(){c(l,m)};d.onload=function(){c(l,j)};d.send(l);return m}
function ra(b,c,d){if(d)return c(t(new u,"Can't access the Web synchronously.")),j;var f=new XMLHttpRequest;f.open("GET",b,j);f.onerror=function(){c(t(new u,"Couldn't open page: "+b+" because of error: "+f.statusText))};f.onload=function(){c(l,(new sa(f.responseText)).ra())};f.send(l);return m}function ta(b){b(t(new u,"No filesystem."));return j}function ua(b){b(t(new u,"No filesystem."));return j}function va(b){b(t(new u,"No filesystem."));return j}
function wa(b){b(t(new u,"No filesystem."));return j}function xa(b){b(t(new u,"No filesystem."));return j};function ya(b){ka.ab(""+b)}function za(b){ka.ab(""+b+"\n")}function Aa(b,c){i===c&&(c=la);for(c.ab(""+b+"\n"+(b.stack||b)+"\n");b instanceof u&&(b=b.ed);)b instanceof Ba&&(b=b.xa),c.ab("Caused by: "+b+"\n"+(b.stack||b)+"\n")}var v={};function Ca(){}Ca.prototype.t=function(){this.yc={};return this};Ca.prototype.get=function(b){return this.yc["rainbow_"+b]};Ca.prototype.put=function(b,c){return this.yc["rainbow_"+b]=c};function u(){}u.prototype=Error();
function t(b,c,d){b.message=c;b.stack=Error().stack;b.ed=d;b.xd=[];return b}function w(){}r=w.prototype;r.t=function(b,c){this.parent=c;this.ib=Array(~~b);this.Mb=0;return this};r.add=function(b){this.ib.length<=this.Mb&&g(t(new u,"Can't add "+b+" to bindings: already full ("+this.Mb+") "+x(this.ib)));this.ib[this.Mb]=b;this.Mb++};r.Fb=function(b){return 0===b?this:this.parent.Fb(b-1)};
r.toString=function(){for(var b=[],c=0;c<this.ib.length;c++)b.push(c),b.push(" : "),b.push(this.ib[c]),b.push("\n");return b.join("")+"\nparent: "+(this.parent===l?"<none>":this.parent.toString())};r.set=function(b,c){return this.ib[b]=c};r.Lb=o("Mb");r.size=function(){return this.ib.length};function Da(){}Da.prototype=Error();Da.prototype.t=function(){return this};function y(){}r=y.prototype;r.La=m;r.className="ArcObject";r.Ia=p(m);
r.h=function(){g(t(new u,"addInstructions not defined on "+this+", a "+this.className))};r.g=function(b,c){var d=Ea.value();d instanceof Fa||g(new TypeError);d=d.value(this.type());d instanceof z&&g(t(new u,"No handler for "+this.type()+" in call* table: called "+this+" with args "+c));d.g(b,A(new B,this,c))};r.va=function(b){this.g(b,C)};r.u=function(b,c){this.g(b,A(new B,c,C))};r.V=function(b,c,d){this.g(b,A(new B,c,A(new B,d,C)))};r.Xa=function(b,c,d,f){this.g(b,A(new B,c,A(new B,d,A(new B,f,C))))};
r.la=function(){g(t(new u,"len: expects one string, list or hash argument, got "+this.type()))};r.Wb=function(){g(t(new u,"Can't set car of "+this.type()))};r.qc=function(b,c){g(t(new u,"Can't sref "+this+"( a "+this.type()+"), other args were "+b+", "+c))};r.sa=p(0);r.vc=function(){return C};r.a=function(){g(t(new u,"Can't take car of "+this))};r.b=function(){g(t(new u,"Can't take cdr of "+this))};r.Dc=p(m);r.type=i;r.copy=function(){return this};r.ra=function(){return this};
r.Ha=function(b){return this===b};r.copyTo=aa();r.P=p(j);r.Eb=function(){g(new Ga)};r.Pa=function(){g(new Ha)};r.Yc=function(){return this};function Ia(b,c,d){for(var f=d,h=0;!(d instanceof z);)D(c,d.a()),d=d.b(),h++;F(c,new Ja(f,c.O,b));d=new Ka(h);d.m(b);F(c,d);d=new La(b);d.m(b);F(c,d)}r.Cb=function(){g(t(new u,"has length: not a proper list: ends with "+this))};r.ic=function(){g(t(new u,"longer than: not a proper list: ends with "+this))};r.N=function(){return this};r.l=n();r.Z=function(){return this};
r.tc=n();r.$b=n();r.ac=function(){return C};r.Ta=function(){return this.ac().toString()};r.add=function(){g(t(new u,"add not implemented for "+this.type()+" "+this))};r.sqrt=function(){g(t(new u,"sqrt not implemented for "+this.type()+" "+this))};r.multiply=function(){g(t(new u,"multiply not implemented for "+this.type()+" "+this))};function Ha(){}r.reduce=function(){return this};r.X=p(m);r.U=function(){return this};r.T=function(){return this};r.ia=p(m);r.cb=function(){return this.toString()};
r.Ca=function(){return this.gd||(this.gd=1+Math.random())};r.ta=function(b){return this===b};function Ma(b){var c=l;Na((new sa(b)).ra(),function(b,f){b&&g(b);c=f},j)||g((new Da).t());return c}
function Na(b,c,d){function f(c){return b.mb(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))},d)}function h(c){return b.nc(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))})}function k(b){for(var c=j,d=m;c&&!d;)d=j,h(function(q,s){if(q)return void b(q);s===l||"\n"===s?b(l):"\r"===s?f(function(d,f){if(d)return void b(d);"\n"===f?h(function(c){if(c)return void b(c);b(l)})||(c=m):b(l)})||(c=m):(d=m,c||k(b))})||(c=m);return c}function q(b){for(var c=j,d=
m;c&&!d;)d=j,f(function(f,s){function E(f){if(f)return void b(f);d=m;c||q(b)}if(f)return void b(f);";"===s?k(E)||(c=m):s===l||/[^ \t\r\n]/.test(s)?b(l):h(E)||(c=m)})||(c=m);return c}function s(b,c){function d(f){var h=b.length-1,k=b[h];b="string"===typeof f&&k instanceof Oa?b.slice(0,h).concat([G(k.value()+f)]):"string"===typeof f?b.concat([G(f)]):b.concat([f]);M=m;X||s(b,c)}function k(b){b===i&&(b=(new Da).t());c(b)}function E(){we(function(b,c){if(b)return k(b);q(function(b){if(b)return k(b);h(function(b,
f){if(b)return k(b);")"===f?d(c):k()})||(X=m)})||(X=m)})||(X=m)}for(var X=j,M=m;X&&!M;)M=j,h(function(s,q){if(s)return k(s);q===l?k():'"'===q?c(l,b):"\\"===q?h(function(b,c){if(b)return k(b);'"'===c?d('"'):"\\"===c?d("\\"):"n"===c?d("\n"):"r"===c?d("\r"):"t"===c?d("\t"):"#"===c?h(function(b,c){if(b)return k(b);"("===c?d("#("):k()})||(X=m):k()})||(X=m):"#"===q?f(function(b,c){if(b)return k(b);if("("!==c)return void d("#");h(function(b){if(b)return k(b);E()})||(X=m)})||(X=m):d(q)})||(X=m);return X}
function E(b,c){function d(b){c(l,Pa(b))}for(var k=j,q=m;k&&!q;)q=j,f(function(f,s){if(f)return void c(f);s===l||/[^01-9a-zA-Z]/.test(s)?"newline"===b?d(10):"tab"===b?d(9):"space"===b?d(32):"return"===b?d(13):"null"===b?d(0):/^[01-9][01-9]+$/.test(b)?d(parseInt(b,10)):/^u[0-9a-f]+$/i.test(b)?d(parseInt(b.substring(1),16)):1===b.length?d(b.charCodeAt(0)):c((new Da).t()):h(function(d,f){if(d)return void c(d);q=m;b+=f;k||E(b,c)})||(k=m)})||(k=m);return k}function M(b,c){for(var d=j,k=m;d&&!k;)k=j,f(function(f,
q){if(f)return void c(f);if(q===l||/[^01-9a-fA-F]/.test(q)){if(""===b)return void c((new Da).t());c(l,H(parseInt(b,16)))}else h(function(f,h){if(f)return void c(f);k=m;b+=h;d||M(b,c)})||(d=m)})||(d=m);return d}function ma(b,c){for(var d=j,f=m;d&&!f;)f=j,h(function(h,k){if(h)return void c(h);k===l?c((new Da).t()):"|"===k?c(l,Ra(b)):(f=m,b+=k,d||ma(b,c))})||(d=m);return d}function X(b,c,d){for(var k=j,s=m;k&&!s;)s=j,q(function(q){if(q)return void d(q);f(function(f,q){if(f)return void d(f);q===l?d((new Da).t()):
q===c?h(function(c){if(c)return void d(c);d(l,b)})||(k=m):we(function(f,h){if(f)return void d(f);s=m;b=b.concat([h]);k||X(b,c,d)})||(k=m)})||(k=m)})||(k=m);return k}function cb(b,c){for(var d=j,k=m;d&&!k;)k=j,f(function(f,q){if(f)return void c(f);var s=q!==l&&q.charCodeAt(0);if(q!==l&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(q)||128<=s&&65536>s))h(function(f,h){if(f)return void c(f);k=m;b+=h;d||cb(b,c)})||(d=m);else if("\\"===q)h(function(f){if(f)return void c(f);h(function(f,h){if(f)return void c(f);
"|"===h?(k=m,b+="\\|",d||cb(b,c)):c((new Da).t())})||(d=m)})||(d=m);else{var X;/^-?[01-9]+\/[01-9]+$/.test(b)?c(l,Sa(b)):/^-?[01-9]+$/.test(b)?c(l,H(parseInt(b,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)?c(l,Ta(parseFloat(b))):"+inf.0"===b?c(l,new I(1/0)):"-inf.0"===b?c(l,new I(-1/0)):"+nan.0"===b?c(l,new I(0/0)):"+i"===b?c(l,new J(0,1)):"-i"===b?c(l,new J(0,-1)):(X=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(b))?c(l,new J(Ta(parseFloat(X[1])).value(),
Ta(parseFloat(X[2]+(X[3]||"1"))).value())):c(l,Ra(b))}})||(d=m);return d}function we(b){function c(){s([],function(c,d){if(c)return void b(c);0===d.length?b(l,G("")):1===d.length?b(l,d[0]):b(l,x([Ra("string")].concat(d)))})||(na=m)}function d(){ma("",function(c,d){if(c)return void b(c);b(l,Ra(d))})||(na=m)}function k(){h(function(c,d){if(c)return void b(c);d!==l&&/x/i.test(d)?M("",b)||(na=m):"\\"===d?h(function(c,d){if(c)return void b(c);if(/[^a-zA-Z]/.test(c))return void b(l,Pa(c.charCodeAt(0)));
E(d,b)||(na=m)})||(na=m):b((new Da).t())})||(na=m)}function xe(c){we(function(d,f){if(d)return void b(d);f===l?b((new Da).t()):b(l,x([K(c),f]))})||(na=m)}function Eb(){f(function(c,d){if(c)return void b(c);d===l?b((new Da).t()):"@"===d?h(function(c){if(c)return void b(c);xe("unquote-splicing")})||(na=m):xe("unquote")})||(na=m)}function nk(){X([],")",function(c,d){if(c)return void b(c);if(0===d.length)b(l,Ua);else{try{var f=d===l||0===d.length?C:d[0]===Va?Wa(d):A(new B,d[0],Xa(d.slice(1)))}catch(h){return void b(h)}b(l,
f)}})||(na=m)}function ok(){X([],"]",function(c,d){if(c)return void b(c);b(l,x([K("fn"),x([K("_")]),x(d)]))})||(na=m)}var na=j;q(function(f){if(f)return void b(f);h(function(f,h){if(f)return void b(f);h===l?b(l,l):'"'===h?c():"|"===h?d():"#"===h?k():"'"===h?xe("quote"):","===h?Eb():"`"===h?xe("quasiquote"):"("===h?nk():"["===h?ok():cb(h,b)||(na=m)})||(na=m)})||(na=m);return na}return we(c)}function L(){}L.prototype=new y;r=L.prototype;r.className="Symbol";
r.t=function(b,c){this.ea=b;this.nd=c;this.hd=b;this.Bb=this.k=l;return this};r.h=function(b){b.push(new Ya(this))};function K(b){var c=Ra(b);if(c instanceof L)return c;g(t(new u,"can't make symbol from \""+b+'"'))}
function Ra(b){if("t"===b)b=Za;else if("nil"===b)b=C;else{var c;if(!(c=$a.test(b))){a:if(/^-?[01-9]+\/[01-9]+$/.test(b)||/^-?[01-9]+$/.test(b)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)||"+inf.0"===b||"-inf.0"===b||"+nan.0"===b||"+i"===b||"-i"===b||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(b)||/\\(?!\|)/.test(b))c=j;else{c=0;for(var d=b.length;c<d;c++){var f=b.charCodeAt(c);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(b.charAt(c))||128<=f&&65536>
f)){c=j;break a}}c=m}c=c||"."===b}b=c?ab(b,"|"+b+"|"):bb.test(b)?ab(b.replace(/\\\|/g,"|"),b):ab(b,b)}return b}r.cb=o("ea");r.toString=o("nd");function ab(b,c){if("rainbow_"+b in db.yc)return db.get(b);var d=(new L).t(b,c);db.put(b,d);return d}r.name=o("ea");r.sa=function(b){b instanceof L||g(new TypeError);return this.ea.localeCompare(b.name)};r.type=function(){return eb};r.ra=function(){return this.name()};r.Ca=o("hd");r.ta=function(b){return this===b};
function fb(b,c){return c instanceof L&&c.name()===b}r.ha=function(b){var c=this.k;this.k=b;c!==l&&c.tc(this);b.$b(this)};r.value=function(){this.k===l&&g(t(new u,"Symbol "+this.ea+" is not bound"));return this.k};r.bound=function(){return this.k!==l};function gb(b,c){try{return b instanceof L||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a Symbol, got "+b))}}function hb(b,c,d){if(b.Bb===l)b.Bb={};b.Bb[c.name()]=d}
var db=(new Ca).t(),$a=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,bb=/.*\\\|/,eb=K("sym"),Va=K("."),ib=K("!");function B(){}B.prototype=new y;r=B.prototype;r.className="Pair";function A(b,c,d){c===l&&g(t(new u,"Can't create Pair with null car: use NIL instead"));d===l&&g(t(new u,"Can't create Pair with null cdr: use NIL instead"));b.bb=c;b.ob=d;return b}r.g=function(b,c){var d=jb(c.a(),this);D(b,this.Fb(d.J()).a())};r.vc=o("bb");r.a=o("bb");r.b=o("ob");r.Pa=function(){this.bb!==l&&g(new Ha)};r.P=p(m);
r.Wb=function(b){return this.bb=b};r.qc=function(b,c){return this.Fb(kb(c,this).J()).Wb(b)};r.Dc=function(b){return b===this.bb};r.toString=function(){if(this.a()instanceof L&&this.a().name()in lb&&this.b()instanceof B&&1===this.b().size()){var b=this.a(),b=lb[b.name()],c=this.b();c instanceof B||g(new TypeError);return b+mb(c)}return"("+mb(this)+")"};function mb(b){for(var c=[];!b.P();)c.push(b.a()),b.b().P()||c.push(" "),b=b.b();b instanceof z||c.push(" . ",b);return c.join("")}r.Kc=ca("ob");
function Xa(b){if(0===b.length)return C;if(b[0]===Va)return 2===b.length?(b=b[1],b instanceof y||g(new TypeError),b):Wa(b);var c=b[0];c instanceof y||g(new TypeError);return A(new B,c,Xa(b.slice(1)))}function Wa(b){g(t(new u,'Error: illegal use of "." in '+b))}function nb(b,c,d){if(d===b.length)return c;var f=b[d];f instanceof y||g(new TypeError);return A(new B,f,nb(b,c,d+1))}function ob(b,c){return b===l||0===b.length?c:nb(b,c,0)}function x(b){return ob(b,C)}r.type=function(){return pb};r.la=function(){return this.size()};
r.size=function(){if(this instanceof z)return 0;for(var b=1,c=this.ob;!(c instanceof z);)c.P()&&g(t(new u,"cannot take size: not a proper list: "+this)),b++,c=c.b();return b};r.sa=function(){g(t(new u,"Pair.compareTo:unimplemented"))};r.copyTo=function(b){b.push(this.a());if(this.b()instanceof z)return b;this.b()instanceof B||g(t(new u,"Not a list: "+this));this.b().copyTo(b);return b};
r.ta=function(b){if(this===b)return j;var c=this instanceof z;b instanceof y||g(new TypeError);var d=b instanceof z;if(c!==d)return m;if(c&&d)return j;return b instanceof B?(c=b.bb.ta(this.bb),b=b.ob.ta(this.ob),c&&b):m};r.Ca=function(){return this.a().Ca()+this.b().Ca()};r.Fb=function(b){try{for(var c,d=this,f=b;0<f;)d.b()instanceof z&&g((new qb).t()),d=d.b(),f--;c=d;c instanceof B||g(new TypeError);return c}catch(h){h instanceof qb||g(e),g(t(new u,"Error: index "+b+" too large for list "+this))}};
r.Cb=function(b){return this.b().Cb(b-1)};r.ic=function(b){return 0>b||this.b().ic(b-1)};r.Ta=function(){return"ref:"+this.type().toString()};function qb(){}qb.prototype=Error();qb.prototype.t=function(){return this};r=B.prototype;r.copy=function(){return this instanceof z?this:A(new B,this.a(),this.b().copy())};r.ra=function(){var b=[];rb(b,this);return b};r.Ha=function(b){return y.prototype.Ha.call(this,b)||this instanceof z&&b instanceof z};
function rb(b,c){if(!(c instanceof z)){b.push(c.a().ra());var d=c.b();d instanceof B||g(new TypeError);rb(b,d)}}function sb(b){var c=Array(~~b.size());tb(b,c,0);return c}function tb(b,c,d){if(d<c.length)c[d]=b.bb,b=b.ob,b instanceof B||g(new TypeError),b instanceof z||tb(b,c,d+1)}function ub(b,c){try{return b instanceof B||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a cons, got "+b))}}r.Eb=n();
r.add=function(b){if(b instanceof B){var c=[];this.copyTo(c);b.copyTo(c);return x(c)}g(t(new u,"+ : expects cons, got "+b.type()+" "+b))};r.l=function(b){b.za(this);for(var c=this;!c.P();)c.a().l(b),c=c.b();c instanceof z||c.l(b);b.Ka(this)};function Ga(){}var pb=K("cons"),lb={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function z(){}z.prototype=new B;r=z.prototype;r.className="Nil";function vb(b){var c=new z;c.bb=c.ob=l;c.xb=b;return c}r.h=function(b){b.push(new La(wb))};
r.g=function(b,c){g(t(new u,"Function dispatch on inappropriate object: "+this+" with args "+c))};r.Eb=n();r.Ia=p(j);r.la=p(0);r.P=p(j);r.Pa=n();r.toString=o("xb");r.vc=function(){return this};r.a=function(){return this};r.b=function(){return this};r.Dc=p(m);r.Kc=function(){g(Error("can't set the cdr of "+this))};r.size=p(0);r.copyTo=aa();r.type=function(){return xb};r.Ca=p("nil");r.ta=function(b){if(this===b)return j;b instanceof y||g(new TypeError);return b instanceof z};r.ra=p(m);
r.Ha=function(b){return b instanceof z};r.Yc=aa();r.Cb=function(b){return 0===b};r.ic=function(b){return 0>b};var xb=eb,wb=vb("nil"),yb=vb("()");function zb(){Ab!==i&&g(Error())}var Bb={};zb.prototype=(new L).t("t","t");r=zb.prototype;r.className="Truth";r.Ia=p(j);r.h=function(b){b.push(new La(Ab))};r.toString=p("t");r.sa=function(){g(t(new u,"Truth.compareTo:unimplemented"))};r.type=function(){return eb};function Cb(b){return b?Ab:C}r.Ca=p("t");r.ta=function(b){return this===b};r.ra=p(j);
r.ha=function(){g(t(new u,"error: can't rebind t!"))};r.value=function(){return this};var Ab=new zb;function N(){this.d=l}N.prototype=new y;r=N.prototype;r.Ob=m;r.gc=m;r.pa=m;r.Ea=m;r.className="Instruction";r.type=function(){return K("instruction")};r.fb=function(){return this.toString()};r.toString=function(){return"("+this.className+")"};r.c=i;r.m=ca("d");r.l=function(b){b.Yb(this)};function Ja(b,c,d){this.d=l;this.md=b;this.Jb=c;this.m(d)}Ja.prototype=new N;Ja.prototype.gc=j;
Ja.prototype.className="ArcObject.ConvertError";Ja.prototype.xc=function(b){return b instanceof Error};Ja.prototype.c=function(b){var c=b.error();if(c!==l)b.Va=l,b.O=this.Jb,g(t(new u,"error invoking "+this.d+" with args "+this.md+": "+c,c))};var Ea=K("call*"),C=wb,Ua=yb,Za=Ab;function Db(){}Db.prototype=new y;Db.prototype.className="LiteralObject";Db.prototype.Ia=p(j);Db.prototype.h=function(b){b.push(new La(this))};Db.prototype.Ta=function(){return"ref:"+this.type().toString()};
function Fb(b){this.k=b;Gb[b]=this}Fb.prototype=new Db;r=Fb.prototype;r.className="ArcCharacter";function Pa(b){return Gb[b]===i?new Fb(b):Gb[b]}r.Ia=p(j);r.toString=function(){return"#\\"+String.fromCharCode(this.k)};r.sa=function(b){b instanceof Fb||g(new TypeError);return this.k-other.k};r.type=function(){return Hb};r.ra=function(){return this.value()};r.value=o("k");r.cb=function(){return String.fromCharCode(this.k)};r.Ca=function(){return this.cb()};
r.ta=function(b){return this===b||b instanceof Fb&&b.k===this.k};function Ib(b,c){try{return b instanceof Fb||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a character, got "+b))}}var Hb=K("char"),Gb=Array(65536);function Jb(){Fb.call(this,0)}Jb.prototype=new Fb(0);Jb.prototype.className="ArcCharacter.Anon_NULL_";Jb.prototype.toString=p("#\\null");var Kb=new Jb;function Lb(){Fb.call(this,10)}Lb.prototype=new Fb(10);Lb.prototype.className="ArcCharacter.Anon_named_1_";
Lb.prototype.toString=p("#\\newline");function Mb(){Fb.call(this,9)}Mb.prototype=new Fb(9);Mb.prototype.className="ArcCharacter.Anon_named_2_";Mb.prototype.toString=p("#\\tab");function Nb(){Fb.call(this,13)}Nb.prototype=new Fb(13);Nb.prototype.className="ArcCharacter.Anon_named_3_";Nb.prototype.toString=p("#\\return");function Ob(){Fb.call(this,32)}Ob.prototype=new Fb(32);Ob.prototype.className="ArcCharacter.Anon_named_4_";Ob.prototype.toString=p("#\\space");new Lb;new Mb;new Nb;new Ob;
function Oa(b){this.k=b}Oa.prototype=new Db;r=Oa.prototype;r.className="ArcString";r.g=function(b,c){Pb(c,this.className,1);var d=kb(c.a(),this);d.na()||g(t(new u,"string-ref: expects exact integer: got "+d));d=~~d.J();0<=d||d<this.value.length()||g(t(new u,"string-ref: index "+d+" out of range [0, "+(this.k.length-1)+"] for string "+this.toString()));D(b,Pa(this.k.charCodeAt(d)))};r.value=o("k");r.cb=o("k");
r.toString=function(){var b=this.k,c=[];c.push('"');for(var d=0;d<b.length;d++)switch(b.charAt(d)){case '"':c.push('\\"');break;case "\\":c.push("\\\\");break;case "\n":c.push("\\n");break;case "\r":c.push("\\r");break;default:c.push(b.charAt(d))}c.push('"');return c.join("")};r.sa=function(b){b instanceof Oa||g(new TypeError);return this.k.localeCompare(b.k)};r.la=function(){return this.k.length};r.Wb=function(b){var c=[Ib(b,this).cb()];c.push(this.value().substring(1));this.ha(c.join(""));return b};
r.qc=function(b,c){var d=Ib(b,Fb),f=kb(c,this),f=f.J();0<=f&&f<this.k.length||g(new RangeError);this.k=this.k.substring(0,f)+String.fromCharCode(d.value())+this.k.substring(f+1);return b};r.type=function(){return Qb};r.ra=function(){return this.value()};function G(b){return new Oa(b)}r.ha=ca("k");r.Ca=o("k");r.ta=function(b){return this===b||b instanceof Oa&&b.k===this.k};r.Ha=function(b){return this.ta(b)};
r.add=function(b){var c=[this.k];if(!(b instanceof Oa)){var d=b.type();d instanceof L||g(new TypeError);d=Rb.Bb[d]||l;d instanceof Sb||g(new TypeError);b=d.Kb(b);b instanceof Oa||g(new TypeError)}c.push(b.value());return G(c.join(""))};function Tb(b,c){try{return b instanceof Oa||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a string, got "+b))}}var Qb=K("string");function Ba(b,c,d){this.vb=c;this.xa=b;this.rd=d}Ba.prototype=new Db;
Ba.prototype.className="ArcException";Ba.prototype.type=function(){return Ub};Ba.prototype.message=function(){return this.xa!==l?G(this.xa.message):Vb};Ba.prototype.toString=function(){return this.message().toString()};var Ub=K("exn"),Vb=G("no message");function O(){}O.prototype=new Db;r=O.prototype;r.className="ArcNumber";r.na=i;r.G=i;r.J=i;r.tb=i;r.round=i;r.oc=function(){g(t(new u,"round[closest] not implemented for "+this.className+"("+this+")"))};r.Ia=p(j);
r.sa=function(b){b instanceof O||g(new TypeError);b=b.G()-this.G();return 0>b?1:0===b?0:-1};r.type=function(){return this.na()?Wb:Xb};r.Ha=function(b){return this.ta(b)};function jb(b,c){try{return b instanceof O||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a number, got "+b))}}r.Vc=function(){g(t(new u,"mod: not implemented for "+this.className+"("+this+")"))};var Wb=K("int"),Xb=K("num");function Yb(){this.k=l}Yb.prototype=new Db;
Yb.prototype.className="ArcThreadLocal";Yb.prototype.set=ca("k");Yb.prototype.get=o("k");Yb.prototype.type=function(){return Zb};function $b(b,c){try{return b instanceof Yb||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a thread-local, got "+b))}}var Zb=K("thread-local");function J(b,c){this.Y=b;this.Q=c}J.prototype=new O;r=J.prototype;r.className="Complex";
function ac(){var b;if("+i"===soFar)return new J(0,1);if("-i"===soFar)return new J(0,-1);if(b=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(soFar))return new J(Ta(parseFloat(b[1])).value(),Ta(parseFloat(b[2]+(b[3]||"1"))).value());g((new Da).t())}r.na=function(){return 0===this.Q&&Math.floor(this.Y)===real};r.G=function(){g(t(new u,"Cannot convert complex to double"))};r.J=function(){g(t(new u,"Cannot convert complex to int"))};
r.tb=function(){return new J(-this.Y,-this.Q)};r.toString=function(){return(new I(this.Y)).toString()+(0>this.Q?"":"+")+(new I(this.Q)).toString()+"i"};function bc(b,c){try{return b instanceof J||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a complex number, got "+b))}}r.round=function(){return t(new u,"Can't convert "+this+" to integer")};function cc(b){var c=argument.G();return new J(b.Y*c,b.Q*c)}
r.multiply=function(b){if(b instanceof J)return dc(this,b);b instanceof O||g(new TypeError);b=b.G();return new J(this.Y*b,this.Q*b)};function dc(b,c){var d=b.Y,f=c.Y,h=b.Q,k=c.Q;return new J(d*f-h*k,d*k+f*h)}r.add=function(b){if(b instanceof J)return new J(this.Y+b.Y,this.Q+b.Q);if(b instanceof P||b instanceof I)return new J(this.Y+b.G(),this.Q);g(t(new u,"+: expects a number, got "+b.type()+" "+b))};
r.log=function(){return new J(Math.log(Math.sqrt(this.Y*this.Y+this.Q*this.Q)),Math.atan2(this.Q,this.Y))};function ec(b,c){var d;if(c instanceof J)d=dc(b.log(),c).exp();else{d=b.log();var f=c.G();d=(new J(d.Y*f,d.Q*f)).exp()}return d}r.sqrt=function(){return ec(this,Ta(0.5))};r.exp=function(){var b=Math.exp(this.Y);return new J(b*Math.cos(this.Q),b*Math.sin(this.Q))};r.sa=function(){g(t(new u,"Compare: complex numbers are unordered and cannot be compared"))};
r.Ha=function(b){return b instanceof J?b.Y===this.Y&&b.Q===this.Q:b instanceof O&&0===this.Q&&b.G()===this.Y};function P(b,c){0===c&&0!==b&&g(t(new u,"/: division by zero"));var d=fc(this,b,c);this.fa=b/d;this.S=c/d}P.prototype=new O;r=P.prototype;r.className="Rational";function Sa(b){b=b.split("/");return new P(parseInt(b[0],10),parseInt(b[1],10))}function H(b){return new P(b,1)}r.toString=function(){return this.fa+(1===this.S?"":"/"+this.S)};r.na=function(){return 1===this.S};
r.G=function(){return this.fa/this.S};r.J=function(){if(0===this.fa)return 0;var b=this.fa/this.S;return 0>b?Math.ceil(b):Math.floor(b)};function fc(b,c,d){return 0===d?c:fc(b,d,c%d)}r.Vc=function(b){(!this.na()||!b.na())&&g(t(new u,"modulo: expects integer, got ("+this+" "+b+")"));var b=b.J(),c=this.fa%b;0>c&&(c+=b);return H(c)};function gc(b,c){return new P(b.fa*c.fa,b.S*c.S)}r.Tb=function(b){return new P(this.fa*b.S+b.fa*this.S,this.S*b.S)};r.tb=function(){return new P(-this.fa,this.S)};
r.ra=function(){return this.na()?this.J():this.G()};r.Ca=function(){return this.na()?this.J():this.G()};r.Ca=function(){return 37*this.fa+this.S+""};r.ta=function(b){return b instanceof P&&this.fa===b.fa&&this.S===b.S};function kb(b,c){try{return b instanceof P||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a Rational, got "+b))}}
r.round=function(){if(1===this.S)return this;if(2===this.S){var b=this.fa/this.S,b=0>b?Math.ceil(b):Math.floor(b);return H(b+(1===b%2?1:0))}return H(Math.round(this.fa/this.S))};r.oc=function(){return 1===this.S?this:H(Math.round(this.fa/this.S))};r.stringify=function(b){var c=this.fa.toString(b.J());if(this.na())return G(c);b=this.S.toString(b.J());return G(c+"/"+b)};r.sqrt=function(){var b=Math.sqrt(this.fa/this.S);return Math.floor(b)===b?H(b):Ta(b)};
r.multiply=function(b){if(b instanceof J)return cc(b);if(b instanceof I)return Ta(b.k*this.G());if(b instanceof P)return gc(this,b);g(t(new u,"*: expects a number, got "+b.type()+" "+b))};r.add=function(b){if(b instanceof J)return new J(b.Y+this.G(),b.Q);if(b instanceof I)return b.Tb(this);if(b instanceof P)return this.Tb(b);g(t(new u,"+: expects a number, got "+b.type()+" "+b))};var hc=H(0),jc=H(1),kc=H(10);function I(b){this.k=b}I.prototype=new O;r=I.prototype;r.className="Real";
function Ta(b){return new I(b)}r.toString=function(){return this.k===-1/0?"-inf.0":this.k===1/0?"+inf.0":this.k!==this.k?"+nan.0":""+this.k};r.ra=function(){this.na();return this.value()};r.type=function(){return Xb};r.value=o("k");r.na=function(){return Math.floor(this.k)===this.k};r.G=o("k");r.J=function(){return 0>this.k?Math.ceil(this.k):Math.floor(this.k)};r.tb=function(){return Ta(-this.k)};r.Ca=function(){return""+this.k};
r.ta=function(b){return b instanceof J?b.Ha(this):this===b||b instanceof I&&this.k===b.k};r.round=function(){var b=Math.round(this.k);return 0.5===Math.abs(this.k-b)&&1==b%2?b<this.k?H(b+1):H(b-1):H(b)};r.oc=function(){return H(Math.round(this.k))};r.Tb=function(b){return Ta(this.k+b.G())};r.sqrt=function(){return Ta(Math.sqrt(this.k))};r.multiply=function(b){if(b instanceof J)return cc(b);if(b instanceof O)return Ta(this.k*b.G());g(t(new u,"*: expects a number, got "+b.type()+" "+b))};
r.add=function(b){if(b instanceof J)return new J(b.Y+this.G(),b.Q);if(b instanceof P||b instanceof I)return this.Tb(b);g(t(new u,"+: expects a number, got "+b.type()+" "+b))};function lc(b,c){this.Hb=b;this.xb=c}lc.prototype=new Db;r=lc.prototype;r.className="Tagged";r.g=function(b,c){var d=Ea.value();d instanceof Fa||g(new TypeError);return d.value(this.Hb).g(b,A(new B,this.xb,c))};r.sa=p(0);r.type=o("Hb");function mc(b){return b instanceof lc&&"mac"===b.Hb.toString()?b.xb:l}r.toString=function(){return nc(this)};
function nc(b){if(!oc.bound())return"#<tagged "+b.Hb+" "+b.xb+">";var c=oc.value();c instanceof Fa||g(new TypeError);c=c.value(b.Hb);if(c instanceof z)return"#<tagged "+b.Hb+" "+b.xb+">";b=new pc;c.g(b,x([rep]));var d;qc(b,function(b,c){b&&g(b);d=c},j)||g(t(new u,"An asynchronous operation was attempted during a toString()."));return""+rc(d)}var oc=K("tagged-writers");function sc(b){this.Gc=b}sc.prototype=new Db;r=sc.prototype;r.className="JsObject";r.type=function(){return tc};r.ra=o("Gc");
r.toString=function(){return""+this.Gc};function uc(b){var c=[];vc(c,b);return c}function vc(b,c){b.push(rc(c.a()));if(!(c.b()instanceof z)){var d=c.b();d instanceof B||g(new TypeError);vc(b,d)}}function rc(b){return b.ra()}
function wc(b){if(b===l)return C;if(b instanceof y)return b;var c=Object.prototype.toString.call(b);if("[object Number]"===c)return b*=1,b===Math.floor(b)?H(b):Ta(b);if("[object String]"===c)b=G(""+b);else if("[object Array]"===c||"[object Arguments]"===c){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=wc(b[d]);b=x(c)}else b="[object Boolean]"===c?b?Za:C:new sc(b);return b}r.close=function(){g(t(new u,"close: unexpected object: "+this))};var tc=K("java-object");
function Fa(){this.ea=C;this.jc=(new Ca).t();this.rb=this.fc=l;this.kc=new xc;this.Uc=0}Fa.prototype=new Db;r=Fa.prototype;r.className="Hash";r.tc=function(b){if(this.ea===b)this.ea=C,this.kc=new xc};r.$b=function(b){this.ea=b;this.kc=new yc(this)};r.ac=o("ea");r.g=function(b,c){D(b,this.value(c.a()).Yc(c.b().a()))};r.toString=function(){return"#hash"+zc(this)};function zc(b){for(var c=[],d=b.fc;d!==l;d=d.next){var f=d.key,f=A(new B,f,A(new B,b.value(f),C));c.push(f)}return ob(c,Ua)}r.la=function(){return this.size()};
r.qc=function(b,c){if(b instanceof z){var d=this.value(c),f=this.jc.get(c.Ca());if(f)for(var h=0,k=f.length;h<k;h++){var q=f[h];if(c.ta(q.key)){f.splice(h,1);if(q.Vb)q.Vb.next=q.next;if(q.next)q.next.Vb=q.Vb;if(this.fc===q)this.fc=q.next;if(this.rb===q)this.rb=q.Vb;this.la--;break}}this.kc.Mc(d,c)}else{d=c.Ca();d=this.jc.get(d)||this.jc.put(d,[]);f=l;h=0;for(k=d.length;h<k;h++)if(q=d[h],c.ta(q.key)){f=q;break}f===l?(f=this.rb,this.rb={key:c,value:b,Vb:f,next:l},f===l?this.fc=this.rb:f.next=this.rb,
d.push(this.rb),this.Uc++):f.value=b;this.kc.name(b,c)}return b};r.value=function(b){var c=this.jc.get(b.Ca());if(!c)return C;for(var d=0,f=c.length;d<f;d++){var h=c[d];if(b.ta(h.key))return h.value}return C};r.sa=p(0);r.type=function(){return Ac};r.size=o("Uc");function Bc(){}Bc.prototype.name=i;Bc.prototype.Mc=i;function yc(b){this.ad=b}yc.prototype=new Bc;yc.prototype.name=function(b,c){b.$b(A(new B,c,this.ad))};yc.prototype.Mc=function(b,c){b.tc(A(new B,c,this.ad))};function xc(){}
xc.prototype=new Bc;xc.prototype.name=n();xc.prototype.Mc=n();var Ac=K("table");function pc(){this.Lc=Cc++;this.ca=Array(100);this.O=-1;this.qa=[];this.ka=Array(100);this.H=Array(100);this.i=-1;this.Va=this.Nb=this.s=l;this.qb=Dc;this.dc=m;this.Ga=0;this.Za=l;this.Pc=0;this.vb=l}pc.prototype=new y;r=pc.prototype;r.className="VM";
function qc(b,c,d){var f=b.Ga;b.Ga=b.i;var h=Ec(b,function(){b.Ga=f;if(b.Va===l)b.qb.end(b),c(l,Q(b));else{var d=b.Va;b.Va=l;var h=d.rd,s="\nAt instruction "+d.vb;if(h!==l)for(var E=0,M=h.length;E<M;E++)s+="\n"+h[E].Ta();c(t(new u,"Unhandled exception on thread#"+b.Lc+": "+d.xa.message+s,d.xa))}},d);if(d&&!h)b.Ga=f;return h}
function Ec(b,c,d){function f(){for(;h.Ga<=h.i;)try{if(h.H[h.i]instanceof z)h.i--;else{h.s=h.ka[h.i];h.Nb=h.qa[h.i];var b=h.H[h.i].a();b instanceof N||g(new TypeError);h.vb=b;var s=h.H[h.i].b();s instanceof B||g(new TypeError);h.H[h.i]=s;if(h.vb.Ea){var E=j,E=h.vb.Ma(h,function(b){b?Fc(h,b):h.qb.jb(h);E||f()},d);if(!E){k=m;return}}else h.vb.c(h),h.qb.jb(h)}}catch(M){Fc(h,M)}c()}b.qb.jb(b);var h=b,k=j;f();return k}
function Fc(b,c){for(var d=[],f=[],h=[];b.Ga<=b.i;){var k=Gc(b).a();if(k.gc&&k.xc(c))break;k=Gc(b).a();k.Ob&&(f.push(Gc(b)),h.push(b.ka[b.i]));if(k instanceof N)k=Gc(b).a().d,k!==l&&d.push(k);b.i--}b.Va=new Ba(c,b.vb,d);for(d=f.length-1;0<=d;d--)R(b,h[d],f[d])}r.error=o("Va");
r.show=function(){za("Thread Dump for thread#"+threadId);za(""+(this.O+1)+" args");for(var b=5<this.O?this.O-5:0;b<this.O+1;b++)za(""+b+". "+this.ca[b]);za();b=this.i+1;if(this.H[this.i]instanceof z)b=this.i;za(""+b+" instruction frames");for(var b=20<this.i?this.i-20:0,c=this.i;b<=c;c--)if(!(this.H[c]instanceof z)){var d=this.H[c],f=this.ka[c],h=this.qa[c];for(ya("\nInstruction Frame "+c+":");!(d instanceof z);){var k=d.a();k instanceof N||g(new TypeError);d=d.b();newInstructions instanceof B||g(new TypeError);
ya(k.fb(f));ya(" ")}ya("[");k=0;for(d=h.length;k<d;k++)ya(""+h[k]+" ");ya("]");ka.ab("\n")}};function F(b,c){b.Ga<=b.i&&Gc(b)instanceof z||(b.i++,0<=b.i&&b.i<b.H.length||(Hc(b,2*b.H.length),Ic(b,2*b.ka.length),Jc(b,2*b.qa.length)));b.H[b.i]=A(new B,c,C)}function R(b,c,d){b.Ga<=b.i&&Gc(b)instanceof z||(b.i++,0<=b.i&&b.i<b.H.length||(Hc(b,2*b.H.length),Ic(b,2*b.ka.length),Jc(b,2*b.qa.length)));b.H[b.i]=d;b.ka[b.i]=c}
function S(b,c,d,f){b.Ga<=b.i&&Gc(b)instanceof z||(b.i++,0<=b.i&&b.i<b.H.length||(Hc(b,2*b.H.length),Ic(b,2*b.ka.length),Jc(b,2*b.qa.length)));b.H[b.i]=d;b.ka[b.i]=c;b.qa[b.i]=f}function Kc(b,c){b.Ga<=b.i&&Gc(b)instanceof z?b.H[b.i]=c:(b.i++,0<=b.i&&b.i<b.H.length||(Hc(b,2*b.H.length),Ic(b,2*b.ka.length),Jc(b,2*b.qa.length)),b.H[b.i]=c,b.ka[b.i]=b.s,b.qa[b.i]=b.Nb)}function Gc(b){return b.H[b.i]}
function D(b,c){b.O++;if(!(0<=b.O&&b.O<b.ca.length)){var d=Array(~~(2*b.ca.length));Lc(b.ca,d);b.ca=d}b.ca[b.O]=c}function Mc(b){return b.ca[b.O]}function Q(b){return b.ca[b.O--]}function Nc(b,c){for(var d=Ua,f=0;f<c;f++)d=A(new B,b.ca[b.O-f],d);b.O-=c;return d}function Oc(b,c){b.qb=c;c.Db(b)}r.type=function(){return Pc};r.copy=function(){var b=new pc;this.copyTo(b);return b};
r.copyTo=function(b){b.O=this.O;b.i=this.i;b.H.length<this.H.length?(b.H=this.H.slice(),b.ka=this.ka.slice(),b.qa=this.qa.slice()):(Lc(this.H,b.H),Lc(this.ka,b.ka),Lc(this.qa,b.qa));b.ca.length!==this.ca.length?b.ca=this.ca.slice():Lc(this.ca,b.ca);b.s=this.s;b.Va=this.Va;b.qb=this.qb;b.dc=this.dc;b.Ga=this.Ga};r.toString=function(){return"[thread#"+this.Lc+": instruction stack "+this.i+"; arg stack "+this.O+"]"};function Ic(b,c){var d=Array(~~c);Lc(b.ka,d);b.ka=d}
function Hc(b,c){var d=Array(~~c);Lc(b.H,d);b.H=d}function Jc(b,c){var d=Array(~~c);Lc(b.qa,d);b.qa=d}function Lc(b,c){for(var d=0,f=b.length;d<f;d++)c[d]=b[d]}function Qc(b){if(!(b.Ga<=b.i))return l;return b.H[b.i]instanceof z?(b.i--,Qc(b)):b.H[b.i].a()}var Pc=K("thread"),Cc=0;function Rc(){this.Oa=[];this.Tc=C}Rc.prototype=new y;r=Rc.prototype;r.className="ListBuilder";r.append=function(b){this.Oa.push(b)};r.Sc=ca("Tc");r.list=function(){return ob(this.Oa,this.Tc)};r.type=function(){return K("list-builder")};
r.toString=function(){return"ListBuilder:"+this.list().toString()};function Sc(){this.d=l}Sc.prototype=new N;Sc.prototype.className="Append";Sc.prototype.c=function(b){var c=Q(b),b=Mc(b);b instanceof Rc||g(new TypeError);b.append(c)};Sc.prototype.toString=p("(append)");function Tc(){this.d=l}Tc.prototype=new N;Tc.prototype.className="AppendAll";Tc.prototype.c=function(b){var c=Q(b),b=Mc(b);b instanceof Rc||g(new TypeError);c instanceof B||g(new TypeError);c.copyTo(b.Oa)};Tc.prototype.toString=p("(append-all)");
function Uc(){this.d=l}Uc.prototype=new N;Uc.prototype.className="AppendDot";Uc.prototype.c=function(b){var c=Q(b),b=Mc(b);b instanceof Rc||g(new TypeError);b.Sc(c)};Uc.prototype.toString=p("(append-dot)");function Vc(b,c){this.d=l;this.Xc=b;this.Jb=c}Vc.prototype=new N;r=Vc.prototype;r.gc=j;r.className="Catch";r.xc=p(j);r.c=function(b){var c=b.error();if(c!==l)b.Va=l,b.O=this.Jb,this.Xc.g(b,x([c]))};r.toString=function(){return"(catch "+this.Xc+")"};function Wc(b){this.d=l;this.Rc=b}
Wc.prototype=new N;Wc.prototype.className="Close_Instruction";Wc.prototype.c=function(b){D(b,new Xc(this.Rc,b.s))};Wc.prototype.toString=function(){return"(close "+this.Rc+")"};function Yc(b){this.d=l;this.Nc=b}Yc.prototype=new N;Yc.prototype.Ob=j;Yc.prototype.className="FinallyInvoke";Yc.prototype.c=function(b){this.Nc.g(b,C)};Yc.prototype.toString=function(){return"(finally:"+this.Nc+")"};function Zc(){this.d=l}Zc.prototype=new N;Zc.prototype.className="FinishList";
Zc.prototype.c=function(b){var c=Q(b);c instanceof Rc||g(new TypeError);D(b,c.list())};Zc.prototype.toString=p("(finish-list)");function Ya(b){this.d=l;this.$a=b}Ya.prototype=new N;Ya.prototype.className="FreeSym";Ya.prototype.c=function(b){D(b,this.$a.value())};Ya.prototype.toString=function(){return"(free-sym "+this.$a+")"};Ya.prototype.fb=function(){return"(free-sym "+this.$a+" -> "+(sym.bound()?""+sym.value():"#unbound#")+")"};function $c(b){this.d=l;this.$a=b}$c.prototype=new N;
$c.prototype.className="LexSym";$c.prototype.c=function(b){D(b,this.$a.w(b.s))};$c.prototype.toString=function(){return"(lex-sym "+this.$a+")"};$c.prototype.fb=function(b){return"(lex-sym "+this.$a+" -> "+this.$a.w(b)+")"};function ad(b){this.d=l;this.$c=b}ad.prototype=new N;ad.prototype.className="Listify";ad.prototype.c=function(b){D(b,Nc(b,this.$c))};ad.prototype.toString=function(){return"(listify "+this.$c+")"};function La(b){this.d=l;this.Oc=b}La.prototype=new N;La.prototype.className="Literal";
La.prototype.c=function(b){D(b,this.Oc)};La.prototype.toString=function(){return"(literal "+this.Oc+")"};function bd(){this.d=l}bd.prototype=new N;bd.prototype.className="NewList";bd.prototype.c=function(b){D(b,new Rc)};bd.prototype.toString=p("(new-list)");function cd(b){this.d=l;this.ea=b}cd.prototype=new N;cd.prototype.className="PopArg";cd.prototype.c=function(b){Q(b)};cd.prototype.toString=function(){return"(pop-arg:"+this.ea+")"};function dd(b,c){this.d=l;this.td=b;this.k=c}dd.prototype=new N;
dd.prototype.Ob=j;dd.prototype.className="SetThreadLocal";dd.prototype.c=function(){this.td.value=this.k};function ed(b,c){this.d=l;this.$a=b;this.kb=c}ed.prototype=new N;ed.prototype.className="StackSym";ed.prototype.c=function(b){var c=this.kb;b.O++;if(!(0<=b.O&&b.O<b.ca.length)){var d=Array(~~(2*b.ca.length));Lc(b.ca,d);b.ca=d}b.ca[b.O]=b.Nb[c]};ed.prototype.toString=function(){return"(stack-bound symbol:"+this.$a+")"};function fd(b){this.d=l;this.Qc=b}fd.prototype=new N;
fd.prototype.className="TableMapper";fd.prototype.c=function(b){var c=Q(b);c instanceof B||g(new TypeError);if(!(c instanceof z)){D(b,c.b());F(b,this);c=c.a();c instanceof B||g(new TypeError);var d=new cd("map-table-iterator");d.m(this);F(b,d);this.Qc.g(b,c)}};fd.prototype.toString=function(){return"(table-mapper "+this.Qc+")"};function gd(b){this.d=l;this.name=b}gd.prototype=new N;gd.prototype.className="Assign_Lex";function hd(b,c){gd.call(this,b);this.value=c}hd.prototype=new gd;
hd.prototype.className="Assign_Lex_Free";hd.prototype.c=function(b){var c=this.value.value();id(this.name,b.s,c);D(b,c)};hd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function jd(b,c){hd.call(this,b,c)}jd.prototype=new hd;jd.prototype.className="Assign_Lex_Free.Intermediate";jd.prototype.c=function(b){id(this.name,b.s,this.value.value())};function kd(b,c){gd.call(this,b);this.value=c}kd.prototype=new gd;kd.prototype.className="Assign_Lex_Lex";
kd.prototype.c=function(b){var c=this.value.w(b.s);id(this.name,b.s,c);D(b,c)};kd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};kd.prototype.fb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.w(b)+this.value+"--\>"+this.value.w(b)+")"};function ld(b,c){kd.call(this,b,c)}ld.prototype=new kd;ld.prototype.className="Assign_Lex_Lex.Intermediate";ld.prototype.c=function(b){id(this.name,b.s,this.value.w(b.s))};function md(b,c){gd.call(this,b);this.eb=c}
md.prototype=new gd;md.prototype.className="Assign_Lex_Literal";md.prototype.c=function(b){id(this.name,b.s,this.eb);D(b,this.eb)};md.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.eb+")"};function nd(b,c){md.call(this,b,c)}nd.prototype=new md;nd.prototype.className="Assign_Lex_Literal.Intermediate";nd.prototype.c=function(b){id(this.name,b.s,this.eb)};function od(b){gd.call(this,b)}od.prototype=new gd;od.prototype.className="Assign_Lex_Other";
od.prototype.c=function(b){id(this.name,b.s,Mc(b))};od.prototype.toString=function(){return"(assign-lex "+this.name+")"};od.prototype.fb=function(b){return"(assign-lex "+this.name+" -> "+this.name.w(b)+")"};function pd(b){gd.call(this,b)}pd.prototype=new od;pd.prototype.className="Assign_Lex_Other.Intermediate";pd.prototype.c=function(b){id(this.name,b.s,Q(b))};function qd(b,c){gd.call(this,b);this.value=c}qd.prototype=new gd;qd.prototype.className="Assign_Lex_Stack";
qd.prototype.c=function(b){var c=this.value.get(b);id(this.name,b.s,c);D(b,c)};qd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};qd.prototype.fb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.w(b)+" <-- "+this.value+")"};function rd(b,c){qd.call(this,b,c)}rd.prototype=new qd;rd.prototype.className="Assign_Lex_Stack.Intermediate";rd.prototype.c=function(b){id(this.name,b.s,this.value.get(b))};function sd(b){this.d=l;this.name=b}sd.prototype=new N;
sd.prototype.className="Assign_Free";function td(b,c){sd.call(this,b);this.value=c}td.prototype=new sd;td.prototype.className="Assign_Free_Free";td.prototype.c=function(b){var c=this.value.value();this.name.ha(c);D(b,c)};td.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function ud(b,c){td.call(this,b,c)}ud.prototype=new td;ud.prototype.className="Assign_Free_Free.Intermediate";ud.prototype.c=function(){this.name.ha(this.value.value())};
function vd(b,c){sd.call(this,b);this.value=c}vd.prototype=new sd;vd.prototype.className="Assign_Free_Lex";vd.prototype.c=function(b){var c=this.value.w(b.s);this.name.ha(c);D(b,c)};vd.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function wd(b,c){vd.call(this,b,c)}wd.prototype=new vd;wd.prototype.className="Assign_Free_Lex.Intermediate";wd.prototype.c=function(b){this.name.ha(this.value.w(b.s))};function xd(b,c){sd.call(this,b);this.eb=c}xd.prototype=new sd;
xd.prototype.className="Assign_Free_Literal";xd.prototype.c=function(b){this.name.ha(this.eb);D(b,this.eb)};xd.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.eb+")"};function yd(b,c){xd.call(this,b,c)}yd.prototype=new xd;yd.prototype.className="Assign_Free_Literal.Intermediate";yd.prototype.c=function(){this.name.ha(this.eb)};function zd(b){sd.call(this,b)}zd.prototype=new sd;zd.prototype.className="Assign_Free_Other";zd.prototype.c=function(b){this.name.ha(Mc(b))};
zd.prototype.toString=function(){return"(assign-free-other "+this.name+")"};zd.prototype.fb=function(){return"(assign-free-other "+this.name+" -> "+(name.bound()?""+name.value():"#unbound#")+")"};function Ad(b){sd.call(this,b)}Ad.prototype=new zd;Ad.prototype.className="Assign_Free_Other.Intermediate";Ad.prototype.c=function(b){this.name.ha(Q(b))};function Bd(b,c){sd.call(this,b);this.value=c}Bd.prototype=new sd;Bd.prototype.className="Assign_Free_Stack";
Bd.prototype.c=function(b){var c=this.value.get(b);this.name.ha(c);D(b,c)};Bd.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function Cd(b,c){Bd.call(this,b,c)}Cd.prototype=new Bd;Cd.prototype.className="Assign_Free_Stack.Intermediate";Cd.prototype.c=function(b){this.name.ha(this.value.get(b))};function Dd(b){this.d=l;this.name=b}Dd.prototype=new N;Dd.prototype.className="Assign_Stack";function Ed(b,c){Dd.call(this,b);this.value=c}Ed.prototype=new Dd;
Ed.prototype.className="Assign_Stack_Free";Ed.prototype.c=function(b){var c=this.value.value();this.name.set(b,c);D(b,c)};Ed.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Fd(b,c){Ed.call(this,b,c)}Fd.prototype=new Ed;Fd.prototype.className="Assign_Stack_Free.Intermediate";Fd.prototype.c=function(b){this.name.set(b,this.value.value())};function Gd(b,c){Dd.call(this,b);this.value=c}Gd.prototype=new Dd;Gd.prototype.className="Assign_Stack_Lex";
Gd.prototype.c=function(b){var c=this.value.w(b.s);this.name.set(b,c);D(b,c)};Gd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Hd(b,c){Gd.call(this,b,c)}Hd.prototype=new Gd;Hd.prototype.className="Assign_Stack_Lex.Intermediate";Hd.prototype.c=function(b){this.name.set(b,this.value.w(b.s))};function Id(b,c){Dd.call(this,b);this.value=c}Id.prototype=new Dd;Id.prototype.className="Assign_Stack_Literal";
Id.prototype.c=function(b){this.name.set(b,this.value);D(b,this.value)};Id.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Jd(b,c){Id.call(this,b,c)}Jd.prototype=new Id;Jd.prototype.className="Assign_Stack_Literal.Intermediate";Jd.prototype.c=function(b){this.name.set(b,this.value)};function Kd(b){Dd.call(this,b)}Kd.prototype=new Dd;Kd.prototype.className="Assign_Stack_Other";Kd.prototype.c=function(b){this.name.set(b,Mc(b))};
Kd.prototype.toString=function(){return"(assign-stack "+this.name+")"};function Ld(b){Dd.call(this,b)}Ld.prototype=new Kd;Ld.prototype.className="Assign_Stack_Other.Intermediate";Ld.prototype.c=function(b){this.name.set(b,Q(b))};function Md(b,c){Dd.call(this,b);this.value=c}Md.prototype=new Dd;Md.prototype.className="Assign_Stack_Stack";Md.prototype.c=function(b){var c=this.value.get(b);this.name.set(b,c);D(b,c)};Md.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};
function Nd(b,c){Md.call(this,b,c)}Nd.prototype=new Md;Nd.prototype.className="Assign_Stack_Stack.Intermediate";Nd.prototype.c=function(b){this.name.set(b,this.value.get(b))};function Od(b,c){this.d=l;this.I=b;this.Ua=Pd(b);this.C=c;this.oa=Pd(c)}Od.prototype=new N;Od.prototype.className="Cond";function Pd(b){var c=[];b.h(c);return x(c)}Od.prototype.c=function(b){Kc(b,Q(b)instanceof z?this.oa:this.Ua)};Od.prototype.l=function(b){N.prototype.l.call(this,b);this.Ua.l(b);this.oa.l(b)};
Od.prototype.toString=function(){return"(cond then:"+this.I+", else:"+this.C+")"};function Qd(b,c,d){this.d=l;this.da=b;this.I=c;this.C=d}var Rd={};v["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=Rd;Qd.prototype=new N;Qd.prototype.className="If_bound_bound_literal";Qd.prototype.c=function(b){this.da.w(b.s)instanceof z?D(b,this.C):D(b,this.I.w(b.s))};
Rd.h=function(b,c,d,f){c instanceof T||g(new TypeError);d instanceof T||g(new TypeError);f instanceof Sd||g(new TypeError);Td(c,d)?f.n instanceof z?c.h(b):b.push(new Ud(c,f.n)):b.push(new Qd(c,d,f.n))};Qd.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};function Ud(b,c){this.d=l;this.Ib=b;this.C=c}Ud.prototype=new N;Ud.prototype.className="If_bound_bound_literal.Or";Ud.prototype.c=function(b){var c=this.Ib.w(b.s);c instanceof z?D(b,this.C):D(b,c)};
Ud.prototype.toString=function(){return"(if[bbl$or] "+a+" "+a+" "+elseExpr+")"};function Vd(b,c,d){this.d=l;this.da=b;this.I=c;this.oa=Pd(d);this.C=d}var Wd={};v["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=Wd;Vd.prototype=new N;Vd.prototype.className="If_bound_bound_other";Vd.prototype.c=function(b){this.da.w(b.s)instanceof z?Kc(b,this.oa):D(b,this.I.w(b.s))};
Wd.h=function(b,c,d,f){c instanceof T||g(new TypeError);d instanceof T||g(new TypeError);Td(c,d)?b.push(new Xd(c,f)):b.push(new Vd(c,d,f))};Vd.prototype.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};Vd.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};function Xd(b,c){this.d=l;this.Ib=b;this.oa=Pd(c);this.C=c}Xd.prototype=new N;Xd.prototype.className="If_bound_bound_other.Or";Xd.prototype.c=function(b){var c=this.Ib.w(b.s);c instanceof z?Kc(b,this.oa):D(b,c)};
Xd.prototype.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};Xd.prototype.toString=function(){return"(if "+a+" "+a+" "+elseExpr+")"};function Yd(b,c,d){this.d=l;this.da=b;this.I=c;this.C=d}var Zd={};v["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=Zd;Yd.prototype=new N;Yd.prototype.className="If_bound_literal_literal";Yd.prototype.c=function(b){this.da.w(b.s)instanceof z?D(b,this.C):D(b,this.I)};
Yd.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};Zd.h=function(b,c,d,f){f instanceof Sd||g(new TypeError);c instanceof T||g(new TypeError);b.push(new Yd(c,d,f.n))};function $d(b,c,d){this.d=l;this.da=b;this.I=c;this.Ua=Pd(c);this.C=d}var ae={};v["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=ae;$d.prototype=new N;$d.prototype.className="If_bound_other_literal";$d.prototype.c=function(b){this.da.w(b.s)instanceof z?D(b,this.C):Kc(b,this.Ua)};
$d.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};$d.prototype.l=function(b){N.prototype.l.call(this,b);this.Ua.l(b)};ae.h=function(b,c,d,f){c instanceof T||g(new TypeError);f instanceof Sd||g(new TypeError);b.push(new $d(c,d,f.n))};function be(b,c,d){this.d=l;this.da=b;this.I=c;this.Ua=Pd(c);this.C=d;this.oa=Pd(d)}var ce={};v["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=ce;be.prototype=new N;be.prototype.className="If_bound_other_other";
be.prototype.c=function(b){this.da.w(b.s)instanceof z?Kc(b,this.oa):Kc(b,this.Ua)};be.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};be.prototype.l=function(b){N.prototype.l.call(this,b);this.Ua.l(b)};ce.h=function(b,c,d,f){c instanceof T||g(new TypeError);b.push(new be(c,d,f))};function de(b,c){this.d=l;this.oa=Pd(c);this.I=b;this.C=c}var ee={};v["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=ee;de.prototype=new N;de.prototype.className="If_other_bound_other";
de.prototype.c=function(b){Q(b)instanceof z?Kc(b,this.oa):D(b,this.I.w(b.s))};de.prototype.toString=function(){return"(if ? "+this.I+" "+this.C+")"};de.prototype.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};ee.h=function(b,c,d,f){c.h(b);d instanceof T||g(new TypeError);b.push(new de(d,f))};function fe(b,c){this.d=l;this.Ua=Pd(b);this.I=b;this.C=c}var ge={};v["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=ge;fe.prototype=new N;fe.prototype.className="If_other_other_literal";
fe.prototype.c=function(b){Q(b)instanceof z?D(b,this.C):Kc(b,this.Ua)};fe.prototype.toString=function(){return"(if ? "+this.I+" "+this.C+")"};fe.prototype.l=function(b){N.prototype.l.call(this,b);this.Ua.l(b)};ge.h=function(b,c,d,f){f instanceof Sd||g(new TypeError);c.h(b);b.push(new fe(d,f.n))};function he(b,c){this.d=l;this.I=b;this.C=c}var ie={};v["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=ie;he.prototype=new N;he.prototype.className="If_other_stack_literal";
he.prototype.c=function(b){Q(b)instanceof z?D(b,this.C):D(b,this.I.get(b))};he.prototype.toString=function(){return"(if ? "+this.I+" "+this.C+")"};ie.h=function(b,c,d,f){f instanceof Sd||g(new TypeError);c.h(b);d instanceof U||g(new TypeError);b.push(new he(d,f.n))};function je(b,c){this.d=l;this.I=b;this.oa=Pd(c);this.C=c}var ke={};v["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=ke;je.prototype=new N;je.prototype.className="If_other_stack_other";
je.prototype.c=function(b){Q(b)instanceof z?Kc(b,this.oa):D(b,this.I.get(b))};je.prototype.toString=function(){return"(if ? "+this.I+" "+this.C+")"};je.prototype.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};ke.h=function(b,c,d,f){c.h(b);d instanceof U||g(new TypeError);b.push(new je(d,f))};function le(b,c,d){this.da=b;this.I=c;this.C=d}var me={};v["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=me;le.prototype=new N;le.prototype.className="If_stack_literal_free";
le.prototype.c=function(b){this.da.get(b)instanceof z?D(b,this.C.value()):D(b,this.I)};le.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};me.h=function(b,c,d,f){c instanceof U||g(new TypeError);f instanceof Sd||g(new TypeError);f=f.n;f instanceof L||g(new TypeError);b.push(new le(c,d,f))};function ne(b,c,d){this.d=l;this.da=b;this.I=c;this.C=d}var oe={};v["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=oe;ne.prototype=new N;ne.prototype.className="If_stack_stack_literal";
ne.prototype.c=function(b){this.da.get(b)instanceof z?D(b,this.C):D(b,this.I.get(b))};ne.prototype.toString=function(){return"(if "+this.da+" "+this.I+" "+this.C+")"};oe.h=function(b,c,d,f){c instanceof U||g(new TypeError);d instanceof U||g(new TypeError);f instanceof Sd||g(new TypeError);pe(c,d)?f.n instanceof z?c.h(b):b.push(new qe(c,f.n)):b.push(new ne(c,d,f.n))};function qe(b,c){this.d=l;this.Ib=b;this.C=c}qe.prototype=new N;qe.prototype.className="If_stack_stack_literal.Or";
qe.prototype.c=function(b){var c=this.Ib.get(b);c instanceof z?D(b,this.C):D(b,c)};qe.prototype.toString=function(){return"(if[ssl$or] "+a+" "+a+" "+elseExpr+")"};function re(b){this.d=l;this.r=b}re.prototype=new N;r=re.prototype;r.pa=j;r.className="Invoke_0.Lex";r.c=function(b){this.r.w(b.s).g(b,C)};r.toString=function(){return"(invoke "+this.r+")"};r.ua=function(b){return this.r.w(b.s)};function se(b){this.d=l;this.r=b}se.prototype=new N;r=se.prototype;r.pa=j;r.className="Invoke_0.Free";
r.c=function(b){this.r.value().g(b,C)};r.toString=function(){return"(invoke "+this.r+")"};r.ua=function(){return this.r.value()};function te(){this.d=l}te.prototype=new N;r=te.prototype;r.pa=j;r.className="Invoke_0.Other";r.c=function(b){Q(b).g(b,C)};r.toString=p("(invoke <0>)");r.ua=function(b){return Mc(b)};function ue(b){this.d=l;this.r=b}ue.prototype=new N;r=ue.prototype;r.pa=j;r.className="Invoke_1.Lex";r.c=function(b){this.r.w(b.s).g(b,A(new B,Q(b),C))};
r.toString=function(){return"(invoke "+this.r+" <1>)"};r.ua=function(b){return this.r.w(b.s)};function ve(b){this.d=l;this.r=b}ve.prototype=new N;r=ve.prototype;r.pa=j;r.className="Invoke_1.Free";r.c=function(b){this.r.value().g(b,A(new B,Q(b),C))};r.toString=function(){return"(invoke "+this.r+" <1>)"};r.ua=function(){return this.r.value()};function ye(){this.d=l}ye.prototype=new N;r=ye.prototype;r.pa=j;r.className="Invoke_1.Other";r.c=function(b){Q(b).g(b,A(new B,Q(b),C))};r.toString=p("(invoke <1>)");
r.ua=function(b){return Mc(b)};function ze(b){this.d=l;this.r=b}ze.prototype=new N;r=ze.prototype;r.pa=j;r.className="Invoke_2.Lex";r.c=function(b){var c=Q(b),d=Q(b);this.r.w(b.s).g(b,A(new B,d,A(new B,c,C)))};r.toString=function(){return"(invoke "+this.r+" <2>)"};r.fb=function(b){return"(invoke "+this.r+" -> "+this.r.w(b)+" <2>)"};r.ua=function(b){return this.r.w(b.s)};function Ae(b){this.d=l;this.r=b}Ae.prototype=new N;r=Ae.prototype;r.pa=j;r.className="Invoke_2.Free";
r.c=function(b){var c=Q(b),d=Q(b);this.r.value().g(b,A(new B,d,A(new B,c,C)))};r.toString=function(){return"(invoke_2:free "+this.r+" <2>)"};r.fb=function(){return"(invoke_2:free "+this.r+" -> "+this.r.value()+" <2>)"};r.ua=function(){return this.r.value()};function Be(){this.d=l}Be.prototype=new N;r=Be.prototype;r.pa=j;r.className="Invoke_2.Other";r.c=function(b){var c=Q(b),d=Q(b),f=Q(b);try{c.g(b,A(new B,f,A(new B,d,C)))}catch(h){h instanceof Error||g(h),Aa(h)}};r.toString=p("(invoke <2>)");
r.ua=function(b){return Mc(b)};function Ce(b){this.d=l;this.r=b}Ce.prototype=new N;r=Ce.prototype;r.pa=j;r.className="Invoke_3.Lex";r.c=function(b){var c=Q(b),d=Q(b),f=Q(b);this.r.w(b.s).g(b,A(new B,f,A(new B,d,A(new B,c,C))))};r.toString=function(){return"(invoke "+this.r+" <3>)"};r.ua=function(b){return this.r.w(b.s)};function De(b){this.d=l;this.r=b}De.prototype=new N;r=De.prototype;r.pa=j;r.className="Invoke_3.Free";
r.c=function(b){var c=Q(b),d=Q(b),f=Q(b);this.r.value().g(b,A(new B,f,A(new B,d,A(new B,c,C))))};r.toString=function(){return"(invoke_3:free "+this.r+" <3>)"};r.ua=function(){return this.r.value()};function Ee(){this.d=l}Ee.prototype=new N;r=Ee.prototype;r.pa=j;r.className="Invoke_3.Other";r.c=function(b){var c=Q(b),d=Q(b),f=Q(b),h=Q(b);c.g(b,A(new B,h,A(new B,f,A(new B,d,C))))};r.toString=p("(invoke <3>)");r.ua=function(b){return Mc(b)};function Fe(b,c){this.d=l;this.r=b;this.gb=c}Fe.prototype=new N;
r=Fe.prototype;r.pa=j;r.className="Invoke_N.Lex";r.c=function(b){this.r.w(b.s).g(b,Nc(b,this.gb))};r.toString=function(){return"(invoke "+this.r+" <"+this.gb+">)"};r.ua=function(b){return this.r.w(b.s)};function Ge(b,c){this.d=l;this.r=b;this.gb=c}Ge.prototype=new N;r=Ge.prototype;r.pa=j;r.className="Invoke_N.Free";r.c=function(b){this.r.value().g(b,Nc(b,this.gb))};r.toString=function(){return"(invoke "+this.r+" <"+this.gb+">)"};r.ua=function(){return this.r.value()};
function Ka(b){this.d=l;this.gb=b}Ka.prototype=new N;r=Ka.prototype;r.pa=j;r.className="Invoke_N.Other";r.c=function(b){Q(b).g(b,Nc(b,this.gb))};r.toString=function(){return"(invoke <"+this.gb+">)"};r.ua=function(b){return Mc(b)};function U(b,c){this.name=b;this.kb=c}U.prototype=new y;r=U.prototype;r.className="StackSymbol";r.get=function(b){return b.Nb[this.kb]};r.set=function(b,c){b.qa[b.i][this.kb]=c};r.h=function(b){b.push(new ed(this.name,this.kb))};r.type=function(){return K("stack-symbol")};
r.toString=function(){return this.name.toString()};function pe(b,c){return b.name===c.name&&b.kb===c.kb}r.T=function(b,c,d){return pe(this,b)?c:d<this.kb?new U(this.name,this.index-1):this};function T(b,c,d){this.Qa=c;this.index=d;this.name=b}T.prototype=new y;r=T.prototype;r.className="BoundSymbol";function id(b,c,d){c.Fb(b.Qa).set(b.index,d)}r.w=function(b){for(var c=this.Qa;0<c;)b=b.parent,c--;return b.ib[this.index]};r.h=function(b){b.push(new $c(this))};r.type=function(){return He};
r.toString=function(){return this.name.toString()};function Td(b,c){return b.Qa===c.Qa&&b.name===c.name&&b.index===c.index}r.N=function(b){return b<=this.Qa?new T(this.name,this.Qa+1,this.index):this};function Ie(b){return new T(b.name,b.Qa-1,b.index)}r.U=function(b,c,d,f,h){if(Td(this,b))return c;return d?(0===this.Qa&&g(t(new u,"can't unnest "+this+", looking for "+b+" to inline with "+c)),Ie(this)):f===this.Qa&&h<this.index?new T(this.name,this.Qa,this.index-1):this};r.l=function(b){b.wc(this)};
r.Z=function(b){b=b[this.name.name()];if(b===i)return Ie(this);if(b===this.index)return new U(this.name,b);g(t(new u,"error: parameter index mismatch: expected "+b+", got "+this.index))};var He=K("bound-symbol");function Je(b){this.D=this.name=l;this.Ra=b}Je.prototype=new y;r=Je.prototype;r.className="SingleAssignment";r.Na=function(b){this.name===l?b instanceof L||b instanceof T?this.name=b:g(t(new u,"assign: can't assign to "+b)):this.D===l?this.D=b:this.Ra.Na(b)};
r.toString=function(){return""+this.name+" "+this.D};r.h=function(b){Ke(this,b,m);this.Ra.h(b)};
function Ke(b,c,d){if(b.name instanceof T){var f=b.name,b=b.D;b instanceof T?d?c.push(new kd(f,b)):c.push(new ld(f,b)):b instanceof U?d?c.push(new qd(f,b)):c.push(new rd(f,b)):b instanceof L?d?c.push(new hd(f,b)):c.push(new jd(f,b)):b.Ia()?d?c.push(new md(f,b)):c.push(new nd(f,b)):b instanceof Le?(b=b.Gb,d?c.push(new md(f,b)):c.push(new nd(f,b))):(b.h(c),d?c.push(new od(f)):c.push(new pd(f)))}else b.name instanceof U?(f=b.name,b=b.D,b instanceof T?d?c.push(new Gd(f,b)):c.push(new Hd(f,b)):b instanceof
U?d?c.push(new Md(f,b)):c.push(new Nd(f,b)):b instanceof L?d?c.push(new Ed(f,b)):c.push(new Fd(f,b)):b.Ia()?d?c.push(new Id(f,b)):c.push(new Jd(f,b)):b instanceof Le?(b=b.Gb,d?c.push(new Id(f,b)):c.push(new Jd(f,b))):(b.h(c),d?c.push(new Kd(f)):c.push(new Ld(f)))):b.name instanceof L?(f=b.name,b=b.D,b instanceof T?d?c.push(new vd(f,b)):c.push(new wd(f,b)):b instanceof U?d?c.push(new Bd(f,b)):c.push(new Cd(f,b)):b instanceof L?d?c.push(new td(f,b)):c.push(new ud(f,b)):b.Ia()?d?c.push(new xd(f,b)):
c.push(new yd(f,b)):b instanceof Le?(b=b.Gb,d?c.push(new xd(f,b)):c.push(new yd(f,b))):(b.h(c),d?c.push(new zd(f)):c.push(new Ad(f)))):g(t(new u,"what kind of symbol is "+b.name+"??"))}r.type=function(){return K("assignment")};r.ia=p(j);r.X=function(){return this.D instanceof V?Me(this.D)||this.Ra.X():this.D.X()||this.Ra.X()};
r.U=function(b,c,d,f,h){var k=new Je(l);this.name instanceof T&&Td(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));k.name=this.name;k.D=this.D.U(b,c,d,f,h);k.Ra=this.Fd(b,c,d,f,h);return k};r.T=function(b,c,d){var f=new Je(l);this.name instanceof U&&pe(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name;f.D=this.D.T(b,c,d);f.Ra=this.Ed(b,c,d);return f};r.N=function(b){var c=new Je(l);c.name=this.name.N(b);c.D=this.D.N(b);c.Ra=this.Ra.N(b);return c};
r.Z=function(b){var c=new Je(l);c.name=this.name.Z(b);c.D=this.D.Z(b);b=this.Ra.Z(b);b instanceof Je||g(new TypeError);c.Ra=b;return c};r.l=function(b){b.za(this);this.name.l(b);this.D.l(b);this.Ra.l(b);b.Ka(this)};function Ne(){Je.call(this,l)}Ne.prototype=new Je(l);r=Ne.prototype;r.className="LastAssignment";r.Na=function(b){this.name===l?b instanceof L||b instanceof T?this.name=b:g(t(new u,"assign: can't assign to "+b)):this.D===l?this.D=b:g(t(new u,"assign: error: unexpected "+b))};
r.toString=function(){return""+this.name+" "+this.D};r.h=function(b){Ke(this,b,j)};r.X=function(){return this.D instanceof V?Me(this.D):this.D.X()};r.U=function(b,c,d,f,h){var k=new Ne;this.name instanceof T&&Td(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));k.name=this.name.U(b,c,d,f,h);k.D=this.D.U(b,c,d,f,h);return k};
r.T=function(b,c,d){var f=new Ne;this.name instanceof U&&pe(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name.T(b,c,d);f.D=this.D.T(b,c,d);return f};r.N=function(b){var c=new Ne;c.name=this.name.N(b);c.D=this.D.N(b);return c};r.Z=function(b){var c=new Ne;c.name=this.name.Z(b);c.D=this.D.Z(b);return c};r.l=function(b){b.za(this);this.name.l(b);this.D.l(b);b.Ka(this)};function Oe(){this.aa=l}Oe.prototype=new y;r=Oe.prototype;r.className="Assignment";r.type=function(){return K("assignment")};
r.Na=function(b){this.aa.Na(b)};r.h=function(b){this.aa.h(b)};r.toString=function(){return"(assign "+this.aa+")"};r.ia=function(b){return this.aa.ia(b)};r.X=function(){return this.aa.X()};r.U=function(b,c,d,f,h){var k=new Oe;k.aa=this.aa.U(b,c,d,f,h);return k};r.T=function(b,c,d){var f=new Oe;f.aa=this.aa.T(b,c,d);return f};r.N=function(b){var c=new Oe;c.aa=this.aa.N(b);return c};r.l=function(b){b.za(this);this.aa.l(b);b.Ka(this)};
r.Z=function(b){var c=new Oe,b=this.aa.Z(b);b instanceof Je||g(new TypeError);c.aa=b;return c};function Sd(){this.n=l}Sd.prototype=new y;r=Sd.prototype;r.La=j;r.className="Else";r.type=function(){return K("else-clause")};r.add=function(b){g(t(new u,"Internal error: if clause: unexpected extra condition: "+b))};r.Na=function(b){this.n===l?this.n=b:g(t(new u,"Internal error: if clause: unexpected: "+b))};r.h=function(b){this.n.h(b)};r.reduce=function(){return this};r.toString=function(){return""+this.n};
r.ia=function(b){return this.n.ia(b)};r.X=function(){return this.n instanceof V?Me(this.n):this.n.X()};r.U=function(b,c,d,f,h){var k=new Sd;k.n=this.n.U(b,c,d,f,h).reduce();return k};r.T=function(b,c,d){var f=new Sd;f.n=this.n.T(b,c,d).reduce();return f};r.N=function(b){var c=new Sd;c.n=this.n.N(b);return c};r.Z=function(b){var c=new Sd;c.n=this.n.Z(b);return c};r.l=function(b){b.za(this);this.n.l(b);b.Ka(this)};r.pc=function(){return"_"+Pe(this.n)};function Qe(){this.$=l}Qe.prototype=new y;r=Qe.prototype;
r.className="IfClause";r.type=function(){return Re};r.append=function(b){this.$!==l?this.$.add(b):this.$=b};r.reduce=function(){var b=this.$.reduce();b.La||g(new TypeError);this.$=b;return b instanceof Sd?b.n:this};r.Na=function(b){this.$.Na(b)};r.h=function(b){this.$.h(b)};r.toString=function(){return"(if "+this.$+")"};r.ia=function(b){return this.$.ia(b)};r.X=function(){return this.$.X()};r.U=function(b,c,d,f,h){var k=new Qe,b=this.$.U(b,c,d,f,h).reduce();b.La||g(new TypeError);k.$=b;return k};
r.T=function(b,c,d){var f=new Qe,b=this.$.T(b,c,d).reduce();b.La||g(new TypeError);f.$=b;return f};r.N=function(b){var c=new Qe,b=this.$.N(b);b.La||g(new TypeError);c.$=b;return c};r.Z=function(b){var c=new Qe,b=this.$.Z(b);b.La||g(new TypeError);c.$=b;return c};r.l=function(b){b.za(this);this.$.l(b);b.Ka(this)};r.R=function(){var b=this.$;b instanceof Se||g(new TypeError);return b.R};var Re=K("if-clause");function Se(){this.next=this.R=this.n=l}Se.prototype=new y;r=Se.prototype;r.La=j;
r.className="IfThen";r.type=function(){return K("if-then-clause")};r.add=function(b){this.next!==l?this.next.add(b):this.next=b};r.Na=function(b){this.n===l?this.n=b:this.R===l?this.R=b:this.next.Na(b)};
r.h=function(b){var c=this.pc(),d="rainbow.vm.instructions.cond.optimise.If"+c;try{if(d in Te){var f=Te[d];f===l?this.zc(b,c):f(b,this.n,this.R,this.next)}else{var h=v[d];if(h===i)Te[d]=l;else{var k=h.h;k===i&&g(t(new u,"couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+d));Te[d]=k}this.h(b)}}catch(q){q instanceof Error||g(q),g(t(new u,"Couldn't instantiate "+d+": "+q,q))}};r.zc=function(b){this.n.h(b);b.push(new Od(this.R,this.next))};
r.reduce=function(){var b=this.next.reduce();b.La||g(new TypeError);this.next=b;if(this.n instanceof z)return this.next;!(this.n instanceof T)||!(this.R instanceof T)||!(this.next instanceof Sd)?b=m:(b=this.next,b=Td(this.n,this.R)&&b.n instanceof z);if(!b)!(this.n instanceof U)||!(this.R instanceof U)||!(this.next instanceof Sd)?b=m:(b=this.next,b=pe(this.n,this.R)&&b.n instanceof z);return b?(b=new Sd,b.Na(this.n),b):this};r.toString=function(){return""+this.n+" "+this.R+" "+this.next};
r.ia=function(b){return this.n.ia(b)||this.R.ia(b)||this.next.ia(b)};r.X=function(){return this.n instanceof V&&Me(this.n)||this.R instanceof V&&Me(this.R)?j:this.n.X()||this.R.X()||this.next.X()};r.U=function(b,c,d,f,h){var k=new Se;k.n=this.n.U(b,c,d,f,h).reduce();k.R=this.R.U(b,c,d,f,h).reduce();b=this.next.U(b,c,d,f,h).reduce();b.La||g(new TypeError);k.next=b;return k};
r.T=function(b,c,d){var f=new Se;f.n=this.n.T(b,c,d).reduce();f.R=this.R.T(b,c,d).reduce();b=this.next.T(b,c,d).reduce();b.La||g(new TypeError);f.next=b;return f};r.N=function(b){var c=new Se;c.n=this.n.N(b);c.R=this.R.N(b);b=this.next.N(b);b.La||g(new TypeError);c.next=b;return c};r.Z=function(b){var c=new Se;c.n=this.n.Z(b);c.R=this.R.Z(b);b=this.next.Z(b);b.La||g(new TypeError);c.next=b;return c};r.l=function(b){b.za(this);this.n.l(b);this.R.l(b);this.next.l(b);b.Ka(this)};
r.pc=function(){var b;b="_"+Pe(this.n);b=b+"_"+Pe(this.R);return b=this.next instanceof Sd?b+"_"+Pe(this.next.n):b+"_other"};var Te={};function Le(b){this.Gb=b}Le.prototype=new y;r=Le.prototype;r.className="Quotation";r.h=function(b){b.push(new La(this.Gb))};r.type=function(){return K("quotation")};r.w=o("Gb");r.toString=function(){return"'"+this.Gb};function Ue(b){this.B=b;this.cc={}}Ue.prototype=new y;r=Ue.prototype;r.className="Invocation";r.type=function(){return K("if-then-clause")};
r.toString=function(){return(this.B.a()instanceof V?Ve(We(this.B)):this.B).toString()};r.h=function(b){var c;1===this.B.la()&&this.B.a()instanceof Xe?(Ye(this.B.a(),b),c=j):c=m;c||Ze(this,b)||this.zc(b)};
r.reduce=function(){if(this.B.ic(1)&&this.B.a()instanceof V){var b=this.B.a(),c=b.A;if(c.P()||!(c.a()instanceof L))return this;var c=c.a(),d=this.B.b().a();if(b.nb(c,d)){try{var f=b.pb(c,d,j)}catch(h){h instanceof Error||g(h),g(t(new u,"couldn't curry "+c+"->"+d+" for "+b+" in expression "+this+": "+h,h))}return(new Ue(A(new B,f,this.B.b().b()))).reduce()}}return this};
function Ze(b,c){for(var d="",f=b.B;!(f instanceof z);)d+="_",d+=Pe(f.a()),f=f.b(),f instanceof B||g(new TypeError);d="rainbow.vm.instructions.invoke.optimise.Invoke"+d;if(d in b.cc){f=b.cc[d];if(f===l)return m;try{var h=new f(b.B),k=b.B.b();for(k instanceof B||g(new TypeError);!(k instanceof z);)"other"===b.pc(k.a())&&k.a().h(c),k=k.b(),k instanceof B||g(new TypeError);"other"===b.pc(b.B.a())&&b.B.a().h(c);c.push(h);return j}catch(q){q instanceof Error||g(q),g(t(new u,"couldn't create optimiser "+
d,q))}}else{h=v[d];if(h===i)return b.cc[d]=l,m;b.cc[d]=h;return Ze(b,c)}}function Pe(b){return b instanceof T?"bound":b instanceof L?"free":b instanceof U?"stack":b.Ia()?"literal":b instanceof Le?"quote":"other"}
r.zc=function(b){switch(this.B.la()){case 1:var c=this.B.a();c instanceof T?b.push(new re(c)):c instanceof L?b.push(new se(c)):(c.h(b),b.push(new te));break;case 2:c=this.B.a();this.B.b().a().h(b);c instanceof T?b.push(new ue(c)):c instanceof L?b.push(new ve(c)):(c.h(b),b.push(new ye));break;case 3:var c=this.B.a(),d=this.B.b().a(),f=this.B.b().b().a();d.h(b);f.h(b);c instanceof T?b.push(new ze(c)):c instanceof L?b.push(new Ae(c)):(c.h(b),b.push(new Be));break;case 4:var c=this.B.a(),d=this.B.b().a(),
f=this.B.b().b().a(),h=this.B.b().b().b().a();d.h(b);f.h(b);h.h(b);c instanceof T?b.push(new Ce(c)):c instanceof L?b.push(new De(c)):(c.h(b),b.push(new Ee));break;default:c=this.B.a();d=this.B.b();d instanceof B||g(new TypeError);for(f=d.la();!(d instanceof z);)d.a().h(b),d=d.b(),d instanceof B||g(new TypeError);c instanceof T?b.push(new Fe(c,f)):c instanceof L?b.push(new Ge(c,f)):(c.h(b),b.push(new Ka(f)))}return j};
r.ia=function(b){for(var c=this.B;!(c instanceof z);){if(c.a().ia(b))return j;c=c.b();c instanceof B||g(new TypeError)}return m};r.X=function(){for(var b=this.B;!(b instanceof z);){if(b.a()instanceof V){if(Me(b.a()))return j}else if(b.a().X())return j;b=b.b();b instanceof B||g(new TypeError)}return m};
r.U=function(b,c,d,f,h){for(var k=this.B,q=[];!(k instanceof z);){try{q.push(k.a().U(b,c,d,f,h))}catch(s){s instanceof Error||g(s),g(t(new u,"couldn't inline "+b+"->"+c+"(unnest:"+d+";nesting:"+f+") in "+this+" : "+s,s))}k=k.b();k instanceof B||g(new TypeError)}return new Ue(x(q))};r.T=function(b,c,d){for(var f=this.B,h=[];!(f instanceof z);){try{h.push(f.a().T(b,c,d))}catch(k){k instanceof Error||g(k),g(t(new u,"couldn't inline "+b+"->"+c+") in "+this+" : "+k,k))}f=f.b();f instanceof B||g(new TypeError)}return new Ue(x(h))};
r.N=function(b){for(var c=this.B,d=[];!(c instanceof z);)d.push(c.a().N(b)),c=c.b(),c instanceof B||g(new TypeError);return new Ue(x(d))};r.Z=function(b){for(var c=this.B,d=[];!(c instanceof z);)d.push(c.a().Z(b)),c=c.b(),c instanceof B||g(new TypeError);return new Ue(x(d))};r.l=function(b){b.za(this);for(var c=this.B;!(c instanceof z);)c.a().l(b),c=c.b(),c instanceof B||g(new TypeError);b.Ka(this)};function $e(b){this.Ja=b}$e.prototype=new y;r=$e.prototype;r.className="QuasiQuotation";r.type=function(){return K("quasiquotation")};
r.h=function(b){af(this,b,this.Ja,1)};r.toString=function(){return"`"+this.Ja};function bf(b){var c=[];cf(b,c,b.Ja,1);return c}function cf(b,c,d,f){if(df(d))1===f?c.push(d.b().a()):cf(b,c,d.b().a(),f-1);else if(ef(d))1===f?c.push(d.b().a()):cf(b,c,d.b().a(),f-1);else if(ff(d))cf(b,c,d.b().a(),f+1);else if(!d.P())for(;!d.P();)if(df(d)||ff(d))cf(b,c,d,f),d=d.b().b();else{var h=d.a(),d=d.b();ef(h)?cf(b,c,h,f):(df(h)||ff(h)||gf(h))&&cf(b,c,h,f)}}
function af(b,c,d,f){if(df(d))1===f?d.b().a().h(c):(c.push(new La(hf)),af(b,c,d.b().a(),f-1),c.push(new ad(2)));else if(ef(d))1===f?(d.b().a().h(c),c.push(new Tc)):(c.push(new La(jf)),af(b,c,d.b().a(),f-1),c.push(new ad(2)),c.push(new Sc));else if(ff(d))c.push(new La(kf)),af(b,c,d.b().a(),f+1),c.push(new ad(2));else if(d.P())c.push(new La(d));else{for(c.push(new bd);!d.P();)if(df(d)||ff(d))af(b,c,d,f),d=d.b().b(),c.push(new Uc);else{var h=d.a(),d=d.b();ef(h)?af(b,c,h,f):(df(h)||ff(h)||gf(h)?af(b,
c,h,f):c.push(new La(h)),c.push(new Sc))}d instanceof z||(c.push(new La(d)),c.push(new Uc));c.push(new Zc)}}function lf(b,c){return b instanceof B&&b.Dc(c)&&b.b().b()instanceof z}function df(b){return lf(b,hf)}function ef(b){return lf(b,jf)}function ff(b){return lf(b,kf)}function gf(b){return b instanceof B}r.ia=function(b){for(var c=bf(this),d=0,f=c.length;d<f;d++)if(c[d].ia(b))return j;return m};r.X=function(){for(var b=bf(this),c=0,d=b.length;c<d;c++){var f=b[c];if(f instanceof V){if(Me(f))return j}else if(f.X())return j}return m};
r.U=function(b,c,d,f,h){return new $e(mf(b,c,d,f,h,this.Ja,1))};
function mf(b,c,d,f,h,k,q){if(df(k))return 1===q?x([hf,k.b().a().U(b,c,d,f,h)]):x([hf,mf(b,c,d,f,h,k.b().a(),q-1)]);if(ef(k))return 1===q?x([jf,k.b().a().U(b,c,d,f,h)]):x([jf,mf(b,c,d,f,h,k.b().a(),q-1)]);if(ff(k))return x([kf,mf(b,c,d,f,h,k.b().a(),q+1)]);if(k.P())return k;for(var s=[],E=C;!k.P();)if(df(k)||ff(k))E=mf(b,c,d,f,h,k,q),k=k.b().b();else{var M=k.a(),k=k.b();ef(M)?s.push(mf(b,c,d,f,h,M,q)):df(M)||ff(M)||gf(M)?s.push(mf(b,c,d,f,h,M,q)):s.push(M)}k instanceof z||(E=k);return ob(s,E)}
r.T=function(b,c,d){return new $e(nf(b,c,d,this.Ja,1))};
function nf(b,c,d,f,h){if(df(f))return 1===h?x([hf,f.b().a().T(b,c,d)]):x([hf,mf(b,c,d,f.b().a(),h-1)]);if(ef(f))return 1===h?x([jf,f.b().a().T(b,c,d)]):x([jf,nf(b,c,d,f.b().a(),h-1)]);if(ff(f))return x([kf,nf(b,c,d,f.b().a(),h+1)]);if(f.P())return f;for(var k=[],q=C;!f.P();)if(df(f)||ff(f))q=nf(b,c,d,f,h),f=f.b().b();else{var s=f.a(),f=f.b();ef(s)?k.push(nf(b,c,d,s,h)):df(s)||ff(s)||gf(s)?k.push(nf(b,c,d,s,h)):k.push(s)}f instanceof z||(q=f);return ob(k,q)}
r.N=function(b){return new $e(of(b,this.Ja,1))};function of(b,c,d){if(df(c))return 1===d?x([hf,c.b().a().N(b)]):x([hf,of(b,c.b().a(),d-1)]);if(ef(c))return 1===d?x([jf,c.b().a().N(b)]):x([jf,of(b,c.b().a(),d-1)]);if(ff(c))return x([kf,of(b,c.b().a(),d+1)]);if(c.P())return c;for(var f=[],h=C;!c.P();)if(df(c)||ff(c))h=of(b,c,d),c=c.b().b();else{var k=c.a(),c=c.b();ef(k)||df(k)||ff(k)||gf(k)?f.push(of(b,k,d)):f.push(k)}c instanceof z||(h=c);return ob(f,h)}r.Z=function(b){return new $e(pf(b,this.Ja,1))};
function pf(b,c,d){if(df(c))return 1===d?x([hf,c.b().a().Z(b)]):x([hf,pf(b,c.b().a(),d-1)]);if(ef(c))return 1===d?x([jf,c.b().a().Z(b)]):x([jf,pf(b,c.b().a(),d-1)]);if(ff(c))return x([kf,pf(b,c.b().a(),d+1)]);if(c.P())return c;for(var f=[],h=C;!c.P();)if(df(c)||ff(c))h=pf(b,c,d),c=c.b().b();else{var k=c.a(),c=c.b();ef(k)||df(k)||ff(k)||gf(k)?f.push(pf(b,k,d)):f.push(k)}c instanceof z||(h=c);return ob(f,h)}r.l=function(b){b.za(this);for(var c=bf(this),d=0,f=c.length;d<f;d++)c[d].l(b);b.Ka(this)};
function qf(){}r=qf.prototype;r.za=n();r.Ka=n();r.Zb=function(b){this.za(b)};r.wc=function(b){this.za(b)};r.Yb=function(b){this.za(b)};r.ec=function(b){this.Ka(b)};function rf(b){this.Rb=A(new B,b,C)}rf.prototype=new qf;rf.prototype.Zb=function(b){b.m(this.Rb.a());this.Rb=A(new B,b,this.Rb)};rf.prototype.ec=function(){this.Rb=this.Rb.b()};function sf(){this.yb=[];this.Jc=[];this.ub=0;this.Ic=-1}sf.prototype=new qf;r=sf.prototype;r.Zb=function(b){b.Qb()&&this.ub++};r.za=n();r.Ka=n();
r.ec=function(b){b.Qb()&&this.ub--};r.wc=function(b){b=b.Qa-this.ub;if(this.Ic<b)this.Ic=b};function tf(b){this.yb=[];this.Jc=[];this.Ja=b}tf.prototype=new qf;r=tf.prototype;r.Lb=function(){return this.Jc.length};r.Zb=function(b){this.yb.unshift(b);if(b.Qb())this.Ja=this.Ja.N(0)};r.za=function(b){this.yb.unshift(b)};r.Ka=function(){this.yb.shift()};r.ec=function(b){this.yb.shift();if(b.Qb())this.Ja=Ie(this.Ja)};r.wc=function(b){Td(b,this.Ja)&&0<this.yb.length&&this.Jc.push(this.yb[0])};
function uf(){this.name=this.target=l;this.sc=this.Wc=this.jd=0;this.children=[];this.parent=l;this.dd={};this.cd={}}function vf(b,c){var d=c.Ta(),f=b[d];if(f===i&&(f=new uf,f.target=c,f.name=d,b[d]=f,c instanceof V&&(d=c.hc,d!==l)))d=vf(b,d),d.children.push(f),f.parent=d;return f}function wf(b){this.target=b;this.Lb=0;this.key=b.Ta()}function xf(b,c){var d=b[c.Ta()];d===i&&(d=new wf(c),b[d.key]=d);return d}function yf(){this.Cc={};this.Ad={};this.Ec=l;this.now=0}function zf(){}zf.prototype.jb=i;
zf.prototype.end=i;zf.prototype.Db=i;function Af(b){b.show();var c=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");if(c!==l)if(/^q$/i.test(c))Oc(b,Dc);else if(/^f$/i.test(c))b.Pc=b.i-1,Oc(b,Bf)}function Cf(){}Cf.prototype=new zf;Cf.prototype.jb=n();Cf.prototype.end=n();Cf.prototype.Db=n();var Dc=new Cf;function Df(){}Df.prototype=new zf;Df.prototype.jb=function(b){Af(b)};Df.prototype.end=function(b){za("VM thread finished: returning.");Af(b)};
Df.prototype.Db=n();var Ef=new Df;function Ff(){}Ff.prototype=new zf;Ff.prototype.jb=function(b){b.dc=j;for(var c=[],d=[];0<=b.i;)Gc(b).a().Ob&&(c.push(Gc(b)),d.push(b.ka[b.i])),b.i--;for(var f=c.length-1;0<=f;f--)R(b,d[f],c[f])};Ff.prototype.end=n();Ff.prototype.Db=n();var Gf=new Ff;function Hf(){}Hf.prototype=new zf;Hf.prototype.jb=function(b){b.i<=b.Pc&&Oc(b,Ef)};Hf.prototype.end=n();Hf.prototype.Db=n();var Bf=new Hf;function If(){}If.prototype=new zf;
If.prototype.jb=function(b){var c=b.Za.Ec;if(c!==l){var d=vf(b.Za.Cc,c),c=1E6*(new Date).getTime()-b.Za.now;d.Wc+=c;d.sc+=c;for(d=d.parent;d!==l;)d.sc+=c,d=d.parent}var f=Qc(b);if(f!==l)b.s=b.ka[b.i],b.Nb=b.qa[b.i],this.vd(f,b),f.pa?(c=f.ua(b),c instanceof Xc&&(c=c.r()),d=vf(b.Za.Cc,c),f=f.d,f!==l&&xf(d.dd,f).Lb++,f=vf(b.Za.Cc,f),c!==l&&xf(f.cd,c).Lb++,d.jd++,b.Za.Ec=c):b.Za.Ec=f.d!==l?f.d:C,b.Za.now=1E6*(new Date).getTime()};If.prototype.end=n();
If.prototype.Db=function(b){b.Za=new yf;b.Za.now=1E6*(new Date).getTime()};var Jf=new If;function Kf(b,c,d){this.d=l;this.bc=b;this.M=c;this.v=d;this.m(G("AssignmentBuilder.build"))}Kf.prototype=new N;Kf.prototype.className="AssignmentBuilder.BuildAssignment1";Kf.prototype.c=function(b){if(!(this.M instanceof z)){try{this.M.Eb()}catch(c){c instanceof Ga||g(c),g(t(new u,"assign: unexpected: "+this.M))}F(b,new Lf(this.bc,this.M.b(),this.v));Mf(b,this.M.a(),this.v)}};
function Lf(b,c,d){this.d=l;this.bc=b;this.M=c;this.v=d;this.m(G("AssignmentBuilder.build"))}Lf.prototype=new N;Lf.prototype.className="AssignmentBuilder.BuildAssignment2";Lf.prototype.c=function(b){this.bc.Na(Q(b).reduce());F(b,new Kf(this.bc,this.M,this.v))};var Nf=C,Of=K("at-string");
function Mf(b,c,d){if(c instanceof z)D(b,c);else if(c instanceof Oa&&!(Nf instanceof z))F(b,new Pf(d)),Of.bound()?Ia(Of.value(),b,A(new B,c,C)):D(b,c);else if(c instanceof L&&Qf(c))Mf(b,Rf(gb(c,"ssexpand")),d);else if(c instanceof B){var f,h=c.a();f=!(h instanceof L)||!h.bound()?l:mc(h.value());if(f!==l)h=c.b(),h instanceof B||g(new TypeError),F(b,new Sf(d)),Ia(f,b,h);else if(f=c.a(),fb("quote",f))D(b,new Le(c.b().a()));else if(f===kf)F(b,new Tf),Uf(b,c.b().a(),d,1);else if(fb("fn",f))h=c.b(),h instanceof
B||g(new TypeError),c=h,h=d,h===l&&g(new ReferenceError("can't have null lexical bindings!")),f={},d=c.a(),d instanceof z||(h=[f].concat(h)),F(b,new Vf(c,h,f)),d instanceof z?D(b,A(new B,C,C)):(c=h,Wf(d,c[0],[0],m),Xf(b,d,c));else if(fb("if",f)){h=c=c.b();for(f=new Qe;0<c.la();)switch(c.la()){case 0:break;case 1:f.append(new Sd);c=c.b();break;case 2:f.append(new Se);c=c.b();c instanceof B||g(new TypeError);c.Kc(A(new B,C,C));c=c.b();break;default:f.append(new Se),c=c.b().b()}c=h;F(b,new Yf(f));F(b,
new Zf(f,c,d))}else if(fb("assign",f)){c=c.b();h=new Oe;f=c.la();0!==f%2&&g(t(new u,"assign: requires even number of arguments"));f=f/2-1;0>f&&g(t(new u,"assign: nothing to assign"));for(h.aa=new Ne;0<f;)h.aa=new Je(h.aa),f--;f=new La(h);f.m(G("AssignmentBuilder.build"));F(b,f);F(b,new Kf(h,c,d))}else fb("compose",f.vc())?(h=f.b(),h instanceof B||g(new TypeError),c=c.b(),c instanceof B||g(new TypeError),Mf(b,$f(h,c),d)):fb("complement",f.vc())?(h=c.b(),h instanceof B||g(new TypeError),c=Mf,f=f.b().a(),
h=A(new B,K("no"),A(new B,A(new B,f,h),C)),c(b,h,d)):f instanceof L&&Qf(f)?Mf(b,A(new B,Rf(gb(f,"ssexpand")),c.b()),d):F(b,new ag(c,d,c,[]))}else{if(c instanceof L)for(h=0;h<d.length;h++)if(c.name()in d[h]){d=d[h][c.name()];D(b,new T(c,h,d));return}D(b,c)}}function Pf(b){this.d=l;this.v=b;this.m(G("Compiler.compile"))}Pf.prototype=new N;Pf.prototype.className="Compiler.FinishAtString";Pf.prototype.c=function(b){var c=Q(b);c instanceof Oa?D(b,c):Mf(b,c,this.v)};
function Sf(b){this.d=l;this.v=b;this.m(G("Compiler.compilePair"))}Sf.prototype=new N;Sf.prototype.className="Compiler.ThenCompile";Sf.prototype.c=function(b){Mf(b,Q(b),this.v)};function Tf(){this.d=l;this.m(G("Compiler.compilePair"))}Tf.prototype=new N;Tf.prototype.className="Compiler.WrapQuasiQuotation";Tf.prototype.c=function(b){D(b,new $e(Q(b)))};
function $f(b,c){var d=b.a();if(b.b()instanceof z)return A(new B,d,c);var f=b.b();f instanceof B||g(new TypeError);return A(new B,d,A(new B,$f(f,c),C))}function Vf(b,c,d){this.d=l;this.hb=b;this.v=c;this.Fc=d;this.m(G("FunctionBodyBuilder.build"))}Vf.prototype=new N;Vf.prototype.className="FunctionBodyBuilder.Intermediate";Vf.prototype.c=function(b){var c=Q(b),d=c.a(),c=c.b(),f=this.hb.b();f instanceof B||g(new TypeError);F(b,new bg(c,this.Fc,f,d,b.O));F(b,new cg(f,this.v,[]))};
function bg(b,c,d,f,h){this.d=l;this.A=b;this.Fc=c;this.M=d;this.Aa=f;this.Jb=h;this.m(G("FunctionBodyBuilder.build"))}bg.prototype=new N;bg.prototype.gc=j;bg.prototype.className="FunctionBodyBuilder.Finish";bg.prototype.xc=function(b){return b instanceof Error};bg.prototype.c=function(b){var c=b.error();if(c!==l)b.Va=l,b.O=this.Jb,g(t(new u,"building function fn "+this.A+" "+this.M+": "+c,c));D(b,dg(this.A,this.Fc,Q(b),this.Aa))};
function dg(b,c,d,f){var h="rainbow.function.interpreted.optimise.Bind"+eg(b,m),k=v[h];if(k===i)return f instanceof z?new fg(b,c,d):new gg(b,c,d);try{var q=k.wa(b,c,d);q instanceof y||g(new TypeError);return q}catch(s){s instanceof Error||g(s),g(t(new u,"Couldn't instantiate "+h+": "+s,s))}}
function eg(b,c){if(b instanceof z)return"";if(b instanceof B){if(c){if(hg(b)){var d=b.b().b().a();return d.Ia()?"_Oliteral":d instanceof T?"_Obound":"_Oother"}d=b.a();return"_D"+eg(d,j)+eg(b.b(),m)+"_d"}return eg(b.a(),j)+eg(b.b(),m)}return c?"_A":"_R"}function ig(b,c,d){!(c instanceof z)&&c instanceof B&&(d&&hg(c)?c.b().b().a().l(b):(ig(b,c.a(),j),ig(b,c.b(),m)))}var jg=K("o"),kg=K("#NIL#");function Xf(b,c,d){var f={value:C},h=[];F(b,new lg(h,f));F(b,new mg(h,f,c,d))}
function lg(b,c){this.d=l;this.L=b;this.Aa=c;this.m(G("FunctionParameterListBuilder.buildParams_"))}lg.prototype=new N;lg.prototype.className="FunctionParameterListBuilder.ReturnParams";lg.prototype.c=function(b){if(0===this.L.length){var c;c=Q(b)}else c=ob(this.L,Q(b));c=A(new B,this.Aa.value,c);D(b,c)};function mg(b,c,d,f){this.d=l;this.L=b;this.Aa=c;this.ya=d;this.v=f;this.m(G("FunctionParameterListBuilder.buildParams_"))}mg.prototype=new N;mg.prototype.className="FunctionParameterListBuilder.BuildParams1";
mg.prototype.c=function(b){if(this.ya.P()){var c=new La(this.ya);c.m(this);F(b,c)}else{var c=this.ya.a(),d=this.ya.b();if(c instanceof B)if(c instanceof z)this.L.push(kg),F(b,new mg(this.L,this.Aa,d,this.v));else if(this.Aa.value=Za,hg(c)){var f=c.b().a();F(b,new ng(this.L,this.Aa,d,this.v,f));Mf(b,c.b().b().a(),this.v)}else F(b,new og(this.L,this.Aa,d,this.v)),Xf(b,c,this.v);else this.L.push(c),F(b,new mg(this.L,this.Aa,d,this.v))}};
function ng(b,c,d,f,h){this.d=l;this.L=b;this.Aa=c;this.ya=d;this.v=f;this.ld=h;this.m(G("FunctionParameterListBuilder.buildParams_"))}ng.prototype=new N;ng.prototype.className="FunctionParameterListBuilder.BuildParams2a";ng.prototype.c=function(b){this.L.push(x([jg,this.ld,Q(b)]));F(b,new mg(this.L,this.Aa,this.ya,this.v))};function og(b,c,d,f){this.d=l;this.L=b;this.Aa=c;this.ya=d;this.v=f;this.m(G("FunctionParameterListBuilder.buildParams_"))}og.prototype=new N;og.prototype.className="FunctionParameterListBuilder.BuildParams2b";
og.prototype.c=function(b){this.L.push(Q(b).b());F(b,new mg(this.L,this.Aa,this.ya,this.v))};function pg(b){for(;!b.P();){if(b.a()instanceof B)return Za;b=b.b()}return C}function Wf(b,c,d,f){b instanceof z||(b instanceof B?f&&hg(b)?Wf(b.b().a(),c,d,j):(f=b.a(),f instanceof z?(c[kg.name()]=d[0],d[0]++):Wf(f,c,d,j),Wf(b.b(),c,d,m)):(b instanceof L||g(new TypeError),c[b.name()]=d[0],d[0]++))}
function qg(b,c,d,f){var h=l;f instanceof L&&!f.Ha(b.name)?h=f:hg(f)&&!f.b().a().Ha(b.name)?h=x([jg,f.b().a(),f.b().b().a().T(b,c,d)]):!hg(f)&&f instanceof B&&(h=f);return h}function rg(b,c,d,f){var h=l;f instanceof L&&!f.Ha(b.name)?h=f:hg(f)&&!f.b().a().Ha(b.name)?h=x([jg,f.b().a(),f.b().b().a().U(b,c,m,0,d)]):!hg(f)&&f instanceof B&&(h=f);return h}function Yf(b){this.d=l;this.zb=b;this.m(G("IfBuilder.build"))}Yf.prototype=new N;Yf.prototype.className="IfBuilder.Reduce";
Yf.prototype.c=function(b){D(b,this.zb.reduce())};function Zf(b,c,d){this.d=l;this.zb=b;this.M=c;this.v=d;this.m(G("IfBuilder.build"))}Zf.prototype=new N;Zf.prototype.className="IfBuilder.BuildIf1";Zf.prototype.c=function(b){if(!(this.M instanceof z)){try{this.M.Eb()}catch(c){c instanceof Ga||g(c),g(t(new u,"if: unexpected: "+this.M))}F(b,new sg(this.zb,this.M.b(),this.v));Mf(b,this.M.a(),this.v)}};function sg(b,c,d){this.d=l;this.zb=b;this.M=c;this.v=d;this.m(G("IfBuilder.build"))}sg.prototype=new N;
sg.prototype.className="IfBuilder.BuildIf2";sg.prototype.c=function(b){this.zb.Na(Q(b).reduce());F(b,new Zf(this.zb,this.M,this.v))};function ag(b,c,d,f){this.d=l;this.M=b;this.v=c;this.xa=d;this.Oa=f;this.m(G("InvocationBuilder.build"))}ag.prototype=new N;ag.prototype.className="InvocationBuilder.BuildInvocation";
ag.prototype.c=function(b){if(this.M instanceof z)D(b,(new Ue(x(this.Oa))).reduce());else{try{this.M.Eb()}catch(c){c instanceof Ga||g(c),g(t(new u,"can't compile "+this.xa+"; not a proper list"))}F(b,new ag(this.M.b(),this.v,this.xa,this.Oa));F(b,new tg(this.Oa));Mf(b,this.M.a(),this.v)}};function tg(b){this.d=l;this.Oa=b;this.m(G("InvocationBuilder.build"))}tg.prototype=new N;tg.prototype.className="InvocationBuilder.ReducePush";tg.prototype.c=function(b){this.Oa.push(Q(b).reduce())};
function cg(b,c,d){this.d=l;this.M=b;this.v=c;this.L=d;this.m(G("PairExpander.expand"))}cg.prototype=new N;cg.prototype.className="PairExpander.ExpandPair";cg.prototype.c=function(b){if(this.M instanceof z||!(this.M instanceof B))F(b,new ug(this.L)),Mf(b,this.M,this.v);else{F(b,new cg(this.M.b(),this.v,this.L));var c=this.M.a();F(b,new vg(this.L));Mf(b,c,this.v)}};function vg(b){this.d=l;this.Oa=b;this.m(G("PairExpander.expand"))}vg.prototype=new N;vg.prototype.className="PairExpander.ReducePush";
vg.prototype.c=function(b){this.Oa.push(Q(b).reduce())};function ug(b){this.d=l;this.L=b;this.m(G("PairExpander.expand"))}ug.prototype=new N;ug.prototype.className="PairExpander.FinishPair";ug.prototype.c=function(b){var c=ob(this.L,Q(b).reduce());c instanceof B||g(new TypeError);D(b,c)};var kf=K("quasiquote"),hf=K("unquote"),jf=K("unquote-splicing");function Uf(b,c,d,f){c.P()?D(b,c):df(c)?wg(b,hf,c,f,d):ef(c)?wg(b,jf,c,f,d):ff(c)?(F(b,new xg(kf)),Uf(b,c.b().a(),d,f+1)):F(b,new yg([],c,d,f))}
function yg(b,c,d,f){this.d=l;this.L=b;this.Ba=c;this.v=d;this.ub=f;this.m(G("QuasiQuoteCompiler.compile"))}yg.prototype=new N;yg.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";yg.prototype.c=function(b){if(this.Ba.P())F(b,new zg(this.L)),Uf(b,this.Ba,this.v,this.ub);else{var c=this.Ba.a();F(b,new yg(this.L,this.Ba.b(),this.v,this.ub));c.P()?this.L.push(c):(F(b,new Ag(this.L)),Uf(b,c,this.v,this.ub))}};function zg(b){this.d=l;this.L=b;this.m(G("QuasiQuoteCompiler.compile"))}
zg.prototype=new N;zg.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";zg.prototype.c=function(b){D(b,ob(this.L,Q(b)))};function Ag(b){this.d=l;this.L=b;this.m(G("QuasiQuoteCompiler.compile"))}Ag.prototype=new N;Ag.prototype.className="QuasiQuoteCompiler.Push";Ag.prototype.c=function(b){this.L.push(Q(b))};function wg(b,c,d,f,h){d=d.b().a();F(b,new xg(c));1===f?Mf(b,d,h):Uf(b,d,h,f-1)}function xg(b){this.d=l;this.od=b;this.m(G("QuasiQuoteCompiler.compile"))}xg.prototype=new N;
xg.prototype.className="QuasiQuoteCompiler.Prefix";xg.prototype.c=function(b){D(b,x([this.od,Q(b)]))};var Bg={},Cg=K("let"),Dg=K("self"),Eg=K("it");K("afn");var Fg=K("do"),Gg=K("with"),Hg=K("aif");
function Ve(b){if(b.a()===Cg)a:{b=b.b();if(b.a()===Eg){var c=b.b().a(),d=b.b().b();if(d.b()instanceof z&&d.a()instanceof Qe&&(d=d.a(),!(d.$ instanceof Se)?0:"it"===d.$.n.toString())){b=d.R();d=d.$;d instanceof Se||g(new TypeError);b=x([Hg,c,b,d.next]);break a}}else if(b.a()===Dg&&b.b().a()instanceof z&&(d=b.b().b(),d.a()instanceof Oe&&d.b()instanceof z)){c=d.a();var d=c.aa,f="self";if(d.name instanceof L)d=d.name.name()===f;else{if(!(d.name instanceof U))f=d.name,f instanceof T||g(new TypeError);
d=d.name.name.name()===f}if(d&&c.aa.D instanceof V&&c.aa instanceof Ne){b=Bg.Dd(c.aa.D);break a}}b=A(new B,Cg,b)}return b}function We(b){var c=b.a(),d=b.b(),f=c.A;if(d.la()===f.la())if(0===d.la())c=x([Fg].concat(c.body));else if(1===d.la())c=x([Cg,f.a(),d.a()].concat(c.body));else{b=d;for(d=[];!(f instanceof z);)d.push(f.a()),d.push(b.a()),f=f.b(),b=b.b();c=x([Gg,x(d)].concat(c.body))}else c=b;return c}function W(){}W.prototype=new y;r=W.prototype;r.className="Builtin";
function Y(b,c){b.ea=c;K(c).ha(b)}r.j=function(b){g(t(new u,"Builtin:invoke(args):provide implementation! "+this.name()+" args "+b))};r.g=function(b,c){D(b,this.j(c))};r.sa=p(0);r.type=function(){return Ig};function Pb(b,c,d){d<b.la()&&(za(c+" got args "+b+" was expecting expecting at most "+d),g(t(new u,c.toLowerCase()+" expects at most "+d+" arguments: given "+b)))}function Jg(b,c,d){b.la()!==c&&g(t(new u,d.toLowerCase()+" expects "+c+" arguments: given "+b))}
r.toString=function(){return"[builtin:"+(this.ea===l||0===this.ea.length?this.className:this.ea)+"]"};r.Ta=function(){return this.toString()};r.name=function(){return""===this.ea?this.className.toLowerCase():this.ea};var Ig=K("fn");function Xc(b,c){this.Ba=b;this.ja=c}Xc.prototype=new y;r=Xc.prototype;r.className="Closure";r.va=function(b){this.Ba.ma(b,this.ja)};r.u=function(b,c){this.Ba.z(b,this.ja,c)};r.V=function(b,c,d){this.Ba.Fa(b,this.ja,c,d)};r.g=function(b,c){this.Ba.F(b,this.ja,c)};
r.type=function(){return Ig};r.toString=function(){return this.Ba.toString()};r.Ta=function(){return this.Ba.Ta()};r.r=o("Ba");function Kg(b){return 0===b.length?m:b.charCodeAt(0)===Lg?Kg(b.substring(1)):b.charAt(b.length-1)===Lg?Kg(b.substring(0,b.length-1)):-1!==b.indexOf(Mg)}function V(){}V.prototype=new y;r=V.prototype;r.K=V;r.className="InterpretedFunction";function $(b,c,d,f){b.name=C;b.A=c;b.p=d;b.body=sb(f);b.o=l;b.hc=l;b.ba=l;b.wb=l;b.Cd=l;Ng(b);return b}
r.tc=function(b){if(this.name===b)this.name=C};r.$b=function(b){this.name=b;for(var b=new rf(this),c=0,d=this.body.length;c<d;c++)this.body[c].l(b)};r.ac=o("name");r.Ta=function(){if(this.wb!==l)return this.wb;this.name instanceof z?(this.wb=this.toString(),this.hc!==l&&(this.wb+=" in "+this.hc.Ta())):this.wb=this.ac().toString();return this.wb};
r.reduce=function(){var b;if(Og&&!this.X()&&!(this.A instanceof z)){var c="rainbow.function.interpreted.optimise.stack.Stack"+eg(this.A,m),d=v[c];if(d===i)b=this;else try{var f=d.Sa(this);f instanceof y||g(new TypeError);b=f}catch(h){h instanceof Error||g(h),g(t(new u,"Couldn't instantiate "+c+": "+h,h))}}else b=this;return b};function Ng(b){var c=[];Ye(b,c);b.o=x(c);b.o.l(new Pg(b))}r.m=ca("hc");function Pg(b){this.d=b}Pg.prototype=new qf;Pg.prototype.Yb=function(b){b.m(this.d)};
function Ye(b,c){if(0===b.body.length)c.push(new La(C));else for(var d=0;d<b.body.length;d++){var f=d===b.body.length-1;b.body[d].h(c);f||c.push(new cd("intermediate-fn-expression"))}}r=V.prototype;r.nb=function(b,c){return 1===this.body.length&&this.Bc(b,c)&&!this.ia(0)&&!this.X()};
r.Bc=function(b,c){var d=this.p[b.name()],d=new T(b,0,d),f;if(!(f=c.Ia()))if(!(f=c instanceof Le))if(!(f=c instanceof L))if(!(f=c instanceof T)){d=new tf(d);f=0;for(var h=this.body.length;f<h;f++)this.body[f].l(d);f=1>=d.Lb()}return f};r.X=function(){for(var b=0,c=this.body.length;b<c;b++){var d=this.body[b];if(d instanceof V){if(Me(d))return j}else if(d.X())return j}return m};function Qg(b,c){for(var d=0,f=b.body.length;d<f;d++)if(b.body[d].ia(c))return j;return m}
r.Qb=function(){return!(this.A instanceof z)};r.ia=function(b){return this.A instanceof z?Qg(this,b):Qg(this,b+1)};r.va=function(b){return this.ma(b,l)};r.ma=function(b,c){return this.F(b,c,C)};r.u=function(b,c){return this.z(b,l,c)};r.z=function(b,c,d){return this.F(b,c,A(new B,d,C))};r.V=function(b,c,d){return this.Fa(b,l,c,d)};r.Fa=function(b,c,d,f){return this.F(b,c,A(new B,d,A(new B,f,C)))};r.Xa=function(b,c,d,f){return this.Pb(b,l,c,d,f)};
r.Pb=function(b,c,d,f,h){return this.F(b,c,A(new B,d,A(new B,f,A(new B,h,C))))};r.g=function(b,c){return this.F(b,l,c)};r.F=function(){g(t(new u,"error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this))};r.h=function(b){Me(this)?b.push(new Wc(this)):b.push(new La(this))};r.Ia=function(){return!Me(this)};function Me(b){var c=new sf;b.l(c);return-1<c.Ic}r.l=function(b){b.Zb(this);ig(b,this.A,m);for(var c=0,d=this.body.length;c<d;c++)this.body[c].l(b);b.ec(this);this.ba!==l&&this.ba.l(b)};
r.sa=function(b){g(t(new u,"Can't compare "+this+" to "+b))};r.toString=function(){if(this.A instanceof B&&this.A.a()===K("_")&&this.A.b()instanceof z&&1===this.body.length&&!(this.body[0]instanceof Db)){if(this.body[0]instanceof z)return"[]";var b=this.body[0].toString();return"["+b.substring(1,b.length-1)+"]"}return x([K("fn"),this.A].concat(this.body)).toString()};r.type=function(){return Ig};r.Fb=function(b){return this.body[b]};r.Sc=function(){return this.body[this.body.length-1]};r.length=function(){return this.body.length};
function Rg(b,c,d){try{c.b().Pa()}catch(f){f instanceof Ga||g(f),Sg(b,d)}}function Sg(b,c){g(t(new u,"args "+c+" doesn't match signature for "+b))}
r.pb=function(b,c,d){var f=this.p[b.name()];f===i&&g(new ReferenceError);var b=new T(b,0,f),h;for(var k=this.A,q=c,s=C,E=[];!k.P();){var M=rg(b,q,f,k.a());M!==l&&E.push(M);k=k.b()}k instanceof L&&(q=rg(b,q,f,k),q!==l&&(s=q));try{h=ob(E,s)}catch(ma){ma instanceof Error||g(ma),g(t(new u,"couldn't curry params "+k+", got list "+E+" and last "+s))}k={};Wf(h,k,[0],m);s=h instanceof z;!s&&d&&(c=c.N(0));d=[];for(E=0;E<this.body.length;E++)d.push(this.body[E].U(b,c,s,0,f).reduce());c=x(d);f=pg(h);return dg(h,
k,c,f)};r.U=function(b,c,d,f,h){for(var b=this.A instanceof z?b:b.N(0),d=Tg(this),k=[],q=0;q<this.body.length;q++)k.push(this.body[q].U(b,c,m,f+1,h).reduce());b=x(k);d.body=sb(b);Ng(d);return d};r.T=function(b,c,d){if(!(this.A instanceof z))return this;for(var f=Tg(this),h=[],k=0;k<this.body.length;k++)h.push(this.body[k].T(b,c,d).reduce());b=x(h);f.body=sb(b);Ng(f);return f};
r.N=function(b){this.A instanceof z||b++;for(var c=Tg(this),d=[],f=0;f<this.body.length;f++)d.push(this.body[f].N(b));b=x(d);c.body=sb(b);Ng(c);return c};function Tg(b){var c=new b.K,d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function Ug(b,c,d){d.Cb(c)||g(t(new u,"error: "+b+" expects "+c+" args, got "+d))}function fg(b,c,d){$(this,b,c,d)}fg.prototype=new V;fg.prototype.K=fg;fg.prototype.className="SimpleArgs";
fg.prototype.F=function(b,c,d){var f=0,h;for(h in this.p)f++;f=c=(new w).t(f,c);for(h=this.A;!(h instanceof z);)if(h instanceof L){f.add(d);break}else f.add(d.a()),d=d.b(),h=h.b();R(b,c,this.o)};function gg(b,c,d){$(this,b,c,d)}gg.prototype=new V;gg.prototype.K=gg;gg.prototype.className="ComplexArgs";gg.prototype.F=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);F(b,new Vg(c,this.o,this));F(b,new Wg(c,this.A,d,this))};function Vg(b,c,d){this.d=l;this.ja=b;this.o=c;this.m(d)}
Vg.prototype=new N;Vg.prototype.className="ComplexArgs.Run";Vg.prototype.c=function(b){R(b,this.ja,this.o)};function Wg(b,c,d,f){this.d=l;this.ja=b;this.ya=c;this.hb=d;this.m(f)}Wg.prototype=new N;Wg.prototype.className="ComplexArgs.BuildComplex";
Wg.prototype.c=function(b){if(this.ya.P())this.ya instanceof L&&this.ja.add(this.hb);else{var c=this.ya.a(),d=this.hb.a();F(b,new Wg(this.ja,this.ya.b(),this.hb.b(),this.d));if(c instanceof L)this.ja.add(d);else if(hg(c))if(c=c.b(),c instanceof B||g(new TypeError),this.hb instanceof z){F(b,new Xg(this.ja,this));var d=this.ja,f=[];c.b().a().h(f);R(b,d,x(f))}else this.ja.add(d);else{try{d.Eb()}catch(h){h instanceof Ga||g(h),g(t(new u,"Expected list argument for destructuring parameter "+c+", got "+
d))}F(b,new Wg(this.ja,c,d,this.d))}this.ya=this.ya.b();this.hb=this.hb.b()}};function Xg(b,c){this.d=l;this.ja=b;this.m(c)}Xg.prototype=new N;Xg.prototype.className="ComplexArgs.AddToLc";Xg.prototype.c=function(b){this.ja.add(Q(b))};function hg(b){return!(b instanceof B)?m:b.a()===Yg}var Yg=K("o");function Zg(){}Zg.prototype=new V;r=Zg.prototype;r.K=Zg;r.className="StackFunctionSupport";r.nb=function(b,c){return this.Bc(b,c)&&!this.ia(0)};
r.Bc=function(b,c){var d=this.p[b.name()],d=new U(b,d);return c.Ia()||c instanceof Le||c instanceof L||1===this.body.length&&this.body[0]instanceof U&&pe(d,this.body[0])};r.Qb=p(m);
r.pb=function(b,c){var d=this.p[b.name()],f=new U(b,d),h;for(var k=this.A,q=C,s=[];!k.P();){var E=qg(f,c,d,k.a());E!==l&&s.push(E);k=k.b()}k instanceof L&&(E=qg(f,c,d,k),E!==l&&(q=E));try{h=ob(s,q)}catch(M){M instanceof Error||g(M),g(t(new u,"couldn't curry params "+k+", got list "+s+" and last "+q))}k={};Wf(h,k,[0],m);q=[];for(s=0;s<this.body.length;s++)q.push(this.body[s].T(f,c,d).reduce());var d=x(q),f=pg(h),ma;q=eg(h,m);if(""===q)ma=dg(h,k,d,f);else{f="rainbow.function.interpreted.optimise.stack.Stack"+
q;q=v[f];q===i&&g(t(new u,"no stack-based function implementation for "+h+"; couldn't find "+f));try{var X=q.ga(h,k,d);X instanceof y||g(new TypeError);ma=X}catch(cb){cb instanceof Error||g(cb),g(t(new u,"Couldn't instantiate "+f+": "+cb,cb))}}return ma};function $g(b,c){for(var d=Array(~~c.length),f=0;f<c.length;f++)d[f]=c[f].Z(b);return x(d)}function Xe(){}var ah={};v["rainbow.function.interpreted.optimise.Bind"]=ah;Xe.prototype=new V;Xe.prototype.K=Xe;Xe.prototype.className="Bind";
ah.wa=function(b,c,d){return $(new Xe,b,c,d)};Xe.prototype.ma=function(b,c){R(b,c,this.o)};Xe.prototype.F=function(b,c,d){try{d.Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 args, got "+d))}R(b,c,this.o)};function bh(){}var ch={};v["rainbow.function.interpreted.optimise.Bind_A"]=ch;bh.prototype=new V;bh.prototype.K=bh;bh.prototype.className="Bind_A";ch.wa=function(b,c,d){return $(new bh,b,c,d)};bh.prototype.ma=function(){g(t(new u,"function "+this+" expects 1 arg, got none"))};
bh.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);R(b,c,this.o)};bh.prototype.F=function(b,c,d){d instanceof z&&this.ma(b,c);try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 1 arg, got "+d+" calling "+this))}this.z(b,c,d.a())};function dh(){}var eh={};v["rainbow.function.interpreted.optimise.Bind_A_A"]=eh;dh.prototype=new V;dh.prototype.K=dh;dh.prototype.className="Bind_A_A";eh.wa=function(b,c,d){return $(new dh,b,c,d)};
dh.prototype.ma=function(){g(t(new u,"error: expected 2 args, got none"))};dh.prototype.z=function(b,c,d){g(t(new u,"error: expected 2 args, got 1: "+d))};dh.prototype.Fa=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=(new w).t(h,c);c.add(d);c.add(f);R(b,c,this.o)};dh.prototype.F=function(b,c,d){try{d.b().b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 2 args, got "+d))}this.Fa(b,c,d.a(),d.b().a())};function fh(){}var gh={};v["rainbow.function.interpreted.optimise.Bind_A_A_A"]=gh;
fh.prototype=new V;fh.prototype.K=fh;fh.prototype.className="Bind_A_A_A";gh.wa=function(b,c,d){return $(new fh,b,c,d)};fh.prototype.Pb=function(b,c,d,f,h){var k=0,q;for(q in this.p)k++;c=(new w).t(k,c);c.add(d);c.add(f);c.add(h);R(b,c,this.o)};fh.prototype.F=function(b,c,d){Rg(this,d.b().b().b(),d);this.Pb(b,c,d.a(),d.b().a(),d.b().b().a())};function hh(){}var ih={};v["rainbow.function.interpreted.optimise.Bind_A_A_R"]=ih;hh.prototype=new V;hh.prototype.K=hh;hh.prototype.className="Bind_A_A_R";
ih.wa=function(b,c,d){return $(new hh,b,c,d)};hh.prototype.ma=function(){g(t(new u,"error: expected at least 2 arg, got none"))};hh.prototype.z=function(b,c,d){g(t(new u,"error: expected at least 2 args, got one: "+d))};hh.prototype.F=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d.a());c.add(d.b().a());c.add(d.b().b());R(b,c,this.o)};function jh(){}var kh={};v["rainbow.function.interpreted.optimise.Bind_A_Obound"]=kh;jh.prototype=new V;jh.prototype.K=jh;
jh.prototype.className="Bind_A_Obound";kh.wa=function(b,c,d){c=$(new jh,b,c,d);d=b.b().a().b().b().a();d instanceof T||g(new TypeError);c.W=d;b=b.b().a().b().a();b instanceof L||g(new TypeError);if(c.nb(b,c.W))try{var f=c.pb(b,c.W,m);f instanceof V||g(new TypeError);c.ba=f}catch(h){h instanceof Error||g(h),Aa(h)}return c};jh.prototype.z=function(b,c,d){if(this.ba!==l)this.ba.z(b,c,d);else{var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);c.add(this.W.w(c));R(b,c,this.o)}};
jh.prototype.Fa=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=(new w).t(h,c);c.add(d);c.add(f);R(b,c,this.o)};jh.prototype.F=function(b,c,d){d instanceof z&&Sg(this,d);var f=d.a(),h=d.b();h instanceof z?this.z(b,c,f):(Rg(this,h.b(),d),this.Fa(b,c,f,h.a()))};function lh(){}var mh={};v["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=mh;lh.prototype=new V;lh.prototype.K=lh;lh.prototype.className="Bind_A_Oliteral";
mh.wa=function(b,c,d){c=$(new lh,b,c,d);c.W=b.b().a().b().b().a();b=b.b().a().b().a();b instanceof L||g(new TypeError);if(c.nb(b,c.W))try{var f=c.pb(b,c.W,m);f instanceof V||g(new TypeError);c.ba=f}catch(h){h instanceof Error||g(h),Aa(h)}return c};lh.prototype.z=function(b,c,d){if(this.ba!==l)this.ba.z(b,c,d);else{var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);c.add(this.W);R(b,c,this.o)}};
lh.prototype.Fa=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=(new w).t(h,c);c.add(d);c.add(f);R(b,c,this.o)};lh.prototype.F=function(b,c,d){d instanceof z&&Sg(this,d);var f=d.a(),h=d.b();h instanceof z?this.z(b,c,f):(Rg(this,h.b(),d),this.Fa(b,c,f,h.a()))};function nh(){}var oh={};v["rainbow.function.interpreted.optimise.Bind_A_Oother"]=oh;nh.prototype=new V;nh.prototype.K=nh;nh.prototype.className="Bind_A_Oother";
oh.wa=function(b,c,d){c=$(new nh,b,c,d);d=[];b.b().a().b().b().a().h(d);c.Hc=x(d);return c};nh.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);F(b,new ph(c,this.o,this));R(b,c,this.Hc)};nh.prototype.Fa=function(b,c,d,f){var h=0,k;for(k in this.p)h++;c=(new w).t(h,c);c.add(d);c.add(f);R(b,c,this.o)};nh.prototype.F=function(b,c,d){d instanceof z&&Sg(this,d);var f=d.a(),h=d.b();h instanceof z?this.z(b,c,f):(Rg(this,h.b(),d),this.Fa(b,c,f,h.a()))};function qh(){}
var rh={};v["rainbow.function.interpreted.optimise.Bind_A_R"]=rh;qh.prototype=new V;qh.prototype.K=qh;qh.prototype.className="Bind_A_R";rh.wa=function(b,c,d){return $(new qh,b,c,d)};qh.prototype.ma=function(){g(t(new u,"error: expected at least 1 arg, got none"))};qh.prototype.F=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d.a());c.add(d.b());R(b,c,this.o)};function sh(){}var th={};v["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=th;sh.prototype=new V;
sh.prototype.K=sh;sh.prototype.className="Bind_D_A_A_A_d";th.wa=function(b,c,d){return $(new sh,b,c,d)};sh.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);d instanceof B||g(new TypeError);c.add(d.a());d=d.b();d instanceof B||g(new TypeError);c.add(d.a());d=d.b();d instanceof B||g(new TypeError);c.add(d.a());R(b,c,this.o)};
sh.prototype.F=function(b,c,d){try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 1 arg, got extra "+d.b()+" calling "+this))}this.z(b,c,d.a())};function uh(){}var vh={};v["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=vh;uh.prototype=new V;uh.prototype.K=uh;uh.prototype.className="Bind_D_A_A_d";vh.wa=function(b,c,d){return $(new uh,b,c,d)};
uh.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);d instanceof B||g(new TypeError);c.add(d.a());d=d.b();d instanceof B||g(new TypeError);c.add(d.a());R(b,c,this.o)};uh.prototype.F=function(b,c,d){Rg(this,d.b(),d);this.z(b,c,d.a())};function wh(){}var xh={};v["rainbow.function.interpreted.optimise.Bind_Obound"]=xh;wh.prototype=new V;wh.prototype.K=wh;wh.prototype.className="Bind_Obound";
xh.wa=function(b,c,d){c=$(new wh,b,c,d);b=b.a();b instanceof B||g(new TypeError);b=b.b().b().a();b instanceof T||g(new TypeError);c.kd=b;return c};wh.prototype.ma=function(b,c){var d=0,f;for(f in this.p)d++;c=(new w).t(d,c);c.add(this.kd.w(c));R(b,c,this.o)};wh.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);R(b,c,this.o)};
wh.prototype.F=function(b,c,d){if(d instanceof z)this.ma(b,c);else{try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.z(b,c,d.a())}};function yh(){}var zh={};v["rainbow.function.interpreted.optimise.Bind_Oliteral"]=zh;yh.prototype=new V;yh.prototype.K=yh;yh.prototype.className="Bind_Oliteral";
zh.wa=function(b,c,d){c=$(new yh,b,c,d);c.W=b.a().b().b().a();b=b.a().b().a();b instanceof L||g(new TypeError);if(c.nb(b,c.W))b=c.pb(b,c.W,m),b instanceof V||g(new TypeError),c.ba=b;return c};yh.prototype.ma=function(b,c){if(this.ba!==l)this.ba.ma(b,c);else{var d=0,f;for(f in this.p)d++;c=(new w).t(d,c);c.add(this.W);R(b,c,this.o)}};yh.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);R(b,c,this.o)};
yh.prototype.F=function(b,c,d){if(d instanceof z)this.ma(b,c);else{try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.z(b,c,d.a())}};function Ah(){}var Bh={};v["rainbow.function.interpreted.optimise.Bind_Oother"]=Bh;Ah.prototype=new V;Ah.prototype.K=Ah;Ah.prototype.className="Bind_Oother";Bh.wa=function(b,c,d){c=$(new Ah,b,c,d);c.W=b.a().b().b().a();b=[];c.W.h(b);c.Hc=x(b);return c};
Ah.prototype.ma=function(b,c){var d=0,f;for(f in this.p)d++;c=(new w).t(d,c);F(b,new ph(c,this.o,this));R(b,c,this.Hc)};Ah.prototype.z=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);R(b,c,this.o)};Ah.prototype.F=function(b,c,d){if(d instanceof z)this.ma(b,c);else{try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.z(b,c,d.a())}};function Ch(){}var Dh={};v["rainbow.function.interpreted.optimise.Bind_R"]=Dh;
Ch.prototype=new V;Ch.prototype.K=Ch;Ch.prototype.className="Bind_R";Dh.wa=function(b,c,d){return $(new Ch,b,c,d)};Ch.prototype.F=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).t(f,c);c.add(d);R(b,c,this.o)};function Eh(){}var Fh={};v["rainbow.function.interpreted.optimise.stack.Stack_A"]=Fh;Eh.prototype=new Zg;Eh.prototype.K=Eh;Eh.prototype.className="Stack_A";Fh.Sa=function(b){return Fh.ga(b.A,b.p,$g(b.p,b.body))};Fh.ga=function(b,c,d){return $(new Eh,b,c,d)};
Eh.prototype.u=function(b,c){S(b,l,this.o,[c])};Eh.prototype.z=function(b,c,d){S(b,c,this.o,[d])};Eh.prototype.g=function(b,c){Ug(this,1,c);this.u(b,c.a())};Eh.prototype.F=function(b,c,d){Ug(this,1,d);this.z(b,c,d.a())};function Gh(){}var Hh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=Hh;Gh.prototype=new Zg;Gh.prototype.K=Gh;Gh.prototype.className="Stack_A_A";Hh.Sa=function(b){return Hh.ga(b.A,b.p,$g(b.p,b.body))};Hh.ga=function(b,c,d){return $(new Gh,b,c,d)};
Gh.prototype.V=function(b,c,d){S(b,l,this.o,[c,d])};Gh.prototype.Fa=function(b,c,d,f){S(b,c,this.o,[d,f])};Gh.prototype.g=function(b,c){Ug(this,2,c);this.V(b,c.a(),c.b().a())};Gh.prototype.F=function(b,c,d){Ug(this,2,d);this.Fa(b,c,d.a(),d.b().a())};function Ih(){}var Jh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=Jh;Ih.prototype=new Zg;Ih.prototype.K=Ih;Ih.prototype.className="Stack_A_A_A";Jh.Sa=function(b){return Jh.ga(b.A,b.p,$g(b.p,b.body))};
Jh.ga=function(b,c,d){return $(new Ih,b,c,d)};Ih.prototype.Xa=function(b,c,d,f){S(b,l,this.o,[c,d,f])};Ih.prototype.Pb=function(b,c,d,f,h){S(b,c,this.o,[d,f,h])};Ih.prototype.g=function(b,c){Ug(this,3,c);this.Xa(b,c.a(),c.b().a(),c.b().b().a())};Ih.prototype.F=function(b,c,d){Ug(this,3,d);this.Pb(b,c,d.a(),d.b().a(),d.b().b().a())};function Kh(){}var Lh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=Lh;Kh.prototype=new Zg;Kh.prototype.K=Kh;Kh.prototype.className="Stack_A_A_A_A";
Lh.Sa=function(b){return Lh.ga(b.A,b.p,$g(b.p,b.body))};Lh.ga=function(b,c,d){return $(new Kh,b,c,d)};Kh.prototype.g=function(b,c){Ug(this,4,c);var d=c.a(),f=c.b().a(),h=c.b().b().a(),k=c.b().b().b().a();S(b,l,this.o,[d,f,h,k])};Kh.prototype.F=function(b,c,d){Ug(this,4,d);var f=d.a(),h=d.b().a(),k=d.b().b().a(),d=d.b().b().b().a();S(b,c,this.o,[f,h,k,d])};function Mh(){}var Nh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=Nh;Mh.prototype=new Zg;Mh.prototype.K=Mh;
Mh.prototype.className="Stack_A_A_R";Nh.Sa=function(b){return Nh.ga(b.A,b.p,$g(b.p,b.body))};Nh.ga=function(b,c,d){return $(new Mh,b,c,d)};Mh.prototype.F=function(b,c,d){S(b,c,this.o,[d.a(),d.b().a(),d.b().b()])};function Oh(){}var Ph={};v["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=Ph;Oh.prototype=new Zg;Oh.prototype.K=Oh;Oh.prototype.className="Stack_A_R";Ph.Sa=function(b){return Ph.ga(b.A,b.p,$g(b.p,b.body))};Ph.ga=function(b,c,d){return $(new Oh,b,c,d)};
Oh.prototype.F=function(b,c,d){S(b,c,this.o,[d.a(),d.b()])};function Qh(){}var Rh={};v["rainbow.function.interpreted.optimise.stack.Stack_R"]=Rh;Qh.prototype=new Zg;Qh.prototype.K=Qh;Qh.prototype.className="Stack_R";Rh.Sa=function(b){return Rh.ga(b.A,b.p,$g(b.p,b.body))};Rh.ga=function(b,c,d){return $(new Qh,b,c,d)};Qh.prototype.F=function(b,c,d){S(b,c,this.o,[d])};function Sh(){}var Th={};v["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=Th;Sh.prototype=new Zg;Sh.prototype.K=Sh;
Sh.prototype.className="Stack_D_A_A_A_A_d";Th.Sa=function(b){return Th.ga(b.A,b.p,$g(b.p,b.body))};Th.ga=function(b,c,d){return $(new Sh,b,c,d)};Sh.prototype.u=function(b,c){S(b,l,this.o,[c.a(),c.b().a(),c.b().b().a(),c.b().b().b().a()])};Sh.prototype.z=function(b,c,d){S(b,c,this.o,[d.a(),d.b().a(),d.b().b().a(),d.b().b().b().a()])};Sh.prototype.g=function(b,c){Ug(this,1,c);this.u(b,c.a())};Sh.prototype.F=function(b,c,d){Ug(this,1,d);this.z(b,c,d.a())};function Uh(){}var Vh={};
v["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=Vh;Uh.prototype=new Zg;Uh.prototype.K=Uh;Uh.prototype.className="Stack_D_A_A_d";Vh.Sa=function(b){return Vh.ga(b.A,b.p,$g(b.p,b.body))};Vh.ga=function(b,c,d){return $(new Uh,b,c,d)};Uh.prototype.u=function(b,c){S(b,l,this.o,[c.a(),c.b().a()])};Uh.prototype.z=function(b,c,d){S(b,c,this.o,[d.a(),d.b().a()])};Uh.prototype.g=function(b,c){Ug(this,1,c);this.u(b,c.a())};Uh.prototype.F=function(b,c,d){Ug(this,1,d);this.z(b,c,d.a())};
function Wh(){}var Xh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=Xh;Wh.prototype=new Zg;Wh.prototype.K=Wh;Wh.prototype.className="Stack_A_Oliteral";Xh.Sa=function(b){var c=new Wh,d=$g(b.p,b.body),b=$(c,b.A,b.p,d);b.W=b.A.b().a().b().b().a();c=b.A.b().a().b().a();c instanceof L||g(new TypeError);if(b.nb(c,b.W))c=b.pb(c,b.W,m),c instanceof V||g(new TypeError),b.ba=c;return b};Xh.ga=function(b,c,d){c=$(new Wh,b,c,d);c.W=b.a().b().b().a();return c};r=Wh.prototype;
r.u=function(b,c){this.ba!==l?this.ba.u(b,c):S(b,l,this.o,[c,this.W])};r.V=function(b,c,d){S(b,l,this.o,[c,d])};r.z=function(b,c,d){this.ba!==l?this.ba.z(b,c,d):S(b,c,this.o,[d,this.W])};r.Fa=function(b,c,d,f){S(b,c,this.o,[d,f])};r.g=function(b,c){if(c instanceof z)Sg(this,c);else{var d=c.a();c.b()instanceof z?this.u(b,d):this.V(b,d,c.b().a())}};r.F=function(b,c,d){if(d instanceof z)Sg(this,d);else{var f=d.a();d.b()instanceof z?this.z(b,c,f):this.Bd(b,c,f,d.b().a())}};function Yh(){}var Zh={};
v["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=Zh;Yh.prototype=new Zg;Yh.prototype.K=Yh;Yh.prototype.className="Stack_Oliteral";Zh.Sa=function(b){var c=new Yh,d=$g(b.p,b.body),b=$(c,b.A,b.p,d);b.W=b.A.a().b().b().a();c=b.A.a().b().a();c instanceof L||g(new TypeError);if(b.nb(c,b.W))c=b.pb(c,b.W,m),c instanceof V||g(new TypeError),b.ba=c;return b};Zh.ga=function(b,c,d){c=$(new Yh,b,c,d);c.W=b.a().b().b().a();return c};r=Yh.prototype;
r.va=function(b){this.ba!==l?this.ba.va(b):S(b,l,this.o,[this.W])};r.u=function(b,c){S(b,l,this.o,[c])};r.ma=function(b,c){this.ba!==l?this.ba.z(b,c):S(b,c,this.o,[this.W])};r.z=function(b,c,d){S(b,c,this.o,[d])};r.g=function(b,c){c instanceof z?this.va(b):(Ug(this,1,c),this.u(b,c.a()))};r.F=function(b,c,d){d instanceof z?this.ma(b):(Ug(this,1,d),this.z(b,c,d.a()))};function $h(){Y(this,"macex")}$h.prototype=new W;$h.prototype.className="Macex";
$h.prototype.g=function(b,c){if(c instanceof z)D(b,C);else{var d=c.a();if(d instanceof B){var f=d.a();f instanceof L?f.bound()?(f=f.value(),f=mc(f),f===l?D(b,d):(d=d.b(),d instanceof B||g(new TypeError),F(b,new ai(this)),Ia(f,b,d))):D(b,d):D(b,d)}else D(b,d)}};function ai(b){this.d=l;this.m(b)}ai.prototype=new N;ai.prototype.className="Macex.Again";ai.prototype.c=function(b){this.d.g(b,A(new B,Q(b),C))};function bi(){Y(this,"uniq")}bi.prototype=new W;bi.prototype.className="Uniq";
bi.prototype.va=function(b){D(b,K("gs"+ ++ci))};bi.prototype.j=function(b){try{b.Pa()}catch(c){c instanceof Ha||g(t(new u,"uniq: expects no args, got "+b))}return K("gs"+ ++ci)};var ci=0;function di(){Y(this,"details")}di.prototype=new W;di.prototype.className="Details";di.prototype.j=function(b){var c;b=b.a();try{b instanceof Ba||g(new TypeError),c=b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+this+" expected an exception, got "+b))}return c.message()};
function ei(){Y(this,"err")}ei.prototype=new W;ei.prototype.className="Err";ei.prototype.j=function(b){g(t(new u,Tb(b.a(),this).value()))};function fi(){Y(this,"on-err")}fi.prototype=new W;fi.prototype.className="OnErr";fi.prototype.g=function(b,c){var d=new Vc(c.a(),b.O);d.m(this);F(b,d);c.b().a().g(b,C)};function gi(){Y(this,"protect");this.ud=new hi(this)}gi.prototype=new W;gi.prototype.className="Protect";function hi(b){this.sd=b}hi.prototype=new qf;hi.prototype.Yb=function(b){b.m(this.sd)};
gi.prototype.g=function(b,c){var d=A(new B,new Yc(c.b().a()),A(new B,new cd("clear up 'protect/after' return value"),C));d.l(this.ud);R(b,l,d);c.a().g(b,C)};function ii(){Y(this,"apply")}ii.prototype=new W;r=ii.prototype;r.className="Apply";r.va=function(){g(t(new u,"apply: expects at least 2 args, got none"))};r.u=function(b,c){g(t(new u,"apply: expects at least 2 args, got "+c))};r.V=function(b,c,d){d instanceof B||g(new TypeError);c.g(b,d)};r.Xa=function(b,c,d,f){c.g(b,A(new B,d,f))};
r.g=function(b,c){var d=c.a(),f=c.b();f instanceof B||g(new TypeError);d.g(b,ji(this,f))};function ji(b,c){return c.b()instanceof z?ub(c.a(),b):A(new B,c.a(),ji(b,ub(c.b(),b)))}function ki(){Y(this,"eval")}ki.prototype=new W;ki.prototype.className="Eval";ki.prototype.g=function(b,c){F(b,new li(this));Mf(b,c.a(),[])};function li(b){this.d=l;this.m(b)}li.prototype=new N;li.prototype.className="Eval.ReduceAndExecute";li.prototype.c=function(b){var c=[];Q(b).reduce().h(c);R(b,l,x(c))};
function mi(){Y(this,"ssexpand")}mi.prototype=new W;mi.prototype.className="SSExpand";mi.prototype.j=function(b){return Rf(gb(b.a(),this))};
function Rf(b){b=b.name();if(/:/.test(b)||/^~/.test(b)){b=b.split(":");if(1===b.length)b=ni(b[0]);else{for(var c=[K("compose")],d=0,f=b.length;d<f;d++)c.push(ni(b[d]));b=ob(c,C)}return b}if(Kg(b)){c=[K("andf")];b=oi(b);d=0;for(f=b.length;d<f;d++){var h=Ra(b[d]);h instanceof L||g(new TypeError);c.push(pi(h))}return x(c)}if(/[.!]/.test(b)){for(var c=b.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/),d=[],f=m,h=0,k=c.length;h<k;h++)if(""!==c[h]){var q=Ra(c[h].replace(/#p/g,
"%").replace(/#h/g,"#"));q===Va||q===ib?(f&&g(t(new u,"Bad syntax "+b)),f=j):f=m;d.unshift(q)}f&&d.unshift(K("#<eof>"));return qi(d,0)}g(t(new u,"Unknown syntax "+b))}function oi(b){if(0===b.length)return[""];if(b.charCodeAt(0)===Lg)return b=oi(b.substring(1)),b[0]=Mg+b[0],b;return b.charCodeAt(b.length-1)===Lg?(b=oi(b.substring(0,b.length-1)),b[b.length-1]+=Mg,b):b.split(Mg)}
function qi(b,c){var d=pi(b[c++]),f=l;c<b.length&&(f=b[c++],f instanceof L||g(new TypeError));d=f===ib?x([K("quote"),d]):d;return c<b.length?x([qi(b,c),d]):f!==l?x([K("get"),d]):d}function ri(b){try{return Ma(b)}catch(c){c instanceof Da||g(c),g(t(new u,"Couldn't read value of symbol: "+b,c))}}function pi(b){if(b instanceof z)return b;b instanceof L||g(new TypeError);return ri(b.name())}function ni(b){return/^~/.test(b)?x([K("complement"),ri(b.substring(1))]):ri(b)}var Mg="&",Lg=38;
function si(){Y(this,"ssyntax")}si.prototype=new W;si.prototype.className="SSyntax";si.prototype.j=function(b){return b.a()instanceof L&&Qf(b.a())?Za:C};function Qf(b){var c;c=b.name();if(!(c=/:/.test(c)||/^~/.test(c)))if(!(c=Kg(b.name())))c=/[.!]/.test(b.name());return c}function ti(){Y(this,"java-debug")}ti.prototype=new W;ti.prototype.className="JavaDebug";ti.prototype.j=function(b){return b.a()};function ui(){Y(this,"java-invoke")}ui.prototype=new W;ui.prototype.className="JavaInvoke";
ui.prototype.j=function(b){var c;var d=b.a();try{d instanceof sc||g(new TypeError),c=d}catch(f){f instanceof TypeError||g(f),g(t(new u,"Wrong argument type: "+this+" expected a java-object, got "+d))}var d=gb(b.b().a(),this).name(),h=b.b().b().a();h instanceof B||g(new TypeError);b=wc;c=c.Gc;var k=Object(c)[d];"[object Function]"!==Object.prototype.toString.call(k)&&g(t(new u,"Field "+d+" is not a method on "+c));d=k.apply(c,uc(h));return b(d)};function vi(){Y(this,"car")}vi.prototype=new W;
vi.prototype.className="Car";vi.prototype.u=function(b,c){D(b,c.a())};vi.prototype.j=function(b){Jg(b,1,this.className);return b.a().a()};function wi(){Y(this,"cdr")}wi.prototype=new W;wi.prototype.className="Cdr";wi.prototype.u=function(b,c){D(b,c.b())};wi.prototype.j=function(b){Jg(b,1,this.className);return b.a().b()};function xi(){Y(this,"cons")}xi.prototype=new W;xi.prototype.className="Cons";xi.prototype.V=function(b,c,d){D(b,A(new B,c,d))};
xi.prototype.j=function(b){Jg(b,2,this.className);return A(new B,b.a(),b.b().a())};function yi(){Y(this,"len")}yi.prototype=new W;yi.prototype.className="Len";yi.prototype.j=function(b){Pb(b,this.className,1);return new P(b.a().la(),1)};function zi(){Y(this,"newstring")}zi.prototype=new W;zi.prototype.className="NewString";
zi.prototype.j=function(b){var c=b.a();c instanceof O||g(new TypeError);var d=Kb;b.b()instanceof z||(d=b.b().a(),d instanceof Fb||g(new TypeError));for(var b=[],f=0;f<c.J();f++)b.push(d.value());return G(b.join(""))};function Ai(){Y(this,"scar")}Ai.prototype=new W;Ai.prototype.className="Scar";Ai.prototype.V=function(b,c,d){D(vm,c.Wb(d))};Ai.prototype.j=function(b){return b.a().Wb(b.b().a())};function Bi(){Y(this,"scdr")}Bi.prototype=new W;Bi.prototype.className="Scdr";
Bi.prototype.j=function(b){var c=b.a();c instanceof B||g(new TypeError);b=b.b().a();c.Kc(b);return b};function Ci(){Y(this,"acos")}Ci.prototype=new W;Ci.prototype.className="Acos";Ci.prototype.j=function(b){Pb(b,this.className,1);b=Math.acos(jb(b.a(),this).G());return new I(b)};function Di(){Y(this,"+")}Di.prototype=new W;r=Di.prototype;r.className="Add";r.va=function(b){D(b,hc)};r.u=function(b,c){D(b,c)};r.V=function(b,c,d){D(b,c.add(d))};r.Xa=function(b,c,d,f){D(b,c.add(d).add(f))};
r.j=function(b){if(b instanceof z)return hc;for(var c=b.a(),b=b.b();!(b instanceof z);)c=c.add(b.a()),b=b.b();return c};function Ei(){Y(this,"asin")}Ei.prototype=new W;Ei.prototype.className="Asin";Ei.prototype.j=function(b){Pb(b,this.className,1);b=Math.asin(jb(b.a(),this).G());return new I(b)};function Fi(){Y(this,"atan")}Fi.prototype=new W;Fi.prototype.className="Atan";Fi.prototype.j=function(b){Pb(b,this.className,1);b=Math.atan(jb(b.a(),this).G());return new I(b)};
function Gi(){Y(this,"complex-parts")}Gi.prototype=new W;Gi.prototype.className="ComplexParts";Gi.prototype.j=function(b){Pb(b,this.className,1);b=bc(b.a(),this);return x([new I(b.Y),new I(b.Q)])};function Hi(){Y(this,"cos")}Hi.prototype=new W;Hi.prototype.className="Cosine";Hi.prototype.j=function(b){Pb(b,this.className,1);b=Math.cos(jb(b.a(),this).G());return new I(b)};function Ii(){Y(this,"/")}Ii.prototype=new W;Ii.prototype.className="Divide";
Ii.prototype.j=function(b){b instanceof z&&g(t(new u,"Function `/` expected at least 1 arg"));return Ji(b).Ac(b)};function Ki(){Y(this,"expt")}Ki.prototype=new W;Ki.prototype.className="Expt";Ki.prototype.j=function(b){Pb(b,this.className,2);var c=b.a();c instanceof O||g(new TypeError);b=b.b().a();b instanceof O||g(new TypeError);if(c instanceof J)return ec(c,b);if(b instanceof J)return ec(new J(c.G(),0),b);c=c.G();b=b.G();return new I(Math.pow(c,b))};function Li(){Y(this,"log")}Li.prototype=new W;
Li.prototype.className="Logarithm";Li.prototype.j=function(b){Pb(b,this.className,1);b=jb(b.a(),this);return b instanceof J?b.log():new I(Math.log(b.G()))};function Mi(){Y(this,"make-complex")}Mi.prototype=new W;Mi.prototype.className="MakeComplex";Mi.prototype.j=function(b){Pb(b,this.className,2);var c=jb(b.a(),this),b=jb(b.b().a(),this);return new J(c.G(),b.G())};function Ni(){for(;;){var b=Math.floor(9007199254740992*Math.pd());if(9007199254740992>b)return b}}
function Ji(b){if(b instanceof z)return Oi;if(b.a()instanceof I)return Pi;if(b.a()instanceof J)return complexOps;b.b()instanceof B||g(new TypeError);return Ji(b.b())}function Qi(){}Qi.prototype.rc=i;Qi.prototype.multiply=i;Qi.prototype.Ac=i;function Ri(){}Ri.prototype=new Qi;Ri.prototype.rc=function(b){return Ta(Si(this,b))};function Si(b,c){if(c instanceof z)return 0;var d=c.a();d instanceof O||g(new TypeError);var d=d.G(),f=c.b();f instanceof B||g(new TypeError);return d+Si(b,f)}
Ri.prototype.multiply=function(b){return Ta(Ti(this,b))};Ri.prototype.Ac=function(b){var c=b.b(),d=b.a();d instanceof O||g(new TypeError);c=c instanceof z?1/d.G():d.G();b=b.b();b instanceof B||g(new TypeError);return Ta(c/Ti(this,b))};function Ti(b,c){if(c instanceof z)return 1;var d=c.a();d instanceof O||g(new TypeError);var d=d.G(),f=c.b();f instanceof B||g(new TypeError);f=Ti(b,f);return d*f}var Pi=new Ri;function Ui(){}Ui.prototype=new Qi;
Ui.prototype.rc=function(b){if(b instanceof z)return hc;var c=b.a();c instanceof P||g(new TypeError);b=b.b();b instanceof B||g(new TypeError);return c.Tb(this.rc(b))};Ui.prototype.multiply=function(b){if(b instanceof z)return jc;var c=b.a();c instanceof P||g(new TypeError);b=b.b();b instanceof B||g(new TypeError);return gc(c,this.multiply(b))};
Ui.prototype.Ac=function(b){var c=b.b(),d=b.a();d instanceof P||g(new TypeError);c=c instanceof z?new P(d.S,d.fa):d;b=b.b();b instanceof B||g(new TypeError);b=this.multiply(b);b=new P(b.S,b.fa);return gc(c,b)};var Oi=new Ui;function Vi(){Y(this,"mod")}Vi.prototype=new W;Vi.prototype.className="Mod";Vi.prototype.V=function(b,c,d){c instanceof O||g(new TypeError);d instanceof O||g(new TypeError);D(b,c.Vc(d))};Vi.prototype.g=function(b,c){Pb(c,this.className,2);this.V(b,c.a(),c.b().a())};
function Wi(){Y(this,"*")}Wi.prototype=new W;r=Wi.prototype;r.className="Multiply";r.va=function(b){D(b,jc)};r.u=function(b,c){D(b,c)};r.V=function(b,c,d){D(b,c.multiply(d))};r.Xa=function(b,c,d,f){D(b,c.multiply(d).multiply(f))};r.j=function(b){if(b instanceof z)return jc;for(var c=b.a(),b=b.b();!(b instanceof z);)c=c.multiply(b.a()),b=b.b();return c};function Xi(){Y(this,"polar-coordinates")}Xi.prototype=new W;Xi.prototype.className="PolarCoordinates";
Xi.prototype.j=function(b){Pb(b,this.className,1);b=bc(b.a(),this);return x([new I(Math.sqrt(b.Y*b.Y+b.Q*b.Q)),new I(Math.atan2(b.Q,b.Y))])};function Yi(){Y(this,"quotient")}Yi.prototype=new W;Yi.prototype.className="Quotient";Yi.prototype.j=function(b){Jg(b,2,this.className);var c=kb(b.a(),this),d=kb(b.b().a(),this);(!c.na()||!d.na())&&g(t(new u,"Type error: "+this+" : expected integer, got "+b));b=c.J()/d.J();return H(0>b?Math.ceil(b):Math.floor(b))};function Zi(){Y(this,"rand")}Zi.prototype=new W;
Zi.prototype.className="Rand";Zi.prototype.j=function(b){if(b instanceof z)return new I(Math.pd());var c=b.a();c instanceof O||g(new TypeError);c.na()||g(t(new u,"rand: requires one exact integer argument, got "+b));return new P(Math.abs(Ni()%c.J()),1)};function $i(){Y(this,"sin")}$i.prototype=new W;$i.prototype.className="Sine";$i.prototype.j=function(b){Pb(b,this.className,1);b=Math.sin(jb(b.a(),this).G());return new I(b)};function aj(){Y(this,"sqrt")}aj.prototype=new W;aj.prototype.className="Sqrt";
aj.prototype.u=function(b,c){D(b,c.sqrt())};aj.prototype.g=function(b,c){Jg(c,1,this.className);this.u(b,c.a())};function bj(){Y(this,"-")}bj.prototype=new W;r=bj.prototype;r.className="Subtract";r.u=function(){g(t(new u,"- : expected at least 1 arg"))};r.u=function(b,c){c instanceof O||g(new TypeError);D(b,c.tb())};r.V=function(b,c,d){d instanceof O||g(new TypeError);D(b,c.add(d.tb()))};
r.j=function(b){b instanceof z&&g(t(new u,"Function `-` expected at least 1 arg"));var c=b.a();c instanceof O||g(new TypeError);c=c.tb();b=b.b();b instanceof B||g(new TypeError);b instanceof z?b=c:(b=A(new B,c,b),b=Ji(b).rc(b).tb());return b};function cj(){Y(this,"tan")}cj.prototype=new W;cj.prototype.className="Tangent";cj.prototype.j=function(b){Pb(b,this.className,1);b=Math.tan(jb(b.a(),this).G());return new I(b)};function dj(){Y(this,"trunc")}dj.prototype=new W;dj.prototype.className="Trunc";
dj.prototype.j=function(b){Pb(b,this.className,1);b=b.a();b instanceof O||g(new TypeError);b=b.G();return new P(Math.floor(b),1)};function ej(){Y(this,"bound")}ej.prototype=new W;ej.prototype.className="Bound";ej.prototype.va=function(){g(t(new u,"bound: requires 1 arg"))};ej.prototype.u=function(b,c){c instanceof L||g(new TypeError);D(b,Cb(c.bound()))};ej.prototype.j=function(b){Pb(b,this.className,1);b=gb(b.a(),this);return Cb(b.bound())};function fj(){Y(this,"exact")}fj.prototype=new W;
fj.prototype.className="Exact";fj.prototype.j=function(b){b=jb(b.a(),this);return Cb(b instanceof P&&b.na())};function gj(){Y(this,">")}gj.prototype=new W;r=gj.prototype;r.className="GreaterThan";r.va=function(b){D(b,Za)};r.u=function(b){D(b,Za)};r.V=function(b,c,d){D(b,0>=c.sa(d)?C:Za)};r.j=function(b){if(2>b.la())return Za;var c=b.a(),b=b.b();for(b instanceof B||g(new TypeError);!(b instanceof z);){var d=b.a();if(0>=c.sa(d))return C;c=d;b=b.b();b instanceof B||g(new TypeError)}return Za};
function hj(){Y(this,"is")}hj.prototype=new W;r=hj.prototype;r.className="Is";r.va=function(b){D(b,Za)};r.u=function(b){D(b,Za)};r.V=function(b,c,d){D(b,Cb(c.Ha(d)))};r.j=function(b){return ij(this,b.a(),b.b())};function ij(b,c,d){return d instanceof z?Za:!c.Ha(d.a())?C:ij(b,c,d.b())}function jj(){Y(this,"<")}jj.prototype=new W;r=jj.prototype;r.className="LessThan";r.va=function(b){D(b,Za)};r.u=function(b){D(b,Za)};r.V=function(b,c,d){D(b,0>c.sa(d)?Za:C)};
r.j=function(b){var c=b.a(),b=b.b();for(b instanceof B||g(new TypeError);!(b instanceof z);){var d=b.a();if(0<=c.sa(d))return C;c=d;b=b.b();b instanceof B||g(new TypeError)}return Za};function kj(){Y(this,"rainbow-debug")}kj.prototype=new W;kj.prototype.className="RainbowDebug";kj.prototype.g=function(b){Oc(b,Ef);D(b,K(this.ea))};function lj(){Y(this,"rainbow-profile")}lj.prototype=new W;lj.prototype.className="RainbowProfile";lj.prototype.va=function(b){this.profile(b);D(b,C)};
lj.prototype.u=function(b,c){c instanceof pc||g(new TypeError);this.profile(c);D(b,C)};lj.prototype.profile=function(b){Oc(b,Jf)};function mj(){Y(this,"rainbow-profile-report")}mj.prototype=new W;mj.prototype.className="RainbowProfileReport";mj.prototype.va=function(b){D(b,this.qd(b))};mj.prototype.u=function(b,c){c instanceof pc||g(new TypeError);D(b,this.qd(b))};function nj(){Y(this,"current-gc-milliseconds")}nj.prototype=new W;nj.prototype.className="CurrentGcMilliseconds";
nj.prototype.g=function(b){D(b,H(1))};function oj(){Y(this,"current-process-milliseconds")}oj.prototype=new W;oj.prototype.className="CurrentProcessMilliseconds";oj.prototype.g=function(b){D(b,H(1))};function pj(){Y(this,"declare")}pj.prototype=new W;pj.prototype.className="Declare";pj.prototype.V=function(b,c,d){c===qj?(c=Nf,Nf=d,D(b,c)):D(b,C)};pj.prototype.g=function(b,c){this.V(b,c.a(),c.b().a())};var qj=K("atstrings");function rj(){Y(this,"msec")}rj.prototype=new W;rj.prototype.className="MSec";
rj.prototype.j=function(){return H((new Date).getTime())};function sj(){Y(this,"seconds")}sj.prototype=new W;sj.prototype.className="Seconds";sj.prototype.j=function(){var b=(new Date).getTime()/1E3;return H(0>b?Math.ceil(b):Math.floor(b))};function tj(){Y(this,"maptable")}tj.prototype=new W;tj.prototype.className="MapTable";tj.prototype.V=function(b,c,d){D(b,d);d instanceof Fa||g(new TypeError);D(b,zc(d));c=new fd(c);c.m(this);F(b,c)};
tj.prototype.g=function(b,c){Jg(c,2,this.className);this.V(b,c.a(),c.b().a())};function uj(){Y(this,"sref")}uj.prototype=new W;uj.prototype.className="Sref";uj.prototype.Xa=function(b,c,d,f){D(b,c.qc(d,f))};uj.prototype.g=function(b,c){Jg(c,3,this.className);this.Xa(b,c.a(),c.b().a(),c.b().b().a())};function vj(){Y(this,"table")}vj.prototype=new W;vj.prototype.className="Table";
vj.prototype.g=function(b,c){var d=new Fa;D(b,d);if(!(c instanceof z)){var f=new cd("table-initialiser");f.m(this);F(b,f);c.a().g(b,x([d]))}};function wj(){Y(this,"atomic-invoke")}wj.prototype=new W;wj.prototype.className="AtomicInvoke";wj.prototype.u=function(b,c){for(;b!==xj&&xj!==l;);xj=b;yj++;var d=new zj;d.m(this);F(b,d);c.g(b,C)};wj.prototype.g=function(b,c){this.u(b,c.a())};function zj(){this.d=l}zj.prototype=new N;zj.prototype.className="AtomicInvoke.ReleaseLock";
zj.prototype.c=function(){yj--;0===yj&&(xj=l)};var xj=l,yj=0;function Aj(){Y(this,"break-thread")}Aj.prototype=new W;Aj.prototype.className="BreakThread";Aj.prototype.j=function(b){b=b.a();b instanceof pc||g(new TypeError);Oc(b,Gf);return C};function Bj(){Y(this,"ccc")}Bj.prototype=new W;Bj.prototype.className="CCC";Bj.prototype.u=function(b,c){c instanceof z&&g(t(new u,"Can't ccc nil!"));var d=new Cj(b);c.u(b,d)};Bj.prototype.g=function(b,c){Pb(c,this.className,1);this.u(b,c.a())};
function Cj(b){this.Xb=b.copy();this.zd=m}Cj.prototype=new y;r=Cj.prototype;r.className="CCC.ContinuationWrapper";r.u=function(b,c){var d;a:{for(d=0;d<b.i;d++)if(b.H[d]!==this.Xb.H[d]){d-=1;break a}d=b.i}for(var f=[],h=[];d<b.i;)Gc(b).a().Ob&&(f.push(Gc(b)),h.push(b.ka[b.i])),b.i--;d=[f,h];this.Xb.copyTo(b);D(b,c);for(f=d[0].length-1;0<=f;f--)h=d[1][f],h instanceof w||g(new TypeError),d[0][f]instanceof B||g(new TypeError),R(b,h,instructions)};r.g=function(b,c){this.u(b,c.a())};r.type=function(){return Ig};
r.toString=function(){return"#<continuation ip:"+this.Xb.i+";ap:"+this.Xb.O+";VM#"+this.Xb.Lc+">"};function Dj(){Y(this,"dead")}Dj.prototype=new W;Dj.prototype.className="Dead";Dj.prototype.g=function(b,c){var d=c.a();d instanceof pc||g(new TypeError);D(b,Cb(d.dc))};function Ej(){Y(this,"kill-thread")}Ej.prototype=new W;Ej.prototype.className="KillThread";Ej.prototype.g=function(b,c){var d=c.a();d instanceof pc||g(new TypeError);Oc(d,Gf);D(b,C)};function Fj(){Y(this,"thread-local")}Fj.prototype=new W;
Fj.prototype.className="NewThreadLocal";Fj.prototype.j=function(){return new Yb};function Gj(){Y(this,"thread-local-ref")}Gj.prototype=new W;Gj.prototype.className="ThreadLocalGet";Gj.prototype.j=function(b){return $b(b.a(),this).get()};function Hj(){Y(this,"thread-local-set")}Hj.prototype=new W;Hj.prototype.className="ThreadLocalSet";Hj.prototype.j=function(b){var c=$b(b.a(),this),b=b.b().a();c.set(b);return b};function Ij(){Y(this,"annotate")}Ij.prototype=new W;Ij.prototype.className="Annotate";
Ij.prototype.j=function(b){var c=b.a(),b=b.b().a();return c===b.type()?b:new lc(c,b)};function Jj(){Y(this,"coerce");Kj()}Jj.prototype=new W;Jj.prototype.className="Coerce";Jj.prototype.V=function(b,c,d){var f=c.type();if(f===d)D(b,c);else try{d instanceof L||g(new TypeError),f instanceof L||g(new TypeError),(d.Bb[f]||l).u(b,c)}catch(h){h instanceof Lj&&g(t(new u,"Can't coerce "+c+" to "+d)),g(t(new u,"Can't coerce "+c+" ( a "+c.type()+" ) to "+d,h))}};
Jj.prototype.Xa=function(b,c,d,f){var h=c.type();if(h===d)D(b,c);else try{d instanceof L||g(new TypeError),h instanceof L||g(new TypeError),(d.Bb[h]||l).V(b,c,f)}catch(k){k instanceof Lj&&g(t(new u,"Can't coerce "+c+" to "+d)),g(t(new u,"Can't coerce "+c+" ( a "+c.type()+" ) to "+d,k))}};Jj.prototype.g=function(b,c){c.Cb(2)?this.V(b,c.a(),c.b().a()):c.Cb(3)?this.Xa(b,c.a(),c.b().a(),c.b().b().a()):g(t(new u,"coerce expects 2 or 3 args, got "+c))};function Mj(){Y(this,"rep")}Mj.prototype=new W;
Mj.prototype.className="Rep";Mj.prototype.j=function(b){var c=b.a(),d;if(c instanceof lc){b=b.a();try{b instanceof lc||g(new TypeError),d=b}catch(f){f instanceof TypeError||g(f),g(t(new u,"Wrong argument type: "+this+" expected a Tagged, got "+b))}d=d.xb}else d=c;return d};function Nj(){Y(this,"type")}Nj.prototype=new W;Nj.prototype.className="Type";Nj.prototype.u=function(b,c){D(b,c.type())};Nj.prototype.j=function(b){Pb(b,this.className,1);return b.a().type()};
var Rb=K("string"),Oj=K("sym"),Pj=K("int"),Qj=K("num"),Rj=K("cons"),Sj=K("char");
function Kj(){hb(Rj,Rb,new Sb("string-cons",function(b){b instanceof Oa||g(new TypeError);for(var b=b.value(),c=[],d=0;d<b.length;d++)c.push(Pa(b.charCodeAt(d)));return x(c)}));hb(Rb,Rj,new Sb("cons-string",function(b){b instanceof B||g(new TypeError);for(var c=[];!(b instanceof z);)c.push(b.a().cb()),b=b.b(),b instanceof B||g(new TypeError);return G(c.join(""))}));hb(Rb,Pj,new Sb("int-string",function(b){return this.Ab(b,kc)},function(b,c){c instanceof O||g(new TypeError);b instanceof O||g(new TypeError);
var d;b instanceof J?d=G(b.toString()):(b instanceof I&&10!==c.J()&&g(new Lj),d=b instanceof P?b.stringify(c):Tj(b,c));return d}));hb(Rb,Qj,new Sb("num-string",function(b){return this.Ab(b,kc)},function(b,c){c instanceof O||g(new TypeError);b instanceof O||g(new TypeError);var d;b instanceof J?d=G(b.toString()):(b instanceof I&&10!==c.J()&&g(new Lj),d=b instanceof P?b.stringify(c):Tj(b,c));return d}));hb(Oj,Rb,new Sb("string-sym",function(b){b instanceof Oa||g(new TypeError);return Ra(b.value())}));
hb(Rb,Oj,new Sb("sym-string",function(b){return b instanceof z?G(""):G(b.cb())}));hb(Pj,Sj,new Sb("char-int",function(b){b instanceof Fb||g(new TypeError);b=b.value();return H(b)},function(b){return this.Kb(b)}));hb(Pj,Qj,new Sb("num-int",function(b){b instanceof O||g(new TypeError);return b.round()},function(b){return this.Kb(b)}));hb(Qj,Pj,new Sb("int-num",aa()));hb(Sj,Pj,new Sb("int-char",function(b){b instanceof O||g(new TypeError);b.na()||g(new Lj);return Pa(b.J())}));hb(Rb,Sj,new Sb("char-string",
function(b){b instanceof Fb||g(new TypeError);b=b.value();return G(String.fromCharCode(b))}));hb(Oj,Sj,new Sb("char-sym",function(b){b instanceof Fb||g(new TypeError);b=b.value();return Ra(String.fromCharCode(b))}));hb(Qj,Rb,new Sb("string-num",function(b){return this.Ab(b,kc)},function(b,c){c instanceof O||g(new TypeError);b instanceof Oa||g(new TypeError);var d=b.value().toLowerCase();if("+inf.0"===d)d=new I(1/0);else if("-inf.0"===d)d=new I(-1/0);else if("+nan.0"===d)d=new I(0/0);else{var f;if(/i$/i.test(d))try{f=
ac()}catch(h){h instanceof Da||g(h),g(new Lj)}else/\./.test(d)||15>c.J()&&/.e./.test(d)?d=Uj(d,c.J()):/\//.test(d)?d=Vj(d,c.J()):(f=c.J(),d=H(parseInt(d,~~f))),f=d;d=f}return d}));hb(Pj,Rb,new Sb("string-int",function(b){return this.Ab(b,kc)},function(b,c){c instanceof O||g(new TypeError);b instanceof Oa||g(new TypeError);var d=b.value().toLowerCase();("+inf.0"===d||"-inf.0"===d||"+nan.0"===d||/i$/i.test(d))&&g(new Lj);if(/\./.test(d)||15>c.J()&&/.e./i.test(d))return d=Uj(d,c.J()),d instanceof I||
g(new TypeError),d.oc();if(/\//.test(d))return d=Vj(d,c.J()),d instanceof P||g(new TypeError),d.oc();var f=c.J();return H(parseInt(d,~~f))}))}function Tj(b,c){if(10===c.J())return G(b.toString());var d=b.J().toString(~~c.J());return G(""+d+".0")}function Vj(b,c){var d=b.split(/\//g);2<d.length&&g(new Lj);return new P(parseInt(d[0],~~c),parseInt(d[1],~~c))}
function Uj(b,c){var d=m;/^-/.test(b)&&(d=j,b=b.substring(1));b=b.toUpperCase();/E/.test(b)||(b+="E0");if(/\./.test(b))/^\./.test(b)&&(b="0"+b);else var f=b.split(/E/g),b=f[0]+".0E"+f[1];var f=b.split(/\./g),h=parseInt(f[0],~~c),f=f[1].split(/E/g);/^\+/.test(f[1])&&(f[1]=f[1].substring(1));f=(h+parseInt(f[0],~~c)/Math.pow(c,f[0].length))*Math.pow(c,parseInt(f[1],~~c));d&&(f=-f);return Ta(f)}function Sb(b,c,d){this.ea=b;if(c!==i)this.Kb=c;if(d!==i)this.Ab=d}Sb.prototype=new y;r=Sb.prototype;
r.className="Typing.Coercion";r.type=function(){return K("fn")};r.Kb=function(){g(t(new u,"not implemented: "+name+".coerce 1 arg"))};r.Ab=function(){g(t(new u,"not implemented: "+name+".coerce 2 args"))};r.u=function(b,c){D(b,this.Kb(c))};r.V=function(b,c,d){D(b,this.Ab(c,d))};function Lj(){}Lj.prototype=Error();function Wj(b){this.xa=b}Wj.prototype=new Db;r=Wj.prototype;r.className="Input";
r.mc=function(b,c){return this.xa.mc(function(c,f){return c?b(t(new u,"Cannot read byte from "+this,c)):f===l?b(l,C):b(l,H(f))},c)};function Xj(b,c,d){return b.xa.nc(function(b,d){return b?c(t(new u,"reading character: "+b)):d===l?c(l,C):c(l,Pa(d))},d)}function Yj(b,c,d,f){return Na(b.xa,function(b,f){return b?d(t(new u,"Can't parse input: "+b,b)):f===l?d(l,c):d(l,f)},f)}r.type=function(){return Zj};r.ra=o("xa");r.close=function(){this.yd=j;this.xa.close()};
function $j(b,c){try{return b instanceof Wj||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected input-port, got "+b))}}var Zj=K("input");function ak(b){this.lb=b}ak.prototype=new Db;r=ak.prototype;r.className="Output";r.write=function(b){this.lb.ab(""+b)};r.type=function(){return bk};r.ra=o("lb");r.close=function(){this.lb.close()};r.uc=function(b){this.lb.uc(b)};
function ck(b,c){try{return b instanceof ak||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected output-port, got "+b))}}r.flush=function(){this.lb.flush()};var bk=K("output");
function sa(b){function c(){if(b.length<=h)return m;var c=b.charCodeAt(h++);f.push(c>>>8&255,c&255);return j}function d(){return 0!==f.length||c()?f.shift():l}var f=[],h=0;Wj.call(this,{mc:function(b){b(l,d());return j},nc:function(b){var c=d(),f=d();b(l,f===l?l:c<<8|f);return j},mb:function(b){b(l,2<=f.length||c()?f[0]<<8|f[1]:l);return j},close:n()})}sa.prototype=new Wj(i);sa.prototype.className="StringInputPort";
function dk(){var b=this;b.Sb=[];b.sb=l;ak.call(this,{ab:function(c){if(b.sb===l)b.Sb.push(c);else for(var d=0,f=c.length;d<f;d++){var h=c.charCodeAt(d);b.Sb.push(String.fromCharCode(b.sb<<8|h>>>8&255));b.sb=h&255}},uc:function(c){b.sb===l?b.sb=c:(b.Sb.push(String.fromCharCode(b.sb<<8|c)),b.sb=l)},close:n(),flush:n()})}dk.prototype=new ak(i);dk.prototype.className="StringOutputPort";dk.prototype.value=function(){var b=this.Sb.join("");this.Sb=[b];return G(b)};dk.prototype.toString=p("#<string-output-port>");
function ek(){this.lb=ka}ek.prototype=new ak(i);ek.prototype.className="IO.Anon_STD_OUT_";ek.prototype.close=n();ek.prototype.toString=p("IO.STD_OUT");var fk=new ek;function gk(){this.lb=la}gk.prototype=new ak(i);gk.prototype.className="IO.Anon_STD_ERR_";gk.prototype.close=n();gk.prototype.toString=p("IO.STD_ERR");var hk=new gk;function ik(){this.xa=ja}ik.prototype=new Wj(i);ik.prototype.className="IO.Anon_STD_IN_";ik.prototype.close=n();ik.prototype.toString=p("IO.STD_IN");
var jk={value:new ik},kk={value:fk};function lk(b,c){return b instanceof z?kk.value:ck(b,c)}function mk(b,c){return b instanceof z?jk.value:$j(b,c)}function pk(b){for(;!(b instanceof z);){var c=b.a();c instanceof Wj?c.close():c instanceof ak?c.close():c instanceof sc?c.close():g(t(new u,"close: expected Input or Output object; got "+c));b=b.b();b instanceof B||g(new TypeError)}return C}function qk(){Y(this,"close")}qk.prototype=new W;qk.prototype.className="Close_Builtin";qk.prototype.j=function(b){return pk(b)};
function rk(){Y(this,"disp")}rk.prototype=new W;rk.prototype.className="Disp";rk.prototype.u=function(b,c){kk.value.write(c.cb());D(b,C)};rk.prototype.j=function(b){var c=lk(b.b().a(),this),b=b.a();c.write(b.cb());return C};function sk(){Y(this,"flushout")}sk.prototype=new W;sk.prototype.className="FlushOut";sk.prototype.j=function(){kk.value.flush();return Za};function tk(){Y(this,"force-close")}tk.prototype=new W;tk.prototype.className="ForceClose";tk.prototype.j=function(b){return pk(b)};
function uk(){Y(this,"stderr")}uk.prototype=new W;uk.prototype.className="StdErr";uk.prototype.j=function(){return hk};function vk(){Y(this,"stdin")}vk.prototype=new W;vk.prototype.className="StdIn";vk.prototype.j=function(b){Jg(b,0,this.className);return jk.value};function wk(){Y(this,"stdout")}wk.prototype=new W;wk.prototype.className="StdOut";wk.prototype.j=function(){return kk.value};function xk(){Y(this,"write")}xk.prototype=new W;xk.prototype.className="Write";
xk.prototype.j=function(b){lk(b.b().a(),this).write(b.a());return C};function yk(){Y(this,"writeb")}yk.prototype=new W;yk.prototype.className="WriteB";yk.prototype.j=function(b){var c=lk(b.b().a(),this),b=kb(b.a(),this);b.na()||g(t(new u,"write byte: expected byte, got "+b));c.uc(b.J());return C};function zk(){Y(this,"writec")}zk.prototype=new W;zk.prototype.className="WriteC";zk.prototype.j=function(b){var c=lk(b.b().a(),this),d=Ib(b.a(),this);c.lb.ab(String.fromCharCode(d.value()));return b.a()};
function Ak(){Y(this,"instring")}Ak.prototype=new W;Ak.prototype.className="InString";Ak.prototype.j=function(b){return new sa(Tb(b.a(),this).value())};function Bk(){Y(this,"inside")}Bk.prototype=new W;Bk.prototype.className="Inside";Bk.prototype.j=function(b){var c;b=b.a();try{b instanceof dk||g(new TypeError),c=b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+this+" expected a StringOutputPort, got "+b))}return c.value()};function Ck(){Y(this,"outstring")}Ck.prototype=new W;
Ck.prototype.className="OutString";Ck.prototype.j=function(){return new dk};function Dk(){Y(this,"call-w/stdin")}Dk.prototype=new W;Dk.prototype.className="CallWStdIn";Dk.prototype.g=function(b,c){var d=new dd(jk,jk.value);d.m(this);F(b,d);jk.value=$j(c.a(),this);c.b().a().g(b,C)};function Ek(){Y(this,"call-w/stdout")}Ek.prototype=new W;Ek.prototype.className="CallWStdOut";Ek.prototype.g=function(b,c){var d=new dd(kk,kk.value);d.m(this);F(b,d);kk.value=ck(c.a(),this);c.b().a().g(b,C)};
function Fk(){Y(this,"readb")}Fk.prototype=new W;Fk.prototype.className="ReadB";Fk.prototype.u=function(b,c){F(b,new Gk(mk(c,this),this))};Fk.prototype.g=function(b,c){F(b,new Gk(mk(c.a(),this),this))};function Gk(b,c){this.d=l;this.Ub=b;this.m(c)}Gk.prototype=new N;Gk.prototype.Ea=j;Gk.prototype.className="ReadB.Go";Gk.prototype.Ma=function(b,c,d){return this.Ub.mc(function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Gk.prototype.c=function(){g(Error())};function Hk(){Y(this,"readc")}
Hk.prototype=new W;Hk.prototype.className="ReadC";Hk.prototype.u=function(b,c){F(b,new Ik(mk(c,this),this))};Hk.prototype.g=function(b,c){F(b,new Ik(mk(c.a(),this),this))};function Ik(b,c){this.d=l;this.Ub=b;this.m(c)}Ik.prototype=new N;Ik.prototype.Ea=j;Ik.prototype.className="ReadC.Go";Ik.prototype.Ma=function(b,c,d){return Xj(this.Ub,function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Ik.prototype.c=function(){g(Error())};function Jk(){Y(this,"sread")}Jk.prototype=new W;
Jk.prototype.className="Sread";Jk.prototype.g=function(b,c){F(b,new Kk($j(c.a(),this),c.b().a(),this))};function Kk(b,c,d){this.d=l;this.Ub=b;this.fd=c;this.m(d)}Kk.prototype=new N;Kk.prototype.Ea=j;Kk.prototype.className="Sread.Go";Kk.prototype.Ma=function(b,c,d){return Yj(this.Ub,this.fd,function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Kk.prototype.c=function(){g(Error())};function Lk(){Y(this,"dir")}Lk.prototype=new W;Lk.prototype.className="Dir";
Lk.prototype.g=function(b,c){F(b,new Mk(Tb(c.a(),this).value(),this))};function Mk(b,c){this.d=l;this.Ya=b;this.m(c)}Mk.prototype=new N;Mk.prototype.Ea=j;Mk.prototype.className="Dir.Go";Mk.prototype.Ma=function(b,c){return oa(function(d,f){if(d)return void c(d);D(b,f);c(l)})};Mk.prototype.c=function(){g(Error())};function Nk(){Y(this,"dir-exists")}Nk.prototype=new W;Nk.prototype.className="DirExists";Nk.prototype.g=function(b,c){F(b,new Ok(c.a(),this))};
function Ok(b,c){this.d=l;this.Ya=b;this.m(c)}Ok.prototype=new N;Ok.prototype.Ea=j;Ok.prototype.className="DirExists.Go";Ok.prototype.Ma=function(b,c){return pa(Tb(this.Ya,this.d).value(),function(d,f){if(d)return void c(d);D(b,f?this.Ya:C);c(l)})};Ok.prototype.c=function(){g(Error())};function Pk(){Y(this,"file-exists")}Pk.prototype=new W;Pk.prototype.className="FileExists";Pk.prototype.g=function(b,c){F(b,new Qk(c.a(),this))};function Qk(b,c){this.d=l;this.Ya=b;this.m(c)}Qk.prototype=new N;
Qk.prototype.Ea=j;Qk.prototype.className="FileExists.Go";Qk.prototype.Ma=function(b,c,d){return qa(Tb(this.Ya,this.d).value(),function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Qk.prototype.c=function(){g(Error())};function Rk(){Y(this,"infile")}Rk.prototype=new W;Rk.prototype.className="InFile";Rk.prototype.g=function(b,c){F(b,new Sk(Tb(c.a(),this).value(),this))};function Sk(b,c){this.d=l;this.Ya=b;this.m(c)}Sk.prototype=new N;Sk.prototype.Ea=j;Sk.prototype.className="InFile.Go";
Sk.prototype.Ma=function(b,c,d){return ra(this.Ya,function(d,h){if(d)return void c(d);D(b,new Wj(h));c(l)},d)};Sk.prototype.c=function(){g(Error())};function Tk(){Y(this,"outfile")}Tk.prototype=new W;Tk.prototype.className="OutFile";Tk.prototype.g=function(b,c){var d=Tb(c.a(),this).value(),f=c.b().a(),f=!(f instanceof z)&&"append"===gb(f,this).name();F(b,new Uk(d,f,this))};function Uk(b,c,d){this.d=l;this.ea=b;this.wd=c;this.m(d)}Uk.prototype=new N;Uk.prototype.Ea=j;Uk.prototype.className="OutFile.Go";
Uk.prototype.Ma=function(b,c){return ta(function(d,f){if(d)return void c(d);D(b,new ak(f));c(l)})};Uk.prototype.c=function(){g(Error())};function Vk(){Y(this,"make-directory")}Vk.prototype=new W;Vk.prototype.className="MakeDirectory";Vk.prototype.g=function(b,c){F(b,new Wk(Tb(c.a(),this).value(),this))};function Wk(b,c){this.d=l;this.Ya=b;this.m(c)}Wk.prototype=new N;Wk.prototype.Ea=j;Wk.prototype.className="MakeDirectory.Go";
Wk.prototype.Ma=function(b,c){return ua(function(d,f){if(d)return void c(d);D(b,f?Ab:Bb.bd);c(l)})};Wk.prototype.c=function(){g(Error())};function Xk(){Y(this,"make-directory*")}Xk.prototype=new W;Xk.prototype.className="MakeDirectories";Xk.prototype.g=function(b,c){F(b,new Yk(Tb(c.a(),this).value(),this))};function Yk(b,c){this.d=l;this.Ya=b;this.m(c)}Yk.prototype=new N;Yk.prototype.Ea=j;Yk.prototype.className="MakeDirectories.Go";
Yk.prototype.Ma=function(b,c){return va(function(d,f){if(d)return void c(d);D(b,f?Ab:Bb.bd);c(l)})};Yk.prototype.c=function(){g(Error())};function Zk(){Y(this,"mvfile")}Zk.prototype=new W;Zk.prototype.className="MvFile";Zk.prototype.g=function(b,c){F(b,new $k(Tb(c.a(),this).value(),Tb(c.b().a(),this).value(),this))};function $k(b,c,d){this.d=l;this.Hd=b;this.Gd=c;this.m(d)}$k.prototype=new N;$k.prototype.Ea=j;$k.prototype.className="MvFile.Go";
$k.prototype.Ma=function(b,c){return wa(function(d){if(d)return void c(d);D(b,C);c(l)})};$k.prototype.c=function(){g(Error())};function al(){Y(this,"rmfile")}al.prototype=new W;al.prototype.className="RmFile";al.prototype.g=function(b,c){F(b,new bl(Tb(c.a(),this).value(),this))};function bl(b,c){this.d=l;this.Ya=b;this.m(c)}bl.prototype=new N;bl.prototype.Ea=j;bl.prototype.className="RmFile.Go";bl.prototype.Ma=function(b,c){return xa(function(d){if(d)return void c(d);D(b,C);c(l)})};
bl.prototype.c=function(){g(Error())};var Og=j;
function cl(b){var c={noLibs:j,e:['(assign load-from-web  (fn ()    ( (fn (eof f loop)        (assign loop          (fn ()            ( (fn (command)              (if (is command eof)                (eval                  \'(do (load "strings.arc")                       (load "lib/bag-of-tricks.arc")                       (load "rainbow/rainbow.arc")                       (load "rainbow/rainbow-libs.arc")                       ))                ( (fn ()                  eval.command                  (loop)                ) ))            ) (sread f eof))))        (loop)    ) (uniq) (infile "arc.arc") nil)))'].concat("#libs"!==location.hash?
[]:["(load-from-web)"])},d=(new Date).getTime(),f=c.ARC_PATH||[];-1===f.indexOf(".")&&(f=["."].concat(f));var h=dl(c.args||[]);c.nosf&&(Og=m);new rj;new sj;new oj;new nj;new pj;K("pi").ha(new I(Math.PI));K("e").ha(new I(Math.E));new dj;new Ki;new Zi;new aj;new Yi;new Vi;new Di;new bj;new Wi;new Ii;new $i;new Hi;new cj;new Ei;new Ci;new Fi;new Li;new Gi;new Mi;new Xi;new Nj;new Ij;new Mj;new Jj;new ui;new ti;new el;new Ej;new Aj;new Dj;new wj;new Bj;new Fj;new Gj;new Hj;new bi;new $h;new gi;new ei;
new fi;new di;new zi;new vi;new wi;new Ai;new Bi;new xi;new yi;new ej;new jj;new gj;new fj;new hj;new ii;new ki;new mi;new si;new vj;new tj;new uj;new Fa;new Dk;new Ek;new vk;new wk;new uk;new rk;new xk;new Jk;new yk;new zk;new Fk;new Hk;new sk;new qk;new tk;new Tk;new Rk;new Nk;new Pk;new Lk;new al;new Zk;new Vk;new Xk;new Ak;new Ck;new Bk;new kj;new lj;new mj;var k=new pc;K("*argv*").ha(x(h));K("call*").ha(new Fa);K("sig").ha(new Fa);fl(k,f,(c.noLibs?[]:["arc","strings","lib/bag-of-tricks","rainbow/rainbow",
"rainbow/rainbow-libs"]).concat(c.f||[]),function(f){if(f)return void b(f);gl(k,c.e||[],function(f){if(f)return void b(f);c.q?b():(za("repl in "+((new Date).getTime()-d)+"ms"),hl(k,b,i))})})}function dl(b){for(var c=[],d=0,f=b.length;d<f;d++){var h=b[d];"[object String]"!==Object.prototype.toString.call(h)&&g(new TypeError);c.push(Ma(""+h))}return c}function fl(b,c,d,f){var h=i;function k(s){s===q?f():il(b,c,d[s],function(b){if(b)return void f(b);k(s+1)},h)}var q=d.length;k(0)}
function gl(b,c,d){var f=i;function h(c,k){if(c)return void d(c);if(k===l)return void d();jl(b,k,function(b){if(b)return void d(b);Na(M,h,f)},f)}for(var k=[],q=0,s=c.length;q<s;q++){var E=c[q];"[object String]"!==Object.prototype.toString.call(E)&&g(new TypeError);k.push(E+" ")}var M=(new sa(k.join(""))).ra();Na(M,h,f)}
function hl(b,c,d){ya("arc> ");for(var f=j,h=m;!h;)if(Na(ja,function(k,q){if(k){if(!(k instanceof Da))return void c(k);Aa(k);f||hl(b,c,d)}else q===l?(h=j,f||c()):jl(b,q,function(h){if(h)return void c(h);f||hl(b,c,d)},d)||(f=m)},d)||(f=m),!f)return;c()}function jl(b,c,d,f){return kl(b,c,function(b,c){if(b){if(!(b instanceof u))return void d(b);za("Message    : "+b.message);ya("Java stack : ");Aa(b,ka)}else za(c);d()},f)}
function ll(b,c,d,f){function h(q){if(q===M)d(Error("Could not find "+c+" under "+JSON.stringify(b)));else{var s=k[q];qa(s,function(b,c){if(b)return void d(b);if(c)return void d(l,s);h(q+1)},f)}}for(var k=[],q=b.length,s=0;s<q;s++){var E=""+b[s]+"/"+c;k.push(E,E+".arc")}var M=k.length;h(0)}function il(b,c,d,f,h){function k(c){ra(c,function(c,d){if(c)return void f(c);ml(b,d,f,h)},h)}qa(d,function(b,s){if(b)return void f(b);s?k(d):ll(c,d,function(b,c){if(b)return void f(b);k(c)},h)},h)}
function ml(b,c,d,f){var h=j;Na(c,function(k,q){if(k)return void d(k);if(q===l)return void d();kl(b,q,function(k){if(k)return void d(k);ml(b,c,d,f)||(h=m)},f)||(h=m)},f)||(h=m);return h}function nl(b){this.d=b}nl.prototype=new qf;nl.prototype.className="Console.Anon_mkVisitor_";nl.prototype.Yb=function(b){b.m(this.d)};function kl(b,c,d,f){F(b,new ol(c));return qc(b,d,f)}function ol(b){this.d=l;this.Ba=b;this.m(G("Console.compileAndEvalAsync_"))}ol.prototype=new N;ol.prototype.className="Console.CompileAndEval";
ol.prototype.c=function(b){F(b,new pl);Mf(b,this.Ba,[])};function pl(){this.d=l;this.m(G("Console.compileAndEvalAsync_"))}pl.prototype=new N;pl.prototype.className="Console.AndEval";pl.prototype.c=function(b){var c=Q(b).reduce(),d=[];c.h(d);d=x(d);d.l(new nl(c));R(b,l,d)};function el(){Y(this,"new-thread")}el.prototype=new W;el.prototype.className="NewThread";el.prototype.j=function(){g(t(new u,"Rainbow.js doesn't support new-thread."))};function ph(b,c,d){this.d=l;this.ja=b;this.o=c;this.m(d)}
ph.prototype=new N;ph.prototype.className="BindAndRun";ph.prototype.c=function(b){this.ja.add(Q(b));R(b,this.ja,this.o)};Ra("window").ha(new sc(window));ea(window,"hashchange",function(){location.reload(m)});
ea(window,"load",function(){function b(){var b=E.value+"\n";E.value="";fa.lc.ab(b)}function c(b){if(b.Zc!==i)return b.Zc();for(var c=[],d=j;d;)b.nc(function(b,f){b&&g(b);f!==l?d=m:c.push(String.fromCharCode(f))},j)||(d=m);return c.join("")}function d(b){s.appendChild(document.createTextNode(b));ma||(ma=j,setTimeout(function(){ma=m;s.scrollTop=s.scrollHeight},0))}function f(b){b&&g(b);b=c(fa.Wa);""!==b&&(d(b),ga.lc.ab(b),fa.Wa.mb(f))}function h(b){b&&g(b);b=c(ha.Wa);""!==b&&(d(b),ha.Wa.mb(h))}function k(b){b&&
g(b);b=c(ia.Wa);""!==b&&(d(b),ia.Wa.mb(k))}var q=document.getElementById("repl"),s=document.createElement("pre");s.className="scrollback";s.appendChild(document.createTextNode(""));q.appendChild(s);var E=document.createElement("textarea");E.className="prompt";ea(E,"keydown",function(b){if(13===(b.which||b.keyCode))b.preventDefault?b.preventDefault():b.returnValue=m});ea(E,"keyup",function(c){13===(c.which||c.keyCode)&&b()});q.appendChild(E);var M=document.createElement("button");M.className="eval";
M.appendChild(document.createTextNode("Eval"));ea(M,"click",function(){b()});q.appendChild(M);var ma=m;fa.Wa.mb(f);ha.Wa.mb(h);ia.Wa.mb(k);cl(n())});
