var e;
function ba(){function a(){if(0!==g.length){var B=g.shift(),S=l.shift();setTimeout(function(){S(B)},0);setTimeout(a,0)}}function b(B,S,U,n){if(0!==c.length&&0===g.length){var x=c[0];if(1===c.length&&("byte"===x.type||x.Pa.length<<1===d+1)){if(f)return S&&(c=[]),B(null,null),!0;n||(g.push(B),l.push(U));return!1}U=0;n=d;var y=x;if("byte"===y.type)U++,x=y.Pa;else{y=y.Pa;var E=y.charCodeAt(n>>>1);if(n&1)return S&&(d++,y.length<<1<=d&&(c.shift(),d=0)),B(null,E),!0;x=E>>>8&255;n++;y.length<<1<=n&&(U++,
n=0)}y=c[U];"byte"===y.type?(U++,E=y.Pa):(y=y.Pa,E=y.charCodeAt(n>>>1),E=(n&1?E:E>>>8)&255,n++,y.length<<1<=n&&(U++,n=0));if(S){for(;U--;)c.shift();d=n}B(null,x<<8|E);return!0}if(f)return B(null,null),!0;n||(g.push(B),l.push(U));return!1}var c=[],d=0,f=!1,g=[],l=[],u={},J=u.yc=function(B,S){if(0!==c.length&&0===g.length){S=c[0];if("byte"===S.type)c.shift(),B(null,S.Pa);else{S=S.Pa;var U=S.charCodeAt(d>>>1);U=(d&1?U:U>>>8)&255;d++;S.length<<1<=d&&(c.shift(),d=0);B(null,U)}return!0}if(f)return B(null,
null),!0;S||(g.push(B),l.push(J));return!1},K=u.zc=function(B,S){return b(B,!0,K,S)},aa=u.vb=function(B,S){return b(B,!1,aa,S)};u.close=function(){};u.dd=function(){var B,S=!1,U=[],n=0;if(d&1){var x=c[0].Pa;S=!0;var y=x.charCodeAt(d>>>1)&255;d++;for(var E=d>>>1,Q=x.length;E<Q;E++){var I=x.charCodeAt(E);U.push(String.fromCharCode(y<<8|I>>>8&255));y=I&255}d=0;n++}else d&&(U.push(c[0].Pa.substring(d>>>1)),d=0,n++);for(B=c.length;n<B;n++)if(x=c[n],"byte"===x.type)S?(U.push(String.fromCharCode(y<<8|x.Pa)),
S=!1):(y=x.Pa,S=!0);else if(x=x.Pa,S)for(E=0,Q=x.length;E<Q;E++)I=x.charCodeAt(E),U.push(String.fromCharCode(y<<8|I>>>8&255)),y=I&255;else U.push(x);c=S?[{type:"byte",Pa:y}]:[];return U.join("")};return{kb:u,xc:{ib:function(B){f||""===B||(c.push({type:"string",Pa:B}),a())},Fc:function(B){f||(c.push({type:"byte",Pa:B}),a())},close:function(){f=!0;a()},flush:function(){}}}}function da(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}
var ea=ba(),fa=ba(),ha=ba(),ia=ba(),ja=fa.kb,ka=ha.xc,la=ia.xc;function ma(a){a(h("Attempted to end the process, but this is a web page."));return!0}function na(a){a(h("No filesystem."));return!0}function oa(a,b){b(null,!1);return!0}function pa(a,b,c){if(c)return b(h("Can't access the Web synchronously.")),!0;c=new XMLHttpRequest;c.open("GET",a,!0);c.onerror=function(){b(null,!1)};c.onload=function(){b(null,!0)};c.send(null);return!1}
function qa(a,b,c){if(c)return b(h("Can't access the Web synchronously.")),!0;var d=new XMLHttpRequest;d.open("GET",a,!0);d.onerror=function(){b(h("Couldn't open page: "+a+" because of error: "+d.statusText))};d.onload=function(){b(null,ra(d.responseText).za())};d.send(null);return!1}function sa(a){a(h("No filesystem."));return!0}function ta(a){a(h("No filesystem."));return!0}function ua(a){a(h("No filesystem."));return!0}function va(a){a(h("No filesystem."));return!0}
function wa(a){a(h("No filesystem."));return!0};function xa(a){ka.ib(""+a)}function ya(a){ka.ib(""+a+"\n")}function za(a,b){void 0===b&&(b=la);for(b.ib(""+a+"\n"+(a.stack||a)+"\n");a instanceof Aa&&(a=a.hd);)a instanceof Ba&&(a=a.Oa),b.ib("Caused by: "+a+"\n"+(a.stack||a)+"\n")}var k={};function Ca(){}function Da(){var a=new Ca;a.ea={};return a}Ca.prototype.get=function(a){return this.ea["rainbow_"+a]};Ca.prototype.put=function(a,b){return this.ea["rainbow_"+a]=b};Ca.prototype.has=function(a){return"rainbow_"+a in this.ea};function Aa(){}
Aa.prototype=Error();function h(a,b){var c=new Aa;c.message=a;c.stack=Error().stack;c.hd=b;return c}function Ea(){}function Fa(a,b){var c=new Ea;c.parent=b;c.tb=Array(~~a);c.ea=0;return c}e=Ea.prototype;e.add=function(a){if(this.tb.length<=this.ea)throw h("Can't add "+a+" to bindings: already full ("+this.ea+") "+m(this.tb));this.tb[this.ea]=a;this.ea++};e.Pb=function(a){return 0===a?this:this.parent.Pb(a-1)};
e.toString=function(){for(var a=[],b=0;b<this.tb.length;b++)a.push(b),a.push(" : "),a.push(this.tb[b]),a.push("\n");return a.join("")+"\nparent: "+(null===this.parent?"<none>":this.parent.toString())};e.set=function(a,b){return this.tb[a]=b};e.count=function(){return this.ea};e.size=function(){return this.tb.length};function Ga(){}Ga.prototype=Error();function p(){}e=p.prototype;e.Wa=!1;e.className="ArcObject";e.Ta=function(){return!1};
e.l=function(){throw h("addInstructions not defined on "+this+", a "+this.className);};e.j=function(a,b){var c=Ha.value();if(!(c instanceof Ia))throw new TypeError;c=c.value(this.type());if(c instanceof q)throw h("No handler for "+this.type()+" in call* table: called "+this+" with args "+b);c.j(a,r(this,b))};e.Ca=function(a){this.j(a,t)};e.G=function(a,b){this.j(a,r(b,t))};e.ha=function(a,b,c){this.j(a,r(b,r(c,t)))};e.lb=function(a,b,c,d){this.j(a,r(b,r(c,r(d,t))))};
e.xa=function(){throw h("len: expects one string, list or hash argument, got "+this.type());};e.dc=function(){throw h("Can't set car of "+this.type());};e.ec=function(a,b){throw h("Can't sref "+this+"( a "+this.type()+"), other args were "+a+", "+b);};e.Ea=function(){return 0};e.Gc=function(){return t};e.g=function(){throw h("Can't take car of "+this);};e.h=function(){throw h("Can't take cdr of "+this);};e.Mc=function(){return!1};e.type=void 0;e.nc=function(){return this};e.za=function(){return this};
e.Sa=function(a){return this===a};e.copyTo=function(a){return a};e.ba=function(){return!0};e.Ob=function(){throw new Ja;};e.ab=function(){throw new Ka;};e.or=function(){return this};function La(a,b,c){for(var d=c,f=0;!(c instanceof q);)v(b,c.g()),c=c.h(),f++;c=b.aa;var g=new Ma;w(g);g.pd=d;g.Vb=c;g.o(a);z(b,g);d=Na(f);d.o(a);z(b,d);d=Oa(a);d.o(a);z(b,d)}e.Mb=function(){throw h("has length: not a proper list: ends with "+this);};
e.uc=function(){throw h("longer than: not a proper list: ends with "+this);};e.$=function(){return this};e.v=function(){};e.ka=function(){return this};e.Ec=function(){};e.jc=function(){};e.kc=function(){return t};e.fb=function(){return this.kc().toString()};e.add=function(){throw h("add not implemented for "+this.type()+" "+this);};e.sqrt=function(){throw h("sqrt not implemented for "+this.type()+" "+this);};e.multiply=function(){throw h("multiply not implemented for "+this.type()+" "+this);};
function Ka(){}e.reduce=function(){return this};e.ja=function(){return!1};e.ga=function(){return this};e.fa=function(){return this};e.ua=function(){return!1};e.pb=function(){return this.toString()};e.Ma=function(){return this.kd||(this.kd=1+Math.random())};e.Fa=function(a){return this===a};function Pa(a){var b=null;if(!Qa(ra(a).za(),function(c,d){if(c)throw c;b=d},!0))throw new Ga;return b}
function Qa(a,b,c){function d(n){return a.vb(function(x,y){if(x)return void n(x);n(null,null===y?null:String.fromCharCode(y))},c)}function f(n){return a.zc(function(x,y){if(x)return void n(x);n(null,null===y?null:String.fromCharCode(y))})}function g(n){for(var x=!0,y=!1;x&&!y;)y=!0,f(function(E,Q){if(E)return void n(E);null===Q||"\n"===Q?n(null):"\r"===Q?d(function(I,ca){if(I)return void n(I);"\n"===ca?f(function(T){if(T)return void n(T);n(null)})||(x=!1):n(null)})||(x=!1):(y=!1,x||g(n))})||(x=!1);
return x}function l(n){for(var x=!0,y=!1;x&&!y;)y=!0,d(function(E,Q){function I(ca){if(ca)return void n(ca);y=!1;x||l(n)}if(E)return void n(E);";"===Q?g(I)||(x=!1):null===Q||/[^ \t\r\n]/.test(Q)?n(null):f(I)||(x=!1)})||(x=!1);return x}function u(n,x){function y(T){var O=n.length-1,R=n[O];n="string"===typeof T&&R instanceof Ra?n.slice(0,O).concat([A(R.value()+T)]):"string"===typeof T?n.concat([A(T)]):n.concat([T]);ca=!1;I||u(n,x)}function E(T){void 0===T&&(T=new Ga);x(T)}function Q(){U(function(T,
O){if(T)return E(T);l(function(R){if(R)return E(R);f(function(M,Z){if(M)return E(M);")"===Z?y(O):E()})||(I=!1)})||(I=!1)})||(I=!1)}for(var I=!0,ca=!1;I&&!ca;)ca=!0,f(function(T,O){if(T)return E(T);null===O?E():'"'===O?x(null,n):"\\"===O?f(function(R,M){if(R)return E(R);'"'===M?y('"'):"\\"===M?y("\\"):"n"===M?y("\n"):"r"===M?y("\r"):"t"===M?y("\t"):"#"===M?f(function(Z,rd){if(Z)return E(Z);"("===rd?y("#("):E()})||(I=!1):E()})||(I=!1):"#"===O?d(function(R,M){if(R)return E(R);if("("!==M)return void y("#");
f(function(Z){if(Z)return E(Z);Q()})||(I=!1)})||(I=!1):y(O)})||(I=!1);return I}function J(n,x){function y(I){x(null,Sa(I))}for(var E=!0,Q=!1;E&&!Q;)Q=!0,d(function(I,ca){if(I)return void x(I);null===ca||/[^01-9a-zA-Z]/.test(ca)?"newline"===n?y(10):"tab"===n?y(9):"space"===n?y(32):"return"===n?y(13):"null"===n?y(0):/^[01-9][01-9]+$/.test(n)?y(parseInt(n,10)):/^u[0-9a-f]+$/i.test(n)?y(parseInt(n.substring(1),16)):1===n.length?y(n.charCodeAt(0)):x(new Ga):f(function(T,O){if(T)return void x(T);Q=!1;n+=
O;E||J(n,x)})||(E=!1)})||(E=!1);return E}function K(n,x){for(var y=!0,E=!1;y&&!E;)E=!0,d(function(Q,I){if(Q)return void x(Q);if(null===I||/[^01-9a-fA-F]/.test(I)){if(""===n)return void x(new Ga);x(null,Ta(parseInt(n,16)))}else f(function(ca,T){if(ca)return void x(ca);E=!1;n+=T;y||K(n,x)})||(y=!1)})||(y=!1);return y}function aa(n,x){for(var y=!0,E=!1;y&&!E;)E=!0,f(function(Q,I){if(Q)return void x(Q);null===I?x(new Ga):"|"===I?x(null,Ua(n)):(E=!1,n+=I,y||aa(n,x))})||(y=!1);return y}function B(n,x,y){for(var E=
!0,Q=!1;E&&!Q;)Q=!0,l(function(I){if(I)return void y(I);d(function(ca,T){if(ca)return void y(ca);null===T?y(new Ga):T===x?f(function(O){if(O)return void y(O);y(null,n)})||(E=!1):U(function(O,R){if(O)return void y(O);Q=!1;n=n.concat([R]);E||B(n,x,y)})||(E=!1)})||(E=!1)})||(E=!1);return E}function S(n,x){for(var y=!0,E=!1;y&&!E;)E=!0,d(function(Q,I){if(Q)return void x(Q);Q=null!==I&&I.charCodeAt(0);if(null!==I&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(I)||128<=Q&&65536>Q))f(function(T,O){if(T)return void x(T);
E=!1;n+=O;y||S(n,x)})||(y=!1);else if("\\"===I)f(function(T){if(T)return void x(T);f(function(O,R){if(O)return void x(O);"|"===R?(E=!1,n+="\\|",y||S(n,x)):x(new Ga)})||(y=!1)})||(y=!1);else{var ca;/^-?[01-9]+\/[01-9]+$/.test(n)?x(null,Va(n)):/^-?[01-9]+$/.test(n)?x(null,Ta(parseInt(n,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(n)?x(null,C(parseFloat(n))):"+inf.0"===n?x(null,C(1/0)):"-inf.0"===n?x(null,C(-1/0)):"+nan.0"===n?x(null,C(0/0)):"+i"===n?x(null,Wa(0,1)):"-i"===n?x(null,Wa(0,-1)):(ca=
/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(n))?x(null,Wa(C(parseFloat(ca[1])).value(),C(parseFloat(ca[2]+(ca[3]||"1"))).value())):x(null,Ua(n))}})||(y=!1);return y}function U(n){function x(){u([],function(R,M){if(R)return void n(R);0===M.length?n(null,A("")):1===M.length?n(null,M[0]):n(null,m([Ua("string")].concat(M)))})||(O=!1)}function y(){aa("",function(R,M){if(R)return void n(R);n(null,Ua(M))})||(O=!1)}function E(){f(function(R,M){if(R)return void n(R);
null!==M&&/x/i.test(M)?K("",n)||(O=!1):"\\"===M?f(function(Z,rd){if(Z)return void n(Z);if(/[^a-zA-Z]/.test(Z))return void n(null,Sa(Z.charCodeAt(0)));J(rd,n)||(O=!1)})||(O=!1):n(new Ga)})||(O=!1)}function Q(R){U(function(M,Z){if(M)return void n(M);null===Z?n(new Ga):n(null,m([D(R),Z]))})||(O=!1)}function I(){d(function(R,M){if(R)return void n(R);null===M?n(new Ga):"@"===M?f(function(Z){if(Z)return void n(Z);Q("unquote-splicing")})||(O=!1):Q("unquote")})||(O=!1)}function ca(){B([],")",function(R,M){if(R)return void n(R);
if(0===M.length)n(null,Xa);else{try{var Z=null===M||0===M.length?t:M[0]===Ya?Za(M):r(M[0],$a(M.slice(1)))}catch(rd){return void n(rd)}n(null,Z)}})||(O=!1)}function T(){B([],"]",function(R,M){if(R)return void n(R);n(null,m([D("fn"),m([D("_")]),m(M)]))})||(O=!1)}var O=!0;l(function(R){if(R)return void n(R);f(function(M,Z){if(M)return void n(M);null===Z?n(null,null):'"'===Z?x():"|"===Z?y():"#"===Z?E():"'"===Z?Q("quote"):","===Z?I():"`"===Z?Q("quasiquote"):"("===Z?ca():"["===Z?T():S(Z,n)||(O=!1)})||(O=
!1)})||(O=!1);return O}return U(b)}function F(){}F.prototype=new p;e=F.prototype;e.className="ArcSymbol";function ab(a,b,c){a.ma=b;a.qd=c;a.ld=b;a.u=null;a.Lb=null;return a}e.l=function(a){var b=a.push,c=new bb;w(c);c.gb=this;b.call(a,c)};function D(a){var b=Ua(a);if(b instanceof F)return b;throw h("can't make symbol from \""+a+'"');}
function Ua(a){if("t"===a)a=cb;else if("nil"===a)a=t;else{var b;if(!(b=db.test(a)))a:if(/^-?[01-9]+\/[01-9]+$/.test(a)||/^-?[01-9]+$/.test(a)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(a)||"+inf.0"===a||"-inf.0"===a||"+nan.0"===a||"+i"===a||"-i"===a||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(a)||/\\(?!\|)/.test(a))b=!0;else{b=0;for(var c=a.length;b<c;b++){var d=a.charCodeAt(b);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(a.charAt(b))||128<=d&&65536>
d)){b=!0;break a}}b=!1}a=b||"."===a?eb(a,"|"+a+"|"):fb.test(a)?eb(a.replace(/\\\|/g,"|"),a):eb(a,a)}return a}e.pb=function(){return this.ma};e.toString=function(){return this.qd};function eb(a,b){if(gb.has(a))return gb.get(a);b=ab(new F,a,b);gb.put(a,b);return b}e.name=function(){return this.ma};e.Ea=function(a){if(!(a instanceof F))throw new TypeError;return this.ma.localeCompare(a.name)};e.type=function(){return hb};e.za=function(){return this.name()};e.Ma=function(){return this.ld};
e.Fa=function(a){return this===a};function ib(a,b){return b instanceof F&&b.name()===a}e.pa=function(a){var b=this.u;this.u=a;null!==b&&b.Ec(this);a.jc(this)};e.value=function(){if(null===this.u)throw h("Symbol "+this.ma+" is not bound");return this.u};e.bound=function(){return null!==this.u};function jb(a,b){try{if(!(a instanceof F))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected an ArcSymbol, got "+a);}}
function kb(a,b,c){null===a.Lb&&(a.Lb={});a.Lb[b.name()]=c}var gb=Da(),db=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,fb=/.*\\\|/,hb=D("sym"),Ya=D("."),lb=D("!");function G(){}G.prototype=new p;e=G.prototype;e.className="Pair";function r(a,b){var c=new G;if(null===a)throw h("Can't create Pair with null car: use NIL instead");if(null===b)throw h("Can't create Pair with null cdr: use NIL instead");c.ob=a;c.yb=b;return c}e.j=function(a,b){b=mb(b.g(),this);v(a,this.Pb(b.U()).g())};e.Gc=function(){return this.ob};
e.g=function(){return this.ob};e.h=function(){return this.yb};e.ab=function(){if(null!==this.ob)throw new Ka;};e.ba=function(){return!1};e.dc=function(a){return this.ob=a};e.ec=function(a,b){b=nb(b,this).U();return this.Pb(b).dc(a)};e.Mc=function(a){return a===this.ob};
e.toString=function(){if(this.g()instanceof F&&this.g().name()in ob&&this.h()instanceof G&&1===this.h().size()){var a=this.g();a=ob[a.name()];var b=this.h();if(!(b instanceof G))throw new TypeError;return a+pb(b)}return"("+pb(this)+")"};function pb(a){for(var b=[];!a.ba();)b.push(a.g()),a.h().ba()||b.push(" "),a=a.h();a instanceof q||b.push(" . ",a);return b.join("")}e.Tc=function(a){this.yb=a};
function $a(a){if(0===a.length)return t;if(a[0]===Ya){if(2===a.length){a=a[1];if(!(a instanceof p))throw new TypeError;return a}return Za(a)}var b=a[0];if(!(b instanceof p))throw new TypeError;return r(b,$a(a.slice(1)))}function Za(a){throw h('Error: illegal use of "." in '+a);}function qb(a,b,c){if(c===a.length)return b;var d=a[c];if(!(d instanceof p))throw new TypeError;return r(d,qb(a,b,c+1))}function rb(a,b){return null===a||0===a.length?b:qb(a,b,0)}function m(a){return rb(a,t)}e.type=function(){return sb};
e.xa=function(){return this.size()};e.size=function(){if(this instanceof q)return 0;for(var a=1,b=this.yb;!(b instanceof q);){if(b.ba())throw h("cannot take size: not a proper list: "+this);a++;b=b.h()}return a};e.Ea=function(){throw h("Pair.compareTo:unimplemented");};e.copyTo=function(a){a.push(this.g());if(this.h()instanceof q)return a;if(!(this.h()instanceof G))throw h("Not a list: "+this);this.h().copyTo(a);return a};
e.Fa=function(a){if(this===a)return!0;var b=this instanceof q;if(!(a instanceof p))throw new TypeError;var c=a instanceof q;return b!==c?!1:b&&c?!0:a instanceof G?(b=a.ob.Fa(this.ob),a=a.yb.Fa(this.yb),b&&a):!1};e.Ma=function(){return this.g().Ma()+this.h().Ma()};
e.Pb=function(a){try{for(var b,c=this,d=a;0<d;){if(c.h()instanceof q)throw new tb;c=c.h();d--}b=c;if(!(b instanceof G))throw new TypeError;return b}catch(f){if(!(f instanceof tb))throw f;throw h("Error: index "+a+" too large for list "+this);}};e.Mb=function(a){return this.h().Mb(a-1)};e.uc=function(a){return 0>a||this.h().uc(a-1)};e.fb=function(){return"ref:"+this.type().toString()};function tb(){}tb.prototype=Error();e=G.prototype;e.nc=function(){return this instanceof q?this:r(this.g(),this.h().nc())};
e.za=function(){var a=[];ub(a,this);return a};e.Sa=function(a){return p.prototype.Sa.call(this,a)||this instanceof q&&a instanceof q};function ub(a,b){if(!(b instanceof q)){a.push(b.g().za());b=b.h();if(!(b instanceof G))throw new TypeError;ub(a,b)}}function vb(a){var b=Array(~~a.size());wb(a,b,0);return b}function wb(a,b,c){if(c<b.length){b[c]=a.ob;a=a.yb;if(!(a instanceof G))throw new TypeError;a instanceof q||wb(a,b,c+1)}}
function xb(a,b){try{if(!(a instanceof G))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a cons, got "+a);}}e.Ob=function(){};e.add=function(a){if(a instanceof G){var b=[];this.copyTo(b);a.copyTo(b);return m(b)}throw h("+ : expects cons, got "+a.type()+" "+a);};e.v=function(a){a.Ja(this);for(var b=this;!b.ba();)b.g().v(a),b=b.h();b instanceof q||b.v(a);a.Va()};function Ja(){}
var sb=D("cons"),ob={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function q(){}q.prototype=new G;e=q.prototype;e.className="Nil";function yb(a){var b=new q;b.ob=b.yb=null;b.wb=a;return b}e.l=function(a){a.push(Oa(t))};e.j=function(a,b){throw h("Function dispatch on inappropriate object: "+this+" with args "+b);};e.Ob=function(){};e.Ta=function(){return!0};e.xa=function(){return 0};e.ba=function(){return!0};e.ab=function(){};e.toString=function(){return this.wb};e.Gc=function(){return this};
e.g=function(){return this};e.h=function(){return this};e.Mc=function(){return!1};e.Tc=function(){throw Error("can't set the cdr of "+this);};e.size=function(){return 0};e.copyTo=function(a){return a};e.type=function(){return hb};e.Ma=function(){return"nil"};e.Fa=function(a){if(this===a)return!0;if(!(a instanceof p))throw new TypeError;return a instanceof q};e.za=function(){return!1};e.Sa=function(a){return a instanceof q};e.or=function(a){return a};e.Mb=function(a){return 0===a};
e.uc=function(a){return 0>a};var t=yb("nil"),Xa=yb("()");function zb(){}zb.prototype=new F;e=zb.prototype;e.className="Truth";e.Ta=function(){return!0};e.l=function(a){a.push(Oa(cb))};e.toString=function(){return"t"};e.Ea=function(){throw h("Truth.compareTo:unimplemented");};e.type=function(){return hb};function Ab(a){return a?cb:t}e.Ma=function(){return"t"};e.Fa=function(a){return this===a};e.za=function(){return!0};e.pa=function(){throw h("error: can't rebind t!");};e.value=function(){return this};
var cb;cb=ab(new zb,"t","t");function H(){}H.prototype=new p;e=H.prototype;e.Yb=!1;e.sc=!1;e.Ba=!1;e.Na=!1;e.className="Instruction";function w(a){a.Ha=null;return a}e.type=function(){return D("instruction")};e.qb=function(){return this.toString()};e.toString=function(){return"("+this.className+")"};function Bb(a){return a.bound()?""+a.value():"#unbound#"}e.i=void 0;e.o=function(a){this.Ha=a};e.v=function(a){a.hc(this)};function Ma(){}Ma.prototype=new H;Ma.prototype.sc=!0;Ma.prototype.className="ArcObject.ConvertError";
Ma.prototype.Ic=function(a){return a instanceof Error};Ma.prototype.i=function(a){var b=a.error();if(null!==b)throw a.jb=null,a.aa=this.Vb,h("error invoking "+this.Ha+" with args "+this.pd+": "+b,b);};var Ha=D("call*");function Cb(){}Cb.prototype=new p;Cb.prototype.className="LiteralObject";Cb.prototype.Ta=function(){return!0};Cb.prototype.l=function(a){a.push(Oa(this))};Cb.prototype.fb=function(){return"ref:"+this.type().toString()};function Db(){}Db.prototype=new Cb;e=Db.prototype;e.className="ArcCharacter";
function Eb(a,b){a.u=b;return Fb[b]=a}function Sa(a){return void 0===Fb[a]?Eb(new Db,a):Fb[a]}e.Ta=function(){return!0};e.toString=function(){return"#\\"+String.fromCharCode(this.u)};e.Ea=function(a){if(!(a instanceof Db))throw new TypeError;return this.u-a.u};e.type=function(){return Gb};e.za=function(){return this.value()};e.value=function(){return this.u};e.pb=function(){return String.fromCharCode(this.u)};e.Ma=function(){return this.pb()};
e.Fa=function(a){return this===a||a instanceof Db&&a.u===this.u};function Hb(a,b){try{if(!(a instanceof Db))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a character, got "+a);}}var Gb=D("char"),Fb=Array(65536);function Ib(){}Ib.prototype=new Db;Ib.prototype.className="ArcCharacter.Anon_NULL_";Ib.prototype.toString=function(){return"#\\null"};var Jb;Jb=Eb(new Ib,0);function Kb(){}Kb.prototype=new Db;Kb.prototype.className="ArcCharacter.Anon_named_1_";
Kb.prototype.toString=function(){return"#\\newline"};function Lb(){}Lb.prototype=new Db;Lb.prototype.className="ArcCharacter.Anon_named_2_";Lb.prototype.toString=function(){return"#\\tab"};function Mb(){}Mb.prototype=new Db;Mb.prototype.className="ArcCharacter.Anon_named_3_";Mb.prototype.toString=function(){return"#\\return"};function Nb(){}Nb.prototype=new Db;Nb.prototype.className="ArcCharacter.Anon_named_4_";Nb.prototype.toString=function(){return"#\\space"};Eb(new Kb,10);Eb(new Lb,9);
Eb(new Mb,13);Eb(new Nb,32);function Ra(){}Ra.prototype=new Cb;e=Ra.prototype;e.className="ArcString";function A(a){var b=new Ra;b.u=a;return b}e.j=function(a,b){Ob(b,this.className,1);b=nb(b.g(),this);if(!b.isInteger())throw h("string-ref: expects exact integer: got "+b);b=~~b.U();if(!(0<=b||b<this.value.length()))throw h("string-ref: index "+b+" out of range [0, "+(this.u.length-1)+"] for string "+this.toString());v(a,Sa(this.u.charCodeAt(b)))};e.value=function(){return this.u};e.pb=function(){return this.u};
e.toString=function(){var a=this.u,b=[];b.push('"');for(var c=0;c<a.length;c++)switch(a.charAt(c)){case '"':b.push('\\"');break;case "\\":b.push("\\\\");break;case "\n":b.push("\\n");break;case "\r":b.push("\\r");break;default:b.push(a.charAt(c))}b.push('"');return b.join("")};e.Ea=function(a){if(!(a instanceof Ra))throw new TypeError;return this.u.localeCompare(a.u)};e.xa=function(){return this.u.length};
e.dc=function(a){var b=[Hb(a,this).pb()];b.push(this.value().substring(1));this.pa(b.join(""));return a};e.ec=function(a,b){var c=Hb(a,Db);b=nb(b,this);b=b.U();if(!(0<=b&&b<this.u.length))throw new RangeError;this.u=this.u.substring(0,b)+String.fromCharCode(c.value())+this.u.substring(b+1);return a};e.type=function(){return Pb};e.za=function(){return this.value()};e.pa=function(a){this.u=a};e.Ma=function(){return this.u};e.Fa=function(a){return this===a||a instanceof Ra&&a.u===this.u};e.Sa=function(a){return this.Fa(a)};
e.add=function(a){var b=[this.u];if(a instanceof Ra)b.push(a.value());else{var c=a.type();if(!(c instanceof F))throw new TypeError;c=Qb.Lb[c]||null;if(!(c instanceof Rb))throw new TypeError;a=c.Wb(a);if(!(a instanceof Ra))throw new TypeError;b.push(a.value())}return A(b.join(""))};function Sb(a,b){try{if(!(a instanceof Ra))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a string, got "+a);}}var Pb=D("string");function Ba(){}
Ba.prototype=new Cb;Ba.prototype.className="ArcException";Ba.prototype.type=function(){return Tb};Ba.prototype.message=function(){return null!==this.Oa?A(this.Oa.message):Ub};Ba.prototype.toString=function(){return this.message().toString()};var Tb=D("exn"),Ub=A("no message");function L(){}L.prototype=new Cb;e=L.prototype;e.className="ArcNumber";e.isInteger=void 0;e.N=void 0;e.U=void 0;e.Db=void 0;e.round=void 0;
e.Ac=function(){throw h("round[closest] not implemented for "+this.className+"("+this+")");};e.Ta=function(){return!0};e.Ea=function(a){if(!(a instanceof L))throw new TypeError;a=a.N()-this.N();return 0>a?1:0===a?0:-1};e.type=function(){return this.isInteger()?Vb:Wb};e.Sa=function(a){return this.Fa(a)};function mb(a,b){try{if(!(a instanceof L))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a number, got "+a);}}
e.bd=function(){throw h("mod: not implemented for "+this.className+"("+this+")");};var Vb=D("int"),Wb=D("num");function Xb(){}Xb.prototype=new Cb;Xb.prototype.className="ArcThreadLocal";Xb.prototype.set=function(a){this.u=a};Xb.prototype.get=function(){return this.u};Xb.prototype.type=function(){return Yb};function Zb(a,b){try{if(!(a instanceof Xb))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a thread-local, got "+a);}}
var Yb=D("thread-local");function $b(){}$b.prototype=new L;e=$b.prototype;e.className="Complex";function Wa(a,b){var c=new $b;c.V=a;c.S=b;return c}e.isInteger=function(){return 0===this.S&&Math.floor(this.V)===this.V};e.N=function(){throw h("Cannot convert complex to double");};e.U=function(){throw h("Cannot convert complex to int");};e.Db=function(){return Wa(-this.V,-this.S)};e.toString=function(){return C(this.V).toString()+(0>this.S?"":"+")+C(this.S).toString()+"i"};
function ac(a,b){try{if(!(a instanceof $b))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a complex number, got "+a);}}e.round=function(){return h("Can't convert "+this+" to integer")};function bc(a,b){b=b.N();return Wa(a.V*b,a.S*b)}e.multiply=function(a){if(a instanceof $b)return cc(this,a);if(!(a instanceof L))throw new TypeError;a=a.N();return Wa(this.V*a,this.S*a)};
function cc(a,b){var c=a.V,d=b.V;a=a.S;b=b.S;return Wa(c*d-a*b,c*b+d*a)}e.add=function(a){if(a instanceof $b)return Wa(this.V+a.V,this.S+a.S);if(a instanceof dc)return Wa(this.V+a.N(),this.S);if(a instanceof ec)return Wa(this.V+a.N(),this.S);throw h("+: expects a number, got "+a.type()+" "+a);};e.inverse=function(){var a=this.V*this.V+this.S*this.S;return Wa(this.V/a,-this.S/a)};e.log=function(){return Wa(Math.log(Math.sqrt(this.V*this.V+this.S*this.S)),Math.atan2(this.S,this.V))};
function fc(a,b){b instanceof $b?b=cc(a.log(),b).exp():(a=a.log(),b=b.N(),b=Wa(a.V*b,a.S*b).exp());return b}e.sqrt=function(){return fc(this,C(.5))};e.exp=function(){var a=Math.exp(this.V);return Wa(a*Math.cos(this.S),a*Math.sin(this.S))};e.Ea=function(){throw h("Compare: complex numbers are unordered and cannot be compared");};function gc(a){if(a instanceof $b)return a;if(a instanceof L)return Wa(a.N(),0);throw h("Can't make complex number from "+a);}
e.Sa=function(a){return a instanceof $b?a.V===this.V&&a.S===this.S:a instanceof L&&0===this.S&&a.N()===this.V};var hc=Wa(0,0);function dc(){}dc.prototype=new L;e=dc.prototype;e.className="Rational";function ic(a,b){var c=new dc;if(0===b&&0!==a)throw h("/: division by zero");var d=jc(c,a,b);c.sa=a/d;c.da=b/d;return c}function Va(a){a=a.split("/");return ic(parseInt(a[0],10),parseInt(a[1],10))}function Ta(a){return ic(a,1)}e.toString=function(){return this.sa+(1===this.da?"":"/"+this.da)};
e.isInteger=function(){return 1===this.da};e.N=function(){return this.sa/this.da};e.U=function(){if(0===this.sa)return 0;var a=this.sa/this.da;return 0>a?Math.ceil(a):Math.floor(a)};function jc(a,b,c){return 0===c?b:jc(a,c,b%c)}e.bd=function(a){if(!this.isInteger()||!a.isInteger())throw h("modulo: expects integer, got ("+this+" "+a+")");a=a.U();var b=this.sa%a;0>b&&(b+=a);return Ta(b)};function kc(a,b){return ic(a.sa*b.sa,a.da*b.da)}e.Rb=function(a){return ic(this.sa*a.da+a.sa*this.da,this.da*a.da)};
e.Db=function(){return ic(-this.sa,this.da)};e.za=function(){return this.isInteger()?this.U():this.N()};e.Ma=function(){return this.isInteger()?this.U():this.N()};e.Ma=function(){return 37*this.sa+this.da+""};e.Fa=function(a){return a instanceof dc&&this.sa===a.sa&&this.da===a.da};function nb(a,b){try{if(!(a instanceof dc))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a Rational, got "+a);}}
e.round=function(){if(1===this.da)return this;if(2===this.da){var a=this.sa/this.da;a=0>a?Math.ceil(a):Math.floor(a);return Ta(a+(1===a%2?1:0))}return Ta(Math.round(this.sa/this.da))};e.Ac=function(){return 1===this.da?this:Ta(Math.round(this.sa/this.da))};e.stringify=function(a){var b=this.sa.toString(a.U());if(this.isInteger())return A(b);a=this.da.toString(a.U());return A(b+"/"+a)};e.sqrt=function(){var a=Math.sqrt(this.sa/this.da);return Math.floor(a)===a?Ta(a):C(a)};
e.multiply=function(a){if(a instanceof $b)return bc(a,this);if(a instanceof ec)return C(a.u*this.N());if(a instanceof dc)return kc(this,a);throw h("*: expects a number, got "+a.type()+" "+a);};e.add=function(a){if(a instanceof $b)return Wa(a.V+this.N(),a.S);if(a instanceof ec)return a.Rb(this);if(a instanceof dc)return this.Rb(a);throw h("+: expects a number, got "+a.type()+" "+a);};var lc=Ta(0),mc=Ta(1),nc=Ta(10);function ec(){}ec.prototype=new L;e=ec.prototype;e.className="Real";
function C(a){var b=new ec;b.u=a;return b}e.toString=function(){return this.u===-1/0?"-inf.0":this.u===1/0?"+inf.0":this.u!==this.u?"+nan.0":""+this.u};e.za=function(){this.isInteger();return this.value()};e.type=function(){return Wb};e.value=function(){return this.u};e.isInteger=function(){return Math.floor(this.u)===this.u};e.N=function(){return this.u};e.U=function(){return 0>this.u?Math.ceil(this.u):Math.floor(this.u)};e.Db=function(){return C(-this.u)};e.Ma=function(){return""+this.u};
e.Fa=function(a){return a instanceof $b?a.Sa(this):this===a||a instanceof ec&&this.u===a.u};e.round=function(){var a=Math.round(this.u);return.5===Math.abs(this.u-a)&&1==a%2?a<this.u?Ta(a+1):Ta(a-1):Ta(a)};e.Ac=function(){return Ta(Math.round(this.u))};e.Rb=function(a){return C(this.u+a.N())};e.sqrt=function(){return C(Math.sqrt(this.u))};e.multiply=function(a){if(a instanceof $b)return bc(a,this);if(a instanceof L)return C(this.u*a.N());throw h("*: expects a number, got "+a.type()+" "+a);};
e.add=function(a){if(a instanceof $b)return Wa(a.V+this.N(),a.S);if(a instanceof dc)return this.Rb(a);if(a instanceof ec)return this.Rb(a);throw h("+: expects a number, got "+a.type()+" "+a);};function oc(){}oc.prototype=new Cb;e=oc.prototype;e.className="Tagged";e.j=function(a,b){var c=Ha.value();if(!(c instanceof Ia))throw new TypeError;return c.value(this.Ub).j(a,r(this.wb,b))};e.Ea=function(){return 0};e.type=function(){return this.Ub};
function pc(a){return a instanceof oc&&"mac"===a.Ub.toString()?a.wb:null}e.toString=function(){return qc(this)};function qc(a){if(!rc.bound())return"#<tagged "+a.Ub+" "+a.wb+">";var b=rc.value();if(!(b instanceof Ia))throw new TypeError;b=b.value(a.Ub);if(b instanceof q)return"#<tagged "+a.Ub+" "+a.wb+">";var c=sc();b.j(c,m([a.wb]));var d;if(!tc(c,function(f,g){if(f)throw f;d=g},!0))throw h("An asynchronous operation was attempted during a toString().");return""+d.za()}var rc=D("tagged-writers");
function uc(){}uc.prototype=new Cb;e=uc.prototype;e.className="JsObject";function vc(a){var b=new uc;b.Pc=a;return b}e.type=function(){return wc};e.za=function(){return this.Pc};e.toString=function(){return""+this.Pc};function xc(a,b){a.push(b.g().za());if(!(b.h()instanceof q)){b=b.h();if(!(b instanceof G))throw new TypeError;xc(a,b)}}
function yc(a){if(null===a)return t;if(a instanceof p)return a;var b=Object.prototype.toString.call(a);if("[object Number]"===b)return a*=1,a===Math.floor(a)?Ta(a):C(a);if("[object String]"===b)a=A(""+a);else if("[object Array]"===b||"[object Arguments]"===b){b=Array(~~a.length);for(var c=0;c<a.length;c++)b[c]=yc(a[c]);a=m(b)}else a="[object Boolean]"===b?a?cb:t:vc(a);return a}e.close=function(){throw h("close: unexpected object: "+this);};var wc=D("java-object");function Ia(){}Ia.prototype=new Cb;
e=Ia.prototype;e.className="Hash";function zc(){var a=new Ia;a.ma=t;a.vc=Da();a.rc=null;a.Bb=null;a.wc=new Ac;a.ad=0;return a}e.Ec=function(a){this.ma===a&&(this.ma=t,this.wc=new Ac)};e.jc=function(a){this.ma=a;a=new Bc;a.fd=this;this.wc=a};e.kc=function(){return this.ma};e.j=function(a,b){v(a,this.value(b.g()).or(b.h().g()))};e.toString=function(){return"#hash"+Cc(this)};function Cc(a){for(var b=[],c=a.rc;null!==c;c=c.next){var d=c.key;d=r(d,r(a.value(d),t));b.push(d)}return rb(b,Xa)}e.xa=function(){return this.size()};
e.ec=function(a,b){if(a instanceof q){var c=this.value(b),d=b.Ma();if(d=this.vc.get(d))for(var f=0,g=d.length;f<g;f++){var l=d[f];if(b.Fa(l.key)){d.splice(f,1);l.cc&&(l.cc.next=l.next);l.next&&(l.next.cc=l.cc);this.rc===l&&(this.rc=l.next);this.Bb===l&&(this.Bb=l.cc);this.xa--;break}}this.wc.Uc(c,b)}else{c=b.Ma();c=this.vc.get(c)||this.vc.put(c,[]);d=null;f=0;for(g=c.length;f<g;f++)if(l=c[f],b.Fa(l.key)){d=l;break}null===d?(d=this.Bb,this.Bb={key:b,value:a,cc:d,next:null},null===d?this.rc=this.Bb:
d.next=this.Bb,c.push(this.Bb),this.ad++):d.value=a;this.wc.name(a,b)}return a};e.value=function(a){var b=a.Ma();b=this.vc.get(b);if(!b)return t;for(var c=0,d=b.length;c<d;c++){var f=b[c];if(a.Fa(f.key))return f.value}return t};e.Ea=function(){return 0};e.type=function(){return Dc};e.size=function(){return this.ad};function Ec(){}Ec.prototype.name=void 0;Ec.prototype.Uc=void 0;function Bc(){}Bc.prototype=new Ec;Bc.prototype.name=function(a,b){a.jc(r(b,this.fd))};
Bc.prototype.Uc=function(a,b){a.Ec(r(b,this.fd))};function Ac(){}Ac.prototype=new Ec;Ac.prototype.name=function(){};Ac.prototype.Uc=function(){};var Dc=D("table");function Fc(){}Fc.prototype=new p;e=Fc.prototype;e.className="VM";function sc(){var a=new Fc;a.Cc=Gc++;a.qa=Array(100);a.aa=-1;a.Da=[];a.wa=Array(100);a.R=Array(100);a.m=-1;a.F=null;a.Xb=null;a.jb=null;a.Ab=Hc;a.oc=!1;a.Ra=0;a.nb=null;a.Xc=0;a.Fb=null;return a}
function tc(a,b,c){var d=a.Ra;a.Ra=a.m;var f=Ic(a,function(){a.Ra=d;if(null===a.jb)a.Ab.end(a),b(null,N(a));else{var g=a.jb;a.jb=null;var l=g.td,u="\nAt instruction "+g.Fb;if(null!==l)for(var J=0,K=l.length;J<K;J++)u+="\n"+l[J].fb();b(h("Unhandled exception on thread#"+a.Cc+": "+g.Oa.message+u,g.Oa))}},c);c&&!f&&(a.Ra=d);return f}
function Ic(a,b,c){function d(){for(;f.Ra<=f.m;)try{if(f.R[f.m]instanceof q)f.m--;else{f.F=f.wa[f.m];f.Xb=f.Da[f.m];var l=f.R[f.m].g();if(!(l instanceof H))throw new TypeError;f.Fb=l;var u=f.R[f.m].h();if(!(u instanceof G))throw new TypeError;f.R[f.m]=u;if(f.Fb.Na){var J=!0;J=f.Fb.ea(f,function(K){K?Jc(f,K):f.Ab.check(f);J||d()},c);if(!J){g=!1;return}}else f.Fb.i(f),f.Ab.check(f)}}catch(K){Jc(f,K)}b()}a.Ab.check(a);var f=a,g=!0;d();return g}
function Jc(a,b){for(var c=[],d=[],f=[];a.Ra<=a.m;){var g=Kc(a).g();if(g.sc&&g.Ic(b))break;g=Kc(a).g();g.Yb&&(d.push(Kc(a)),f.push(a.wa[a.m]));g instanceof H&&(g=Kc(a).g().Ha,null!==g&&c.push(g));a.m--}g=new Ba;g.Fb=a.Fb;g.Oa=b;g.td=c;a.jb=g;for(b=d.length-1;0<=b;b--)P(a,f[b],d[b])}e.error=function(){return this.jb};
e.show=function(){ya("Thread Dump for thread#"+this.Cc);ya(""+(this.aa+1)+" args");for(var a=5<this.aa?this.aa-5:0;a<this.aa+1;a++)ya(""+a+". "+this.qa[a]);ka.ib("\n");a=this.m+1;this.R[this.m]instanceof q&&(a=this.m);ya(""+a+" instruction frames");a=20<this.m?this.m-20:0;for(var b=this.m;a<=b;b--)if(!(this.R[b]instanceof q)){var c=this.R[b],d=this.wa[b],f=this.Da[b];for(xa("\nInstruction Frame "+b+":");!(c instanceof q);){var g=c.g();if(!(g instanceof H))throw new TypeError;c=c.h();if(!(c instanceof
G))throw new TypeError;xa(g.qb(d));xa(" ")}xa("[");g=0;for(c=f.length;g<c;g++)xa(""+f[g]+" ");xa("]");ka.ib("\n")}};function z(a,b){a.Ra<=a.m&&Kc(a)instanceof q||(a.m++,0<=a.m&&a.m<a.R.length||(Lc(a,2*a.R.length),Mc(a,2*a.wa.length),Nc(a,2*a.Da.length)));a.R[a.m]=r(b,t)}function P(a,b,c){a.Ra<=a.m&&Kc(a)instanceof q||(a.m++,0<=a.m&&a.m<a.R.length||(Lc(a,2*a.R.length),Mc(a,2*a.wa.length),Nc(a,2*a.Da.length)));a.R[a.m]=c;a.wa[a.m]=b}
function Oc(a,b,c,d){a.Ra<=a.m&&Kc(a)instanceof q||(a.m++,0<=a.m&&a.m<a.R.length||(Lc(a,2*a.R.length),Mc(a,2*a.wa.length),Nc(a,2*a.Da.length)));a.R[a.m]=c;a.wa[a.m]=b;a.Da[a.m]=d}function Pc(a,b){a.Ra<=a.m&&Kc(a)instanceof q?a.R[a.m]=b:(a.m++,0<=a.m&&a.m<a.R.length||(Lc(a,2*a.R.length),Mc(a,2*a.wa.length),Nc(a,2*a.Da.length)),a.R[a.m]=b,a.wa[a.m]=a.F,a.Da[a.m]=a.Xb)}function Kc(a){return a.R[a.m]}
function v(a,b){a.aa++;if(!(0<=a.aa&&a.aa<a.qa.length)){var c=Array(~~(2*a.qa.length));Qc(a.qa,c);a.qa=c}a.qa[a.aa]=b}function Rc(a){return a.qa[a.aa]}function N(a){return a.qa[a.aa--]}function Sc(a,b){for(var c=Xa,d=0;d<b;d++)c=r(a.qa[a.aa-d],c);a.aa-=b;return c}function Tc(a,b){a.Ab=b;b.Nb(a)}e.type=function(){return Uc};e.nc=function(){var a=sc();this.copyTo(a);return a};
e.copyTo=function(a){a.aa=this.aa;a.m=this.m;a.R.length<this.R.length?(a.R=this.R.slice(),a.wa=this.wa.slice(),a.Da=this.Da.slice()):(Qc(this.R,a.R),Qc(this.wa,a.wa),Qc(this.Da,a.Da));a.qa.length!==this.qa.length?a.qa=this.qa.slice():Qc(this.qa,a.qa);a.F=this.F;a.jb=this.jb;a.Ab=this.Ab;a.oc=this.oc;a.Ra=this.Ra};e.toString=function(){return"[thread#"+this.Cc+": instruction stack "+this.m+"; arg stack "+this.aa+"]"};function Mc(a,b){b=Array(~~b);Qc(a.wa,b);a.wa=b}
function Lc(a,b){b=Array(~~b);Qc(a.R,b);a.R=b}function Nc(a,b){b=Array(~~b);Qc(a.Da,b);a.Da=b}function Qc(a,b){for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}function Vc(a){return a.Ra<=a.m?a.R[a.m]instanceof q?(a.m--,Vc(a)):a.R[a.m].g():null}var Uc=D("thread"),Gc=0;function Wc(){}Wc.prototype=new p;e=Wc.prototype;e.className="ListBuilder";e.append=function(a){this.$a.push(a)};e.list=function(){return rb(this.$a,this.$c)};e.type=function(){return D("list-builder")};
e.toString=function(){return"ListBuilder:"+this.list().toString()};function Xc(){}Xc.prototype=new H;Xc.prototype.className="Append";Xc.prototype.i=function(a){var b=N(a);a=Rc(a);if(!(a instanceof Wc))throw new TypeError;a.append(b)};Xc.prototype.toString=function(){return"(append)"};function Yc(){}Yc.prototype=new H;Yc.prototype.className="AppendAll";Yc.prototype.i=function(a){var b=N(a);a=Rc(a);if(!(a instanceof Wc))throw new TypeError;if(!(b instanceof G))throw new TypeError;b.copyTo(a.$a)};
Yc.prototype.toString=function(){return"(append-all)"};function Zc(){}Zc.prototype=new H;Zc.prototype.className="AppendDot";Zc.prototype.i=function(a){var b=N(a);a=Rc(a);if(!(a instanceof Wc))throw new TypeError;a.$c=b};Zc.prototype.toString=function(){return"(append-dot)"};function $c(){}$c.prototype=new H;e=$c.prototype;e.sc=!0;e.className="Catch";e.Ic=function(){return!0};e.i=function(a){var b=a.error();null!==b&&(a.jb=null,a.aa=this.Vb,this.cd.j(a,m([b])))};
e.toString=function(){return"(catch "+this.cd+")"};function ad(){}ad.prototype=new H;ad.prototype.className="Close_Instruction";ad.prototype.i=function(a){var b=a.F,c=new bd;c.La=this.Zc;c.va=b;v(a,c)};ad.prototype.toString=function(){return"(close "+this.Zc+")"};function cd(){}cd.prototype=new H;cd.prototype.Yb=!0;cd.prototype.className="FinallyInvoke";cd.prototype.i=function(a){this.Vc.j(a,t)};cd.prototype.toString=function(){return"(finally:"+this.Vc+")"};function dd(){}dd.prototype=new H;
dd.prototype.className="FinishList";dd.prototype.i=function(a){var b=N(a);if(!(b instanceof Wc))throw new TypeError;v(a,b.list())};dd.prototype.toString=function(){return"(finish-list)"};function bb(){}bb.prototype=new H;bb.prototype.className="FreeSym";bb.prototype.i=function(a){v(a,this.gb.value())};bb.prototype.toString=function(){return"(free-sym "+this.gb+")"};bb.prototype.qb=function(){return"(free-sym "+this.gb+" -> "+Bb(this.gb)+")"};function ed(){}ed.prototype=new H;
ed.prototype.className="LexSym";ed.prototype.i=function(a){v(a,this.gb.K(a.F))};ed.prototype.toString=function(){return"(lex-sym "+this.gb+")"};ed.prototype.qb=function(a){return"(lex-sym "+this.gb+" -> "+this.gb.K(a)+")"};function fd(){}fd.prototype=new H;fd.prototype.className="Listify";function gd(){var a=new fd;w(a);a.ed=2;return a}fd.prototype.i=function(a){v(a,Sc(a,this.ed))};fd.prototype.toString=function(){return"(listify "+this.ed+")"};function hd(){}hd.prototype=new H;
hd.prototype.className="Literal";function Oa(a){var b=new hd;w(b);b.Wc=a;return b}hd.prototype.i=function(a){v(a,this.Wc)};hd.prototype.toString=function(){return"(literal "+this.Wc+")"};function id(){}id.prototype=new H;id.prototype.className="NewList";id.prototype.i=function(a){var b=new Wc;b.$a=[];b.$c=t;v(a,b)};id.prototype.toString=function(){return"(new-list)"};function jd(){}jd.prototype=new H;jd.prototype.className="PopArg";function kd(a){var b=new jd;w(b);b.ma=a;return b}jd.prototype.i=function(a){N(a)};
jd.prototype.toString=function(){return"(pop-arg:"+this.ma+")"};function ld(){}ld.prototype=new H;ld.prototype.Yb=!0;ld.prototype.className="SetThreadLocal";function md(a,b){var c=new ld;w(c);c.vd=a;c.u=b;return c}ld.prototype.i=function(){this.vd.value=this.u};function nd(){}nd.prototype=new H;nd.prototype.className="StackSym";nd.prototype.i=function(a){var b=this.ub;a.aa++;if(!(0<=a.aa&&a.aa<a.qa.length)){var c=Array(~~(2*a.qa.length));Qc(a.qa,c);a.qa=c}a.qa[a.aa]=a.Xb[b]};
nd.prototype.toString=function(){return"(stack-bound symbol:"+this.gb+")"};function od(){}od.prototype=new H;od.prototype.className="TableMapper";od.prototype.i=function(a){var b=N(a);if(!(b instanceof G))throw new TypeError;if(!(b instanceof q)){v(a,b.h());z(a,this);b=b.g();if(!(b instanceof G))throw new TypeError;var c=kd("map-table-iterator");c.o(this);z(a,c);this.Yc.j(a,b)}};od.prototype.toString=function(){return"(table-mapper "+this.Yc+")"};function pd(){}pd.prototype=new H;
pd.prototype.className="Assign_Lex";pd.prototype.T=function(a){w(this);this.name=a;return this};function qd(){}qd.prototype=new pd;qd.prototype.className="Assign_Lex_Free";qd.prototype.i=function(a){var b=this.value.value();sd(this.name,a.F,b);v(a,b)};qd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function td(){}td.prototype=new qd;td.prototype.className="Assign_Lex_Free.Intermediate";td.prototype.i=function(a){sd(this.name,a.F,this.value.value())};
function ud(){}ud.prototype=new pd;ud.prototype.className="Assign_Lex_Lex";ud.prototype.i=function(a){var b=this.value.K(a.F);sd(this.name,a.F,b);v(a,b)};ud.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};ud.prototype.qb=function(a){return"(assign-lex "+this.name+"--\x3e"+this.name.K(a)+this.value+"--\x3e"+this.value.K(a)+")"};function vd(){}vd.prototype=new ud;vd.prototype.className="Assign_Lex_Lex.Intermediate";vd.prototype.i=function(a){sd(this.name,a.F,this.value.K(a.F))};
function wd(){}wd.prototype=new pd;wd.prototype.className="Assign_Lex_Literal";wd.prototype.i=function(a){sd(this.name,a.F,this.Za);v(a,this.Za)};function xd(a,b,c,d){if(d){d=a.push;var f=new wd;f.T(b);f.Za=c;d.call(a,f)}else d=a.push,f=new yd,f.T(b),f.Za=c,d.call(a,f)}wd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.Za+")"};function yd(){}yd.prototype=new wd;yd.prototype.className="Assign_Lex_Literal.Intermediate";yd.prototype.i=function(a){sd(this.name,a.F,this.Za)};
function zd(){}zd.prototype=new pd;zd.prototype.className="Assign_Lex_Other";zd.prototype.i=function(a){sd(this.name,a.F,Rc(a))};zd.prototype.toString=function(){return"(assign-lex "+this.name+")"};zd.prototype.qb=function(a){return"(assign-lex "+this.name+" -> "+this.name.K(a)+")"};function Ad(){}Ad.prototype=new zd;Ad.prototype.className="Assign_Lex_Other.Intermediate";Ad.prototype.i=function(a){sd(this.name,a.F,N(a))};function Bd(){}Bd.prototype=new pd;Bd.prototype.className="Assign_Lex_Stack";
Bd.prototype.i=function(a){var b=this.value.get(a);sd(this.name,a.F,b);v(a,b)};Bd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};Bd.prototype.qb=function(a){return"(assign-lex "+this.name+"--\x3e"+this.name.K(a)+" <-- "+this.value+")"};function Cd(){}Cd.prototype=new Bd;Cd.prototype.className="Assign_Lex_Stack.Intermediate";Cd.prototype.i=function(a){sd(this.name,a.F,this.value.get(a))};function Dd(){}Dd.prototype=new H;Dd.prototype.className="Assign_Free";
Dd.prototype.T=function(a){w(this);this.name=a;return this};function Ed(){}Ed.prototype=new Dd;Ed.prototype.className="Assign_Free_Free";Ed.prototype.i=function(a){var b=this.value.value();this.name.pa(b);v(a,b)};Ed.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function Fd(){}Fd.prototype=new Ed;Fd.prototype.className="Assign_Free_Free.Intermediate";Fd.prototype.i=function(){this.name.pa(this.value.value())};function Gd(){}Gd.prototype=new Dd;
Gd.prototype.className="Assign_Free_Lex";Gd.prototype.i=function(a){var b=this.value.K(a.F);this.name.pa(b);v(a,b)};Gd.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function Hd(){}Hd.prototype=new Gd;Hd.prototype.className="Assign_Free_Lex.Intermediate";Hd.prototype.i=function(a){this.name.pa(this.value.K(a.F))};function Id(){}Id.prototype=new Dd;Id.prototype.className="Assign_Free_Literal";Id.prototype.i=function(a){this.name.pa(this.Za);v(a,this.Za)};
function Jd(a,b,c,d){if(d){d=a.push;var f=new Id;f.T(b);f.Za=c;d.call(a,f)}else d=a.push,f=new Kd,f.T(b),f.Za=c,d.call(a,f)}Id.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.Za+")"};function Kd(){}Kd.prototype=new Id;Kd.prototype.className="Assign_Free_Literal.Intermediate";Kd.prototype.i=function(){this.name.pa(this.Za)};function Ld(){}Ld.prototype=new Dd;Ld.prototype.className="Assign_Free_Other";Ld.prototype.i=function(a){this.name.pa(Rc(a))};
Ld.prototype.toString=function(){return"(assign-free-other "+this.name+")"};Ld.prototype.qb=function(){return"(assign-free-other "+this.name+" -> "+Bb(this.name)+")"};function Md(){}Md.prototype=new Ld;Md.prototype.className="Assign_Free_Other.Intermediate";Md.prototype.i=function(a){this.name.pa(N(a))};function Nd(){}Nd.prototype=new Dd;Nd.prototype.className="Assign_Free_Stack";Nd.prototype.i=function(a){var b=this.value.get(a);this.name.pa(b);v(a,b)};
Nd.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function Od(){}Od.prototype=new Nd;Od.prototype.className="Assign_Free_Stack.Intermediate";Od.prototype.i=function(a){this.name.pa(this.value.get(a))};function Pd(){}Pd.prototype=new H;Pd.prototype.className="Assign_Stack";Pd.prototype.T=function(a){w(this);this.name=a;return this};function Qd(){}Qd.prototype=new Pd;Qd.prototype.className="Assign_Stack_Free";
Qd.prototype.i=function(a){var b=this.value.value();this.name.set(a,b);v(a,b)};Qd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Rd(){}Rd.prototype=new Qd;Rd.prototype.className="Assign_Stack_Free.Intermediate";Rd.prototype.i=function(a){this.name.set(a,this.value.value())};function Sd(){}Sd.prototype=new Pd;Sd.prototype.className="Assign_Stack_Lex";Sd.prototype.i=function(a){var b=this.value.K(a.F);this.name.set(a,b);v(a,b)};
Sd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Td(){}Td.prototype=new Sd;Td.prototype.className="Assign_Stack_Lex.Intermediate";Td.prototype.i=function(a){this.name.set(a,this.value.K(a.F))};function Ud(){}Ud.prototype=new Pd;Ud.prototype.className="Assign_Stack_Literal";Ud.prototype.i=function(a){this.name.set(a,this.value);v(a,this.value)};
function Vd(a,b,c,d){if(d){d=a.push;var f=new Ud;f.T(b);f.value=c;d.call(a,f)}else d=a.push,f=new Wd,f.T(b),f.value=c,d.call(a,f)}Ud.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Wd(){}Wd.prototype=new Ud;Wd.prototype.className="Assign_Stack_Literal.Intermediate";Wd.prototype.i=function(a){this.name.set(a,this.value)};function Xd(){}Xd.prototype=new Pd;Xd.prototype.className="Assign_Stack_Other";Xd.prototype.i=function(a){this.name.set(a,Rc(a))};
Xd.prototype.toString=function(){return"(assign-stack "+this.name+")"};function Yd(){}Yd.prototype=new Xd;Yd.prototype.className="Assign_Stack_Other.Intermediate";Yd.prototype.i=function(a){this.name.set(a,N(a))};function Zd(){}Zd.prototype=new Pd;Zd.prototype.className="Assign_Stack_Stack";Zd.prototype.i=function(a){var b=this.value.get(a);this.name.set(a,b);v(a,b)};Zd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function $d(){}$d.prototype=new Zd;
$d.prototype.className="Assign_Stack_Stack.Intermediate";$d.prototype.i=function(a){this.name.set(a,this.value.get(a))};function ae(){}ae.prototype=new H;ae.prototype.className="Cond";function be(a){var b=[];a.l(b);return m(b)}ae.prototype.i=function(a){Pc(a,N(a)instanceof q?this.Aa:this.hb)};ae.prototype.v=function(a){H.prototype.v.call(this,a);this.hb.v(a);this.Aa.v(a)};ae.prototype.toString=function(){return"(cond then:"+this.W+", else:"+this.H+")"};function ce(){}var de={};
k["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=de;ce.prototype=new H;ce.prototype.className="If_bound_bound_literal";ce.prototype.i=function(a){this.ra.K(a.F)instanceof q?v(a,this.H):v(a,this.W.K(a.F))};
de.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;if(!(c instanceof V))throw new TypeError;if(!(d instanceof ee))throw new TypeError;if(fe(b,c))if(d.A instanceof q)b.l(a);else{c=a.push;var f=d.A;d=new ge;w(d);d.Ya=b;d.H=f;c.call(a,d)}else{f=a.push;d=d.A;var g=new ce;w(g);g.ra=b;g.W=c;g.H=d;f.call(a,g)}};ce.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};function ge(){}ge.prototype=new H;ge.prototype.className="If_bound_bound_literal.Or";
ge.prototype.i=function(a){var b=this.Ya.K(a.F);b instanceof q?v(a,this.H):v(a,b)};ge.prototype.toString=function(){return"(if[bbl$or] "+this.Ya+" "+this.Ya+" "+this.H+")"};function he(){}var ie={};k["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=ie;he.prototype=new H;he.prototype.className="If_bound_bound_other";he.prototype.i=function(a){this.ra.K(a.F)instanceof q?Pc(a,this.Aa):v(a,this.W.K(a.F))};
ie.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;if(!(c instanceof V))throw new TypeError;if(fe(b,c)){c=a.push;var f=new je;w(f);f.Ya=b;f.Aa=be(d);f.H=d;c.call(a,f)}else{f=a.push;var g=new he;w(g);g.ra=b;g.W=c;g.Aa=be(d);g.H=d;f.call(a,g)}};he.prototype.v=function(a){H.prototype.v.call(this,a);this.Aa.v(a)};he.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};function je(){}je.prototype=new H;je.prototype.className="If_bound_bound_other.Or";
je.prototype.i=function(a){var b=this.Ya.K(a.F);b instanceof q?Pc(a,this.Aa):v(a,b)};je.prototype.v=function(a){H.prototype.v.call(this,a);this.Aa.v(a)};je.prototype.toString=function(){return"(if "+this.Ya+" "+this.Ya+" "+this.H+")"};function ke(){}var le={};k["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=le;ke.prototype=new H;ke.prototype.className="If_bound_literal_literal";ke.prototype.i=function(a){this.ra.K(a.F)instanceof q?v(a,this.H):v(a,this.W)};
ke.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};le.l=function(a,b,c,d){if(!(d instanceof ee))throw new TypeError;if(!(b instanceof V))throw new TypeError;var f=a.push;d=d.A;var g=new ke;w(g);g.ra=b;g.W=c;g.H=d;f.call(a,g)};function me(){}var ne={};k["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=ne;me.prototype=new H;me.prototype.className="If_bound_other_literal";me.prototype.i=function(a){this.ra.K(a.F)instanceof q?v(a,this.H):Pc(a,this.hb)};
me.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};me.prototype.v=function(a){H.prototype.v.call(this,a);this.hb.v(a)};ne.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;if(!(d instanceof ee))throw new TypeError;var f=a.push;d=d.A;var g=new me;w(g);g.ra=b;g.W=c;g.hb=be(c);g.H=d;f.call(a,g)};function oe(){}var pe={};k["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=pe;oe.prototype=new H;oe.prototype.className="If_bound_other_other";
oe.prototype.i=function(a){this.ra.K(a.F)instanceof q?Pc(a,this.Aa):Pc(a,this.hb)};oe.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};oe.prototype.v=function(a){H.prototype.v.call(this,a);this.hb.v(a)};pe.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;var f=a.push,g=new oe;w(g);g.ra=b;g.W=c;g.hb=be(c);g.H=d;g.Aa=be(d);f.call(a,g)};function qe(){}var re={};k["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=re;qe.prototype=new H;
qe.prototype.className="If_other_bound_other";qe.prototype.i=function(a){N(a)instanceof q?Pc(a,this.Aa):v(a,this.W.K(a.F))};qe.prototype.toString=function(){return"(if ? "+this.W+" "+this.H+")"};qe.prototype.v=function(a){H.prototype.v.call(this,a);this.Aa.v(a)};re.l=function(a,b,c,d){b.l(a);if(!(c instanceof V))throw new TypeError;b=a.push;var f=new qe;w(f);f.Aa=be(d);f.W=c;f.H=d;b.call(a,f)};function se(){}var te={};k["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=te;
se.prototype=new H;se.prototype.className="If_other_other_literal";se.prototype.i=function(a){N(a)instanceof q?v(a,this.H):Pc(a,this.hb)};se.prototype.toString=function(){return"(if ? "+this.W+" "+this.H+")"};se.prototype.v=function(a){H.prototype.v.call(this,a);this.hb.v(a)};te.l=function(a,b,c,d){if(!(d instanceof ee))throw new TypeError;b.l(a);b=a.push;d=d.A;var f=new se;w(f);f.hb=be(c);f.W=c;f.H=d;b.call(a,f)};function ue(){}var ve={};
k["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=ve;ue.prototype=new H;ue.prototype.className="If_other_stack_literal";ue.prototype.i=function(a){N(a)instanceof q?v(a,this.H):v(a,this.W.get(a))};ue.prototype.toString=function(){return"(if ? "+this.W+" "+this.H+")"};ve.l=function(a,b,c,d){if(!(d instanceof ee))throw new TypeError;b.l(a);if(!(c instanceof we))throw new TypeError;b=a.push;d=d.A;var f=new ue;w(f);f.W=c;f.H=d;b.call(a,f)};function xe(){}var ye={};
k["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=ye;xe.prototype=new H;xe.prototype.className="If_other_stack_other";xe.prototype.i=function(a){N(a)instanceof q?Pc(a,this.Aa):v(a,this.W.get(a))};xe.prototype.toString=function(){return"(if ? "+this.W+" "+this.H+")"};xe.prototype.v=function(a){H.prototype.v.call(this,a);this.Aa.v(a)};ye.l=function(a,b,c,d){b.l(a);if(!(c instanceof we))throw new TypeError;b=a.push;var f=new xe;w(f);f.W=c;f.Aa=be(d);f.H=d;b.call(a,f)};function ze(){}
var Ae={};k["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=Ae;ze.prototype=new H;ze.prototype.className="If_stack_literal_free";ze.prototype.i=function(a){this.ra.get(a)instanceof q?v(a,this.H.value()):v(a,this.W)};ze.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};
Ae.l=function(a,b,c,d){if(!(b instanceof we))throw new TypeError;if(!(d instanceof ee))throw new TypeError;d=d.A;if(!(d instanceof F))throw new TypeError;var f=a.push,g=new ze;w(g);g.ra=b;g.W=c;g.H=d;f.call(a,g)};function Be(){}var Ce={};k["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=Ce;Be.prototype=new H;Be.prototype.className="If_stack_stack_literal";Be.prototype.i=function(a){this.ra.get(a)instanceof q?v(a,this.H):v(a,this.W.get(a))};
Be.prototype.toString=function(){return"(if "+this.ra+" "+this.W+" "+this.H+")"};Ce.l=function(a,b,c,d){if(!(b instanceof we))throw new TypeError;if(!(c instanceof we))throw new TypeError;if(!(d instanceof ee))throw new TypeError;if(De(b,c))if(d.A instanceof q)b.l(a);else{c=a.push;var f=d.A;d=new Ee;w(d);d.Ya=b;d.H=f;c.call(a,d)}else{f=a.push;d=d.A;var g=new Be;w(g);g.ra=b;g.W=c;g.H=d;f.call(a,g)}};function Ee(){}Ee.prototype=new H;Ee.prototype.className="If_stack_stack_literal.Or";
Ee.prototype.i=function(a){var b=this.Ya.get(a);b instanceof q?v(a,this.H):v(a,b)};Ee.prototype.toString=function(){return"(if[ssl$or] "+this.Ya+" "+this.Ya+" "+this.H+")"};function Fe(){}Fe.prototype=new H;e=Fe.prototype;e.Ba=!0;e.className="Invoke_0.Lex";e.i=function(a){this.D.K(a.F).j(a,t)};e.toString=function(){return"(invoke "+this.D+")"};e.Ga=function(a){return this.D.K(a.F)};function Ge(){}Ge.prototype=new H;e=Ge.prototype;e.Ba=!0;e.className="Invoke_0.Free";
e.i=function(a){this.D.value().j(a,t)};e.toString=function(){return"(invoke "+this.D+")"};e.Ga=function(){return this.D.value()};function He(){}He.prototype=new H;e=He.prototype;e.Ba=!0;e.className="Invoke_0.Other";e.i=function(a){N(a).j(a,t)};e.toString=function(){return"(invoke <0>)"};e.Ga=function(a){return Rc(a)};function Ie(){}Ie.prototype=new H;e=Ie.prototype;e.Ba=!0;e.className="Invoke_1.Lex";e.i=function(a){this.D.K(a.F).j(a,r(N(a),t))};e.toString=function(){return"(invoke "+this.D+" <1>)"};
e.Ga=function(a){return this.D.K(a.F)};function Je(){}Je.prototype=new H;e=Je.prototype;e.Ba=!0;e.className="Invoke_1.Free";e.i=function(a){this.D.value().j(a,r(N(a),t))};e.toString=function(){return"(invoke "+this.D+" <1>)"};e.Ga=function(){return this.D.value()};function Ke(){}Ke.prototype=new H;e=Ke.prototype;e.Ba=!0;e.className="Invoke_1.Other";e.i=function(a){N(a).j(a,r(N(a),t))};e.toString=function(){return"(invoke <1>)"};e.Ga=function(a){return Rc(a)};function Le(){}Le.prototype=new H;e=Le.prototype;
e.Ba=!0;e.className="Invoke_2.Lex";e.i=function(a){var b=N(a),c=N(a);this.D.K(a.F).j(a,r(c,r(b,t)))};e.toString=function(){return"(invoke "+this.D+" <2>)"};e.qb=function(a){return"(invoke "+this.D+" -> "+this.D.K(a)+" <2>)"};e.Ga=function(a){return this.D.K(a.F)};function Me(){}Me.prototype=new H;e=Me.prototype;e.Ba=!0;e.className="Invoke_2.Free";e.i=function(a){var b=N(a),c=N(a);this.D.value().j(a,r(c,r(b,t)))};e.toString=function(){return"(invoke_2:free "+this.D+" <2>)"};
e.qb=function(){return"(invoke_2:free "+this.D+" -> "+this.D.value()+" <2>)"};e.Ga=function(){return this.D.value()};function Ne(){}Ne.prototype=new H;e=Ne.prototype;e.Ba=!0;e.className="Invoke_2.Other";e.i=function(a){var b=N(a),c=N(a),d=N(a);try{b.j(a,r(d,r(c,t)))}catch(f){if(!(f instanceof Error))throw f;za(f)}};e.toString=function(){return"(invoke <2>)"};e.Ga=function(a){return Rc(a)};function Oe(){}Oe.prototype=new H;e=Oe.prototype;e.Ba=!0;e.className="Invoke_3.Lex";
e.i=function(a){var b=N(a),c=N(a),d=N(a);this.D.K(a.F).j(a,r(d,r(c,r(b,t))))};e.toString=function(){return"(invoke "+this.D+" <3>)"};e.Ga=function(a){return this.D.K(a.F)};function Pe(){}Pe.prototype=new H;e=Pe.prototype;e.Ba=!0;e.className="Invoke_3.Free";e.i=function(a){var b=N(a),c=N(a),d=N(a);this.D.value().j(a,r(d,r(c,r(b,t))))};e.toString=function(){return"(invoke_3:free "+this.D+" <3>)"};e.Ga=function(){return this.D.value()};function Qe(){}Qe.prototype=new H;e=Qe.prototype;e.Ba=!0;
e.className="Invoke_3.Other";e.i=function(a){var b=N(a),c=N(a),d=N(a),f=N(a);b.j(a,r(f,r(d,r(c,t))))};e.toString=function(){return"(invoke <3>)"};e.Ga=function(a){return Rc(a)};function Re(){}Re.prototype=new H;e=Re.prototype;e.Ba=!0;e.className="Invoke_N.Lex";e.i=function(a){this.D.K(a.F).j(a,Sc(a,this.rb))};e.toString=function(){return"(invoke "+this.D+" <"+this.rb+">)"};e.Ga=function(a){return this.D.K(a.F)};function Se(){}Se.prototype=new H;e=Se.prototype;e.Ba=!0;e.className="Invoke_N.Free";
e.i=function(a){this.D.value().j(a,Sc(a,this.rb))};e.toString=function(){return"(invoke "+this.D+" <"+this.rb+">)"};e.Ga=function(){return this.D.value()};function Te(){}Te.prototype=new H;e=Te.prototype;e.Ba=!0;e.className="Invoke_N.Other";function Na(a){var b=new Te;w(b);b.rb=a;return b}e.i=function(a){N(a).j(a,Sc(a,this.rb))};e.toString=function(){return"(invoke <"+this.rb+">)"};e.Ga=function(a){return Rc(a)};function we(){}we.prototype=new p;e=we.prototype;e.className="StackSymbol";
function Ue(a,b){var c=new we;c.name=a;c.ub=b;return c}e.get=function(a){return a.Xb[this.ub]};e.set=function(a,b){a.Da[a.m][this.ub]=b};e.l=function(a){var b=a.push,c=this.name,d=this.ub,f=new nd;w(f);f.gb=c;f.ub=d;b.call(a,f)};e.type=function(){return D("stack-symbol")};e.toString=function(){return this.name.toString()};function De(a,b){return a.name===b.name&&a.ub===b.ub}e.fa=function(a,b,c){return De(this,a)?b:c<this.ub?Ue(this.name,this.index-1):this};function V(){}V.prototype=new p;e=V.prototype;
e.className="BoundSymbol";function Ve(a,b,c){var d=new V;d.bb=b;d.index=c;d.name=a;return d}function sd(a,b,c){b.Pb(a.bb).set(a.index,c)}e.K=function(a){for(var b=this.bb;0<b;)a=a.parent,b--;return a.tb[this.index]};e.l=function(a){var b=a.push,c=new ed;w(c);c.gb=this;b.call(a,c)};e.type=function(){return We};e.toString=function(){return this.name.toString()};function fe(a,b){return a.bb===b.bb&&a.name===b.name&&a.index===b.index}
e.$=function(a){return a<=this.bb?Ve(this.name,this.bb+1,this.index):this};function Xe(a){return Ve(a.name,a.bb-1,a.index)}e.ga=function(a,b,c,d,f){if(fe(this,a))return b;if(c){if(0===this.bb)throw h("can't unnest "+this+", looking for "+a+" to inline with "+b);return Xe(this)}return d===this.bb&&f<this.index?Ve(this.name,this.bb,this.index-1):this};e.v=function(a){a.Hc(this)};
e.ka=function(a){a=a[this.name.name()];if(void 0===a)return Xe(this);if(a===this.index)return Ue(this.name,a);throw h("error: parameter index mismatch: expected "+a+", got "+this.index);};var We=D("bound-symbol");function Ye(){}Ye.prototype=new p;e=Ye.prototype;e.className="SingleAssignment";function Ze(a,b){a.name=null;a.O=null;a.cb=b;return a}
e.Xa=function(a){if(null===this.name)if(a instanceof F||a instanceof V)this.name=a;else throw h("assign: can't assign to "+a);else null===this.O?this.O=a:this.cb.Xa(a)};e.toString=function(){return""+this.name+" "+this.O};e.l=function(a){$e(this,a,!1);this.cb.l(a)};
function $e(a,b,c){if(a.name instanceof V){var d=a.name;a=a.O;if(a instanceof V)if(c){c=b.push;var f=new ud;f.T(d);f.value=a;c.call(b,f)}else c=b.push,f=new vd,f.T(d),f.value=a,c.call(b,f);else a instanceof we?c?(c=b.push,f=new Bd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Cd,f.T(d),f.value=a,c.call(b,f)):a instanceof F?c?(c=b.push,f=new qd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new td,f.T(d),f.value=a,c.call(b,f)):a.Ta()?xd(b,d,a,c):a instanceof af?xd(b,d,a.Sb,c):(a.l(b),c?b.push((new zd).T(d)):
b.push((new Ad).T(d)))}else if(a.name instanceof we)d=a.name,a=a.O,a instanceof V?c?(c=b.push,f=new Sd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Td,f.T(d),f.value=a,c.call(b,f)):a instanceof we?c?(c=b.push,f=new Zd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new $d,f.T(d),f.value=a,c.call(b,f)):a instanceof F?c?(c=b.push,f=new Qd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Rd,f.T(d),f.value=a,c.call(b,f)):a.Ta()?Vd(b,d,a,c):a instanceof af?Vd(b,d,a.Sb,c):(a.l(b),c?b.push((new Xd).T(d)):b.push((new Yd).T(d)));
else if(a.name instanceof F)d=a.name,a=a.O,a instanceof V?c?(c=b.push,f=new Gd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Hd,f.T(d),f.value=a,c.call(b,f)):a instanceof we?c?(c=b.push,f=new Nd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Od,f.T(d),f.value=a,c.call(b,f)):a instanceof F?c?(c=b.push,f=new Ed,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Fd,f.T(d),f.value=a,c.call(b,f)):a.Ta()?Jd(b,d,a,c):a instanceof af?Jd(b,d,a.Sb,c):(a.l(b),c?b.push((new Ld).T(d)):b.push((new Md).T(d)));else throw h("what kind of symbol is "+
a.name+"??");}e.type=function(){return D("assignment")};e.ua=function(){return!0};e.ja=function(){return this.O instanceof W?bf(this.O)||this.cb.ja():this.O.ja()||this.cb.ja()};e.ga=function(a,b,c,d,f){var g=Ze(new Ye,null);if(this.name instanceof V&&fe(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");g.name=this.name;g.O=this.O.ga(a,b,c,d,f);g.cb=this.Cd(a,b,c,d,f);return g};
e.fa=function(a,b,c){var d=Ze(new Ye,null);if(this.name instanceof we&&De(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");d.name=this.name;d.O=this.O.fa(a,b,c);d.cb=this.Bd(a,b,c);return d};e.$=function(a){var b=Ze(new Ye,null);b.name=this.name.$(a);b.O=this.O.$(a);b.cb=this.cb.$(a);return b};e.ka=function(a){var b=Ze(new Ye,null);b.name=this.name.ka(a);b.O=this.O.ka(a);a=this.cb.ka(a);if(!(a instanceof Ye))throw new TypeError;b.cb=a;return b};
e.v=function(a){a.Ja(this);this.name.v(a);this.O.v(a);this.cb.v(a);a.Va()};function cf(){}cf.prototype=new Ye;e=cf.prototype;e.className="LastAssignment";function df(){return Ze(new cf,null)}e.Xa=function(a){if(null===this.name)if(a instanceof F||a instanceof V)this.name=a;else throw h("assign: can't assign to "+a);else if(null===this.O)this.O=a;else throw h("assign: error: unexpected "+a);};e.toString=function(){return""+this.name+" "+this.O};e.l=function(a){$e(this,a,!0)};
e.ja=function(){return this.O instanceof W?bf(this.O):this.O.ja()};e.ga=function(a,b,c,d,f){var g=df();if(this.name instanceof V&&fe(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");g.name=this.name.ga(a,b,c,d,f);g.O=this.O.ga(a,b,c,d,f);return g};e.fa=function(a,b,c){var d=df();if(this.name instanceof we&&De(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");d.name=this.name.fa(a,b,c);d.O=this.O.fa(a,b,c);return d};
e.$=function(a){var b=df();b.name=this.name.$(a);b.O=this.O.$(a);return b};e.ka=function(a){var b=df();b.name=this.name.ka(a);b.O=this.O.ka(a);return b};e.v=function(a){a.Ja(this);this.name.v(a);this.O.v(a);a.Va()};function ef(){}ef.prototype=new p;e=ef.prototype;e.className="Assignment";function ff(){var a=new ef;a.na=null;return a}e.type=function(){return D("assignment")};e.Xa=function(a){this.na.Xa(a)};e.l=function(a){this.na.l(a)};e.toString=function(){return"(assign "+this.na+")"};e.ua=function(a){return this.na.ua(a)};
e.ja=function(){return this.na.ja()};e.ga=function(a,b,c,d,f){var g=ff();g.na=this.na.ga(a,b,c,d,f);return g};e.fa=function(a,b,c){var d=ff();d.na=this.na.fa(a,b,c);return d};e.$=function(a){var b=ff();b.na=this.na.$(a);return b};e.v=function(a){a.Ja(this);this.na.v(a);a.Va()};e.ka=function(a){var b=ff();a=this.na.ka(a);if(!(a instanceof Ye))throw new TypeError;b.na=a;return b};function ee(){}ee.prototype=new p;e=ee.prototype;e.Wa=!0;e.className="Else";
function gf(){var a=new ee;a.A=null;return a}e.type=function(){return D("else-clause")};e.add=function(a){throw h("Internal error: if clause: unexpected extra condition: "+a);};e.Xa=function(a){if(null===this.A)this.A=a;else throw h("Internal error: if clause: unexpected: "+a);};e.l=function(a){this.A.l(a)};e.reduce=function(){return this};e.toString=function(){return""+this.A};e.ua=function(a){return this.A.ua(a)};e.ja=function(){return this.A instanceof W?bf(this.A):this.A.ja()};
e.ga=function(a,b,c,d,f){var g=gf();g.A=this.A.ga(a,b,c,d,f).reduce();return g};e.fa=function(a,b,c){var d=gf();d.A=this.A.fa(a,b,c).reduce();return d};e.$=function(a){var b=gf();b.A=this.A.$(a);return b};e.ka=function(a){var b=gf();b.A=this.A.ka(a);return b};e.v=function(a){a.Ja(this);this.A.v(a);a.Va()};e.Bc=function(){return"_"+hf(this.A)};function jf(){}jf.prototype=new p;e=jf.prototype;e.className="IfClause";function kf(){var a=new jf;a.la=null;return a}e.type=function(){return lf};
e.append=function(a){null!==this.la?this.la.add(a):this.la=a};e.reduce=function(){var a=this.la.reduce();if(!a.Wa)throw new TypeError;this.la=a;return a instanceof ee?a.A:this};e.Xa=function(a){this.la.Xa(a)};e.l=function(a){this.la.l(a)};e.toString=function(){return"(if "+this.la+")"};e.ua=function(a){return this.la.ua(a)};e.ja=function(){return this.la.ja()};e.ga=function(a,b,c,d,f){var g=kf();a=this.la.ga(a,b,c,d,f).reduce();if(!a.Wa)throw new TypeError;g.la=a;return g};
e.fa=function(a,b,c){var d=kf();a=this.la.fa(a,b,c).reduce();if(!a.Wa)throw new TypeError;d.la=a;return d};e.$=function(a){var b=kf();a=this.la.$(a);if(!a.Wa)throw new TypeError;b.la=a;return b};e.ka=function(a){var b=kf();a=this.la.ka(a);if(!a.Wa)throw new TypeError;b.la=a;return b};e.v=function(a){a.Ja(this);this.la.v(a);a.Va()};e.ca=function(){var a=this.la;if(!(a instanceof mf))throw new TypeError;return a.ca};var lf=D("if-clause");function mf(){}mf.prototype=new p;e=mf.prototype;e.Wa=!0;
e.className="IfThen";function nf(){var a=new mf;a.A=null;a.ca=null;a.next=null;return a}e.type=function(){return D("if-then-clause")};e.add=function(a){null!==this.next?this.next.add(a):this.next=a};e.Xa=function(a){null===this.A?this.A=a:null===this.ca?this.ca=a:this.next.Xa(a)};
e.l=function(a){var b="rainbow.vm.instructions.cond.optimise.If"+this.Bc();try{if(b in of){var c=of[b];null===c?this.Jc(a):c(a,this.A,this.ca,this.next)}else{var d=k[b];if(void 0===d)of[b]=null;else{var f=d.l;if(void 0===f)throw h("couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+b);of[b]=f}this.l(a)}}catch(g){if(!(g instanceof Error))throw g;throw h("Couldn't instantiate "+b+": "+g,g);}};
e.Jc=function(a){this.A.l(a);var b=a.push,c=this.ca,d=this.next,f=new ae;w(f);f.W=c;f.hb=be(c);f.H=d;f.Aa=be(d);b.call(a,f)};
e.reduce=function(){var a=this.next.reduce();if(!a.Wa)throw new TypeError;this.next=a;if(this.A instanceof q)return this.next;this.A instanceof V&&this.ca instanceof V&&this.next instanceof ee?(a=this.next,a=fe(this.A,this.ca)&&a.A instanceof q):a=!1;a||(this.A instanceof we&&this.ca instanceof we&&this.next instanceof ee?(a=this.next,a=De(this.A,this.ca)&&a.A instanceof q):a=!1);return a?(a=gf(),a.Xa(this.A),a):this};e.toString=function(){return""+this.A+" "+this.ca+" "+this.next};
e.ua=function(a){return this.A.ua(a)||this.ca.ua(a)||this.next.ua(a)};e.ja=function(){return this.A instanceof W&&bf(this.A)||this.ca instanceof W&&bf(this.ca)?!0:this.A.ja()||this.ca.ja()||this.next.ja()};e.ga=function(a,b,c,d,f){var g=nf();g.A=this.A.ga(a,b,c,d,f).reduce();g.ca=this.ca.ga(a,b,c,d,f).reduce();a=this.next.ga(a,b,c,d,f).reduce();if(!a.Wa)throw new TypeError;g.next=a;return g};
e.fa=function(a,b,c){var d=nf();d.A=this.A.fa(a,b,c).reduce();d.ca=this.ca.fa(a,b,c).reduce();a=this.next.fa(a,b,c).reduce();if(!a.Wa)throw new TypeError;d.next=a;return d};e.$=function(a){var b=nf();b.A=this.A.$(a);b.ca=this.ca.$(a);a=this.next.$(a);if(!a.Wa)throw new TypeError;b.next=a;return b};e.ka=function(a){var b=nf();b.A=this.A.ka(a);b.ca=this.ca.ka(a);a=this.next.ka(a);if(!a.Wa)throw new TypeError;b.next=a;return b};e.v=function(a){a.Ja(this);this.A.v(a);this.ca.v(a);this.next.v(a);a.Va()};
e.Bc=function(){var a="_"+hf(this.A);a=a+"_"+hf(this.ca);return a=this.next instanceof ee?a+"_"+hf(this.next.A):a+"_other"};var of={};function af(){}af.prototype=new p;e=af.prototype;e.className="Quotation";e.l=function(a){a.push(Oa(this.Sb))};e.type=function(){return D("quotation")};e.K=function(){return this.Sb};e.toString=function(){return"'"+this.Sb};function pf(){}pf.prototype=new p;e=pf.prototype;e.className="Invocation";function qf(a,b){a.M=b;a.mc={};return a}e.type=function(){return D("if-then-clause")};
e.toString=function(){if(this.M.g()instanceof W){var a=this.M;var b=a.g();var c=a.h(),d=b.J;if(c.xa()===d.xa())if(0===c.xa())b=m([rf].concat(b.body));else if(1===c.xa())b=m([sf,d.g(),c.g()].concat(b.body));else{a=c;for(c=[];!(d instanceof q);)c.push(d.g()),c.push(a.g()),d=d.h(),a=a.h();b=m([tf,m(c)].concat(b.body))}else b=a;if(b.g()===sf)a:{b=b.h();if(b.g()===uf){if(d=b.h().g(),a=b.h().h(),a.h()instanceof q&&a.g()instanceof jf&&(a=a.g(),a.la instanceof mf&&"it"===a.la.A.toString())){b=a.ca();a=a.la;
if(!(a instanceof mf))throw new TypeError;b=m([vf,d,b,a.next]);break a}}else if(b.g()===wf&&b.h().g()instanceof q&&(a=b.h().h(),a.g()instanceof ef&&a.h()instanceof q)){d=a.g();a=d.na;if(a.name instanceof F)a="self"===a.name.name();else if(a.name instanceof we)a="self"===a.name.name.name();else{a=a.name;if(!(a instanceof V))throw new TypeError;a="self"===a.name.name()}if(a&&d.na.O instanceof W&&d.na instanceof cf){b=d.na.O;b=m([xf,b.J].concat(b.body));break a}}b=r(sf,b)}}else b=this.M;return b.toString()};
e.l=function(a){if(1===this.M.xa()&&this.M.g()instanceof yf){zf(this.M.g(),a);var b=!0}else b=!1;b||Af(this,a)||this.Jc(a)};e.reduce=function(){if(this.M.uc(1)&&this.M.g()instanceof W){var a=this.M.g(),b=a.J;if(b.ba()||!(b.g()instanceof F))return this;b=b.g();var c=this.M.h().g();if(a.xb(b,c)){try{var d=a.zb(b,c,!0)}catch(f){if(!(f instanceof Error))throw f;throw h("couldn't curry "+b+"->"+c+" for "+a+" in expression "+this+": "+f,f);}return qf(new pf,r(d,this.M.h().h())).reduce()}}return this};
function Af(a,b){for(var c="",d=a.M;!(d instanceof q);)if(c+="_",c+=hf(d.g()),d=d.h(),!(d instanceof G))throw new TypeError;c="rainbow.vm.instructions.invoke.optimise.Invoke"+c;if(c in a.mc){d=a.mc[c];if(null===d)return!1;try{var f=d.of(a.M),g=a.M.h();if(!(g instanceof G))throw new TypeError;for(;!(g instanceof q);)if("other"===a.Bc(g.g())&&g.g().l(b),g=g.h(),!(g instanceof G))throw new TypeError;"other"===a.Bc(a.M.g())&&a.M.g().l(b);b.push(f);return!0}catch(l){if(!(l instanceof Error))throw l;throw h("couldn't create optimiser "+
c,l);}}else{f=k[c];if(void 0===f)return a.mc[c]=null,!1;a.mc[c]=f;return Af(a,b)}}function hf(a){return a instanceof V?"bound":a instanceof F?"free":a instanceof we?"stack":a.Ta()?"literal":a instanceof af?"quote":"other"}
e.Jc=function(a){switch(this.M.xa()){case 1:var b=this.M.g();if(b instanceof V){var c=a.push,d=new Fe;w(d);d.D=b;c.call(a,d)}else b instanceof F?(c=a.push,d=new Ge,w(d),d.D=b,c.call(a,d)):(b.l(a),a.push(w(new He)));break;case 2:b=this.M.g();this.M.h().g().l(a);b instanceof V?(c=a.push,d=new Ie,w(d),d.D=b,c.call(a,d)):b instanceof F?(c=a.push,d=new Je,w(d),d.D=b,c.call(a,d)):(b.l(a),a.push(w(new Ke)));break;case 3:b=this.M.g();c=this.M.h().g();d=this.M.h().h().g();c.l(a);d.l(a);b instanceof V?(c=a.push,
d=new Le,w(d),d.D=b,c.call(a,d)):b instanceof F?(c=a.push,d=new Me,w(d),d.D=b,c.call(a,d)):(b.l(a),a.push(w(new Ne)));break;case 4:b=this.M.g();c=this.M.h().g();d=this.M.h().h().g();var f=this.M.h().h().h().g();c.l(a);d.l(a);f.l(a);b instanceof V?(c=a.push,d=new Oe,w(d),d.D=b,c.call(a,d)):b instanceof F?(c=a.push,d=new Pe,w(d),d.D=b,c.call(a,d)):(b.l(a),a.push(w(new Qe)));break;default:b=this.M.g();c=this.M.h();if(!(c instanceof G))throw new TypeError;d=c;for(c=d.xa();!(d instanceof q);)if(d.g().l(a),
d=d.h(),!(d instanceof G))throw new TypeError;b instanceof V?(d=a.push,f=new Re,w(f),f.D=b,f.rb=c,d.call(a,f)):b instanceof F?(d=a.push,f=new Se,w(f),f.D=b,f.rb=c,d.call(a,f)):(b.l(a),a.push(Na(c)))}};e.ua=function(a){for(var b=this.M;!(b instanceof q);){if(b.g().ua(a))return!0;b=b.h();if(!(b instanceof G))throw new TypeError;}return!1};
e.ja=function(){for(var a=this.M;!(a instanceof q);){if(a.g()instanceof W){if(bf(a.g()))return!0}else if(a.g().ja())return!0;a=a.h();if(!(a instanceof G))throw new TypeError;}return!1};e.ga=function(a,b,c,d,f){for(var g=this.M,l=[];!(g instanceof q);){try{l.push(g.g().ga(a,b,c,d,f))}catch(u){if(!(u instanceof Error))throw u;throw h("couldn't inline "+a+"->"+b+"(unnest:"+c+";nesting:"+d+") in "+this+" : "+u,u);}g=g.h();if(!(g instanceof G))throw new TypeError;}return qf(new pf,m(l))};
e.fa=function(a,b,c){for(var d=this.M,f=[];!(d instanceof q);){try{f.push(d.g().fa(a,b,c))}catch(g){if(!(g instanceof Error))throw g;throw h("couldn't inline "+a+"->"+b+") in "+this+" : "+g,g);}d=d.h();if(!(d instanceof G))throw new TypeError;}return qf(new pf,m(f))};e.$=function(a){for(var b=this.M,c=[];!(b instanceof q);)if(c.push(b.g().$(a)),b=b.h(),!(b instanceof G))throw new TypeError;return qf(new pf,m(c))};
e.ka=function(a){for(var b=this.M,c=[];!(b instanceof q);)if(c.push(b.g().ka(a)),b=b.h(),!(b instanceof G))throw new TypeError;return qf(new pf,m(c))};e.v=function(a){a.Ja(this);for(var b=this.M;!(b instanceof q);)if(b.g().v(a),b=b.h(),!(b instanceof G))throw new TypeError;a.Va()};function Bf(){}Bf.prototype=new p;e=Bf.prototype;e.className="QuasiQuotation";function Cf(a,b){a.Ua=b;return a}e.type=function(){return D("quasiquotation")};e.l=function(a){Df(this,a,this.Ua,1)};
e.toString=function(){return"`"+this.Ua};function Ef(a){var b=[];Ff(a,b,a.Ua,1);return b}function Ff(a,b,c,d){if(Gf(c))1===d?b.push(c.h().g()):Ff(a,b,c.h().g(),d-1);else if(Hf(c))1===d?b.push(c.h().g()):Ff(a,b,c.h().g(),d-1);else if(If(c))Ff(a,b,c.h().g(),d+1);else if(!c.ba())for(;!c.ba();)if(Gf(c)||If(c))Ff(a,b,c,d),c=c.h().h();else{var f=c.g();c=c.h();Hf(f)?Ff(a,b,f,d):(Gf(f)||If(f)||Jf(f))&&Ff(a,b,f,d)}}
function Df(a,b,c,d){if(Gf(c))1===d?c.h().g().l(b):(b.push(Oa(Kf)),Df(a,b,c.h().g(),d-1),b.push(gd()));else if(Hf(c))1===d?(c.h().g().l(b),b.push(w(new Yc))):(b.push(Oa(Lf)),Df(a,b,c.h().g(),d-1),b.push(gd()),b.push(w(new Xc)));else if(If(c))b.push(Oa(Mf)),Df(a,b,c.h().g(),d+1),b.push(gd());else if(c.ba())b.push(Oa(c));else{for(b.push(w(new id));!c.ba();)if(Gf(c)||If(c))Df(a,b,c,d),c=c.h().h(),b.push(w(new Zc));else{var f=c.g();c=c.h();Hf(f)?Df(a,b,f,d):(Gf(f)||If(f)||Jf(f)?Df(a,b,f,d):b.push(Oa(f)),
b.push(w(new Xc)))}c instanceof q||(b.push(Oa(c)),b.push(w(new Zc)));b.push(w(new dd))}}function Nf(a,b){return a instanceof G&&a.Mc(b)&&a.h().h()instanceof q}function Gf(a){return Nf(a,Kf)}function Hf(a){return Nf(a,Lf)}function If(a){return Nf(a,Mf)}function Jf(a){return a instanceof G}e.ua=function(a){for(var b=Ef(this),c=0,d=b.length;c<d;c++)if(b[c].ua(a))return!0;return!1};e.ja=function(){for(var a=Ef(this),b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof W){if(bf(d))return!0}else if(d.ja())return!0}return!1};
e.ga=function(a,b,c,d,f){return Cf(new Bf,Of(a,b,c,d,f,this.Ua,1))};
function Of(a,b,c,d,f,g,l){if(Gf(g))return 1===l?m([Kf,g.h().g().ga(a,b,c,d,f)]):m([Kf,Of(a,b,c,d,f,g.h().g(),l-1)]);if(Hf(g))return 1===l?m([Lf,g.h().g().ga(a,b,c,d,f)]):m([Lf,Of(a,b,c,d,f,g.h().g(),l-1)]);if(If(g))return m([Mf,Of(a,b,c,d,f,g.h().g(),l+1)]);if(g.ba())return g;for(var u=[],J=t;!g.ba();)if(Gf(g)||If(g))J=Of(a,b,c,d,f,g,l),g=g.h().h();else{var K=g.g();g=g.h();Hf(K)?u.push(Of(a,b,c,d,f,K,l)):Gf(K)||If(K)||Jf(K)?u.push(Of(a,b,c,d,f,K,l)):u.push(K)}g instanceof q||(J=g);return rb(u,J)}
e.fa=function(a,b,c){return Cf(new Bf,Pf(a,b,c,this.Ua,1))};
function Pf(a,b,c,d,f){if(Gf(d))return 1===f?m([Kf,d.h().g().fa(a,b,c)]):m([Kf,Pf(a,b,c,d.h().g(),f-1)]);if(Hf(d))return 1===f?m([Lf,d.h().g().fa(a,b,c)]):m([Lf,Pf(a,b,c,d.h().g(),f-1)]);if(If(d))return m([Mf,Pf(a,b,c,d.h().g(),f+1)]);if(d.ba())return d;for(var g=[],l=t;!d.ba();)if(Gf(d)||If(d))l=Pf(a,b,c,d,f),d=d.h().h();else{var u=d.g();d=d.h();Hf(u)?g.push(Pf(a,b,c,u,f)):Gf(u)||If(u)||Jf(u)?g.push(Pf(a,b,c,u,f)):g.push(u)}d instanceof q||(l=d);return rb(g,l)}
e.$=function(a){return Cf(new Bf,Qf(a,this.Ua,1))};function Qf(a,b,c){if(Gf(b))return 1===c?m([Kf,b.h().g().$(a)]):m([Kf,Qf(a,b.h().g(),c-1)]);if(Hf(b))return 1===c?m([Lf,b.h().g().$(a)]):m([Lf,Qf(a,b.h().g(),c-1)]);if(If(b))return m([Mf,Qf(a,b.h().g(),c+1)]);if(b.ba())return b;for(var d=[],f=t;!b.ba();)if(Gf(b)||If(b))f=Qf(a,b,c),b=b.h().h();else{var g=b.g();b=b.h();Hf(g)||Gf(g)||If(g)||Jf(g)?d.push(Qf(a,g,c)):d.push(g)}b instanceof q||(f=b);return rb(d,f)}
e.ka=function(a){return Cf(new Bf,Rf(a,this.Ua,1))};function Rf(a,b,c){if(Gf(b))return 1===c?m([Kf,b.h().g().ka(a)]):m([Kf,Rf(a,b.h().g(),c-1)]);if(Hf(b))return 1===c?m([Lf,b.h().g().ka(a)]):m([Lf,Rf(a,b.h().g(),c-1)]);if(If(b))return m([Mf,Rf(a,b.h().g(),c+1)]);if(b.ba())return b;for(var d=[],f=t;!b.ba();)if(Gf(b)||If(b))f=Rf(a,b,c),b=b.h().h();else{var g=b.g();b=b.h();Hf(g)||Gf(g)||If(g)||Jf(g)?d.push(Rf(a,g,c)):d.push(g)}b instanceof q||(f=b);return rb(d,f)}
e.v=function(a){a.Ja(this);for(var b=Ef(this),c=0,d=b.length;c<d;c++)b[c].v(a);a.Va()};function Sf(){}e=Sf.prototype;e.Ja=function(){};e.Va=function(){};e.ic=function(a){this.Ja(a)};e.Hc=function(a){this.Ja(a)};e.hc=function(a){this.Ja(a)};e.qc=function(){this.Va()};function Tf(){}Tf.prototype=new Sf;Tf.prototype.ic=function(a){a.o(this.ac.g());this.ac=r(a,this.ac)};Tf.prototype.qc=function(){this.ac=this.ac.h()};function Uf(){}Uf.prototype=new Sf;e=Uf.prototype;e.ic=function(a){a.$b()&&this.Eb++};
e.Ja=function(){};e.Va=function(){};e.qc=function(a){a.$b()&&this.Eb--};e.Hc=function(a){a=a.bb-this.Eb;this.Rc<a&&(this.Rc=a)};function Vf(){}Vf.prototype=new Sf;e=Vf.prototype;e.count=function(){return this.Sc.length};e.ic=function(a){this.Ib.unshift(a);a.$b()&&(this.Ua=this.Ua.$(0))};e.Ja=function(a){this.Ib.unshift(a)};e.Va=function(){this.Ib.shift()};e.qc=function(a){this.Ib.shift();a.$b()&&(this.Ua=Xe(this.Ua))};e.Hc=function(a){fe(a,this.Ua)&&0<this.Ib.length&&this.Sc.push(this.Ib[0])};
function Wf(){}function Xf(a,b){var c=b.fb(),d=a[c];void 0===d&&(d=new Wf,d.target=null,d.name=null,d.md=0,d.Dc=0,d.children=[],d.parent=null,d.gd={},d.ea={},d.target=b,d.name=c,a[c]=d,b instanceof W&&(b=b.tc,null!==b&&(a=Xf(a,b),a.children.push(d),d.parent=a)));return d}function Yf(){}function Zf(a,b){var c=a[b.fb()];void 0===c&&(c=new Yf,c.target=b,c.count=0,c.key=b.fb(),a[c.key]=c);return c}function $f(){}function ag(){}ag.prototype.check=void 0;ag.prototype.end=void 0;ag.prototype.Nb=void 0;
function bg(a){a.show();var b=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");null!==b&&(/^q$/i.test(b)?Tc(a,Hc):/^f$/i.test(b)&&(a.Xc=a.m-1,Tc(a,cg)))}function dg(){}dg.prototype=new ag;dg.prototype.check=function(){};dg.prototype.end=function(){};dg.prototype.Nb=function(){};var Hc=new dg;function eg(){}eg.prototype=new ag;eg.prototype.check=function(a){bg(a)};eg.prototype.end=function(a){ya("VM thread finished: returning.");bg(a)};eg.prototype.Nb=function(){};
var fg=new eg;function gg(){}gg.prototype=new ag;gg.prototype.check=function(a){a.oc=!0;for(var b=[],c=[];0<=a.m;)Kc(a).g().Yb&&(b.push(Kc(a)),c.push(a.wa[a.m])),a.m--;for(var d=b.length-1;0<=d;d--)P(a,c[d],b[d])};gg.prototype.end=function(){};gg.prototype.Nb=function(){};var hg=new gg;function ig(){}ig.prototype=new ag;ig.prototype.check=function(a){a.m<=a.Xc&&Tc(a,fg)};ig.prototype.end=function(){};ig.prototype.Nb=function(){};var cg=new ig;function jg(){}jg.prototype=new ag;
jg.prototype.check=function(a){var b=a.nb.Nc;if(null!==b){var c=Xf(a.nb.Lc,b);b=1E6*(new Date).getTime()-a.nb.now;c.Dc+=b;for(c=c.parent;null!==c;)c.Dc+=b,c=c.parent}var d=Vc(a);null!==d&&(a.F=a.wa[a.m],a.Xb=a.Da[a.m],this.xd(d,a),d.Ba?(b=d.Ga(a),b instanceof bd&&(b=b.D()),c=Xf(a.nb.Lc,b),d=d.Ha,null!==d&&Zf(c.gd,d).count++,d=Xf(a.nb.Lc,d),null!==b&&Zf(d.ea,b).count++,c.md++,a.nb.Nc=b):a.nb.Nc=null!==d.Ha?d.Ha:t,a.nb.now=1E6*(new Date).getTime())};jg.prototype.end=function(){};
jg.prototype.Nb=function(a){var b=new $f;b.Lc={};b.Nc=null;b.now=0;a.nb=b;a.nb.now=1E6*(new Date).getTime()};var kg=new jg;function lg(){}lg.prototype=new H;lg.prototype.className="AssignmentBuilder.BuildAssignment1";function mg(a,b,c){var d=new lg;w(d);d.lc=a;d.Z=b;d.I=c;d.o(A("AssignmentBuilder.build"));return d}
lg.prototype.i=function(a){if(!(this.Z instanceof q)){try{this.Z.Ob()}catch(g){if(!(g instanceof Ja))throw g;throw h("assign: unexpected: "+this.Z);}var b=new ng,c=this.lc,d=this.Z.h(),f=this.I;w(b);b.lc=c;b.Z=d;b.I=f;b.o(A("AssignmentBuilder.build"));z(a,b);og(a,this.Z.g(),this.I)}};function ng(){}ng.prototype=new H;ng.prototype.className="AssignmentBuilder.BuildAssignment2";ng.prototype.i=function(a){this.lc.Xa(N(a).reduce());z(a,mg(this.lc,this.Z,this.I))};var pg=t,qg=D("at-string");
function og(a,b,c){if(b instanceof q)v(a,b);else if(b instanceof Ra&&!(pg instanceof q)){var d=new rg;w(d);d.I=c;d.o(A("Compiler.compile"));z(a,d);qg.bound()?La(qg.value(),a,r(b,t)):v(a,b)}else if(b instanceof F&&sg(b))og(a,tg(jb(b,"ssexpand")),c);else if(b instanceof G)if(d=b.g(),d=d instanceof F&&d.bound()?pc(d.value()):null,null!==d){b=b.h();if(!(b instanceof G))throw new TypeError;var f=new ug;w(f);f.I=c;f.o(A("Compiler.compilePair"));z(a,f);La(d,a,b)}else if(f=b.g(),ib("quote",f))c=new af,b=
b.h().g(),c.Sb=b,v(a,c);else if(f===Mf)d=new vg,w(d),d.o(A("Compiler.compilePair")),z(a,d),wg(a,b.h().g(),c,1);else if(ib("fn",f)){b=b.h();if(!(b instanceof G))throw new TypeError;d=c;if(null===d)throw new ReferenceError("can't have null lexical bindings!");f={};c=b.g();c instanceof q||(d=[f].concat(d));var g=d,l=new xg;w(l);l.sb=b;l.I=g;l.Oc=f;l.o(A("FunctionBodyBuilder.build"));z(a,l);c instanceof q?v(a,r(t,t)):(b=d,yg(c,b[0],[0],!1),zg(a,c,b))}else if(ib("if",f)){f=b=b.h();for(d=kf();0<b.xa();)switch(b.xa()){case 0:break;
case 1:d.append(gf());b=b.h();break;case 2:d.append(nf());b=b.h();if(!(b instanceof G))throw new TypeError;b.Tc(r(t,t));b=b.h();break;default:d.append(nf()),b=b.h().h()}b=f;f=new Ag;w(f);f.Jb=d;f.o(A("IfBuilder.build"));z(a,f);z(a,Bg(d,b,c))}else if(ib("assign",f)){b=b.h();d=ff();f=b.xa();if(0!==f%2)throw h("assign: requires even number of arguments");f=f/2-1;if(0>f)throw h("assign: nothing to assign");for(d.na=df();0<f;)d.na=Ze(new Ye,d.na),f--;f=Oa(d);f.o(A("AssignmentBuilder.build"));z(a,f);z(a,
mg(d,b,c))}else if(ib("compose",f.Gc())){d=f.h();if(!(d instanceof G))throw new TypeError;b=b.h();if(!(b instanceof G))throw new TypeError;og(a,Cg(d,b),c)}else if(ib("complement",f.Gc())){b=b.h();if(!(b instanceof G))throw new TypeError;d=og;f=f.h().g();b=r(D("no"),r(r(f,b),t));d(a,b,c)}else f instanceof F&&sg(f)?og(a,r(tg(jb(f,"ssexpand")),b.h()),c):z(a,Dg(b,c,b,[]));else if(b instanceof F){for(d=0;d<c.length;d++)if(b.name()in c[d]){c=c[d][b.name()];c=Ve(b,d,c);v(a,c);return}v(a,b)}else v(a,b)}
function rg(){}rg.prototype=new H;rg.prototype.className="Compiler.FinishAtString";rg.prototype.i=function(a){var b=N(a);b instanceof Ra?v(a,b):og(a,b,this.I)};function ug(){}ug.prototype=new H;ug.prototype.className="Compiler.ThenCompile";ug.prototype.i=function(a){og(a,N(a),this.I)};function vg(){}vg.prototype=new H;vg.prototype.className="Compiler.WrapQuasiQuotation";vg.prototype.i=function(a){v(a,Cf(new Bf,N(a)))};
function Cg(a,b){var c=a.g();if(a.h()instanceof q)return r(c,b);a=a.h();if(!(a instanceof G))throw new TypeError;return r(c,r(Cg(a,b),t))}function xg(){}xg.prototype=new H;xg.prototype.className="FunctionBodyBuilder.Intermediate";xg.prototype.i=function(a){var b=N(a),c=b.g();b=b.h();var d=this.sb.h();if(!(d instanceof G))throw new TypeError;var f=this.Oc,g=a.aa,l=new Eg;w(l);l.J=b;l.Oc=f;l.Z=d;l.Ka=c;l.Vb=g;l.o(A("FunctionBodyBuilder.build"));z(a,l);z(a,Fg(d,this.I,[]))};function Eg(){}
Eg.prototype=new H;Eg.prototype.sc=!0;Eg.prototype.className="FunctionBodyBuilder.Finish";Eg.prototype.Ic=function(a){return a instanceof Error};Eg.prototype.i=function(a){var b=a.error();if(null!==b)throw a.jb=null,a.aa=this.Vb,h("building function fn "+this.J+" "+this.Z+": "+b,b);v(a,Gg(this.J,this.Oc,N(a),this.Ka))};
function Gg(a,b,c,d){var f="rainbow.function.interpreted.optimise.Bind"+Hg(a,!1),g=k[f];if(void 0===g)return d instanceof q?Ig(new Jg,a,b,c):Ig(new Kg,a,b,c);try{var l=g.of(a,b,c);if(!(l instanceof p))throw new TypeError;return l}catch(u){if(!(u instanceof Error))throw u;throw h("Couldn't instantiate "+f+": "+u,u);}}
function Hg(a,b){if(a instanceof q)return"";if(a instanceof G){if(b){if(Lg(a))return a=a.h().h().g(),a.Ta()?"_Oliteral":a instanceof V?"_Obound":"_Oother";b=a.g();return"_D"+Hg(b,!0)+Hg(a.h(),!1)+"_d"}return Hg(a.g(),!0)+Hg(a.h(),!1)}return b?"_A":"_R"}function Mg(a,b,c){!(b instanceof q)&&b instanceof G&&(c&&Lg(b)?b.h().h().g().v(a):(Mg(a,b.g(),!0),Mg(a,b.h(),!1)))}var Ng=D("o"),Og=D("#NIL#");
function zg(a,b,c){var d={value:t},f=[],g=new Pg;w(g);g.Y=f;g.Ka=d;g.o(A("FunctionParameterListBuilder.buildParams_"));z(a,g);z(a,Qg(f,d,b,c))}function Pg(){}Pg.prototype=new H;Pg.prototype.className="FunctionParameterListBuilder.ReturnParams";Pg.prototype.i=function(a){if(0===this.Y.length){var b=N(a);b=r(this.Ka.value,b);v(a,b)}else b=rb(this.Y,N(a)),b=r(this.Ka.value,b),v(a,b)};function Rg(){}Rg.prototype=new H;Rg.prototype.className="FunctionParameterListBuilder.BuildParams1";
function Qg(a,b,c,d){var f=new Rg;w(f);f.Y=a;f.Ka=b;f.Ia=c;f.I=d;f.o(A("FunctionParameterListBuilder.buildParams_"));return f}
Rg.prototype.i=function(a){if(this.Ia.ba()){var b=Oa(this.Ia);b.o(this);z(a,b)}else{b=this.Ia.g();var c=this.Ia.h();if(b instanceof G)if(b instanceof q)this.Y.push(Og),z(a,Qg(this.Y,this.Ka,c,this.I));else if(this.Ka.value=cb,Lg(b)){var d=b.h().g(),f=this.Y,g=this.Ka,l=this.I,u=new Sg;w(u);u.Y=f;u.Ka=g;u.Ia=c;u.I=l;u.od=d;u.o(A("FunctionParameterListBuilder.buildParams_"));z(a,u);og(a,b.h().h().g(),this.I)}else d=this.Y,f=this.Ka,g=this.I,l=new Tg,w(l),l.Y=d,l.Ka=f,l.Ia=c,l.I=g,l.o(A("FunctionParameterListBuilder.buildParams_")),
z(a,l),zg(a,b,this.I);else this.Y.push(b),z(a,Qg(this.Y,this.Ka,c,this.I))}};function Sg(){}Sg.prototype=new H;Sg.prototype.className="FunctionParameterListBuilder.BuildParams2a";Sg.prototype.i=function(a){this.Y.push(m([Ng,this.od,N(a)]));z(a,Qg(this.Y,this.Ka,this.Ia,this.I))};function Tg(){}Tg.prototype=new H;Tg.prototype.className="FunctionParameterListBuilder.BuildParams2b";Tg.prototype.i=function(a){this.Y.push(N(a).h());z(a,Qg(this.Y,this.Ka,this.Ia,this.I))};
function Ug(a){for(;!a.ba();){if(a.g()instanceof G)return cb;a=a.h()}return t}function yg(a,b,c,d){if(!(a instanceof q))if(a instanceof G)d&&Lg(a)?yg(a.h().g(),b,c,!0):(d=a.g(),d instanceof q?(b[Og.name()]=c[0],c[0]++):yg(d,b,c,!0),yg(a.h(),b,c,!1));else{if(!(a instanceof F))throw new TypeError;b[a.name()]=c[0];c[0]++}}function Vg(a,b,c,d){var f=null;d instanceof F&&!d.Sa(a.name)?f=d:Lg(d)&&!d.h().g().Sa(a.name)?f=m([Ng,d.h().g(),d.h().h().g().fa(a,b,c)]):!Lg(d)&&d instanceof G&&(f=d);return f}
function Wg(a,b,c,d){var f=null;d instanceof F&&!d.Sa(a.name)?f=d:Lg(d)&&!d.h().g().Sa(a.name)?f=m([Ng,d.h().g(),d.h().h().g().ga(a,b,!1,0,c)]):!Lg(d)&&d instanceof G&&(f=d);return f}function Ag(){}Ag.prototype=new H;Ag.prototype.className="IfBuilder.Reduce";Ag.prototype.i=function(a){v(a,this.Jb.reduce())};function Xg(){}Xg.prototype=new H;Xg.prototype.className="IfBuilder.BuildIf1";function Bg(a,b,c){var d=new Xg;w(d);d.Jb=a;d.Z=b;d.I=c;d.o(A("IfBuilder.build"));return d}
Xg.prototype.i=function(a){if(!(this.Z instanceof q)){try{this.Z.Ob()}catch(g){if(!(g instanceof Ja))throw g;throw h("if: unexpected: "+this.Z);}var b=new Yg,c=this.Jb,d=this.Z.h(),f=this.I;w(b);b.Jb=c;b.Z=d;b.I=f;b.o(A("IfBuilder.build"));z(a,b);og(a,this.Z.g(),this.I)}};function Yg(){}Yg.prototype=new H;Yg.prototype.className="IfBuilder.BuildIf2";Yg.prototype.i=function(a){this.Jb.Xa(N(a).reduce());z(a,Bg(this.Jb,this.Z,this.I))};function Zg(){}Zg.prototype=new H;Zg.prototype.className="InvocationBuilder.BuildInvocation";
function Dg(a,b,c,d){var f=new Zg;w(f);f.Z=a;f.I=b;f.Oa=c;f.$a=d;f.o(A("InvocationBuilder.build"));return f}Zg.prototype.i=function(a){if(this.Z instanceof q)v(a,qf(new pf,m(this.$a)).reduce());else{try{this.Z.Ob()}catch(d){if(!(d instanceof Ja))throw d;throw h("can't compile "+this.Oa+"; not a proper list");}z(a,Dg(this.Z.h(),this.I,this.Oa,this.$a));var b=this.$a,c=new $g;w(c);c.$a=b;c.o(A("InvocationBuilder.build"));z(a,c);og(a,this.Z.g(),this.I)}};function $g(){}$g.prototype=new H;
$g.prototype.className="InvocationBuilder.ReducePush";$g.prototype.i=function(a){this.$a.push(N(a).reduce())};function ah(){}ah.prototype=new H;ah.prototype.className="PairExpander.ExpandPair";function Fg(a,b,c){var d=new ah;w(d);d.Z=a;d.I=b;d.Y=c;d.o(A("PairExpander.expand"));return d}
ah.prototype.i=function(a){if(this.Z instanceof q||!(this.Z instanceof G)){var b=this.Y,c=new bh;w(c);c.Y=b;c.o(A("PairExpander.expand"));z(a,c);og(a,this.Z,this.I)}else{z(a,Fg(this.Z.h(),this.I,this.Y));b=this.Z.g();c=this.Y;var d=new ch;w(d);d.$a=c;d.o(A("PairExpander.expand"));z(a,d);og(a,b,this.I)}};function ch(){}ch.prototype=new H;ch.prototype.className="PairExpander.ReducePush";ch.prototype.i=function(a){this.$a.push(N(a).reduce())};function bh(){}bh.prototype=new H;
bh.prototype.className="PairExpander.FinishPair";bh.prototype.i=function(a){var b=rb(this.Y,N(a).reduce());if(!(b instanceof G))throw new TypeError;v(a,b)};var Mf=D("quasiquote"),Kf=D("unquote"),Lf=D("unquote-splicing");function wg(a,b,c,d){b.ba()?v(a,b):Gf(b)?dh(a,Kf,b,d,c):Hf(b)?dh(a,Lf,b,d,c):If(b)?(z(a,eh(Mf)),wg(a,b.h().g(),c,d+1)):z(a,fh([],b,c,d))}function gh(){}gh.prototype=new H;gh.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";
function fh(a,b,c,d){var f=new gh;w(f);f.Y=a;f.La=b;f.I=c;f.Eb=d;f.o(A("QuasiQuoteCompiler.compile"));return f}gh.prototype.i=function(a){if(this.La.ba()){var b=this.Y,c=new hh;w(c);c.Y=b;c.o(A("QuasiQuoteCompiler.compile"));z(a,c);wg(a,this.La,this.I,this.Eb)}else if(b=this.La.g(),z(a,fh(this.Y,this.La.h(),this.I,this.Eb)),b.ba())this.Y.push(b);else{c=this.Y;var d=new ih;w(d);d.Y=c;d.o(A("QuasiQuoteCompiler.compile"));z(a,d);wg(a,b,this.I,this.Eb)}};function hh(){}hh.prototype=new H;
hh.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";hh.prototype.i=function(a){v(a,rb(this.Y,N(a)))};function ih(){}ih.prototype=new H;ih.prototype.className="QuasiQuoteCompiler.Push";ih.prototype.i=function(a){this.Y.push(N(a))};function dh(a,b,c,d,f){c=c.h().g();z(a,eh(b));1===d?og(a,c,f):wg(a,c,f,d-1)}function jh(){}jh.prototype=new H;jh.prototype.className="QuasiQuoteCompiler.Prefix";function eh(a){var b=new jh;w(b);b.rd=a;b.o(A("QuasiQuoteCompiler.compile"));return b}
jh.prototype.i=function(a){v(a,m([this.rd,N(a)]))};var sf=D("let"),wf=D("self"),uf=D("it"),xf=D("afn"),rf=D("do"),tf=D("with"),vf=D("aif");function X(){}X.prototype=new p;e=X.prototype;e.className="Builtin";function Y(a,b){a.ma=b;D(b).pa(a)}e.s=function(a){throw h("Builtin:invoke(args):provide implementation! "+this.name()+" args "+a);};e.j=function(a,b){v(a,this.s(b))};e.Ea=function(){return 0};e.type=function(){return kh};
function Ob(a,b,c){if(c<a.xa())throw ya(b+" got args "+a+" was expecting at most "+c),h(b.toLowerCase()+" expects at most "+c+" arguments: given "+a);}function lh(a,b,c){if(a.xa()!==b)throw h(c.toLowerCase()+" expects "+b+" arguments: given "+a);}e.toString=function(){return"[builtin:"+(null===this.ma||0===this.ma.length?this.className:this.ma)+"]"};e.fb=function(){return this.toString()};e.name=function(){return""===this.ma?this.className.toLowerCase():this.ma};var kh=D("fn");function bd(){}
bd.prototype=new p;e=bd.prototype;e.className="Closure";e.Ca=function(a){this.La.ya(a,this.va)};e.G=function(a,b){this.La.L(a,this.va,b)};e.ha=function(a,b,c){this.La.Qa(a,this.va,b,c)};e.j=function(a,b){this.La.P(a,this.va,b)};e.type=function(){return kh};e.toString=function(){return this.La.toString()};e.fb=function(){return this.La.fb()};e.D=function(){return this.La};
function mh(a){return 0===a.length?!1:a.charCodeAt(0)===nh?mh(a.substring(1)):a.charAt(a.length-1)===nh?mh(a.substring(0,a.length-1)):-1!==a.indexOf(oh)}function W(){}W.prototype=new p;e=W.prototype;e.X=W;e.className="InterpretedFunction";function Ig(a,b,c,d){a.name=t;a.J=b;a.C=c;a.body=vb(d);a.B=null;a.tc=null;a.oa=null;a.Hb=null;ph(a);return a}e.Ec=function(a){this.name===a&&(this.name=t)};e.jc=function(a){this.name=a;a=new Tf;a.ac=r(this,t);for(var b=0,c=this.body.length;b<c;b++)this.body[b].v(a)};
e.kc=function(){return this.name};e.fb=function(){if(null!==this.Hb)return this.Hb;this.name instanceof q?(this.Hb=this.toString(),null!==this.tc&&(this.Hb+=" in "+this.tc.fb())):this.Hb=this.kc().toString();return this.Hb};
e.reduce=function(){if(!qh||this.ja()||this.J instanceof q)var a=this;else{var b="rainbow.function.interpreted.optimise.stack.Stack"+Hg(this.J,!1),c=k[b];if(void 0===c)a=this;else try{var d=c.eb(this);if(!(d instanceof p))throw new TypeError;a=d}catch(f){if(!(f instanceof Error))throw f;throw h("Couldn't instantiate "+b+": "+f,f);}}return a};function ph(a){var b=[];zf(a,b);a.B=m(b);b=a.B;var c=b.v,d=new rh;d.Ha=a;c.call(b,d)}e.o=function(a){this.tc=a};function rh(){}rh.prototype=new Sf;
rh.prototype.hc=function(a){a.o(this.Ha)};function zf(a,b){if(0===a.body.length)b.push(Oa(t));else for(var c=0;c<a.body.length;c++){var d=c===a.body.length-1;a.body[c].l(b);d||b.push(kd("intermediate-fn-expression"))}}e=W.prototype;e.xb=function(a,b){return 1===this.body.length&&this.Kc(a,b)&&!this.ua(0)&&!this.ja()};
e.Kc=function(a,b){var c=this.C[a.name()];a=Ve(a,0,c);if(!(b=b.Ta()||b instanceof af||b instanceof F||b instanceof V)){b=new Vf;b.Ib=[];b.Sc=[];b.Ua=a;a=0;for(c=this.body.length;a<c;a++)this.body[a].v(b);b=1>=b.count()}return b};e.ja=function(){for(var a=0,b=this.body.length;a<b;a++){var c=this.body[a];if(c instanceof W){if(bf(c))return!0}else if(c.ja())return!0}return!1};function sh(a,b){for(var c=0,d=a.body.length;c<d;c++)if(a.body[c].ua(b))return!0;return!1}
e.$b=function(){return!(this.J instanceof q)};e.ua=function(a){return this.J instanceof q?sh(this,a):sh(this,a+1)};e.Ca=function(a){this.ya(a,null)};e.ya=function(a,b){this.P(a,b,t)};e.G=function(a,b){this.L(a,null,b)};e.L=function(a,b,c){this.P(a,b,r(c,t))};e.ha=function(a,b,c){this.Qa(a,null,b,c)};e.Qa=function(a,b,c,d){this.P(a,b,r(c,r(d,t)))};e.lb=function(a,b,c,d){this.Zb(a,null,b,c,d)};e.Zb=function(a,b,c,d,f){this.P(a,b,r(c,r(d,r(f,t))))};e.j=function(a,b){return this.P(a,null,b)};
e.P=function(){throw h("error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this);};e.l=function(a){if(bf(this)){var b=a.push,c=new ad;w(c);c.Zc=this;b.call(a,c)}else a.push(Oa(this))};e.Ta=function(){return!bf(this)};function bf(a){var b=new Uf;b.Ib=[];b.Sc=[];b.Eb=0;b.Rc=-1;a.v(b);return-1<b.Rc}e.v=function(a){a.ic(this);Mg(a,this.J,!1);for(var b=0,c=this.body.length;b<c;b++)this.body[b].v(a);a.qc(this);null!==this.oa&&this.oa.v(a)};
e.Ea=function(a){throw h("Can't compare "+this+" to "+a);};e.toString=function(){if(this.J instanceof G&&this.J.g()===D("_")&&this.J.h()instanceof q&&1===this.body.length&&!(this.body[0]instanceof Cb)){if(this.body[0]instanceof q)return"[]";var a=this.body[0].toString();return"["+a.substring(1,a.length-1)+"]"}return m([D("fn"),this.J].concat(this.body)).toString()};e.type=function(){return kh};e.Pb=function(a){return this.body[a]};e.length=function(){return this.body.length};
function th(a,b,c){try{b.h().ab()}catch(d){if(!(d instanceof Ja))throw d;uh(a,c)}}function uh(a,b){throw h("args "+b+" doesn't match signature for "+a);}
e.zb=function(a,b,c){var d=this.C[a.name()];if(void 0===d)throw new ReferenceError;a=Ve(a,0,d);for(var f=this.J,g=b,l=t,u=[];!f.ba();){var J=Wg(a,g,d,f.g());null!==J&&u.push(J);f=f.h()}f instanceof F&&(g=Wg(a,g,d,f),null!==g&&(l=g));try{var K=rb(u,l)}catch(aa){if(!(aa instanceof Error))throw aa;throw h("couldn't curry params "+f+", got list "+u+" and last "+l);}f={};yg(K,f,[0],!1);l=K instanceof q;!l&&c&&(b=b.$(0));c=[];for(u=0;u<this.body.length;u++)c.push(this.body[u].ga(a,b,l,0,d).reduce());b=
m(c);d=Ug(K);return Gg(K,f,b,d)};e.ga=function(a,b,c,d,f){a=this.J instanceof q?a:a.$(0);c=vh(this);for(var g=[],l=0;l<this.body.length;l++)g.push(this.body[l].ga(a,b,!1,d+1,f).reduce());a=m(g);c.body=vb(a);ph(c);return c};e.fa=function(a,b,c){if(!(this.J instanceof q))return this;for(var d=vh(this),f=[],g=0;g<this.body.length;g++)f.push(this.body[g].fa(a,b,c).reduce());a=m(f);d.body=vb(a);ph(d);return d};
e.$=function(a){this.J instanceof q||a++;for(var b=vh(this),c=[],d=0;d<this.body.length;d++)c.push(this.body[d].$(a));a=m(c);b.body=vb(a);ph(b);return b};function vh(a){var b=new a.X,c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function wh(a,b,c){if(!c.Mb(b))throw h("error: "+a+" expects "+b+" args, got "+c);}function Jg(){}Jg.prototype=new W;Jg.prototype.X=Jg;Jg.prototype.className="SimpleArgs";
Jg.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;d=b=Fa(d,b);for(f=this.J;!(f instanceof q);)if(f instanceof F){d.add(c);break}else d.add(c.g()),c=c.h(),f=f.h();P(a,b,this.B)};function Kg(){}Kg.prototype=new W;Kg.prototype.X=Kg;Kg.prototype.className="ComplexArgs";Kg.prototype.P=function(a,b,c){var d=0;for(f in this.C)d++;d=b=Fa(d,b);var f=this.B;var g=new xh;w(g);g.va=d;g.B=f;g.o(this);z(a,g);z(a,yh(b,this.J,c,this))};function xh(){}xh.prototype=new H;xh.prototype.className="ComplexArgs.Run";
xh.prototype.i=function(a){P(a,this.va,this.B)};function zh(){}zh.prototype=new H;zh.prototype.className="ComplexArgs.BuildComplex";function yh(a,b,c,d){var f=new zh;w(f);f.va=a;f.Ia=b;f.sb=c;f.o(d);return f}
zh.prototype.i=function(a){if(this.Ia.ba())this.Ia instanceof F&&this.va.add(this.sb);else{var b=this.Ia.g(),c=this.sb.g();z(a,yh(this.va,this.Ia.h(),this.sb.h(),this.Ha));if(b instanceof F)this.va.add(c);else if(Lg(b)){b=b.h();if(!(b instanceof G))throw new TypeError;if(this.sb instanceof q){c=this.va;var d=new Ah;w(d);d.va=c;d.o(this);z(a,d);c=this.va;d=[];b.h().g().l(d);P(a,c,m(d))}else this.va.add(c)}else{try{c.Ob()}catch(f){if(!(f instanceof Ja))throw f;throw h("Expected list argument for destructuring parameter "+
b+", got "+c);}z(a,yh(this.va,b,c,this.Ha))}this.Ia=this.Ia.h();this.sb=this.sb.h()}};function Ah(){}Ah.prototype=new H;Ah.prototype.className="ComplexArgs.AddToLc";Ah.prototype.i=function(a){this.va.add(N(a))};function Lg(a){return a instanceof G?a.g()===Bh:!1}var Bh=D("o");function Ch(){}Ch.prototype=new W;e=Ch.prototype;e.X=Ch;e.className="StackFunctionSupport";function Dh(a,b,c,d){return Ig(a,b,c,d)}e.xb=function(a,b){return this.Kc(a,b)&&!this.ua(0)};
e.Kc=function(a,b){var c=this.C[a.name()];a=Ue(a,c);return b.Ta()||b instanceof af||b instanceof F||1===this.body.length&&this.body[0]instanceof we&&De(a,this.body[0])};e.$b=function(){return!1};
e.zb=function(a,b){var c=this.C[a.name()],d=Ue(a,c);a=this.J;for(var f=t,g=[];!a.ba();){var l=Vg(d,b,c,a.g());null!==l&&g.push(l);a=a.h()}a instanceof F&&(l=Vg(d,b,c,a),null!==l&&(f=l));try{var u=rb(g,f)}catch(aa){if(!(aa instanceof Error))throw aa;throw h("couldn't curry params "+a+", got list "+g+" and last "+f);}a={};yg(u,a,[0],!1);f=[];for(g=0;g<this.body.length;g++)f.push(this.body[g].fa(d,b,c).reduce());b=m(f);c=Ug(u);d=Hg(u,!1);if(""===d)var J=Gg(u,a,b,c);else{c="rainbow.function.interpreted.optimise.stack.Stack"+
d;d=k[c];if(void 0===d)throw h("no stack-based function implementation for "+u+"; couldn't find "+c);try{var K=d.ta(u,a,b);if(!(K instanceof p))throw new TypeError;J=K}catch(aa){if(!(aa instanceof Error))throw aa;throw h("Couldn't instantiate "+c+": "+aa,aa);}}return J};function Eh(a,b){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=b[d].ka(a);return m(c)}function yf(){}var Fh={};k["rainbow.function.interpreted.optimise.Bind"]=Fh;yf.prototype=new W;yf.prototype.X=yf;yf.prototype.className="Bind";
Fh.of=function(a,b,c){return Ig(new yf,a,b,c)};yf.prototype.ya=function(a,b){P(a,b,this.B)};yf.prototype.P=function(a,b,c){try{c.ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 0 args, got "+c);}P(a,b,this.B)};function Gh(){}var Hh={};k["rainbow.function.interpreted.optimise.Bind_A"]=Hh;Gh.prototype=new W;Gh.prototype.X=Gh;Gh.prototype.className="Bind_A";Hh.of=function(a,b,c){return Ig(new Gh,a,b,c)};Gh.prototype.ya=function(){throw h("function "+this+" expects 1 arg, got none");};
Gh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);P(a,b,this.B)};Gh.prototype.P=function(a,b,c){c instanceof q&&this.ya(a,b);try{c.h().ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 1 arg, got "+c+" calling "+this);}this.L(a,b,c.g())};function Ih(){}var Jh={};k["rainbow.function.interpreted.optimise.Bind_A_A"]=Jh;Ih.prototype=new W;Ih.prototype.X=Ih;Ih.prototype.className="Bind_A_A";Jh.of=function(a,b,c){return Ig(new Ih,a,b,c)};
Ih.prototype.ya=function(){throw h("error: expected 2 args, got none");};Ih.prototype.L=function(a,b,c){throw h("error: expected 2 args, got 1: "+c);};Ih.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Fa(f,b);b.add(c);b.add(d);P(a,b,this.B)};Ih.prototype.P=function(a,b,c){try{c.h().h().ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 2 args, got "+c);}this.Qa(a,b,c.g(),c.h().g())};function Kh(){}var Lh={};k["rainbow.function.interpreted.optimise.Bind_A_A_A"]=Lh;
Kh.prototype=new W;Kh.prototype.X=Kh;Kh.prototype.className="Bind_A_A_A";Lh.of=function(a,b,c){return Ig(new Kh,a,b,c)};Kh.prototype.Zb=function(a,b,c,d,f){var g=0,l;for(l in this.C)g++;b=Fa(g,b);b.add(c);b.add(d);b.add(f);P(a,b,this.B)};Kh.prototype.P=function(a,b,c){th(this,c.h().h().h(),c);this.Zb(a,b,c.g(),c.h().g(),c.h().h().g())};function Mh(){}var Nh={};k["rainbow.function.interpreted.optimise.Bind_A_A_R"]=Nh;Mh.prototype=new W;Mh.prototype.X=Mh;Mh.prototype.className="Bind_A_A_R";
Nh.of=function(a,b,c){return Ig(new Mh,a,b,c)};Mh.prototype.ya=function(){throw h("error: expected at least 2 arg, got none");};Mh.prototype.L=function(a,b,c){throw h("error: expected at least 2 args, got one: "+c);};Mh.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c.g());b.add(c.h().g());b.add(c.h().h());P(a,b,this.B)};function Oh(){}var Ph={};k["rainbow.function.interpreted.optimise.Bind_A_Obound"]=Ph;Oh.prototype=new W;Oh.prototype.X=Oh;Oh.prototype.className="Bind_A_Obound";
Ph.of=function(a,b,c){b=Ig(new Oh,a,b,c);c=a.h().g().h().h().g();if(!(c instanceof V))throw new TypeError;b.ia=c;a=a.h().g().h().g();if(!(a instanceof F))throw new TypeError;if(b.xb(a,b.ia))try{var d=b.zb(a,b.ia,!1);if(!(d instanceof W))throw new TypeError;b.oa=d}catch(f){if(!(f instanceof Error))throw f;za(f)}return b};Oh.prototype.L=function(a,b,c){if(null!==this.oa)this.oa.L(a,b,c);else{var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);b.add(this.ia.K(b));P(a,b,this.B)}};
Oh.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Fa(f,b);b.add(c);b.add(d);P(a,b,this.B)};Oh.prototype.P=function(a,b,c){c instanceof q&&uh(this,c);var d=c.g(),f=c.h();f instanceof q?this.L(a,b,d):(th(this,f.h(),c),this.Qa(a,b,d,f.g()))};function Qh(){}var Rh={};k["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=Rh;Qh.prototype=new W;Qh.prototype.X=Qh;Qh.prototype.className="Bind_A_Oliteral";
Rh.of=function(a,b,c){b=Ig(new Qh,a,b,c);b.ia=a.h().g().h().h().g();a=a.h().g().h().g();if(!(a instanceof F))throw new TypeError;if(b.xb(a,b.ia))try{var d=b.zb(a,b.ia,!1);if(!(d instanceof W))throw new TypeError;b.oa=d}catch(f){if(!(f instanceof Error))throw f;za(f)}return b};Qh.prototype.L=function(a,b,c){if(null!==this.oa)this.oa.L(a,b,c);else{var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);b.add(this.ia);P(a,b,this.B)}};
Qh.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Fa(f,b);b.add(c);b.add(d);P(a,b,this.B)};Qh.prototype.P=function(a,b,c){c instanceof q&&uh(this,c);var d=c.g(),f=c.h();f instanceof q?this.L(a,b,d):(th(this,f.h(),c),this.Qa(a,b,d,f.g()))};function Sh(){}var Th={};k["rainbow.function.interpreted.optimise.Bind_A_Oother"]=Th;Sh.prototype=new W;Sh.prototype.X=Sh;Sh.prototype.className="Bind_A_Oother";Th.of=function(a,b,c){b=Ig(new Sh,a,b,c);c=[];a.h().g().h().h().g().l(c);b.Qc=m(c);return b};
Sh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);z(a,Uh(b,this.B,this));P(a,b,this.Qc)};Sh.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Fa(f,b);b.add(c);b.add(d);P(a,b,this.B)};Sh.prototype.P=function(a,b,c){c instanceof q&&uh(this,c);var d=c.g(),f=c.h();f instanceof q?this.L(a,b,d):(th(this,f.h(),c),this.Qa(a,b,d,f.g()))};function Vh(){}var Wh={};k["rainbow.function.interpreted.optimise.Bind_A_R"]=Wh;Vh.prototype=new W;Vh.prototype.X=Vh;
Vh.prototype.className="Bind_A_R";Wh.of=function(a,b,c){return Ig(new Vh,a,b,c)};Vh.prototype.ya=function(){throw h("error: expected at least 1 arg, got none");};Vh.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c.g());b.add(c.h());P(a,b,this.B)};function Xh(){}var Yh={};k["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=Yh;Xh.prototype=new W;Xh.prototype.X=Xh;Xh.prototype.className="Bind_D_A_A_A_d";Yh.of=function(a,b,c){return Ig(new Xh,a,b,c)};
Xh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);if(!(c instanceof G))throw new TypeError;b.add(c.g());c=c.h();if(!(c instanceof G))throw new TypeError;b.add(c.g());c=c.h();if(!(c instanceof G))throw new TypeError;b.add(c.g());P(a,b,this.B)};Xh.prototype.P=function(a,b,c){try{c.h().ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 1 arg, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())};function Zh(){}var $h={};
k["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=$h;Zh.prototype=new W;Zh.prototype.X=Zh;Zh.prototype.className="Bind_D_A_A_d";$h.of=function(a,b,c){return Ig(new Zh,a,b,c)};Zh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);if(!(c instanceof G))throw new TypeError;b.add(c.g());c=c.h();if(!(c instanceof G))throw new TypeError;b.add(c.g());P(a,b,this.B)};Zh.prototype.P=function(a,b,c){th(this,c.h(),c);this.L(a,b,c.g())};function ai(){}var bi={};
k["rainbow.function.interpreted.optimise.Bind_Obound"]=bi;ai.prototype=new W;ai.prototype.X=ai;ai.prototype.className="Bind_Obound";bi.of=function(a,b,c){b=Ig(new ai,a,b,c);a=a.g();if(!(a instanceof G))throw new TypeError;a=a.h().h().g();if(!(a instanceof V))throw new TypeError;b.nd=a;return b};ai.prototype.ya=function(a,b){var c=0,d;for(d in this.C)c++;b=Fa(c,b);b.add(this.nd.K(b));P(a,b,this.B)};ai.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);P(a,b,this.B)};
ai.prototype.P=function(a,b,c){if(c instanceof q)this.ya(a,b);else{try{c.h().ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 0 or 1 args, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())}};function ci(){}var di={};k["rainbow.function.interpreted.optimise.Bind_Oliteral"]=di;ci.prototype=new W;ci.prototype.X=ci;ci.prototype.className="Bind_Oliteral";
di.of=function(a,b,c){b=Ig(new ci,a,b,c);b.ia=a.g().h().h().g();a=a.g().h().g();if(!(a instanceof F))throw new TypeError;if(b.xb(a,b.ia)){a=b.zb(a,b.ia,!1);if(!(a instanceof W))throw new TypeError;b.oa=a}return b};ci.prototype.ya=function(a,b){if(null!==this.oa)this.oa.ya(a,b);else{var c=0,d;for(d in this.C)c++;b=Fa(c,b);b.add(this.ia);P(a,b,this.B)}};ci.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);P(a,b,this.B)};
ci.prototype.P=function(a,b,c){if(c instanceof q)this.ya(a,b);else{try{c.h().ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 0 or 1 args, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())}};function ei(){}var fi={};k["rainbow.function.interpreted.optimise.Bind_Oother"]=fi;ei.prototype=new W;ei.prototype.X=ei;ei.prototype.className="Bind_Oother";fi.of=function(a,b,c){b=Ig(new ei,a,b,c);b.ia=a.g().h().h().g();a=[];b.ia.l(a);b.Qc=m(a);return b};
ei.prototype.ya=function(a,b){var c=0,d;for(d in this.C)c++;b=Fa(c,b);z(a,Uh(b,this.B,this));P(a,b,this.Qc)};ei.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);P(a,b,this.B)};ei.prototype.P=function(a,b,c){if(c instanceof q)this.ya(a,b);else{try{c.h().ab()}catch(d){if(!(d instanceof Ka))throw d;throw h("expected 0 or 1 args, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())}};function gi(){}var hi={};k["rainbow.function.interpreted.optimise.Bind_R"]=hi;
gi.prototype=new W;gi.prototype.X=gi;gi.prototype.className="Bind_R";hi.of=function(a,b,c){return Ig(new gi,a,b,c)};gi.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Fa(d,b);b.add(c);P(a,b,this.B)};function ii(){}var ji={};k["rainbow.function.interpreted.optimise.stack.Stack_A"]=ji;ii.prototype=new Ch;ii.prototype.X=ii;ii.prototype.className="Stack_A";ji.eb=function(a){return ji.ta(a.J,a.C,Eh(a.C,a.body))};ji.ta=function(a,b,c){return Dh(new ii,a,b,c)};
ii.prototype.G=function(a,b){Oc(a,null,this.B,[b])};ii.prototype.L=function(a,b,c){Oc(a,b,this.B,[c])};ii.prototype.j=function(a,b){wh(this,1,b);this.G(a,b.g())};ii.prototype.P=function(a,b,c){wh(this,1,c);this.L(a,b,c.g())};function ki(){}var li={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=li;ki.prototype=new Ch;ki.prototype.X=ki;ki.prototype.className="Stack_A_A";li.eb=function(a){return li.ta(a.J,a.C,Eh(a.C,a.body))};li.ta=function(a,b,c){return Dh(new ki,a,b,c)};
ki.prototype.ha=function(a,b,c){Oc(a,null,this.B,[b,c])};ki.prototype.Qa=function(a,b,c,d){Oc(a,b,this.B,[c,d])};ki.prototype.j=function(a,b){wh(this,2,b);this.ha(a,b.g(),b.h().g())};ki.prototype.P=function(a,b,c){wh(this,2,c);this.Qa(a,b,c.g(),c.h().g())};function mi(){}var ni={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=ni;mi.prototype=new Ch;mi.prototype.X=mi;mi.prototype.className="Stack_A_A_A";ni.eb=function(a){return ni.ta(a.J,a.C,Eh(a.C,a.body))};
ni.ta=function(a,b,c){return Dh(new mi,a,b,c)};mi.prototype.lb=function(a,b,c,d){Oc(a,null,this.B,[b,c,d])};mi.prototype.Zb=function(a,b,c,d,f){Oc(a,b,this.B,[c,d,f])};mi.prototype.j=function(a,b){wh(this,3,b);this.lb(a,b.g(),b.h().g(),b.h().h().g())};mi.prototype.P=function(a,b,c){wh(this,3,c);this.Zb(a,b,c.g(),c.h().g(),c.h().h().g())};function oi(){}var pi={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=pi;oi.prototype=new Ch;oi.prototype.X=oi;oi.prototype.className="Stack_A_A_A_A";
pi.eb=function(a){return pi.ta(a.J,a.C,Eh(a.C,a.body))};pi.ta=function(a,b,c){return Dh(new oi,a,b,c)};oi.prototype.j=function(a,b){wh(this,4,b);var c=b.g(),d=b.h().g(),f=b.h().h().g();b=b.h().h().h().g();Oc(a,null,this.B,[c,d,f,b])};oi.prototype.P=function(a,b,c){wh(this,4,c);var d=c.g(),f=c.h().g(),g=c.h().h().g();c=c.h().h().h().g();Oc(a,b,this.B,[d,f,g,c])};function qi(){}var ri={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=ri;qi.prototype=new Ch;qi.prototype.X=qi;
qi.prototype.className="Stack_A_A_R";ri.eb=function(a){return ri.ta(a.J,a.C,Eh(a.C,a.body))};ri.ta=function(a,b,c){return Dh(new qi,a,b,c)};qi.prototype.P=function(a,b,c){Oc(a,b,this.B,[c.g(),c.h().g(),c.h().h()])};function si(){}var ti={};k["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=ti;si.prototype=new Ch;si.prototype.X=si;si.prototype.className="Stack_A_R";ti.eb=function(a){return ti.ta(a.J,a.C,Eh(a.C,a.body))};ti.ta=function(a,b,c){return Dh(new si,a,b,c)};
si.prototype.P=function(a,b,c){Oc(a,b,this.B,[c.g(),c.h()])};function ui(){}var vi={};k["rainbow.function.interpreted.optimise.stack.Stack_R"]=vi;ui.prototype=new Ch;ui.prototype.X=ui;ui.prototype.className="Stack_R";vi.eb=function(a){return vi.ta(a.J,a.C,Eh(a.C,a.body))};vi.ta=function(a,b,c){return Dh(new ui,a,b,c)};ui.prototype.P=function(a,b,c){Oc(a,b,this.B,[c])};function wi(){}var xi={};k["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=xi;wi.prototype=new Ch;
wi.prototype.X=wi;wi.prototype.className="Stack_D_A_A_A_A_d";xi.eb=function(a){return xi.ta(a.J,a.C,Eh(a.C,a.body))};xi.ta=function(a,b,c){return Dh(new wi,a,b,c)};wi.prototype.G=function(a,b){Oc(a,null,this.B,[b.g(),b.h().g(),b.h().h().g(),b.h().h().h().g()])};wi.prototype.L=function(a,b,c){Oc(a,b,this.B,[c.g(),c.h().g(),c.h().h().g(),c.h().h().h().g()])};wi.prototype.j=function(a,b){wh(this,1,b);this.G(a,b.g())};wi.prototype.P=function(a,b,c){wh(this,1,c);this.L(a,b,c.g())};function yi(){}
var zi={};k["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=zi;yi.prototype=new Ch;yi.prototype.X=yi;yi.prototype.className="Stack_D_A_A_d";zi.eb=function(a){return zi.ta(a.J,a.C,Eh(a.C,a.body))};zi.ta=function(a,b,c){return Dh(new yi,a,b,c)};yi.prototype.G=function(a,b){Oc(a,null,this.B,[b.g(),b.h().g()])};yi.prototype.L=function(a,b,c){Oc(a,b,this.B,[c.g(),c.h().g()])};yi.prototype.j=function(a,b){wh(this,1,b);this.G(a,b.g())};
yi.prototype.P=function(a,b,c){wh(this,1,c);this.L(a,b,c.g())};function Ai(){}var Bi={};k["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=Bi;Ai.prototype=new Ch;Ai.prototype.X=Ai;Ai.prototype.className="Stack_A_Oliteral";Bi.eb=function(a){a=Dh(new Ai,a.J,a.C,Eh(a.C,a.body));a.ia=a.J.h().g().h().h().g();var b=a.J.h().g().h().g();if(!(b instanceof F))throw new TypeError;if(a.xb(b,a.ia)){b=a.zb(b,a.ia,!1);if(!(b instanceof W))throw new TypeError;a.oa=b}return a};
Bi.ta=function(a,b,c){b=Dh(new Ai,a,b,c);b.ia=a.g().h().h().g();return b};e=Ai.prototype;e.G=function(a,b){null!==this.oa?this.oa.G(a,b):Oc(a,null,this.B,[b,this.ia])};e.ha=function(a,b,c){Oc(a,null,this.B,[b,c])};e.L=function(a,b,c){null!==this.oa?this.oa.L(a,b,c):Oc(a,b,this.B,[c,this.ia])};e.Qa=function(a,b,c,d){Oc(a,b,this.B,[c,d])};e.j=function(a,b){if(b instanceof q)uh(this,b);else{var c=b.g();b.h()instanceof q?this.G(a,c):this.ha(a,c,b.h().g())}};
e.P=function(a,b,c){if(c instanceof q)uh(this,c);else{var d=c.g();c.h()instanceof q?this.L(a,b,d):this.Ad(a,b,d,c.h().g())}};function Ci(){}var Di={};k["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=Di;Ci.prototype=new Ch;Ci.prototype.X=Ci;Ci.prototype.className="Stack_Oliteral";
Di.eb=function(a){a=Dh(new Ci,a.J,a.C,Eh(a.C,a.body));a.ia=a.J.g().h().h().g();var b=a.J.g().h().g();if(!(b instanceof F))throw new TypeError;if(a.xb(b,a.ia)){b=a.zb(b,a.ia,!1);if(!(b instanceof W))throw new TypeError;a.oa=b}return a};Di.ta=function(a,b,c){b=Dh(new Ci,a,b,c);b.ia=a.g().h().h().g();return b};e=Ci.prototype;e.Ca=function(a){null!==this.oa?this.oa.Ca(a):Oc(a,null,this.B,[this.ia])};e.G=function(a,b){Oc(a,null,this.B,[b])};
e.ya=function(a,b){null!==this.oa?this.oa.L(a,b):Oc(a,b,this.B,[this.ia])};e.L=function(a,b,c){Oc(a,b,this.B,[c])};e.j=function(a,b){b instanceof q?this.Ca(a):(wh(this,1,b),this.G(a,b.g()))};e.P=function(a,b,c){c instanceof q?this.ya(a):(wh(this,1,c),this.L(a,b,c.g()))};function Ei(){}Ei.prototype=new X;Ei.prototype.className="Macex";
Ei.prototype.j=function(a,b){if(b instanceof q)v(a,t);else if(b=b.g(),b instanceof G){var c=b.g();if(c instanceof F)if(c.bound())if(c=c.value(),c=pc(c),null===c)v(a,b);else{b=b.h();if(!(b instanceof G))throw new TypeError;var d=new Fi;w(d);d.o(this);z(a,d);La(c,a,b)}else v(a,b);else v(a,b)}else v(a,b)};function Fi(){}Fi.prototype=new H;Fi.prototype.className="Macex.Again";Fi.prototype.i=function(a){this.Ha.j(a,r(N(a),t))};function Gi(){}Gi.prototype=new X;Gi.prototype.className="Uniq";
Gi.prototype.Ca=function(a){v(a,D("gs"+ ++Hi))};Gi.prototype.s=function(a){try{a.ab()}catch(b){if(!(b instanceof Ka))throw b;throw h("uniq: expects no args, got "+a);}return D("gs"+ ++Hi)};var Hi=0;function Ii(){}Ii.prototype=new X;Ii.prototype.className="Details";Ii.prototype.s=function(a){a=a.g();try{if(!(a instanceof Ba))throw new TypeError;var b=a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+this+" expected an exception, got "+a);}return b.message()};
function Ji(){}Ji.prototype=new X;Ji.prototype.className="Err";Ji.prototype.s=function(a){throw h(Sb(a.g(),this).value());};function Ki(){}Ki.prototype=new X;Ki.prototype.className="OnErr";Ki.prototype.j=function(a,b){var c=new $c,d=b.g(),f=a.aa;w(c);c.cd=d;c.Vb=f;c.o(this);z(a,c);b.h().g().j(a,t)};function Li(){}Li.prototype=new X;Li.prototype.className="Protect";function Mi(){var a=new Li;Y(a,"protect");var b=new Ni;b.ud=a;a.wd=b}function Ni(){}Ni.prototype=new Sf;Ni.prototype.hc=function(a){a.o(this.ud)};
Li.prototype.j=function(a,b){var c=new cd,d=b.h().g();w(c);c.Vc=d;c=r(c,r(kd("clear up 'protect/after' return value"),t));c.v(this.wd);P(a,null,c);b.g().j(a,t)};function Oi(){}Oi.prototype=new X;e=Oi.prototype;e.className="Apply";e.Ca=function(){throw h("apply: expects at least 2 args, got none");};e.G=function(a,b){throw h("apply: expects at least 2 args, got "+b);};e.ha=function(a,b,c){if(!(c instanceof G))throw new TypeError;b.j(a,c)};e.lb=function(a,b,c,d){b.j(a,r(c,d))};
e.j=function(a,b){var c=b.g();b=b.h();if(!(b instanceof G))throw new TypeError;c.j(a,Pi(this,b))};function Pi(a,b){return b.h()instanceof q?xb(b.g(),a):r(b.g(),Pi(a,xb(b.h(),a)))}function Qi(){}Qi.prototype=new X;Qi.prototype.className="Eval";Qi.prototype.j=function(a,b){var c=new Ri;w(c);c.o(this);z(a,c);og(a,b.g(),[])};function Ri(){}Ri.prototype=new H;Ri.prototype.className="Eval.ReduceAndExecute";Ri.prototype.i=function(a){var b=[];N(a).reduce().l(b);P(a,null,m(b))};function Si(){}
Si.prototype=new X;Si.prototype.className="SSExpand";Si.prototype.s=function(a){return tg(jb(a.g(),this))};
function tg(a){a=a.name();if(/:/.test(a)||/^~/.test(a)){a=a.split(":");if(1===a.length)a=Ti(a[0]);else{for(var b=[D("compose")],c=0,d=a.length;c<d;c++)b.push(Ti(a[c]));a=rb(b,t)}return a}if(mh(a)){b=[D("andf")];a=Ui(a);c=0;for(d=a.length;c<d;c++){var f=Ua(a[c]);if(!(f instanceof F))throw new TypeError;b.push(Vi(f))}return m(b)}if(/[.!]/.test(a)){b=a.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/);c=[];d=!1;f=0;for(var g=b.length;f<g;f++)if(""!==b[f]){var l=Ua(b[f].replace(/#p/g,
"%").replace(/#h/g,"#"));if(l===Ya||l===lb){if(d)throw h("Bad syntax "+a);d=!0}else d=!1;c.unshift(l)}d&&c.unshift(D("#<eof>"));return Wi(c,0)}throw h("Unknown syntax "+a);}function Ui(a){return 0===a.length?[""]:a.charCodeAt(0)===nh?(a=Ui(a.substring(1)),a[0]=oh+a[0],a):a.charCodeAt(a.length-1)===nh?(a=Ui(a.substring(0,a.length-1)),a[a.length-1]+=oh,a):a.split(oh)}
function Wi(a,b){var c=Vi(a[b++]),d=null;if(b<a.length&&(d=a[b++],!(d instanceof F)))throw new TypeError;c=d===lb?m([D("quote"),c]):c;return b<a.length?m([Wi(a,b),c]):null!==d?m([D("get"),c]):c}function Xi(a){try{return Pa(a)}catch(b){if(!(b instanceof Ga))throw b;throw h("Couldn't read value of symbol: "+a,b);}}function Vi(a){if(a instanceof q)return a;if(!(a instanceof F))throw new TypeError;return Xi(a.name())}function Ti(a){return/^~/.test(a)?m([D("complement"),Xi(a.substring(1))]):Xi(a)}
var oh="&",nh=38;function Yi(){}Yi.prototype=new X;Yi.prototype.className="SSyntax";Yi.prototype.s=function(a){return a.g()instanceof F&&sg(a.g())?cb:t};function sg(a){var b=a.name();return/:/.test(b)||/^~/.test(b)||mh(a.name())||/[.!]/.test(a.name())}function Zi(){}Zi.prototype=new X;Zi.prototype.className="JavaDebug";Zi.prototype.s=function(a){return a.g()};function $i(){}$i.prototype=new X;$i.prototype.className="JavaInvoke";
$i.prototype.s=function(a){var b=a.g();try{if(!(b instanceof uc))throw new TypeError;var c=b}catch(g){if(!(g instanceof TypeError))throw g;throw h("Wrong argument type: "+this+" expected a java-object, got "+b);}b=jb(a.h().g(),this).name();a=a.h().h().g();if(!(a instanceof G))throw new TypeError;c=c.Pc;var d=Object(c)[b];if("[object Function]"!==Object.prototype.toString.call(d))throw h("Field "+b+" is not a method on "+c);b=d.apply;var f=[];xc(f,a);a=b.call(d,c,f);return yc(a)};function aj(){}
aj.prototype=new X;aj.prototype.className="Car";aj.prototype.G=function(a,b){v(a,b.g())};aj.prototype.s=function(a){lh(a,1,this.className);return a.g().g()};function bj(){}bj.prototype=new X;bj.prototype.className="Cdr";bj.prototype.G=function(a,b){v(a,b.h())};bj.prototype.s=function(a){lh(a,1,this.className);return a.g().h()};function cj(){}cj.prototype=new X;cj.prototype.className="Cons";cj.prototype.ha=function(a,b,c){v(a,r(b,c))};
cj.prototype.s=function(a){lh(a,2,this.className);return r(a.g(),a.h().g())};function dj(){}dj.prototype=new X;dj.prototype.className="Len";dj.prototype.s=function(a){Ob(a,this.className,1);return ic(a.g().xa(),1)};function ej(){}ej.prototype=new X;ej.prototype.className="NewString";ej.prototype.s=function(a){var b=a.g();if(!(b instanceof L))throw new TypeError;var c=Jb;if(!(a.h()instanceof q||(c=a.h().g(),c instanceof Db)))throw new TypeError;a=[];for(var d=0;d<b.U();d++)a.push(c.value());return A(a.join(""))};
function fj(){}fj.prototype=new X;fj.prototype.className="Scar";fj.prototype.ha=function(a,b,c){v(a,b.dc(c))};fj.prototype.s=function(a){return a.g().dc(a.h().g())};function gj(){}gj.prototype=new X;gj.prototype.className="Scdr";gj.prototype.s=function(a){var b=a.g();if(!(b instanceof G))throw new TypeError;a=a.h().g();b.Tc(a);return a};function hj(){}hj.prototype=new X;hj.prototype.className="Acos";hj.prototype.s=function(a){Ob(a,this.className,1);a=Math.acos(mb(a.g(),this).N());return C(a)};
function ij(){}ij.prototype=new X;e=ij.prototype;e.className="Add";e.Ca=function(a){v(a,lc)};e.G=function(a,b){v(a,b)};e.ha=function(a,b,c){v(a,b.add(c))};e.lb=function(a,b,c,d){v(a,b.add(c).add(d))};e.s=function(a){if(a instanceof q)return lc;var b=a.g();for(a=a.h();!(a instanceof q);)b=b.add(a.g()),a=a.h();return b};function jj(){}jj.prototype=new X;jj.prototype.className="Asin";jj.prototype.s=function(a){Ob(a,this.className,1);a=Math.asin(mb(a.g(),this).N());return C(a)};function kj(){}
kj.prototype=new X;kj.prototype.className="Atan";kj.prototype.s=function(a){Ob(a,this.className,1);a=Math.atan(mb(a.g(),this).N());return C(a)};function lj(){}lj.prototype=new X;lj.prototype.className="ComplexParts";lj.prototype.s=function(a){Ob(a,this.className,1);a=ac(a.g(),this);return m([C(a.V),C(a.S)])};function mj(){}mj.prototype=new X;mj.prototype.className="Cosine";mj.prototype.s=function(a){Ob(a,this.className,1);a=Math.cos(mb(a.g(),this).N());return C(a)};function nj(){}nj.prototype=new X;
nj.prototype.className="Divide";nj.prototype.s=function(a){if(a instanceof q)throw h("Function `/` expected at least 1 arg");return oj(a).pc(a)};function pj(){}pj.prototype=new X;pj.prototype.className="Expt";pj.prototype.s=function(a){Ob(a,this.className,2);var b=a.g();if(!(b instanceof L))throw new TypeError;a=a.h().g();if(!(a instanceof L))throw new TypeError;if(b instanceof $b)return fc(b,a);if(a instanceof $b)return fc(Wa(b.N(),0),a);b=b.N();a=a.N();return C(Math.pow(b,a))};function qj(){}
qj.prototype=new X;qj.prototype.className="Logarithm";qj.prototype.s=function(a){Ob(a,this.className,1);a=mb(a.g(),this);return a instanceof $b?a.log():C(Math.log(a.N()))};function rj(){}rj.prototype=new X;rj.prototype.className="MakeComplex";rj.prototype.s=function(a){Ob(a,this.className,2);var b=mb(a.g(),this);a=mb(a.h().g(),this);return Wa(b.N(),a.N())};
function oj(a){if(a instanceof q)return sj;if(a.g()instanceof ec)return tj;if(a.g()instanceof $b)return uj;if(!(a.h()instanceof G))throw new TypeError;return oj(a.h())}function vj(){}vj.prototype.Tb=void 0;vj.prototype.multiply=void 0;vj.prototype.pc=void 0;function wj(){}wj.prototype=new vj;wj.prototype.Tb=function(a){return C(xj(this,a))};
function xj(a,b){if(b instanceof q)return 0;var c=b.g();if(!(c instanceof L))throw new TypeError;c=c.N();b=b.h();if(!(b instanceof G))throw new TypeError;return c+xj(a,b)}wj.prototype.multiply=function(a){return C(yj(this,a))};wj.prototype.pc=function(a){var b=a.h(),c=a.g();if(!(c instanceof L))throw new TypeError;b=b instanceof q?1/c.N():c.N();a=a.h();if(!(a instanceof G))throw new TypeError;return C(b/yj(this,a))};
function yj(a,b){if(b instanceof q)return 1;var c=b.g();if(!(c instanceof L))throw new TypeError;c=c.N();b=b.h();if(!(b instanceof G))throw new TypeError;a=yj(a,b);return c*a}var tj=new wj;function zj(){}zj.prototype=new vj;zj.prototype.Tb=function(a){if(a instanceof q)return hc;var b=gc(a.g());a=a.h();if(!(a instanceof G))throw new TypeError;a=this.Tb(a);return Wa(b.V+a.V,b.S+a.S)};
zj.prototype.multiply=function(a){if(a instanceof q)return Wa(1,0);var b=gc(a.g());a=a.h();if(!(a instanceof G))throw new TypeError;return cc(b,this.multiply(a))};zj.prototype.pc=function(a){var b=gc(a.g());a=a.h();if(!(a instanceof G))throw new TypeError;return cc(b,this.multiply(a).inverse())};var uj=new zj;function Aj(){}Aj.prototype=new vj;
Aj.prototype.Tb=function(a){if(a instanceof q)return lc;var b=a.g();if(!(b instanceof dc))throw new TypeError;a=a.h();if(!(a instanceof G))throw new TypeError;return b.Rb(this.Tb(a))};Aj.prototype.multiply=function(a){if(a instanceof q)return mc;var b=a.g();if(!(b instanceof dc))throw new TypeError;a=a.h();if(!(a instanceof G))throw new TypeError;return kc(b,this.multiply(a))};
Aj.prototype.pc=function(a){var b=a.h(),c=a.g();if(!(c instanceof dc))throw new TypeError;b=b instanceof q?ic(c.da,c.sa):c;a=a.h();if(!(a instanceof G))throw new TypeError;a=this.multiply(a);a=ic(a.da,a.sa);return kc(b,a)};var sj=new Aj;function Bj(){}Bj.prototype=new X;Bj.prototype.className="Mod";Bj.prototype.ha=function(a,b,c){if(!(b instanceof L))throw new TypeError;if(!(c instanceof L))throw new TypeError;v(a,b.bd(c))};Bj.prototype.j=function(a,b){Ob(b,this.className,2);this.ha(a,b.g(),b.h().g())};
function Cj(){}Cj.prototype=new X;e=Cj.prototype;e.className="Multiply";e.Ca=function(a){v(a,mc)};e.G=function(a,b){v(a,b)};e.ha=function(a,b,c){v(a,b.multiply(c))};e.lb=function(a,b,c,d){v(a,b.multiply(c).multiply(d))};e.s=function(a){if(a instanceof q)return mc;var b=a.g();for(a=a.h();!(a instanceof q);)b=b.multiply(a.g()),a=a.h();return b};function Dj(){}Dj.prototype=new X;Dj.prototype.className="PolarCoordinates";
Dj.prototype.s=function(a){Ob(a,this.className,1);a=ac(a.g(),this);return m([C(Math.sqrt(a.V*a.V+a.S*a.S)),C(Math.atan2(a.S,a.V))])};function Ej(){}Ej.prototype=new X;Ej.prototype.className="Quotient";Ej.prototype.s=function(a){lh(a,2,this.className);var b=nb(a.g(),this),c=nb(a.h().g(),this);if(!b.isInteger()||!c.isInteger())throw h("Type error: "+this+" : expected integer, got "+a);a=b.U()/c.U();return Ta(0>a?Math.ceil(a):Math.floor(a))};function Fj(){}Fj.prototype=new X;Fj.prototype.className="Rand";
Fj.prototype.s=function(a){if(a instanceof q)return C(Math.random());var b=a.g();if(!(b instanceof L))throw new TypeError;if(!b.isInteger())throw h("rand: requires one exact integer argument, got "+a);a:for(;;)if(a=Math.floor(9007199254740992*Math.random()),9007199254740992>a)break a;return ic(Math.abs(a%b.U()),1)};function Gj(){}Gj.prototype=new X;Gj.prototype.className="Sine";Gj.prototype.s=function(a){Ob(a,this.className,1);a=Math.sin(mb(a.g(),this).N());return C(a)};function Hj(){}
Hj.prototype=new X;Hj.prototype.className="Sqrt";Hj.prototype.G=function(a,b){v(a,b.sqrt())};Hj.prototype.j=function(a,b){lh(b,1,this.className);this.G(a,b.g())};function Ij(){}Ij.prototype=new X;e=Ij.prototype;e.className="Subtract";e.Ca=function(){throw h("- : expected at least 1 arg");};e.G=function(a,b){if(!(b instanceof L))throw new TypeError;v(a,b.Db())};e.ha=function(a,b,c){if(!(c instanceof L))throw new TypeError;v(a,b.add(c.Db()))};
e.s=function(a){if(a instanceof q)throw h("Function `-` expected at least 1 arg");var b=a.g();if(!(b instanceof L))throw new TypeError;b=b.Db();a=a.h();if(!(a instanceof G))throw new TypeError;a instanceof q?a=b:(a=r(b,a),a=oj(a).Tb(a).Db());return a};function Jj(){}Jj.prototype=new X;Jj.prototype.className="Tangent";Jj.prototype.s=function(a){Ob(a,this.className,1);a=Math.tan(mb(a.g(),this).N());return C(a)};function Kj(){}Kj.prototype=new X;Kj.prototype.className="Trunc";
Kj.prototype.s=function(a){Ob(a,this.className,1);a=a.g();if(!(a instanceof L))throw new TypeError;a=a.N();return ic(Math.floor(a),1)};function Lj(){}Lj.prototype=new X;Lj.prototype.className="Bound";Lj.prototype.Ca=function(){throw h("bound: requires 1 arg");};Lj.prototype.G=function(a,b){if(!(b instanceof F))throw new TypeError;v(a,Ab(b.bound()))};Lj.prototype.s=function(a){Ob(a,this.className,1);a=jb(a.g(),this);return Ab(a.bound())};function Mj(){}Mj.prototype=new X;Mj.prototype.className="Exact";
Mj.prototype.s=function(a){a=mb(a.g(),this);return Ab(a instanceof dc&&a.isInteger())};function Nj(){}Nj.prototype=new X;e=Nj.prototype;e.className="GreaterThan";e.Ca=function(a){v(a,cb)};e.G=function(a){v(a,cb)};e.ha=function(a,b,c){v(a,0>=b.Ea(c)?t:cb)};e.s=function(a){if(2>a.xa())return cb;var b=a.g();a=a.h();if(!(a instanceof G))throw new TypeError;for(;!(a instanceof q);){var c=a.g();if(0>=b.Ea(c))return t;b=c;a=a.h();if(!(a instanceof G))throw new TypeError;}return cb};function Oj(){}
Oj.prototype=new X;e=Oj.prototype;e.className="Is";e.Ca=function(a){v(a,cb)};e.G=function(a){v(a,cb)};e.ha=function(a,b,c){v(a,Ab(b.Sa(c)))};e.s=function(a){return Pj(this,a.g(),a.h())};function Pj(a,b,c){return c instanceof q?cb:b.Sa(c.g())?Pj(a,b,c.h()):t}function Qj(){}Qj.prototype=new X;e=Qj.prototype;e.className="LessThan";e.Ca=function(a){v(a,cb)};e.G=function(a){v(a,cb)};e.ha=function(a,b,c){v(a,0>b.Ea(c)?cb:t)};
e.s=function(a){var b=a.g();a=a.h();if(!(a instanceof G))throw new TypeError;for(;!(a instanceof q);){var c=a.g();if(0<=b.Ea(c))return t;b=c;a=a.h();if(!(a instanceof G))throw new TypeError;}return cb};function Rj(){}Rj.prototype=new X;Rj.prototype.className="RainbowDebug";Rj.prototype.j=function(a){Tc(a,fg);v(a,D(this.ma))};function Sj(){}Sj.prototype=new X;Sj.prototype.className="RainbowProfile";Sj.prototype.Ca=function(a){this.profile(a);v(a,t)};
Sj.prototype.G=function(a,b){if(!(b instanceof Fc))throw new TypeError;this.profile(b);v(a,t)};Sj.prototype.profile=function(a){Tc(a,kg)};function Tj(){}Tj.prototype=new X;Tj.prototype.className="RainbowProfileReport";Tj.prototype.Ca=function(a){v(a,this.sd(a))};Tj.prototype.G=function(a,b){if(!(b instanceof Fc))throw new TypeError;v(a,this.sd(a))};function Uj(){}Uj.prototype=new X;Uj.prototype.className="CurrentGcMilliseconds";Uj.prototype.j=function(a){v(a,Ta(1))};function Vj(){}Vj.prototype=new X;
Vj.prototype.className="CurrentProcessMilliseconds";Vj.prototype.j=function(a){v(a,Ta(1))};function Wj(){}Wj.prototype=new X;Wj.prototype.className="Declare";Wj.prototype.ha=function(a,b,c){b===Xj?(b=pg,pg=c,v(a,b)):v(a,t)};Wj.prototype.j=function(a,b){this.ha(a,b.g(),b.h().g())};var Xj=D("atstrings");function Yj(){}Yj.prototype=new X;Yj.prototype.className="MSec";Yj.prototype.s=function(){return Ta((new Date).getTime())};function Zj(){}Zj.prototype=new X;Zj.prototype.className="Quit";
Zj.prototype.j=function(a,b){Ob(b,this.className,1);var c=0;b instanceof G&&(b=b.g(),b instanceof dc&&b.isInteger()&&(b=b.U(),1<=b&&255>=b&&(c=b)));b=new ak;w(b);b.zd=c;b.o(this);z(a,b)};function ak(){}ak.prototype=new H;ak.prototype.Na=!0;ak.prototype.className="Quit.Go";ak.prototype.ea=function(a,b){return ma(function(c,d){if(c)return void b(c);v(a,d);b(null)})};ak.prototype.i=function(){throw Error();};function bk(){}bk.prototype=new X;bk.prototype.className="Seconds";
bk.prototype.s=function(){var a=(new Date).getTime()/1E3;return Ta(0>a?Math.ceil(a):Math.floor(a))};function ck(){}ck.prototype=new X;ck.prototype.className="MapTable";ck.prototype.ha=function(a,b,c){v(a,c);if(!(c instanceof Ia))throw new TypeError;v(a,Cc(c));c=new od;w(c);c.Yc=b;c.o(this);z(a,c)};ck.prototype.j=function(a,b){lh(b,2,this.className);this.ha(a,b.g(),b.h().g())};function dk(){}dk.prototype=new X;dk.prototype.className="Sref";dk.prototype.lb=function(a,b,c,d){v(a,b.ec(c,d))};
dk.prototype.j=function(a,b){lh(b,3,this.className);this.lb(a,b.g(),b.h().g(),b.h().h().g())};function ek(){}ek.prototype=new X;ek.prototype.className="Table";ek.prototype.j=function(a,b){var c=zc();v(a,c);if(!(b instanceof q)){var d=kd("table-initialiser");d.o(this);z(a,d);b.g().j(a,m([c]))}};function fk(){}fk.prototype=new X;fk.prototype.className="AtomicInvoke";fk.prototype.G=function(a,b){for(;a!==gk&&null!==gk;);gk=a;hk++;var c=w(new ik);c.o(this);z(a,c);b.j(a,t)};
fk.prototype.j=function(a,b){this.G(a,b.g())};function ik(){}ik.prototype=new H;ik.prototype.className="AtomicInvoke.ReleaseLock";ik.prototype.i=function(){hk--;0===hk&&(gk=null)};var gk=null,hk=0;function jk(){}jk.prototype=new X;jk.prototype.className="BreakThread";jk.prototype.s=function(a){a=a.g();if(!(a instanceof Fc))throw new TypeError;Tc(a,hg);return t};function kk(){}kk.prototype=new X;kk.prototype.className="CCC";
kk.prototype.G=function(a,b){if(b instanceof q)throw h("Can't ccc nil!");var c=new lk;c.fc=a.nc();b.G(a,c)};kk.prototype.j=function(a,b){Ob(b,this.className,1);this.G(a,b.g())};function lk(){}lk.prototype=new p;e=lk.prototype;e.className="CCC.ContinuationWrapper";
e.G=function(a,b){var c;a:{for(c=0;c<a.m;c++)if(a.R[c]!==this.fc.R[c]){--c;break a}c=a.m}for(var d=[],f=[];c<a.m;)Kc(a).g().Yb&&(d.push(Kc(a)),f.push(a.wa[a.m])),a.m--;c=[d,f];this.fc.copyTo(a);v(a,b);for(b=c[0].length-1;0<=b;b--){d=c[1][b];if(!(d instanceof Ea))throw new TypeError;f=c[0][b];if(!(f instanceof G))throw new TypeError;P(a,d,f)}};e.j=function(a,b){this.G(a,b.g())};e.type=function(){return kh};
e.toString=function(){return"#<continuation ip:"+this.fc.m+";ap:"+this.fc.aa+";VM#"+this.fc.Cc+">"};function mk(){}mk.prototype=new X;mk.prototype.className="Dead";mk.prototype.j=function(a,b){b=b.g();if(!(b instanceof Fc))throw new TypeError;v(a,Ab(b.oc))};function nk(){}nk.prototype=new X;nk.prototype.className="KillThread";nk.prototype.j=function(a,b){b=b.g();if(!(b instanceof Fc))throw new TypeError;Tc(b,hg);v(a,t)};function ok(){}ok.prototype=new X;ok.prototype.className="NewThreadLocal";
ok.prototype.s=function(){var a=new Xb;a.u=null;return a};function pk(){}pk.prototype=new X;pk.prototype.className="ThreadLocalGet";pk.prototype.s=function(a){return Zb(a.g(),this).get()};function qk(){}qk.prototype=new X;qk.prototype.className="ThreadLocalSet";qk.prototype.s=function(a){var b=Zb(a.g(),this);a=a.h().g();b.set(a);return a};function rk(){}rk.prototype=new X;rk.prototype.className="Annotate";
rk.prototype.s=function(a){var b=a.g();a=a.h().g();if(b===a.type())b=a;else{var c=new oc;c.Ub=b;c.wb=a;b=c}return b};function sk(){}sk.prototype=new X;sk.prototype.className="Coerce";sk.prototype.ha=function(a,b,c){var d=b.type();if(d===c)v(a,b);else try{if(!(c instanceof F))throw new TypeError;if(!(d instanceof F))throw new TypeError;(c.Lb[d]||null).G(a,b)}catch(f){if(f instanceof tk)throw h("Can't coerce "+b+" to "+c);throw h("Can't coerce "+b+" ( a "+b.type()+" ) to "+c,f);}};
sk.prototype.lb=function(a,b,c,d){var f=b.type();if(f===c)v(a,b);else try{if(!(c instanceof F))throw new TypeError;if(!(f instanceof F))throw new TypeError;(c.Lb[f]||null).ha(a,b,d)}catch(g){if(g instanceof tk)throw h("Can't coerce "+b+" to "+c);throw h("Can't coerce "+b+" ( a "+b.type()+" ) to "+c,g);}};sk.prototype.j=function(a,b){if(b.Mb(2))this.ha(a,b.g(),b.h().g());else if(b.Mb(3))this.lb(a,b.g(),b.h().g(),b.h().h().g());else throw h("coerce expects 2 or 3 args, got "+b);};function uk(){}
uk.prototype=new X;uk.prototype.className="Rep";uk.prototype.s=function(a){var b=a.g();if(b instanceof oc){a=a.g();try{if(!(a instanceof oc))throw new TypeError;var c=a}catch(d){if(!(d instanceof TypeError))throw d;throw h("Wrong argument type: "+this+" expected a Tagged, got "+a);}c=c.wb}else c=b;return c};function vk(){}vk.prototype=new X;vk.prototype.className="Type";vk.prototype.G=function(a,b){v(a,b.type())};vk.prototype.s=function(a){Ob(a,this.className,1);return a.g().type()};
var Qb=D("string"),wk=D("sym"),xk=D("int"),yk=D("num"),zk=D("cons"),Ak=D("char");
function Bk(){kb(zk,Qb,Ck("string-cons",function(a){if(!(a instanceof Ra))throw new TypeError;a=a.value();for(var b=[],c=0;c<a.length;c++)b.push(Sa(a.charCodeAt(c)));return m(b)}));kb(Qb,zk,Ck("cons-string",function(a){if(!(a instanceof G))throw new TypeError;for(var b=[];!(a instanceof q);)if(b.push(a.g().pb()),a=a.h(),!(a instanceof G))throw new TypeError;return A(b.join(""))}));kb(Qb,xk,Ck("int-string",function(a){return this.Kb(a,nc)},function(a,b){if(!(b instanceof L))throw new TypeError;if(!(a instanceof
L))throw new TypeError;if(a instanceof $b)a=A(a.toString());else{if(a instanceof ec&&10!==b.U())throw new tk;a=a instanceof dc?a.stringify(b):Dk(a,b)}return a}));kb(Qb,yk,Ck("num-string",function(a){return this.Kb(a,nc)},function(a,b){if(!(b instanceof L))throw new TypeError;if(!(a instanceof L))throw new TypeError;if(a instanceof $b)a=A(a.toString());else{if(a instanceof ec&&10!==b.U())throw new tk;a=a instanceof dc?a.stringify(b):Dk(a,b)}return a}));kb(wk,Qb,Ck("string-sym",function(a){if(!(a instanceof
Ra))throw new TypeError;return Ua(a.value())}));kb(Qb,wk,Ck("sym-string",function(a){return a instanceof q?A(""):A(a.pb())}));kb(xk,Ak,Ck("char-int",function(a){if(!(a instanceof Db))throw new TypeError;a=a.value();return Ta(a)},function(a){return this.Wb(a)}));kb(xk,yk,Ck("num-int",function(a){if(!(a instanceof L))throw new TypeError;return a.round()},function(a){return this.Wb(a)}));kb(yk,xk,Ck("int-num",function(a){return a}));kb(Ak,xk,Ck("int-char",function(a){if(!(a instanceof L))throw new TypeError;
if(!a.isInteger())throw new tk;return Sa(a.U())}));kb(Qb,Ak,Ck("char-string",function(a){if(!(a instanceof Db))throw new TypeError;a=a.value();return A(String.fromCharCode(a))}));kb(wk,Ak,Ck("char-sym",function(a){if(!(a instanceof Db))throw new TypeError;a=a.value();return Ua(String.fromCharCode(a))}));kb(yk,Qb,Ck("string-num",function(a){return this.Kb(a,nc)},function(a,b){if(!(b instanceof L))throw new TypeError;if(!(a instanceof Ra))throw new TypeError;a=a.value().toLowerCase();if("+inf.0"===
a)b=C(1/0);else if("-inf.0"===a)b=C(-1/0);else if("+nan.0"===a)b=C(0/0);else{if(/i$/i.test(a))try{var c;if("+i"===a)var d=Wa(0,1);else if("-i"===a)d=Wa(0,-1);else if(c=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(a))d=Wa(C(parseFloat(c[1])).value(),C(parseFloat(c[2]+(c[3]||"1"))).value());else throw new Ga;}catch(f){if(!(f instanceof Ga))throw f;throw new tk;}else/\./.test(a)||15>b.U()&&/.e./.test(a)?b=Ek(a,b.U()):/\//.test(a)?b=Fk(a,b.U()):(b=b.U(),b=
Ta(parseInt(a,~~b))),d=b;b=d}return b}));kb(xk,Qb,Ck("string-int",function(a){return this.Kb(a,nc)},function(a,b){if(!(b instanceof L))throw new TypeError;if(!(a instanceof Ra))throw new TypeError;a=a.value().toLowerCase();if("+inf.0"===a||"-inf.0"===a||"+nan.0"===a||/i$/i.test(a))throw new tk;if(/\./.test(a)||15>b.U()&&/.e./i.test(a)){b=Ek(a,b.U());if(!(b instanceof ec))throw new TypeError;return b.Ac()}if(/\//.test(a)){b=Fk(a,b.U());if(!(b instanceof dc))throw new TypeError;return b.Ac()}b=b.U();
return Ta(parseInt(a,~~b))}))}function Dk(a,b){if(10===b.U())return A(a.toString());a=a.U().toString(~~b.U());return A(""+a+".0")}function Fk(a,b){a=a.split(/\//g);if(2<a.length)throw new tk;return ic(parseInt(a[0],~~b),parseInt(a[1],~~b))}
function Ek(a,b){var c=!1;/^-/.test(a)&&(c=!0,a=a.substring(1));a=a.toUpperCase();/E/.test(a)||(a+="E0");/\./.test(a)?/^\./.test(a)&&(a="0"+a):(a=a.split(/E/g),a=a[0]+".0E"+a[1]);a=a.split(/\./g);var d=parseInt(a[0],~~b);a=a[1].split(/E/g);/^\+/.test(a[1])&&(a[1]=a[1].substring(1));b=(d+parseInt(a[0],~~b)/Math.pow(b,a[0].length))*Math.pow(b,parseInt(a[1],~~b));c&&(b=-b);return C(b)}function Rb(){}Rb.prototype=new p;e=Rb.prototype;e.className="Typing.Coercion";
function Ck(a,b,c){var d=new Rb;d.ma=a;void 0!==b&&(d.Wb=b);void 0!==c&&(d.Kb=c);return d}e.type=function(){return D("fn")};e.Wb=function(){throw h("not implemented: "+this.ma+".coerce 1 arg");};e.Kb=function(){throw h("not implemented: "+this.ma+".coerce 2 args");};e.G=function(a,b){v(a,this.Wb(b))};e.ha=function(a,b,c){v(a,this.Kb(b,c))};function tk(){}tk.prototype=Error();function Gk(){}Gk.prototype=new Cb;e=Gk.prototype;e.className="Input";function Hk(a,b){a.Oa=b;return a}
e.yc=function(a,b){return this.Oa.yc(function(c,d){return c?a(h("Cannot read byte from "+this,c)):null===d?a(null,t):a(null,Ta(d))},b)};function Ik(a,b,c){return a.Oa.zc(function(d,f){return d?b(h("reading character: "+d)):null===f?b(null,t):b(null,Sa(f))},c)}function Jk(a,b,c,d){return Qa(a.Oa,function(f,g){return f?c(h("Can't parse input: "+f,f)):null===g?c(null,b):c(null,g)},d)}e.type=function(){return Kk};e.za=function(){return this.Oa};e.close=function(){this.Oa.close()};
function Lk(a,b){try{if(!(a instanceof Gk))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected input-port, got "+a);}}var Kk=D("input");function Mk(){}Mk.prototype=new Cb;e=Mk.prototype;e.className="Output";function Nk(a,b){a.Qb=b;return a}e.write=function(a){this.Qb.ib(""+a)};e.type=function(){return Ok};e.za=function(){return this.Qb};e.close=function(){this.Qb.close()};e.Fc=function(a){this.Qb.Fc(a)};
function Pk(a,b){try{if(!(a instanceof Mk))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected output-port, got "+a);}}e.flush=function(){this.Qb.flush()};var Ok=D("output");function Qk(){}Qk.prototype=new Gk;Qk.prototype.className="StringInputPort";
function ra(a){function b(){if(a.length<=f)return!1;var g=a.charCodeAt(f++);d.push(g>>>8&255,g&255);return!0}function c(){return 0!==d.length||b()?d.shift():null}var d=[],f=0;return Hk(new Qk,{yc:function(g){g(null,c());return!0},zc:function(g){var l=c(),u=c();g(null,null===u?null:l<<8|u);return!0},vb:function(g){g(null,2<=d.length||b()?d[0]<<8|d[1]:null);return!0},close:function(){}})}function Rk(){}Rk.prototype=new Mk;Rk.prototype.className="StringOutputPort";
function Sk(){var a=new Rk;a.bc=[];a.Cb=null;return Nk(a,{ib:function(b){if(null===a.Cb)a.bc.push(b);else for(var c=0,d=b.length;c<d;c++){var f=b.charCodeAt(c);a.bc.push(String.fromCharCode(a.Cb<<8|f>>>8&255));a.Cb=f&255}},Fc:function(b){null===a.Cb?a.Cb=b:(a.bc.push(String.fromCharCode(a.Cb<<8|b)),a.Cb=null)},close:function(){},flush:function(){}})}Rk.prototype.value=function(){var a=this.bc.join("");this.bc=[a];return A(a)};Rk.prototype.toString=function(){return"#<string-output-port>"};
function Tk(){}Tk.prototype=new Mk;Tk.prototype.className="IO.Anon_STD_OUT_";Tk.prototype.close=function(){};Tk.prototype.toString=function(){return"IO.STD_OUT"};var Uk;Uk=Nk(new Tk,ka);function Vk(){}Vk.prototype=new Mk;Vk.prototype.className="IO.Anon_STD_ERR_";Vk.prototype.close=function(){};Vk.prototype.toString=function(){return"IO.STD_ERR"};var Wk;Wk=Nk(new Vk,la);function Xk(){}Xk.prototype=new Gk;Xk.prototype.className="IO.Anon_STD_IN_";Xk.prototype.close=function(){};
Xk.prototype.toString=function(){return"IO.STD_IN"};var Yk={value:Hk(new Xk,ja)},Zk={value:Uk};function $k(a,b){return a instanceof q?Zk.value:Pk(a,b)}function al(a,b){return a instanceof q?Yk.value:Lk(a,b)}function bl(a){for(;!(a instanceof q);){var b=a.g();if(b instanceof Gk)b.close();else if(b instanceof Mk)b.close();else if(b instanceof uc)b.close();else throw h("close: expected Input or Output object; got "+b);a=a.h();if(!(a instanceof G))throw new TypeError;}return t}function cl(){}
cl.prototype=new X;cl.prototype.className="Close_Builtin";cl.prototype.s=function(a){return bl(a)};function dl(){}dl.prototype=new X;dl.prototype.className="Disp";dl.prototype.G=function(a,b){Zk.value.write(b.pb());v(a,t)};dl.prototype.s=function(a){var b=$k(a.h().g(),this);a=a.g();b.write(a.pb());return t};function el(){}el.prototype=new X;el.prototype.className="FlushOut";el.prototype.s=function(){Zk.value.flush();return cb};function fl(){}fl.prototype=new X;fl.prototype.className="ForceClose";
fl.prototype.s=function(a){return bl(a)};function gl(){}gl.prototype=new X;gl.prototype.className="StdErr";gl.prototype.s=function(){return Wk};function hl(){}hl.prototype=new X;hl.prototype.className="StdIn";hl.prototype.s=function(a){lh(a,0,this.className);return Yk.value};function il(){}il.prototype=new X;il.prototype.className="StdOut";il.prototype.s=function(){return Zk.value};function jl(){}jl.prototype=new X;jl.prototype.className="Write";
jl.prototype.s=function(a){$k(a.h().g(),this).write(a.g());return t};function kl(){}kl.prototype=new X;kl.prototype.className="WriteB";kl.prototype.s=function(a){var b=$k(a.h().g(),this);a=nb(a.g(),this);if(!a.isInteger())throw h("write byte: expected byte, got "+a);b.Fc(a.U());return t};function ll(){}ll.prototype=new X;ll.prototype.className="WriteC";ll.prototype.s=function(a){var b=$k(a.h().g(),this),c=Hb(a.g(),this);b.Qb.ib(String.fromCharCode(c.value()));return a.g()};function ml(){}
ml.prototype=new X;ml.prototype.className="InString";ml.prototype.s=function(a){return ra(Sb(a.g(),this).value())};function nl(){}nl.prototype=new X;nl.prototype.className="Inside";nl.prototype.s=function(a){a=a.g();try{if(!(a instanceof Rk))throw new TypeError;var b=a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+this+" expected a StringOutputPort, got "+a);}return b.value()};function ol(){}ol.prototype=new X;ol.prototype.className="OutString";ol.prototype.s=function(){return Sk()};
function pl(){}pl.prototype=new X;pl.prototype.className="CallWStdIn";pl.prototype.j=function(a,b){var c=md(Yk,Yk.value);c.o(this);z(a,c);Yk.value=Lk(b.g(),this);b.h().g().j(a,t)};function ql(){}ql.prototype=new X;ql.prototype.className="CallWStdOut";ql.prototype.j=function(a,b){var c=md(Zk,Zk.value);c.o(this);z(a,c);Zk.value=Pk(b.g(),this);b.h().g().j(a,t)};function rl(){}rl.prototype=new X;rl.prototype.className="ReadB";
rl.prototype.G=function(a,b){var c=new sl;b=al(b,this);w(c);c.Gb=b;c.o(this);z(a,c)};rl.prototype.j=function(a,b){var c=new sl;b=al(b.g(),this);w(c);c.Gb=b;c.o(this);z(a,c)};function sl(){}sl.prototype=new H;sl.prototype.Na=!0;sl.prototype.className="ReadB.Go";sl.prototype.ea=function(a,b,c){return this.Gb.yc(function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};sl.prototype.i=function(){throw Error();};function tl(){}tl.prototype=new X;tl.prototype.className="ReadC";
tl.prototype.G=function(a,b){var c=new ul;b=al(b,this);w(c);c.Gb=b;c.o(this);z(a,c)};tl.prototype.j=function(a,b){var c=new ul;b=al(b.g(),this);w(c);c.Gb=b;c.o(this);z(a,c)};function ul(){}ul.prototype=new H;ul.prototype.Na=!0;ul.prototype.className="ReadC.Go";ul.prototype.ea=function(a,b,c){return Ik(this.Gb,function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};ul.prototype.i=function(){throw Error();};function vl(){}vl.prototype=new X;vl.prototype.className="Sread";
vl.prototype.j=function(a,b){var c=new wl,d=Lk(b.g(),this);b=b.h().g();w(c);c.Gb=d;c.jd=b;c.o(this);z(a,c)};function wl(){}wl.prototype=new H;wl.prototype.Na=!0;wl.prototype.className="Sread.Go";wl.prototype.ea=function(a,b,c){return Jk(this.Gb,this.jd,function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};wl.prototype.i=function(){throw Error();};function xl(){}xl.prototype=new X;xl.prototype.className="Dir";
xl.prototype.j=function(a,b){var c=new yl;b=Sb(b.g(),this).value();w(c);c.mb=b;c.o(this);z(a,c)};function yl(){}yl.prototype=new H;yl.prototype.Na=!0;yl.prototype.className="Dir.Go";yl.prototype.ea=function(a,b){return na(function(c,d){if(c)return void b(c);v(a,d);b(null)})};yl.prototype.i=function(){throw Error();};function zl(){}zl.prototype=new X;zl.prototype.className="DirExists";zl.prototype.j=function(a,b){var c=new Al;b=b.g();w(c);c.mb=b;c.o(this);z(a,c)};function Al(){}Al.prototype=new H;
Al.prototype.Na=!0;Al.prototype.className="DirExists.Go";Al.prototype.ea=function(a,b){return oa(Sb(this.mb,this.Ha).value(),function(c,d){if(c)return void b(c);v(a,d?this.mb:t);b(null)})};Al.prototype.i=function(){throw Error();};function Bl(){}Bl.prototype=new X;Bl.prototype.className="FileExists";Bl.prototype.j=function(a,b){var c=new Cl;b=b.g();w(c);c.mb=b;c.o(this);z(a,c)};function Cl(){}Cl.prototype=new H;Cl.prototype.Na=!0;Cl.prototype.className="FileExists.Go";
Cl.prototype.ea=function(a,b,c){return pa(Sb(this.mb,this.Ha).value(),function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};Cl.prototype.i=function(){throw Error();};function Dl(){}Dl.prototype=new X;Dl.prototype.className="InFile";Dl.prototype.j=function(a,b){var c=new El;b=Sb(b.g(),this).value();w(c);c.mb=b;c.o(this);z(a,c)};function El(){}El.prototype=new H;El.prototype.Na=!0;El.prototype.className="InFile.Go";
El.prototype.ea=function(a,b,c){return qa(this.mb,function(d,f){if(d)return void b(d);v(a,Hk(new Gk,f));b(null)},c)};El.prototype.i=function(){throw Error();};function Fl(){}Fl.prototype=new X;Fl.prototype.className="OutFile";Fl.prototype.j=function(a,b){var c=Sb(b.g(),this).value();b=b.h().g();b=!(b instanceof q)&&"append"===jb(b,this).name();var d=new Gl;w(d);d.ma=c;d.yd=b;d.o(this);z(a,d)};function Gl(){}Gl.prototype=new H;Gl.prototype.Na=!0;Gl.prototype.className="OutFile.Go";
Gl.prototype.ea=function(a,b){return sa(function(c,d){if(c)return void b(c);v(a,Nk(new Mk,d));b(null)})};Gl.prototype.i=function(){throw Error();};function Hl(){}Hl.prototype=new X;Hl.prototype.className="MakeDirectory";Hl.prototype.j=function(a,b){var c=new Il;b=Sb(b.g(),this).value();w(c);c.mb=b;c.o(this);z(a,c)};function Il(){}Il.prototype=new H;Il.prototype.Na=!0;Il.prototype.className="MakeDirectory.Go";Il.prototype.ea=function(a,b){return ta(function(c,d){if(c)return void b(c);v(a,d?cb:t);b(null)})};
Il.prototype.i=function(){throw Error();};function Jl(){}Jl.prototype=new X;Jl.prototype.className="MakeDirectories";Jl.prototype.j=function(a,b){var c=new Kl;b=Sb(b.g(),this).value();w(c);c.mb=b;c.o(this);z(a,c)};function Kl(){}Kl.prototype=new H;Kl.prototype.Na=!0;Kl.prototype.className="MakeDirectories.Go";Kl.prototype.ea=function(a,b){return ua(function(c,d){if(c)return void b(c);v(a,d?cb:t);b(null)})};Kl.prototype.i=function(){throw Error();};function Ll(){}Ll.prototype=new X;
Ll.prototype.className="MvFile";Ll.prototype.j=function(a,b){var c=new Ml,d=Sb(b.g(),this).value();b=Sb(b.h().g(),this).value();w(c);c.Ed=d;c.Dd=b;c.o(this);z(a,c)};function Ml(){}Ml.prototype=new H;Ml.prototype.Na=!0;Ml.prototype.className="MvFile.Go";Ml.prototype.ea=function(a,b){return va(function(c){if(c)return void b(c);v(a,t);b(null)})};Ml.prototype.i=function(){throw Error();};function Nl(){}Nl.prototype=new X;Nl.prototype.className="RmFile";
Nl.prototype.j=function(a,b){var c=new Ol;b=Sb(b.g(),this).value();w(c);c.mb=b;c.o(this);z(a,c)};function Ol(){}Ol.prototype=new H;Ol.prototype.Na=!0;Ol.prototype.className="RmFile.Go";Ol.prototype.ea=function(a,b){return wa(function(c){if(c)return void b(c);v(a,t);b(null)})};Ol.prototype.i=function(){throw Error();};var qh=!0;
function Pl(a){var b={noLibs:!0,e:['(assign load-from-web  (fn ()    ( (fn (eof f loop)        (assign loop          (fn ()            ( (fn (command)              (if (is command eof)                (eval                  \'(do (load "strings.arc")                       (load "lib/bag-of-tricks.arc")                       (load "rainbow/rainbow.arc")                       (load "rainbow/rainbow-libs.arc")                       ))                ( (fn ()                  eval.command                  (loop)                ) ))            ) (sread f eof))))        (loop)    ) (uniq) (infile "arc.arc") nil)))'].concat("#libs"!==location.hash?
[]:["(load-from-web)"])},c=(new Date).getTime(),d=b.ARC_PATH||[];-1===d.indexOf(".")&&(d=["."].concat(d));var f=Ql(b.args||[]);b.nosf&&(qh=!1);Y(new Yj,"msec");Y(new bk,"seconds");Y(new Vj,"current-process-milliseconds");Y(new Uj,"current-gc-milliseconds");Y(new Wj,"declare");Y(new Zj,"quit");D("pi").pa(C(Math.PI));D("e").pa(C(Math.E));Y(new Kj,"trunc");Y(new pj,"expt");Y(new Fj,"rand");Y(new Hj,"sqrt");Y(new Ej,"quotient");Y(new Bj,"mod");Y(new ij,"+");Y(new Ij,"-");Y(new Cj,"*");Y(new nj,"/");Y(new Gj,
"sin");Y(new mj,"cos");Y(new Jj,"tan");Y(new jj,"asin");Y(new hj,"acos");Y(new kj,"atan");Y(new qj,"log");Y(new lj,"complex-parts");Y(new rj,"make-complex");Y(new Dj,"polar-coordinates");Y(new vk,"type");Y(new rk,"annotate");Y(new uk,"rep");Y(new sk,"coerce");Bk();Y(new $i,"java-invoke");Y(new Zi,"java-debug");Y(new Rl,"new-thread");Y(new nk,"kill-thread");Y(new jk,"break-thread");Y(new mk,"dead");Y(new fk,"atomic-invoke");Y(new kk,"ccc");Y(new ok,"thread-local");Y(new pk,"thread-local-ref");Y(new qk,
"thread-local-set");Y(new Gi,"uniq");Y(new Ei,"macex");Mi();Y(new Ji,"err");Y(new Ki,"on-err");Y(new Ii,"details");Y(new ej,"newstring");Y(new aj,"car");Y(new bj,"cdr");Y(new fj,"scar");Y(new gj,"scdr");Y(new cj,"cons");Y(new dj,"len");Y(new Lj,"bound");Y(new Qj,"<");Y(new Nj,">");Y(new Mj,"exact");Y(new Oj,"is");Y(new Oi,"apply");Y(new Qi,"eval");Y(new Si,"ssexpand");Y(new Yi,"ssyntax");Y(new ek,"table");Y(new ck,"maptable");Y(new dk,"sref");Y(new pl,"call-w/stdin");Y(new ql,"call-w/stdout");Y(new hl,
"stdin");Y(new il,"stdout");Y(new gl,"stderr");Y(new dl,"disp");Y(new jl,"write");Y(new vl,"sread");Y(new kl,"writeb");Y(new ll,"writec");Y(new rl,"readb");Y(new tl,"readc");Y(new el,"flushout");Y(new cl,"close");Y(new fl,"force-close");Y(new Fl,"outfile");Y(new Dl,"infile");Y(new zl,"dir-exists");Y(new Bl,"file-exists");Y(new xl,"dir");Y(new Nl,"rmfile");Y(new Ll,"mvfile");Y(new Hl,"make-directory");Y(new Jl,"make-directory*");Y(new ml,"instring");Y(new ol,"outstring");Y(new nl,"inside");Y(new Rj,
"rainbow-debug");Y(new Sj,"rainbow-profile");Y(new Tj,"rainbow-profile-report");var g=sc();D("*argv*").pa(m(f));Sl(function(l,u){if(l)return void a(l);D("*env*").pa(u);D("call*").pa(zc());D("sig").pa(zc());Tl(g,d,(b.noLibs?[]:["arc","strings","lib/bag-of-tricks","rainbow/rainbow","rainbow/rainbow-libs"]).concat(b.f||[]),function(J){if(J)return void a(J);Ul(g,b.e||[],function(K){if(K)return void a(K);b.q?a():(ya("repl in "+((new Date).getTime()-c)+"ms"),Vl(g,a,void 0))})})})}
function Ql(a){for(var b=[],c=0,d=a.length;c<d;c++){var f=a[c];if("[object String]"!==Object.prototype.toString.call(f))throw new TypeError;b.push(Pa(""+f))}return b}function Tl(a,b,c,d){function f(l){if(l===g)return void d();Wl(a,b,c[l],function(u){if(u)return void d(u);f(l+1)})}var g=c.length;f(0)}
function Ul(a,b,c){function d(K,aa){if(K)return void c(K);if(null===aa)return void c();Xl(a,aa,function(B){if(B)return void c(B);Qa(J,d,void 0)},void 0)}for(var f=[],g=0,l=b.length;g<l;g++){var u=b[g];if("[object String]"!==Object.prototype.toString.call(u))throw new TypeError;f.push(u+" ")}var J=ra(f.join("")).za();Qa(J,d,void 0)}
function Vl(a,b,c){xa("arc> ");for(var d=!0,f=!1;!f;)if(Qa(ja,function(g,l){if(g){if(!(g instanceof Ga))return void b(g);za(g);d||Vl(a,b,c)}else null===l?(f=!0,d||b()):Xl(a,l,function(u){if(u)return void b(u);d||Vl(a,b,c)},c)||(d=!1)},c)||(d=!1),!d)return;b()}function Xl(a,b,c,d){return Yl(a,b,function(f,g){if(f){if(!(f instanceof Aa))return void c(f);ya("Message    : "+f.message);xa("Java stack : ");za(f,ka)}else ya(g);c()},d)}
function Zl(a,b,c){function d(aa){if(aa===J)return void c(Error("Could not find "+b+" under "+JSON.stringify(a)));var B=f[aa];$l(B,function(S,U){if(S)return void c(S);if(U)return void c(null,B);d(aa+1)})||(K=!1)}for(var f=[],g=a.length,l=0;l<g;l++){var u=""+a[l]+"/"+b;f.push(u,u+".arc")}var J=f.length,K=!0;d(0);return K}
function Wl(a,b,c,d){function f(l){qa(l,function(u,J){if(u)return void d(u);am(a,J,d,void 0)||(g=!1)},void 0)||(g=!1)}var g=!0;$l(c,function(l,u){if(l)return void d(l);u?f(c):Zl(b,c,function(J,K){if(J)return void d(J);f(K)})||(g=!1)})||(g=!1);return g}function am(a,b,c,d){for(var f=!0,g=!1;f&&!g;)g=!0,Qa(b,function(l,u){if(l)return void c(l);if(null===u)return void c();Yl(a,u,function(J){if(J)return void c(J);f?g=!1:am(a,b,c)},d)||(f=!1)},d)||(f=!1);return f}function bm(){}bm.prototype=new Sf;
bm.prototype.className="Console.Anon_mkVisitor_";bm.prototype.hc=function(a){a.o(this.Ha)};function Yl(a,b,c,d){var f=new cm;w(f);f.La=b;f.o(A("Console.compileAndEvalAsync_"));z(a,f);return tc(a,c,d)}function cm(){}cm.prototype=new H;cm.prototype.className="Console.CompileAndEval";cm.prototype.i=function(a){var b=new dm;w(b);b.o(A("Console.compileAndEvalAsync_"));z(a,b);og(a,this.La,[])};function dm(){}dm.prototype=new H;dm.prototype.className="Console.AndEval";
dm.prototype.i=function(a){var b=N(a).reduce(),c=[];b.l(c);c=m(c);var d=c.v,f=new bm;f.Ha=b;d.call(c,f);P(a,null,c)};function Sl(a){var b=zc();(function(c,d){if(c)return void a(c);for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&b.ec(A(d[f]),A(f));a(null,b)})(null,{})}function $l(a,b){return pa(a,b,void 0)}function Rl(){}Rl.prototype=new X;Rl.prototype.className="NewThread";Rl.prototype.s=function(){throw h("Rainbow.js doesn't support new-thread.");};function em(){}em.prototype=new H;
em.prototype.className="BindAndRun";function Uh(a,b,c){var d=new em;w(d);d.va=a;d.B=b;d.o(c);return d}em.prototype.i=function(a){this.va.add(N(a));P(a,this.va,this.B)};Ua("window").pa(vc(window));da(window,"hashchange",function(){location.reload(!1)});
da(window,"load",function(){function a(){var B=J.value+"\n";J.value="";ea.xc.ib(B)}function b(B){if(void 0!==B.dd)return B.dd();for(var S=[],U=!0;U;)B.zc(function(n,x){if(n)throw n;null===x?U=!1:S.push(String.fromCharCode(x))},!0)||(U=!1);return S.join("")}function c(B){u.appendChild(document.createTextNode(B));aa||(aa=!0,setTimeout(function(){aa=!1;u.scrollTop=u.scrollHeight},0))}function d(B){if(B)throw B;B=b(ea.kb);""!==B&&(c(B),fa.xc.ib(B),ea.kb.vb(d))}function f(B){if(B)throw B;B=b(ha.kb);""!==
B&&(c(B),ha.kb.vb(f))}function g(B){if(B)throw B;B=b(ia.kb);""!==B&&(c(B),ia.kb.vb(g))}var l=document.getElementById("repl"),u=document.createElement("pre");u.className="scrollback";u.appendChild(document.createTextNode(""));l.appendChild(u);var J=document.createElement("textarea");J.className="prompt";da(J,"keydown",function(B){13===(B.which||B.keyCode)&&(B.preventDefault?B.preventDefault():B.returnValue=!1)});da(J,"keyup",function(B){13===(B.which||B.keyCode)&&a()});l.appendChild(J);var K=document.createElement("button");
K.className="eval";K.appendChild(document.createTextNode("Eval"));da(K,"click",function(){a()});l.appendChild(K);var aa=!1;ea.kb.vb(d);ha.kb.vb(f);ia.kb.vb(g);Pl(function(){})});
