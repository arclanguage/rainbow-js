var e;
function ba(){function a(){if(0!==g.length){var A=g.shift(),S=l.shift();setTimeout(function(){S(A)},0);setTimeout(a,0)}}function b(A,S,U,n){if(0!==c.length&&0===g.length){var w=c[0];if(1===c.length&&("byte"===w.type||w.Oa.length<<1===d+1)){if(f)return S&&(c=[]),A(null,null),!0;n||(g.push(A),l.push(U));return!1}U=0;n=d;var y=w;if("byte"===y.type)U++,w=y.Oa;else{y=y.Oa;var E=y.charCodeAt(n>>>1);if(n&1)return S&&(d++,y.length<<1<=d&&(c.shift(),d=0)),A(null,E),!0;w=E>>>8&255;n++;y.length<<1<=n&&(U++,
n=0)}y=c[U];"byte"===y.type?(U++,E=y.Oa):(y=y.Oa,E=y.charCodeAt(n>>>1),E=(n&1?E:E>>>8)&255,n++,y.length<<1<=n&&(U++,n=0));if(S){for(;U--;)c.shift();d=n}A(null,w<<8|E);return!0}if(f)return A(null,null),!0;n||(g.push(A),l.push(U));return!1}var c=[],d=0,f=!1,g=[],l=[],t={},J=t.xc=function(A,S){if(0!==c.length&&0===g.length){S=c[0];if("byte"===S.type)c.shift(),A(null,S.Oa);else{S=S.Oa;var U=S.charCodeAt(d>>>1);U=(d&1?U:U>>>8)&255;d++;S.length<<1<=d&&(c.shift(),d=0);A(null,U)}return!0}if(f)return A(null,
null),!0;S||(g.push(A),l.push(J));return!1},M=t.yc=function(A,S){return b(A,!0,M,S)},aa=t.vb=function(A,S){return b(A,!1,aa,S)};t.close=function(){};t.dd=function(){var A,S=!1,U=[],n=0;if(d&1){var w=c[0].Oa;S=!0;var y=w.charCodeAt(d>>>1)&255;d++;for(var E=d>>>1,Q=w.length;E<Q;E++){var H=w.charCodeAt(E);U.push(String.fromCharCode(y<<8|H>>>8&255));y=H&255}d=0;n++}else d&&(U.push(c[0].Oa.substring(d>>>1)),d=0,n++);for(A=c.length;n<A;n++)if(w=c[n],"byte"===w.type)S?(U.push(String.fromCharCode(y<<8|w.Oa)),
S=!1):(y=w.Oa,S=!0);else if(w=w.Oa,S)for(E=0,Q=w.length;E<Q;E++)H=w.charCodeAt(E),U.push(String.fromCharCode(y<<8|H>>>8&255)),y=H&255;else U.push(w);c=S?[{type:"byte",Oa:y}]:[];return U.join("")};return{kb:t,wc:{ib:function(A){f||""===A||(c.push({type:"string",Oa:A}),a())},Fc:function(A){f||(c.push({type:"byte",Oa:A}),a())},close:function(){f=!0;a()},flush:function(){}}}}function da(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}
var ea=ba(),fa=ba(),ha=ba(),ia=ba(),ja=fa.kb,ka=ha.wc,la=ia.wc;function ma(a){a(h("No filesystem."));return!0}function na(a,b){b(null,!1);return!0}function oa(a,b,c){if(c)return b(h("Can't access the Web synchronously.")),!0;c=new XMLHttpRequest;c.open("GET",a,!0);c.onerror=function(){b(null,!1)};c.onload=function(){b(null,!0)};c.send(null);return!1}
function pa(a,b,c){if(c)return b(h("Can't access the Web synchronously.")),!0;var d=new XMLHttpRequest;d.open("GET",a,!0);d.onerror=function(){b(h("Couldn't open page: "+a+" because of error: "+d.statusText))};d.onload=function(){b(null,qa(d.responseText).za())};d.send(null);return!1}function ra(a){a(h("No filesystem."));return!0}function sa(a){a(h("No filesystem."));return!0}function ta(a){a(h("No filesystem."));return!0}function ua(a){a(h("No filesystem."));return!0}
function va(a){a(h("No filesystem."));return!0};function wa(a){ka.ib(""+a)}function xa(a){ka.ib(""+a+"\n")}function ya(a,b){void 0===b&&(b=la);for(b.ib(""+a+"\n"+(a.stack||a)+"\n");a instanceof za&&(a=a.hd);)a instanceof Aa&&(a=a.Na),b.ib("Caused by: "+a+"\n"+(a.stack||a)+"\n")}var k={};function Ba(){}function Ca(){var a=new Ba;a.ia={};return a}Ba.prototype.get=function(a){return this.ia["rainbow_"+a]};Ba.prototype.put=function(a,b){return this.ia["rainbow_"+a]=b};Ba.prototype.has=function(a){return"rainbow_"+a in this.ia};function za(){}
za.prototype=Error();function h(a,b){var c=new za;c.message=a;c.stack=Error().stack;c.hd=b;return c}function Da(){}function Ea(a,b){var c=new Da;c.parent=b;c.tb=Array(~~a);c.ia=0;return c}e=Da.prototype;e.add=function(a){if(this.tb.length<=this.ia)throw h("Can't add "+a+" to bindings: already full ("+this.ia+") "+m(this.tb));this.tb[this.ia]=a;this.ia++};e.Pb=function(a){return 0===a?this:this.parent.Pb(a-1)};
e.toString=function(){for(var a=[],b=0;b<this.tb.length;b++)a.push(b),a.push(" : "),a.push(this.tb[b]),a.push("\n");return a.join("")+"\nparent: "+(null===this.parent?"<none>":this.parent.toString())};e.set=function(a,b){return this.tb[a]=b};e.count=function(){return this.ia};e.size=function(){return this.tb.length};function Fa(){}Fa.prototype=Error();function p(){}e=p.prototype;e.Wa=!1;e.className="ArcObject";e.Ta=function(){return!1};
e.l=function(){throw h("addInstructions not defined on "+this+", a "+this.className);};e.j=function(a,b){var c=Ga.value();if(!(c instanceof Ha))throw new TypeError;c=c.value(this.type());if(c instanceof q)throw h("No handler for "+this.type()+" in call* table: called "+this+" with args "+b);c.j(a,r(this,b))};e.Ca=function(a){this.j(a,u)};e.G=function(a,b){this.j(a,r(b,u))};e.ga=function(a,b,c){this.j(a,r(b,r(c,u)))};e.lb=function(a,b,c,d){this.j(a,r(b,r(c,r(d,u))))};
e.xa=function(){throw h("len: expects one string, list or hash argument, got "+this.type());};e.dc=function(){throw h("Can't set car of "+this.type());};e.Bc=function(a,b){throw h("Can't sref "+this+"( a "+this.type()+"), other args were "+a+", "+b);};e.Ea=function(){return 0};e.Gc=function(){return u};e.g=function(){throw h("Can't take car of "+this);};e.h=function(){throw h("Can't take cdr of "+this);};e.Mc=function(){return!1};e.type=void 0;e.mc=function(){return this};e.za=function(){return this};
e.Sa=function(a){return this===a};e.copyTo=function(a){return a};e.ba=function(){return!0};e.Ob=function(){throw new Ia;};e.ab=function(){throw new Ja;};e.or=function(){return this};function Ka(a,b,c){for(var d=c,f=0;!(c instanceof q);)v(b,c.g()),c=c.h(),f++;c=b.aa;var g=new La;x(g);g.pd=d;g.Vb=c;g.o(a);z(b,g);d=Ma(f);d.o(a);z(b,d);d=Na(a);d.o(a);z(b,d)}e.Mb=function(){throw h("has length: not a proper list: ends with "+this);};
e.tc=function(){throw h("longer than: not a proper list: ends with "+this);};e.$=function(){return this};e.v=function(){};e.ka=function(){return this};e.Ec=function(){};e.ic=function(){};e.jc=function(){return u};e.fb=function(){return this.jc().toString()};e.add=function(){throw h("add not implemented for "+this.type()+" "+this);};e.sqrt=function(){throw h("sqrt not implemented for "+this.type()+" "+this);};e.multiply=function(){throw h("multiply not implemented for "+this.type()+" "+this);};
function Ja(){}e.reduce=function(){return this};e.ja=function(){return!1};e.fa=function(){return this};e.ea=function(){return this};e.ua=function(){return!1};e.pb=function(){return this.toString()};e.Ma=function(){return this.kd||(this.kd=1+Math.random())};e.Fa=function(a){return this===a};function Oa(a){var b=null;if(!Pa(qa(a).za(),function(c,d){if(c)throw c;b=d},!0))throw new Fa;return b}
function Pa(a,b,c){function d(n){return a.vb(function(w,y){if(w)return void n(w);n(null,null===y?null:String.fromCharCode(y))},c)}function f(n){return a.yc(function(w,y){if(w)return void n(w);n(null,null===y?null:String.fromCharCode(y))})}function g(n){for(var w=!0,y=!1;w&&!y;)y=!0,f(function(E,Q){if(E)return void n(E);null===Q||"\n"===Q?n(null):"\r"===Q?d(function(H,ca){if(H)return void n(H);"\n"===ca?f(function(T){if(T)return void n(T);n(null)})||(w=!1):n(null)})||(w=!1):(y=!1,w||g(n))})||(w=!1);
return w}function l(n){for(var w=!0,y=!1;w&&!y;)y=!0,d(function(E,Q){function H(ca){if(ca)return void n(ca);y=!1;w||l(n)}if(E)return void n(E);";"===Q?g(H)||(w=!1):null===Q||/[^ \t\r\n]/.test(Q)?n(null):f(H)||(w=!1)})||(w=!1);return w}function t(n,w){function y(T){var O=n.length-1,R=n[O];n="string"===typeof T&&R instanceof Qa?n.slice(0,O).concat([B(R.value()+T)]):"string"===typeof T?n.concat([B(T)]):n.concat([T]);ca=!1;H||t(n,w)}function E(T){void 0===T&&(T=new Fa);w(T)}function Q(){U(function(T,
O){if(T)return E(T);l(function(R){if(R)return E(R);f(function(L,Z){if(L)return E(L);")"===Z?y(O):E()})||(H=!1)})||(H=!1)})||(H=!1)}for(var H=!0,ca=!1;H&&!ca;)ca=!0,f(function(T,O){if(T)return E(T);null===O?E():'"'===O?w(null,n):"\\"===O?f(function(R,L){if(R)return E(R);'"'===L?y('"'):"\\"===L?y("\\"):"n"===L?y("\n"):"r"===L?y("\r"):"t"===L?y("\t"):"#"===L?f(function(Z,qd){if(Z)return E(Z);"("===qd?y("#("):E()})||(H=!1):E()})||(H=!1):"#"===O?d(function(R,L){if(R)return E(R);if("("!==L)return void y("#");
f(function(Z){if(Z)return E(Z);Q()})||(H=!1)})||(H=!1):y(O)})||(H=!1);return H}function J(n,w){function y(H){w(null,Ra(H))}for(var E=!0,Q=!1;E&&!Q;)Q=!0,d(function(H,ca){if(H)return void w(H);null===ca||/[^01-9a-zA-Z]/.test(ca)?"newline"===n?y(10):"tab"===n?y(9):"space"===n?y(32):"return"===n?y(13):"null"===n?y(0):/^[01-9][01-9]+$/.test(n)?y(parseInt(n,10)):/^u[0-9a-f]+$/i.test(n)?y(parseInt(n.substring(1),16)):1===n.length?y(n.charCodeAt(0)):w(new Fa):f(function(T,O){if(T)return void w(T);Q=!1;n+=
O;E||J(n,w)})||(E=!1)})||(E=!1);return E}function M(n,w){for(var y=!0,E=!1;y&&!E;)E=!0,d(function(Q,H){if(Q)return void w(Q);if(null===H||/[^01-9a-fA-F]/.test(H)){if(""===n)return void w(new Fa);w(null,Sa(parseInt(n,16)))}else f(function(ca,T){if(ca)return void w(ca);E=!1;n+=T;y||M(n,w)})||(y=!1)})||(y=!1);return y}function aa(n,w){for(var y=!0,E=!1;y&&!E;)E=!0,f(function(Q,H){if(Q)return void w(Q);null===H?w(new Fa):"|"===H?w(null,Ta(n)):(E=!1,n+=H,y||aa(n,w))})||(y=!1);return y}function A(n,w,y){for(var E=
!0,Q=!1;E&&!Q;)Q=!0,l(function(H){if(H)return void y(H);d(function(ca,T){if(ca)return void y(ca);null===T?y(new Fa):T===w?f(function(O){if(O)return void y(O);y(null,n)})||(E=!1):U(function(O,R){if(O)return void y(O);Q=!1;n=n.concat([R]);E||A(n,w,y)})||(E=!1)})||(E=!1)})||(E=!1);return E}function S(n,w){for(var y=!0,E=!1;y&&!E;)E=!0,d(function(Q,H){if(Q)return void w(Q);Q=null!==H&&H.charCodeAt(0);if(null!==H&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(H)||128<=Q&&65536>Q))f(function(T,O){if(T)return void w(T);
E=!1;n+=O;y||S(n,w)})||(y=!1);else if("\\"===H)f(function(T){if(T)return void w(T);f(function(O,R){if(O)return void w(O);"|"===R?(E=!1,n+="\\|",y||S(n,w)):w(new Fa)})||(y=!1)})||(y=!1);else{var ca;/^-?[01-9]+\/[01-9]+$/.test(n)?w(null,Ua(n)):/^-?[01-9]+$/.test(n)?w(null,Sa(parseInt(n,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(n)?w(null,C(parseFloat(n))):"+inf.0"===n?w(null,C(1/0)):"-inf.0"===n?w(null,C(-1/0)):"+nan.0"===n?w(null,C(0/0)):"+i"===n?w(null,Va(0,1)):"-i"===n?w(null,Va(0,-1)):(ca=
/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(n))?w(null,Va(C(parseFloat(ca[1])).value(),C(parseFloat(ca[2]+(ca[3]||"1"))).value())):w(null,Ta(n))}})||(y=!1);return y}function U(n){function w(){t([],function(R,L){if(R)return void n(R);0===L.length?n(null,B("")):1===L.length?n(null,L[0]):n(null,m([Ta("string")].concat(L)))})||(O=!1)}function y(){aa("",function(R,L){if(R)return void n(R);n(null,Ta(L))})||(O=!1)}function E(){f(function(R,L){if(R)return void n(R);
null!==L&&/x/i.test(L)?M("",n)||(O=!1):"\\"===L?f(function(Z,qd){if(Z)return void n(Z);if(/[^a-zA-Z]/.test(Z))return void n(null,Ra(Z.charCodeAt(0)));J(qd,n)||(O=!1)})||(O=!1):n(new Fa)})||(O=!1)}function Q(R){U(function(L,Z){if(L)return void n(L);null===Z?n(new Fa):n(null,m([D(R),Z]))})||(O=!1)}function H(){d(function(R,L){if(R)return void n(R);null===L?n(new Fa):"@"===L?f(function(Z){if(Z)return void n(Z);Q("unquote-splicing")})||(O=!1):Q("unquote")})||(O=!1)}function ca(){A([],")",function(R,L){if(R)return void n(R);
if(0===L.length)n(null,Wa);else{try{var Z=null===L||0===L.length?u:L[0]===Xa?Ya(L):r(L[0],Za(L.slice(1)))}catch(qd){return void n(qd)}n(null,Z)}})||(O=!1)}function T(){A([],"]",function(R,L){if(R)return void n(R);n(null,m([D("fn"),m([D("_")]),m(L)]))})||(O=!1)}var O=!0;l(function(R){if(R)return void n(R);f(function(L,Z){if(L)return void n(L);null===Z?n(null,null):'"'===Z?w():"|"===Z?y():"#"===Z?E():"'"===Z?Q("quote"):","===Z?H():"`"===Z?Q("quasiquote"):"("===Z?ca():"["===Z?T():S(Z,n)||(O=!1)})||(O=
!1)})||(O=!1);return O}return U(b)}function F(){}F.prototype=new p;e=F.prototype;e.className="ArcSymbol";function $a(a,b,c){a.ma=b;a.qd=c;a.ld=b;a.u=null;a.Lb=null;return a}e.l=function(a){var b=a.push,c=new ab;x(c);c.gb=this;b.call(a,c)};function D(a){var b=Ta(a);if(b instanceof F)return b;throw h("can't make symbol from \""+a+'"');}
function Ta(a){if("t"===a)a=bb;else if("nil"===a)a=u;else{var b;if(!(b=cb.test(a)))a:if(/^-?[01-9]+\/[01-9]+$/.test(a)||/^-?[01-9]+$/.test(a)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(a)||"+inf.0"===a||"-inf.0"===a||"+nan.0"===a||"+i"===a||"-i"===a||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(a)||/\\(?!\|)/.test(a))b=!0;else{b=0;for(var c=a.length;b<c;b++){var d=a.charCodeAt(b);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(a.charAt(b))||128<=d&&65536>
d)){b=!0;break a}}b=!1}a=b||"."===a?db(a,"|"+a+"|"):eb.test(a)?db(a.replace(/\\\|/g,"|"),a):db(a,a)}return a}e.pb=function(){return this.ma};e.toString=function(){return this.qd};function db(a,b){if(fb.has(a))return fb.get(a);b=$a(new F,a,b);fb.put(a,b);return b}e.name=function(){return this.ma};e.Ea=function(a){if(!(a instanceof F))throw new TypeError;return this.ma.localeCompare(a.name)};e.type=function(){return gb};e.za=function(){return this.name()};e.Ma=function(){return this.ld};
e.Fa=function(a){return this===a};function hb(a,b){return b instanceof F&&b.name()===a}e.ta=function(a){var b=this.u;this.u=a;null!==b&&b.Ec(this);a.ic(this)};e.value=function(){if(null===this.u)throw h("Symbol "+this.ma+" is not bound");return this.u};e.bound=function(){return null!==this.u};function ib(a,b){try{if(!(a instanceof F))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected an ArcSymbol, got "+a);}}
function jb(a,b,c){null===a.Lb&&(a.Lb={});a.Lb[b.name()]=c}var fb=Ca(),cb=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,eb=/.*\\\|/,gb=D("sym"),Xa=D("."),kb=D("!");function G(){}G.prototype=new p;e=G.prototype;e.className="Pair";function r(a,b){var c=new G;if(null===a)throw h("Can't create Pair with null car: use NIL instead");if(null===b)throw h("Can't create Pair with null cdr: use NIL instead");c.ob=a;c.yb=b;return c}e.j=function(a,b){b=lb(b.g(),this);v(a,this.Pb(b.W()).g())};e.Gc=function(){return this.ob};
e.g=function(){return this.ob};e.h=function(){return this.yb};e.ab=function(){if(null!==this.ob)throw new Ja;};e.ba=function(){return!1};e.dc=function(a){return this.ob=a};e.Bc=function(a,b){b=mb(b,this).W();return this.Pb(b).dc(a)};e.Mc=function(a){return a===this.ob};
e.toString=function(){if(this.g()instanceof F&&this.g().name()in nb&&this.h()instanceof G&&1===this.h().size()){var a=this.g();a=nb[a.name()];var b=this.h();if(!(b instanceof G))throw new TypeError;return a+ob(b)}return"("+ob(this)+")"};function ob(a){for(var b=[];!a.ba();)b.push(a.g()),a.h().ba()||b.push(" "),a=a.h();a instanceof q||b.push(" . ",a);return b.join("")}e.Tc=function(a){this.yb=a};
function Za(a){if(0===a.length)return u;if(a[0]===Xa){if(2===a.length){a=a[1];if(!(a instanceof p))throw new TypeError;return a}return Ya(a)}var b=a[0];if(!(b instanceof p))throw new TypeError;return r(b,Za(a.slice(1)))}function Ya(a){throw h('Error: illegal use of "." in '+a);}function pb(a,b,c){if(c===a.length)return b;var d=a[c];if(!(d instanceof p))throw new TypeError;return r(d,pb(a,b,c+1))}function qb(a,b){return null===a||0===a.length?b:pb(a,b,0)}function m(a){return qb(a,u)}e.type=function(){return rb};
e.xa=function(){return this.size()};e.size=function(){if(this instanceof q)return 0;for(var a=1,b=this.yb;!(b instanceof q);){if(b.ba())throw h("cannot take size: not a proper list: "+this);a++;b=b.h()}return a};e.Ea=function(){throw h("Pair.compareTo:unimplemented");};e.copyTo=function(a){a.push(this.g());if(this.h()instanceof q)return a;if(!(this.h()instanceof G))throw h("Not a list: "+this);this.h().copyTo(a);return a};
e.Fa=function(a){if(this===a)return!0;var b=this instanceof q;if(!(a instanceof p))throw new TypeError;var c=a instanceof q;return b!==c?!1:b&&c?!0:a instanceof G?(b=a.ob.Fa(this.ob),a=a.yb.Fa(this.yb),b&&a):!1};e.Ma=function(){return this.g().Ma()+this.h().Ma()};
e.Pb=function(a){try{for(var b,c=this,d=a;0<d;){if(c.h()instanceof q)throw new sb;c=c.h();d--}b=c;if(!(b instanceof G))throw new TypeError;return b}catch(f){if(!(f instanceof sb))throw f;throw h("Error: index "+a+" too large for list "+this);}};e.Mb=function(a){return this.h().Mb(a-1)};e.tc=function(a){return 0>a||this.h().tc(a-1)};e.fb=function(){return"ref:"+this.type().toString()};function sb(){}sb.prototype=Error();e=G.prototype;e.mc=function(){return this instanceof q?this:r(this.g(),this.h().mc())};
e.za=function(){var a=[];tb(a,this);return a};e.Sa=function(a){return p.prototype.Sa.call(this,a)||this instanceof q&&a instanceof q};function tb(a,b){if(!(b instanceof q)){a.push(b.g().za());b=b.h();if(!(b instanceof G))throw new TypeError;tb(a,b)}}function ub(a){var b=Array(~~a.size());vb(a,b,0);return b}function vb(a,b,c){if(c<b.length){b[c]=a.ob;a=a.yb;if(!(a instanceof G))throw new TypeError;a instanceof q||vb(a,b,c+1)}}
function wb(a,b){try{if(!(a instanceof G))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a cons, got "+a);}}e.Ob=function(){};e.add=function(a){if(a instanceof G){var b=[];this.copyTo(b);a.copyTo(b);return m(b)}throw h("+ : expects cons, got "+a.type()+" "+a);};e.v=function(a){a.Ja(this);for(var b=this;!b.ba();)b.g().v(a),b=b.h();b instanceof q||b.v(a);a.Va()};function Ia(){}
var rb=D("cons"),nb={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function q(){}q.prototype=new G;e=q.prototype;e.className="Nil";function xb(a){var b=new q;b.ob=b.yb=null;b.wb=a;return b}e.l=function(a){a.push(Na(u))};e.j=function(a,b){throw h("Function dispatch on inappropriate object: "+this+" with args "+b);};e.Ob=function(){};e.Ta=function(){return!0};e.xa=function(){return 0};e.ba=function(){return!0};e.ab=function(){};e.toString=function(){return this.wb};e.Gc=function(){return this};
e.g=function(){return this};e.h=function(){return this};e.Mc=function(){return!1};e.Tc=function(){throw Error("can't set the cdr of "+this);};e.size=function(){return 0};e.copyTo=function(a){return a};e.type=function(){return gb};e.Ma=function(){return"nil"};e.Fa=function(a){if(this===a)return!0;if(!(a instanceof p))throw new TypeError;return a instanceof q};e.za=function(){return!1};e.Sa=function(a){return a instanceof q};e.or=function(a){return a};e.Mb=function(a){return 0===a};
e.tc=function(a){return 0>a};var u=xb("nil"),Wa=xb("()");function yb(){}yb.prototype=new F;e=yb.prototype;e.className="Truth";e.Ta=function(){return!0};e.l=function(a){a.push(Na(bb))};e.toString=function(){return"t"};e.Ea=function(){throw h("Truth.compareTo:unimplemented");};e.type=function(){return gb};function zb(a){return a?bb:u}e.Ma=function(){return"t"};e.Fa=function(a){return this===a};e.za=function(){return!0};e.ta=function(){throw h("error: can't rebind t!");};e.value=function(){return this};
var bb;bb=$a(new yb,"t","t");function I(){}I.prototype=new p;e=I.prototype;e.Yb=!1;e.rc=!1;e.Ba=!1;e.Pa=!1;e.className="Instruction";function x(a){a.Ha=null;return a}e.type=function(){return D("instruction")};e.qb=function(){return this.toString()};e.toString=function(){return"("+this.className+")"};function Ab(a){return a.bound()?""+a.value():"#unbound#"}e.i=void 0;e.o=function(a){this.Ha=a};e.v=function(a){a.fc(this)};function La(){}La.prototype=new I;La.prototype.rc=!0;La.prototype.className="ArcObject.ConvertError";
La.prototype.Ic=function(a){return a instanceof Error};La.prototype.i=function(a){var b=a.error();if(null!==b)throw a.jb=null,a.aa=this.Vb,h("error invoking "+this.Ha+" with args "+this.pd+": "+b,b);};var Ga=D("call*");function Bb(){}Bb.prototype=new p;Bb.prototype.className="LiteralObject";Bb.prototype.Ta=function(){return!0};Bb.prototype.l=function(a){a.push(Na(this))};Bb.prototype.fb=function(){return"ref:"+this.type().toString()};function Cb(){}Cb.prototype=new Bb;e=Cb.prototype;e.className="ArcCharacter";
function Db(a,b){a.u=b;return Eb[b]=a}function Ra(a){return void 0===Eb[a]?Db(new Cb,a):Eb[a]}e.Ta=function(){return!0};e.toString=function(){return"#\\"+String.fromCharCode(this.u)};e.Ea=function(a){if(!(a instanceof Cb))throw new TypeError;return this.u-a.u};e.type=function(){return Fb};e.za=function(){return this.value()};e.value=function(){return this.u};e.pb=function(){return String.fromCharCode(this.u)};e.Ma=function(){return this.pb()};
e.Fa=function(a){return this===a||a instanceof Cb&&a.u===this.u};function Gb(a,b){try{if(!(a instanceof Cb))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a character, got "+a);}}var Fb=D("char"),Eb=Array(65536);function Hb(){}Hb.prototype=new Cb;Hb.prototype.className="ArcCharacter.Anon_NULL_";Hb.prototype.toString=function(){return"#\\null"};var Ib;Ib=Db(new Hb,0);function Jb(){}Jb.prototype=new Cb;Jb.prototype.className="ArcCharacter.Anon_named_1_";
Jb.prototype.toString=function(){return"#\\newline"};function Kb(){}Kb.prototype=new Cb;Kb.prototype.className="ArcCharacter.Anon_named_2_";Kb.prototype.toString=function(){return"#\\tab"};function Lb(){}Lb.prototype=new Cb;Lb.prototype.className="ArcCharacter.Anon_named_3_";Lb.prototype.toString=function(){return"#\\return"};function Mb(){}Mb.prototype=new Cb;Mb.prototype.className="ArcCharacter.Anon_named_4_";Mb.prototype.toString=function(){return"#\\space"};Db(new Jb,10);Db(new Kb,9);
Db(new Lb,13);Db(new Mb,32);function Qa(){}Qa.prototype=new Bb;e=Qa.prototype;e.className="ArcString";function B(a){var b=new Qa;b.u=a;return b}e.j=function(a,b){Nb(b,this.className,1);b=mb(b.g(),this);if(!b.isInteger())throw h("string-ref: expects exact integer: got "+b);b=~~b.W();if(!(0<=b||b<this.value.length()))throw h("string-ref: index "+b+" out of range [0, "+(this.u.length-1)+"] for string "+this.toString());v(a,Ra(this.u.charCodeAt(b)))};e.value=function(){return this.u};e.pb=function(){return this.u};
e.toString=function(){var a=this.u,b=[];b.push('"');for(var c=0;c<a.length;c++)switch(a.charAt(c)){case '"':b.push('\\"');break;case "\\":b.push("\\\\");break;case "\n":b.push("\\n");break;case "\r":b.push("\\r");break;default:b.push(a.charAt(c))}b.push('"');return b.join("")};e.Ea=function(a){if(!(a instanceof Qa))throw new TypeError;return this.u.localeCompare(a.u)};e.xa=function(){return this.u.length};
e.dc=function(a){var b=[Gb(a,this).pb()];b.push(this.value().substring(1));this.ta(b.join(""));return a};e.Bc=function(a,b){var c=Gb(a,Cb);b=mb(b,this);b=b.W();if(!(0<=b&&b<this.u.length))throw new RangeError;this.u=this.u.substring(0,b)+String.fromCharCode(c.value())+this.u.substring(b+1);return a};e.type=function(){return Ob};e.za=function(){return this.value()};e.ta=function(a){this.u=a};e.Ma=function(){return this.u};e.Fa=function(a){return this===a||a instanceof Qa&&a.u===this.u};e.Sa=function(a){return this.Fa(a)};
e.add=function(a){var b=[this.u];if(a instanceof Qa)b.push(a.value());else{var c=a.type();if(!(c instanceof F))throw new TypeError;c=Pb.Lb[c]||null;if(!(c instanceof Qb))throw new TypeError;a=c.Wb(a);if(!(a instanceof Qa))throw new TypeError;b.push(a.value())}return B(b.join(""))};function Rb(a,b){try{if(!(a instanceof Qa))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a string, got "+a);}}var Ob=D("string");function Aa(){}
Aa.prototype=new Bb;Aa.prototype.className="ArcException";Aa.prototype.type=function(){return Sb};Aa.prototype.message=function(){return null!==this.Na?B(this.Na.message):Tb};Aa.prototype.toString=function(){return this.message().toString()};var Sb=D("exn"),Tb=B("no message");function K(){}K.prototype=new Bb;e=K.prototype;e.className="ArcNumber";e.isInteger=void 0;e.N=void 0;e.W=void 0;e.Db=void 0;e.round=void 0;
e.zc=function(){throw h("round[closest] not implemented for "+this.className+"("+this+")");};e.Ta=function(){return!0};e.Ea=function(a){if(!(a instanceof K))throw new TypeError;a=a.N()-this.N();return 0>a?1:0===a?0:-1};e.type=function(){return this.isInteger()?Ub:Vb};e.Sa=function(a){return this.Fa(a)};function lb(a,b){try{if(!(a instanceof K))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a number, got "+a);}}
e.bd=function(){throw h("mod: not implemented for "+this.className+"("+this+")");};var Ub=D("int"),Vb=D("num");function Wb(){}Wb.prototype=new Bb;Wb.prototype.className="ArcThreadLocal";Wb.prototype.set=function(a){this.u=a};Wb.prototype.get=function(){return this.u};Wb.prototype.type=function(){return Xb};function Yb(a,b){try{if(!(a instanceof Wb))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a thread-local, got "+a);}}
var Xb=D("thread-local");function Zb(){}Zb.prototype=new K;e=Zb.prototype;e.className="Complex";function Va(a,b){var c=new Zb;c.U=a;c.S=b;return c}e.isInteger=function(){return 0===this.S&&Math.floor(this.U)===this.U};e.N=function(){throw h("Cannot convert complex to double");};e.W=function(){throw h("Cannot convert complex to int");};e.Db=function(){return Va(-this.U,-this.S)};e.toString=function(){return C(this.U).toString()+(0>this.S?"":"+")+C(this.S).toString()+"i"};
function $b(a,b){try{if(!(a instanceof Zb))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a complex number, got "+a);}}e.round=function(){return h("Can't convert "+this+" to integer")};function ac(a,b){b=b.N();return Va(a.U*b,a.S*b)}e.multiply=function(a){if(a instanceof Zb)return bc(this,a);if(!(a instanceof K))throw new TypeError;a=a.N();return Va(this.U*a,this.S*a)};
function bc(a,b){var c=a.U,d=b.U;a=a.S;b=b.S;return Va(c*d-a*b,c*b+d*a)}e.add=function(a){if(a instanceof Zb)return Va(this.U+a.U,this.S+a.S);if(a instanceof cc)return Va(this.U+a.N(),this.S);if(a instanceof dc)return Va(this.U+a.N(),this.S);throw h("+: expects a number, got "+a.type()+" "+a);};e.inverse=function(){var a=this.U*this.U+this.S*this.S;return Va(this.U/a,-this.S/a)};e.log=function(){return Va(Math.log(Math.sqrt(this.U*this.U+this.S*this.S)),Math.atan2(this.S,this.U))};
function ec(a,b){b instanceof Zb?b=bc(a.log(),b).exp():(a=a.log(),b=b.N(),b=Va(a.U*b,a.S*b).exp());return b}e.sqrt=function(){return ec(this,C(.5))};e.exp=function(){var a=Math.exp(this.U);return Va(a*Math.cos(this.S),a*Math.sin(this.S))};e.Ea=function(){throw h("Compare: complex numbers are unordered and cannot be compared");};function fc(a){if(a instanceof Zb)return a;if(a instanceof K)return Va(a.N(),0);throw h("Can't make complex number from "+a);}
e.Sa=function(a){return a instanceof Zb?a.U===this.U&&a.S===this.S:a instanceof K&&0===this.S&&a.N()===this.U};var gc=Va(0,0);function cc(){}cc.prototype=new K;e=cc.prototype;e.className="Rational";function hc(a,b){var c=new cc;if(0===b&&0!==a)throw h("/: division by zero");var d=ic(c,a,b);c.ra=a/d;c.da=b/d;return c}function Ua(a){a=a.split("/");return hc(parseInt(a[0],10),parseInt(a[1],10))}function Sa(a){return hc(a,1)}e.toString=function(){return this.ra+(1===this.da?"":"/"+this.da)};
e.isInteger=function(){return 1===this.da};e.N=function(){return this.ra/this.da};e.W=function(){if(0===this.ra)return 0;var a=this.ra/this.da;return 0>a?Math.ceil(a):Math.floor(a)};function ic(a,b,c){return 0===c?b:ic(a,c,b%c)}e.bd=function(a){if(!this.isInteger()||!a.isInteger())throw h("modulo: expects integer, got ("+this+" "+a+")");a=a.W();var b=this.ra%a;0>b&&(b+=a);return Sa(b)};function jc(a,b){return hc(a.ra*b.ra,a.da*b.da)}e.Rb=function(a){return hc(this.ra*a.da+a.ra*this.da,this.da*a.da)};
e.Db=function(){return hc(-this.ra,this.da)};e.za=function(){return this.isInteger()?this.W():this.N()};e.Ma=function(){return this.isInteger()?this.W():this.N()};e.Ma=function(){return 37*this.ra+this.da+""};e.Fa=function(a){return a instanceof cc&&this.ra===a.ra&&this.da===a.da};function mb(a,b){try{if(!(a instanceof cc))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected a Rational, got "+a);}}
e.round=function(){if(1===this.da)return this;if(2===this.da){var a=this.ra/this.da;a=0>a?Math.ceil(a):Math.floor(a);return Sa(a+(1===a%2?1:0))}return Sa(Math.round(this.ra/this.da))};e.zc=function(){return 1===this.da?this:Sa(Math.round(this.ra/this.da))};e.stringify=function(a){var b=this.ra.toString(a.W());if(this.isInteger())return B(b);a=this.da.toString(a.W());return B(b+"/"+a)};e.sqrt=function(){var a=Math.sqrt(this.ra/this.da);return Math.floor(a)===a?Sa(a):C(a)};
e.multiply=function(a){if(a instanceof Zb)return ac(a,this);if(a instanceof dc)return C(a.u*this.N());if(a instanceof cc)return jc(this,a);throw h("*: expects a number, got "+a.type()+" "+a);};e.add=function(a){if(a instanceof Zb)return Va(a.U+this.N(),a.S);if(a instanceof dc)return a.Rb(this);if(a instanceof cc)return this.Rb(a);throw h("+: expects a number, got "+a.type()+" "+a);};var kc=Sa(0),lc=Sa(1),mc=Sa(10);function dc(){}dc.prototype=new K;e=dc.prototype;e.className="Real";
function C(a){var b=new dc;b.u=a;return b}e.toString=function(){return this.u===-1/0?"-inf.0":this.u===1/0?"+inf.0":this.u!==this.u?"+nan.0":""+this.u};e.za=function(){this.isInteger();return this.value()};e.type=function(){return Vb};e.value=function(){return this.u};e.isInteger=function(){return Math.floor(this.u)===this.u};e.N=function(){return this.u};e.W=function(){return 0>this.u?Math.ceil(this.u):Math.floor(this.u)};e.Db=function(){return C(-this.u)};e.Ma=function(){return""+this.u};
e.Fa=function(a){return a instanceof Zb?a.Sa(this):this===a||a instanceof dc&&this.u===a.u};e.round=function(){var a=Math.round(this.u);return.5===Math.abs(this.u-a)&&1==a%2?a<this.u?Sa(a+1):Sa(a-1):Sa(a)};e.zc=function(){return Sa(Math.round(this.u))};e.Rb=function(a){return C(this.u+a.N())};e.sqrt=function(){return C(Math.sqrt(this.u))};e.multiply=function(a){if(a instanceof Zb)return ac(a,this);if(a instanceof K)return C(this.u*a.N());throw h("*: expects a number, got "+a.type()+" "+a);};
e.add=function(a){if(a instanceof Zb)return Va(a.U+this.N(),a.S);if(a instanceof cc)return this.Rb(a);if(a instanceof dc)return this.Rb(a);throw h("+: expects a number, got "+a.type()+" "+a);};function nc(){}nc.prototype=new Bb;e=nc.prototype;e.className="Tagged";e.j=function(a,b){var c=Ga.value();if(!(c instanceof Ha))throw new TypeError;return c.value(this.Ub).j(a,r(this.wb,b))};e.Ea=function(){return 0};e.type=function(){return this.Ub};
function oc(a){return a instanceof nc&&"mac"===a.Ub.toString()?a.wb:null}e.toString=function(){return pc(this)};function pc(a){if(!qc.bound())return"#<tagged "+a.Ub+" "+a.wb+">";var b=qc.value();if(!(b instanceof Ha))throw new TypeError;b=b.value(a.Ub);if(b instanceof q)return"#<tagged "+a.Ub+" "+a.wb+">";var c=rc();b.j(c,m([a.wb]));var d;if(!sc(c,function(f,g){if(f)throw f;d=g},!0))throw h("An asynchronous operation was attempted during a toString().");return""+d.za()}var qc=D("tagged-writers");
function tc(){}tc.prototype=new Bb;e=tc.prototype;e.className="JsObject";function uc(a){var b=new tc;b.Pc=a;return b}e.type=function(){return vc};e.za=function(){return this.Pc};e.toString=function(){return""+this.Pc};function wc(a,b){a.push(b.g().za());if(!(b.h()instanceof q)){b=b.h();if(!(b instanceof G))throw new TypeError;wc(a,b)}}
function xc(a){if(null===a)return u;if(a instanceof p)return a;var b=Object.prototype.toString.call(a);if("[object Number]"===b)return a*=1,a===Math.floor(a)?Sa(a):C(a);if("[object String]"===b)a=B(""+a);else if("[object Array]"===b||"[object Arguments]"===b){b=Array(~~a.length);for(var c=0;c<a.length;c++)b[c]=xc(a[c]);a=m(b)}else a="[object Boolean]"===b?a?bb:u:uc(a);return a}e.close=function(){throw h("close: unexpected object: "+this);};var vc=D("java-object");function Ha(){}Ha.prototype=new Bb;
e=Ha.prototype;e.className="Hash";function yc(){var a=new Ha;a.ma=u;a.uc=Ca();a.qc=null;a.Bb=null;a.vc=new zc;a.ad=0;return a}e.Ec=function(a){this.ma===a&&(this.ma=u,this.vc=new zc)};e.ic=function(a){this.ma=a;a=new Ac;a.fd=this;this.vc=a};e.jc=function(){return this.ma};e.j=function(a,b){v(a,this.value(b.g()).or(b.h().g()))};e.toString=function(){return"#hash"+Bc(this)};function Bc(a){for(var b=[],c=a.qc;null!==c;c=c.next){var d=c.key;d=r(d,r(a.value(d),u));b.push(d)}return qb(b,Wa)}e.xa=function(){return this.size()};
e.Bc=function(a,b){if(a instanceof q){var c=this.value(b),d=b.Ma();if(d=this.uc.get(d))for(var f=0,g=d.length;f<g;f++){var l=d[f];if(b.Fa(l.key)){d.splice(f,1);l.cc&&(l.cc.next=l.next);l.next&&(l.next.cc=l.cc);this.qc===l&&(this.qc=l.next);this.Bb===l&&(this.Bb=l.cc);this.xa--;break}}this.vc.Uc(c,b)}else{c=b.Ma();c=this.uc.get(c)||this.uc.put(c,[]);d=null;f=0;for(g=c.length;f<g;f++)if(l=c[f],b.Fa(l.key)){d=l;break}null===d?(d=this.Bb,this.Bb={key:b,value:a,cc:d,next:null},null===d?this.qc=this.Bb:
d.next=this.Bb,c.push(this.Bb),this.ad++):d.value=a;this.vc.name(a,b)}return a};e.value=function(a){var b=a.Ma();b=this.uc.get(b);if(!b)return u;for(var c=0,d=b.length;c<d;c++){var f=b[c];if(a.Fa(f.key))return f.value}return u};e.Ea=function(){return 0};e.type=function(){return Cc};e.size=function(){return this.ad};function Dc(){}Dc.prototype.name=void 0;Dc.prototype.Uc=void 0;function Ac(){}Ac.prototype=new Dc;Ac.prototype.name=function(a,b){a.ic(r(b,this.fd))};
Ac.prototype.Uc=function(a,b){a.Ec(r(b,this.fd))};function zc(){}zc.prototype=new Dc;zc.prototype.name=function(){};zc.prototype.Uc=function(){};var Cc=D("table");function Ec(){}Ec.prototype=new p;e=Ec.prototype;e.className="VM";function rc(){var a=new Ec;a.Cc=Fc++;a.pa=Array(100);a.aa=-1;a.Da=[];a.wa=Array(100);a.R=Array(100);a.m=-1;a.F=null;a.Xb=null;a.jb=null;a.Ab=Gc;a.nc=!1;a.Ra=0;a.nb=null;a.Xc=0;a.Fb=null;return a}
function sc(a,b,c){var d=a.Ra;a.Ra=a.m;var f=Hc(a,function(){a.Ra=d;if(null===a.jb)a.Ab.end(a),b(null,N(a));else{var g=a.jb;a.jb=null;var l=g.td,t="\nAt instruction "+g.Fb;if(null!==l)for(var J=0,M=l.length;J<M;J++)t+="\n"+l[J].fb();b(h("Unhandled exception on thread#"+a.Cc+": "+g.Na.message+t,g.Na))}},c);c&&!f&&(a.Ra=d);return f}
function Hc(a,b,c){function d(){for(;f.Ra<=f.m;)try{if(f.R[f.m]instanceof q)f.m--;else{f.F=f.wa[f.m];f.Xb=f.Da[f.m];var l=f.R[f.m].g();if(!(l instanceof I))throw new TypeError;f.Fb=l;var t=f.R[f.m].h();if(!(t instanceof G))throw new TypeError;f.R[f.m]=t;if(f.Fb.Pa){var J=!0;J=f.Fb.ia(f,function(M){M?Ic(f,M):f.Ab.check(f);J||d()},c);if(!J){g=!1;return}}else f.Fb.i(f),f.Ab.check(f)}}catch(M){Ic(f,M)}b()}a.Ab.check(a);var f=a,g=!0;d();return g}
function Ic(a,b){for(var c=[],d=[],f=[];a.Ra<=a.m;){var g=Jc(a).g();if(g.rc&&g.Ic(b))break;g=Jc(a).g();g.Yb&&(d.push(Jc(a)),f.push(a.wa[a.m]));g instanceof I&&(g=Jc(a).g().Ha,null!==g&&c.push(g));a.m--}g=new Aa;g.Fb=a.Fb;g.Na=b;g.td=c;a.jb=g;for(b=d.length-1;0<=b;b--)P(a,f[b],d[b])}e.error=function(){return this.jb};
e.show=function(){xa("Thread Dump for thread#"+this.Cc);xa(""+(this.aa+1)+" args");for(var a=5<this.aa?this.aa-5:0;a<this.aa+1;a++)xa(""+a+". "+this.pa[a]);ka.ib("\n");a=this.m+1;this.R[this.m]instanceof q&&(a=this.m);xa(""+a+" instruction frames");a=20<this.m?this.m-20:0;for(var b=this.m;a<=b;b--)if(!(this.R[b]instanceof q)){var c=this.R[b],d=this.wa[b],f=this.Da[b];for(wa("\nInstruction Frame "+b+":");!(c instanceof q);){var g=c.g();if(!(g instanceof I))throw new TypeError;c=c.h();if(!(c instanceof
G))throw new TypeError;wa(g.qb(d));wa(" ")}wa("[");g=0;for(c=f.length;g<c;g++)wa(""+f[g]+" ");wa("]");ka.ib("\n")}};function z(a,b){a.Ra<=a.m&&Jc(a)instanceof q||(a.m++,0<=a.m&&a.m<a.R.length||(Kc(a,2*a.R.length),Lc(a,2*a.wa.length),Mc(a,2*a.Da.length)));a.R[a.m]=r(b,u)}function P(a,b,c){a.Ra<=a.m&&Jc(a)instanceof q||(a.m++,0<=a.m&&a.m<a.R.length||(Kc(a,2*a.R.length),Lc(a,2*a.wa.length),Mc(a,2*a.Da.length)));a.R[a.m]=c;a.wa[a.m]=b}
function Nc(a,b,c,d){a.Ra<=a.m&&Jc(a)instanceof q||(a.m++,0<=a.m&&a.m<a.R.length||(Kc(a,2*a.R.length),Lc(a,2*a.wa.length),Mc(a,2*a.Da.length)));a.R[a.m]=c;a.wa[a.m]=b;a.Da[a.m]=d}function Oc(a,b){a.Ra<=a.m&&Jc(a)instanceof q?a.R[a.m]=b:(a.m++,0<=a.m&&a.m<a.R.length||(Kc(a,2*a.R.length),Lc(a,2*a.wa.length),Mc(a,2*a.Da.length)),a.R[a.m]=b,a.wa[a.m]=a.F,a.Da[a.m]=a.Xb)}function Jc(a){return a.R[a.m]}
function v(a,b){a.aa++;if(!(0<=a.aa&&a.aa<a.pa.length)){var c=Array(~~(2*a.pa.length));Pc(a.pa,c);a.pa=c}a.pa[a.aa]=b}function Qc(a){return a.pa[a.aa]}function N(a){return a.pa[a.aa--]}function Rc(a,b){for(var c=Wa,d=0;d<b;d++)c=r(a.pa[a.aa-d],c);a.aa-=b;return c}function Sc(a,b){a.Ab=b;b.Nb(a)}e.type=function(){return Tc};e.mc=function(){var a=rc();this.copyTo(a);return a};
e.copyTo=function(a){a.aa=this.aa;a.m=this.m;a.R.length<this.R.length?(a.R=this.R.slice(),a.wa=this.wa.slice(),a.Da=this.Da.slice()):(Pc(this.R,a.R),Pc(this.wa,a.wa),Pc(this.Da,a.Da));a.pa.length!==this.pa.length?a.pa=this.pa.slice():Pc(this.pa,a.pa);a.F=this.F;a.jb=this.jb;a.Ab=this.Ab;a.nc=this.nc;a.Ra=this.Ra};e.toString=function(){return"[thread#"+this.Cc+": instruction stack "+this.m+"; arg stack "+this.aa+"]"};function Lc(a,b){b=Array(~~b);Pc(a.wa,b);a.wa=b}
function Kc(a,b){b=Array(~~b);Pc(a.R,b);a.R=b}function Mc(a,b){b=Array(~~b);Pc(a.Da,b);a.Da=b}function Pc(a,b){for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}function Uc(a){return a.Ra<=a.m?a.R[a.m]instanceof q?(a.m--,Uc(a)):a.R[a.m].g():null}var Tc=D("thread"),Fc=0;function Vc(){}Vc.prototype=new p;e=Vc.prototype;e.className="ListBuilder";e.append=function(a){this.$a.push(a)};e.list=function(){return qb(this.$a,this.$c)};e.type=function(){return D("list-builder")};
e.toString=function(){return"ListBuilder:"+this.list().toString()};function Wc(){}Wc.prototype=new I;Wc.prototype.className="Append";Wc.prototype.i=function(a){var b=N(a);a=Qc(a);if(!(a instanceof Vc))throw new TypeError;a.append(b)};Wc.prototype.toString=function(){return"(append)"};function Xc(){}Xc.prototype=new I;Xc.prototype.className="AppendAll";Xc.prototype.i=function(a){var b=N(a);a=Qc(a);if(!(a instanceof Vc))throw new TypeError;if(!(b instanceof G))throw new TypeError;b.copyTo(a.$a)};
Xc.prototype.toString=function(){return"(append-all)"};function Yc(){}Yc.prototype=new I;Yc.prototype.className="AppendDot";Yc.prototype.i=function(a){var b=N(a);a=Qc(a);if(!(a instanceof Vc))throw new TypeError;a.$c=b};Yc.prototype.toString=function(){return"(append-dot)"};function Zc(){}Zc.prototype=new I;e=Zc.prototype;e.rc=!0;e.className="Catch";e.Ic=function(){return!0};e.i=function(a){var b=a.error();null!==b&&(a.jb=null,a.aa=this.Vb,this.cd.j(a,m([b])))};
e.toString=function(){return"(catch "+this.cd+")"};function $c(){}$c.prototype=new I;$c.prototype.className="Close_Instruction";$c.prototype.i=function(a){var b=a.F,c=new ad;c.La=this.Zc;c.va=b;v(a,c)};$c.prototype.toString=function(){return"(close "+this.Zc+")"};function bd(){}bd.prototype=new I;bd.prototype.Yb=!0;bd.prototype.className="FinallyInvoke";bd.prototype.i=function(a){this.Vc.j(a,u)};bd.prototype.toString=function(){return"(finally:"+this.Vc+")"};function cd(){}cd.prototype=new I;
cd.prototype.className="FinishList";cd.prototype.i=function(a){var b=N(a);if(!(b instanceof Vc))throw new TypeError;v(a,b.list())};cd.prototype.toString=function(){return"(finish-list)"};function ab(){}ab.prototype=new I;ab.prototype.className="FreeSym";ab.prototype.i=function(a){v(a,this.gb.value())};ab.prototype.toString=function(){return"(free-sym "+this.gb+")"};ab.prototype.qb=function(){return"(free-sym "+this.gb+" -> "+Ab(this.gb)+")"};function dd(){}dd.prototype=new I;
dd.prototype.className="LexSym";dd.prototype.i=function(a){v(a,this.gb.K(a.F))};dd.prototype.toString=function(){return"(lex-sym "+this.gb+")"};dd.prototype.qb=function(a){return"(lex-sym "+this.gb+" -> "+this.gb.K(a)+")"};function ed(){}ed.prototype=new I;ed.prototype.className="Listify";function fd(){var a=new ed;x(a);a.ed=2;return a}ed.prototype.i=function(a){v(a,Rc(a,this.ed))};ed.prototype.toString=function(){return"(listify "+this.ed+")"};function gd(){}gd.prototype=new I;
gd.prototype.className="Literal";function Na(a){var b=new gd;x(b);b.Wc=a;return b}gd.prototype.i=function(a){v(a,this.Wc)};gd.prototype.toString=function(){return"(literal "+this.Wc+")"};function hd(){}hd.prototype=new I;hd.prototype.className="NewList";hd.prototype.i=function(a){var b=new Vc;b.$a=[];b.$c=u;v(a,b)};hd.prototype.toString=function(){return"(new-list)"};function id(){}id.prototype=new I;id.prototype.className="PopArg";function jd(a){var b=new id;x(b);b.ma=a;return b}id.prototype.i=function(a){N(a)};
id.prototype.toString=function(){return"(pop-arg:"+this.ma+")"};function kd(){}kd.prototype=new I;kd.prototype.Yb=!0;kd.prototype.className="SetThreadLocal";function ld(a,b){var c=new kd;x(c);c.vd=a;c.u=b;return c}kd.prototype.i=function(){this.vd.value=this.u};function md(){}md.prototype=new I;md.prototype.className="StackSym";md.prototype.i=function(a){var b=this.ub;a.aa++;if(!(0<=a.aa&&a.aa<a.pa.length)){var c=Array(~~(2*a.pa.length));Pc(a.pa,c);a.pa=c}a.pa[a.aa]=a.Xb[b]};
md.prototype.toString=function(){return"(stack-bound symbol:"+this.gb+")"};function nd(){}nd.prototype=new I;nd.prototype.className="TableMapper";nd.prototype.i=function(a){var b=N(a);if(!(b instanceof G))throw new TypeError;if(!(b instanceof q)){v(a,b.h());z(a,this);b=b.g();if(!(b instanceof G))throw new TypeError;var c=jd("map-table-iterator");c.o(this);z(a,c);this.Yc.j(a,b)}};nd.prototype.toString=function(){return"(table-mapper "+this.Yc+")"};function od(){}od.prototype=new I;
od.prototype.className="Assign_Lex";od.prototype.T=function(a){x(this);this.name=a;return this};function pd(){}pd.prototype=new od;pd.prototype.className="Assign_Lex_Free";pd.prototype.i=function(a){var b=this.value.value();rd(this.name,a.F,b);v(a,b)};pd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function sd(){}sd.prototype=new pd;sd.prototype.className="Assign_Lex_Free.Intermediate";sd.prototype.i=function(a){rd(this.name,a.F,this.value.value())};
function td(){}td.prototype=new od;td.prototype.className="Assign_Lex_Lex";td.prototype.i=function(a){var b=this.value.K(a.F);rd(this.name,a.F,b);v(a,b)};td.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};td.prototype.qb=function(a){return"(assign-lex "+this.name+"--\x3e"+this.name.K(a)+this.value+"--\x3e"+this.value.K(a)+")"};function ud(){}ud.prototype=new td;ud.prototype.className="Assign_Lex_Lex.Intermediate";ud.prototype.i=function(a){rd(this.name,a.F,this.value.K(a.F))};
function vd(){}vd.prototype=new od;vd.prototype.className="Assign_Lex_Literal";vd.prototype.i=function(a){rd(this.name,a.F,this.Za);v(a,this.Za)};function wd(a,b,c,d){if(d){d=a.push;var f=new vd;f.T(b);f.Za=c;d.call(a,f)}else d=a.push,f=new xd,f.T(b),f.Za=c,d.call(a,f)}vd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.Za+")"};function xd(){}xd.prototype=new vd;xd.prototype.className="Assign_Lex_Literal.Intermediate";xd.prototype.i=function(a){rd(this.name,a.F,this.Za)};
function yd(){}yd.prototype=new od;yd.prototype.className="Assign_Lex_Other";yd.prototype.i=function(a){rd(this.name,a.F,Qc(a))};yd.prototype.toString=function(){return"(assign-lex "+this.name+")"};yd.prototype.qb=function(a){return"(assign-lex "+this.name+" -> "+this.name.K(a)+")"};function zd(){}zd.prototype=new yd;zd.prototype.className="Assign_Lex_Other.Intermediate";zd.prototype.i=function(a){rd(this.name,a.F,N(a))};function Ad(){}Ad.prototype=new od;Ad.prototype.className="Assign_Lex_Stack";
Ad.prototype.i=function(a){var b=this.value.get(a);rd(this.name,a.F,b);v(a,b)};Ad.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};Ad.prototype.qb=function(a){return"(assign-lex "+this.name+"--\x3e"+this.name.K(a)+" <-- "+this.value+")"};function Bd(){}Bd.prototype=new Ad;Bd.prototype.className="Assign_Lex_Stack.Intermediate";Bd.prototype.i=function(a){rd(this.name,a.F,this.value.get(a))};function Cd(){}Cd.prototype=new I;Cd.prototype.className="Assign_Free";
Cd.prototype.T=function(a){x(this);this.name=a;return this};function Dd(){}Dd.prototype=new Cd;Dd.prototype.className="Assign_Free_Free";Dd.prototype.i=function(a){var b=this.value.value();this.name.ta(b);v(a,b)};Dd.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function Ed(){}Ed.prototype=new Dd;Ed.prototype.className="Assign_Free_Free.Intermediate";Ed.prototype.i=function(){this.name.ta(this.value.value())};function Fd(){}Fd.prototype=new Cd;
Fd.prototype.className="Assign_Free_Lex";Fd.prototype.i=function(a){var b=this.value.K(a.F);this.name.ta(b);v(a,b)};Fd.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function Gd(){}Gd.prototype=new Fd;Gd.prototype.className="Assign_Free_Lex.Intermediate";Gd.prototype.i=function(a){this.name.ta(this.value.K(a.F))};function Hd(){}Hd.prototype=new Cd;Hd.prototype.className="Assign_Free_Literal";Hd.prototype.i=function(a){this.name.ta(this.Za);v(a,this.Za)};
function Id(a,b,c,d){if(d){d=a.push;var f=new Hd;f.T(b);f.Za=c;d.call(a,f)}else d=a.push,f=new Jd,f.T(b),f.Za=c,d.call(a,f)}Hd.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.Za+")"};function Jd(){}Jd.prototype=new Hd;Jd.prototype.className="Assign_Free_Literal.Intermediate";Jd.prototype.i=function(){this.name.ta(this.Za)};function Kd(){}Kd.prototype=new Cd;Kd.prototype.className="Assign_Free_Other";Kd.prototype.i=function(a){this.name.ta(Qc(a))};
Kd.prototype.toString=function(){return"(assign-free-other "+this.name+")"};Kd.prototype.qb=function(){return"(assign-free-other "+this.name+" -> "+Ab(this.name)+")"};function Ld(){}Ld.prototype=new Kd;Ld.prototype.className="Assign_Free_Other.Intermediate";Ld.prototype.i=function(a){this.name.ta(N(a))};function Md(){}Md.prototype=new Cd;Md.prototype.className="Assign_Free_Stack";Md.prototype.i=function(a){var b=this.value.get(a);this.name.ta(b);v(a,b)};
Md.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function Nd(){}Nd.prototype=new Md;Nd.prototype.className="Assign_Free_Stack.Intermediate";Nd.prototype.i=function(a){this.name.ta(this.value.get(a))};function Od(){}Od.prototype=new I;Od.prototype.className="Assign_Stack";Od.prototype.T=function(a){x(this);this.name=a;return this};function Pd(){}Pd.prototype=new Od;Pd.prototype.className="Assign_Stack_Free";
Pd.prototype.i=function(a){var b=this.value.value();this.name.set(a,b);v(a,b)};Pd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Qd(){}Qd.prototype=new Pd;Qd.prototype.className="Assign_Stack_Free.Intermediate";Qd.prototype.i=function(a){this.name.set(a,this.value.value())};function Rd(){}Rd.prototype=new Od;Rd.prototype.className="Assign_Stack_Lex";Rd.prototype.i=function(a){var b=this.value.K(a.F);this.name.set(a,b);v(a,b)};
Rd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Sd(){}Sd.prototype=new Rd;Sd.prototype.className="Assign_Stack_Lex.Intermediate";Sd.prototype.i=function(a){this.name.set(a,this.value.K(a.F))};function Td(){}Td.prototype=new Od;Td.prototype.className="Assign_Stack_Literal";Td.prototype.i=function(a){this.name.set(a,this.value);v(a,this.value)};
function Ud(a,b,c,d){if(d){d=a.push;var f=new Td;f.T(b);f.value=c;d.call(a,f)}else d=a.push,f=new Vd,f.T(b),f.value=c,d.call(a,f)}Td.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Vd(){}Vd.prototype=new Td;Vd.prototype.className="Assign_Stack_Literal.Intermediate";Vd.prototype.i=function(a){this.name.set(a,this.value)};function Wd(){}Wd.prototype=new Od;Wd.prototype.className="Assign_Stack_Other";Wd.prototype.i=function(a){this.name.set(a,Qc(a))};
Wd.prototype.toString=function(){return"(assign-stack "+this.name+")"};function Xd(){}Xd.prototype=new Wd;Xd.prototype.className="Assign_Stack_Other.Intermediate";Xd.prototype.i=function(a){this.name.set(a,N(a))};function Yd(){}Yd.prototype=new Od;Yd.prototype.className="Assign_Stack_Stack";Yd.prototype.i=function(a){var b=this.value.get(a);this.name.set(a,b);v(a,b)};Yd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Zd(){}Zd.prototype=new Yd;
Zd.prototype.className="Assign_Stack_Stack.Intermediate";Zd.prototype.i=function(a){this.name.set(a,this.value.get(a))};function $d(){}$d.prototype=new I;$d.prototype.className="Cond";function ae(a){var b=[];a.l(b);return m(b)}$d.prototype.i=function(a){Oc(a,N(a)instanceof q?this.Aa:this.hb)};$d.prototype.v=function(a){I.prototype.v.call(this,a);this.hb.v(a);this.Aa.v(a)};$d.prototype.toString=function(){return"(cond then:"+this.V+", else:"+this.H+")"};function be(){}var ce={};
k["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=ce;be.prototype=new I;be.prototype.className="If_bound_bound_literal";be.prototype.i=function(a){this.qa.K(a.F)instanceof q?v(a,this.H):v(a,this.V.K(a.F))};
ce.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;if(!(c instanceof V))throw new TypeError;if(!(d instanceof de))throw new TypeError;if(ee(b,c))if(d.A instanceof q)b.l(a);else{c=a.push;var f=d.A;d=new fe;x(d);d.Ya=b;d.H=f;c.call(a,d)}else{f=a.push;d=d.A;var g=new be;x(g);g.qa=b;g.V=c;g.H=d;f.call(a,g)}};be.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};function fe(){}fe.prototype=new I;fe.prototype.className="If_bound_bound_literal.Or";
fe.prototype.i=function(a){var b=this.Ya.K(a.F);b instanceof q?v(a,this.H):v(a,b)};fe.prototype.toString=function(){return"(if[bbl$or] "+this.Ya+" "+this.Ya+" "+this.H+")"};function ge(){}var he={};k["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=he;ge.prototype=new I;ge.prototype.className="If_bound_bound_other";ge.prototype.i=function(a){this.qa.K(a.F)instanceof q?Oc(a,this.Aa):v(a,this.V.K(a.F))};
he.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;if(!(c instanceof V))throw new TypeError;if(ee(b,c)){c=a.push;var f=new ie;x(f);f.Ya=b;f.Aa=ae(d);f.H=d;c.call(a,f)}else{f=a.push;var g=new ge;x(g);g.qa=b;g.V=c;g.Aa=ae(d);g.H=d;f.call(a,g)}};ge.prototype.v=function(a){I.prototype.v.call(this,a);this.Aa.v(a)};ge.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};function ie(){}ie.prototype=new I;ie.prototype.className="If_bound_bound_other.Or";
ie.prototype.i=function(a){var b=this.Ya.K(a.F);b instanceof q?Oc(a,this.Aa):v(a,b)};ie.prototype.v=function(a){I.prototype.v.call(this,a);this.Aa.v(a)};ie.prototype.toString=function(){return"(if "+this.Ya+" "+this.Ya+" "+this.H+")"};function je(){}var ke={};k["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=ke;je.prototype=new I;je.prototype.className="If_bound_literal_literal";je.prototype.i=function(a){this.qa.K(a.F)instanceof q?v(a,this.H):v(a,this.V)};
je.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};ke.l=function(a,b,c,d){if(!(d instanceof de))throw new TypeError;if(!(b instanceof V))throw new TypeError;var f=a.push;d=d.A;var g=new je;x(g);g.qa=b;g.V=c;g.H=d;f.call(a,g)};function le(){}var me={};k["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=me;le.prototype=new I;le.prototype.className="If_bound_other_literal";le.prototype.i=function(a){this.qa.K(a.F)instanceof q?v(a,this.H):Oc(a,this.hb)};
le.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};le.prototype.v=function(a){I.prototype.v.call(this,a);this.hb.v(a)};me.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;if(!(d instanceof de))throw new TypeError;var f=a.push;d=d.A;var g=new le;x(g);g.qa=b;g.V=c;g.hb=ae(c);g.H=d;f.call(a,g)};function ne(){}var oe={};k["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=oe;ne.prototype=new I;ne.prototype.className="If_bound_other_other";
ne.prototype.i=function(a){this.qa.K(a.F)instanceof q?Oc(a,this.Aa):Oc(a,this.hb)};ne.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};ne.prototype.v=function(a){I.prototype.v.call(this,a);this.hb.v(a)};oe.l=function(a,b,c,d){if(!(b instanceof V))throw new TypeError;var f=a.push,g=new ne;x(g);g.qa=b;g.V=c;g.hb=ae(c);g.H=d;g.Aa=ae(d);f.call(a,g)};function pe(){}var qe={};k["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=qe;pe.prototype=new I;
pe.prototype.className="If_other_bound_other";pe.prototype.i=function(a){N(a)instanceof q?Oc(a,this.Aa):v(a,this.V.K(a.F))};pe.prototype.toString=function(){return"(if ? "+this.V+" "+this.H+")"};pe.prototype.v=function(a){I.prototype.v.call(this,a);this.Aa.v(a)};qe.l=function(a,b,c,d){b.l(a);if(!(c instanceof V))throw new TypeError;b=a.push;var f=new pe;x(f);f.Aa=ae(d);f.V=c;f.H=d;b.call(a,f)};function re(){}var se={};k["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=se;
re.prototype=new I;re.prototype.className="If_other_other_literal";re.prototype.i=function(a){N(a)instanceof q?v(a,this.H):Oc(a,this.hb)};re.prototype.toString=function(){return"(if ? "+this.V+" "+this.H+")"};re.prototype.v=function(a){I.prototype.v.call(this,a);this.hb.v(a)};se.l=function(a,b,c,d){if(!(d instanceof de))throw new TypeError;b.l(a);b=a.push;d=d.A;var f=new re;x(f);f.hb=ae(c);f.V=c;f.H=d;b.call(a,f)};function te(){}var ue={};
k["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=ue;te.prototype=new I;te.prototype.className="If_other_stack_literal";te.prototype.i=function(a){N(a)instanceof q?v(a,this.H):v(a,this.V.get(a))};te.prototype.toString=function(){return"(if ? "+this.V+" "+this.H+")"};ue.l=function(a,b,c,d){if(!(d instanceof de))throw new TypeError;b.l(a);if(!(c instanceof ve))throw new TypeError;b=a.push;d=d.A;var f=new te;x(f);f.V=c;f.H=d;b.call(a,f)};function we(){}var xe={};
k["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=xe;we.prototype=new I;we.prototype.className="If_other_stack_other";we.prototype.i=function(a){N(a)instanceof q?Oc(a,this.Aa):v(a,this.V.get(a))};we.prototype.toString=function(){return"(if ? "+this.V+" "+this.H+")"};we.prototype.v=function(a){I.prototype.v.call(this,a);this.Aa.v(a)};xe.l=function(a,b,c,d){b.l(a);if(!(c instanceof ve))throw new TypeError;b=a.push;var f=new we;x(f);f.V=c;f.Aa=ae(d);f.H=d;b.call(a,f)};function ye(){}
var ze={};k["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=ze;ye.prototype=new I;ye.prototype.className="If_stack_literal_free";ye.prototype.i=function(a){this.qa.get(a)instanceof q?v(a,this.H.value()):v(a,this.V)};ye.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};
ze.l=function(a,b,c,d){if(!(b instanceof ve))throw new TypeError;if(!(d instanceof de))throw new TypeError;d=d.A;if(!(d instanceof F))throw new TypeError;var f=a.push,g=new ye;x(g);g.qa=b;g.V=c;g.H=d;f.call(a,g)};function Ae(){}var Be={};k["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=Be;Ae.prototype=new I;Ae.prototype.className="If_stack_stack_literal";Ae.prototype.i=function(a){this.qa.get(a)instanceof q?v(a,this.H):v(a,this.V.get(a))};
Ae.prototype.toString=function(){return"(if "+this.qa+" "+this.V+" "+this.H+")"};Be.l=function(a,b,c,d){if(!(b instanceof ve))throw new TypeError;if(!(c instanceof ve))throw new TypeError;if(!(d instanceof de))throw new TypeError;if(Ce(b,c))if(d.A instanceof q)b.l(a);else{c=a.push;var f=d.A;d=new De;x(d);d.Ya=b;d.H=f;c.call(a,d)}else{f=a.push;d=d.A;var g=new Ae;x(g);g.qa=b;g.V=c;g.H=d;f.call(a,g)}};function De(){}De.prototype=new I;De.prototype.className="If_stack_stack_literal.Or";
De.prototype.i=function(a){var b=this.Ya.get(a);b instanceof q?v(a,this.H):v(a,b)};De.prototype.toString=function(){return"(if[ssl$or] "+this.Ya+" "+this.Ya+" "+this.H+")"};function Ee(){}Ee.prototype=new I;e=Ee.prototype;e.Ba=!0;e.className="Invoke_0.Lex";e.i=function(a){this.D.K(a.F).j(a,u)};e.toString=function(){return"(invoke "+this.D+")"};e.Ga=function(a){return this.D.K(a.F)};function Fe(){}Fe.prototype=new I;e=Fe.prototype;e.Ba=!0;e.className="Invoke_0.Free";
e.i=function(a){this.D.value().j(a,u)};e.toString=function(){return"(invoke "+this.D+")"};e.Ga=function(){return this.D.value()};function Ge(){}Ge.prototype=new I;e=Ge.prototype;e.Ba=!0;e.className="Invoke_0.Other";e.i=function(a){N(a).j(a,u)};e.toString=function(){return"(invoke <0>)"};e.Ga=function(a){return Qc(a)};function He(){}He.prototype=new I;e=He.prototype;e.Ba=!0;e.className="Invoke_1.Lex";e.i=function(a){this.D.K(a.F).j(a,r(N(a),u))};e.toString=function(){return"(invoke "+this.D+" <1>)"};
e.Ga=function(a){return this.D.K(a.F)};function Ie(){}Ie.prototype=new I;e=Ie.prototype;e.Ba=!0;e.className="Invoke_1.Free";e.i=function(a){this.D.value().j(a,r(N(a),u))};e.toString=function(){return"(invoke "+this.D+" <1>)"};e.Ga=function(){return this.D.value()};function Je(){}Je.prototype=new I;e=Je.prototype;e.Ba=!0;e.className="Invoke_1.Other";e.i=function(a){N(a).j(a,r(N(a),u))};e.toString=function(){return"(invoke <1>)"};e.Ga=function(a){return Qc(a)};function Ke(){}Ke.prototype=new I;e=Ke.prototype;
e.Ba=!0;e.className="Invoke_2.Lex";e.i=function(a){var b=N(a),c=N(a);this.D.K(a.F).j(a,r(c,r(b,u)))};e.toString=function(){return"(invoke "+this.D+" <2>)"};e.qb=function(a){return"(invoke "+this.D+" -> "+this.D.K(a)+" <2>)"};e.Ga=function(a){return this.D.K(a.F)};function Le(){}Le.prototype=new I;e=Le.prototype;e.Ba=!0;e.className="Invoke_2.Free";e.i=function(a){var b=N(a),c=N(a);this.D.value().j(a,r(c,r(b,u)))};e.toString=function(){return"(invoke_2:free "+this.D+" <2>)"};
e.qb=function(){return"(invoke_2:free "+this.D+" -> "+this.D.value()+" <2>)"};e.Ga=function(){return this.D.value()};function Me(){}Me.prototype=new I;e=Me.prototype;e.Ba=!0;e.className="Invoke_2.Other";e.i=function(a){var b=N(a),c=N(a),d=N(a);try{b.j(a,r(d,r(c,u)))}catch(f){if(!(f instanceof Error))throw f;ya(f)}};e.toString=function(){return"(invoke <2>)"};e.Ga=function(a){return Qc(a)};function Ne(){}Ne.prototype=new I;e=Ne.prototype;e.Ba=!0;e.className="Invoke_3.Lex";
e.i=function(a){var b=N(a),c=N(a),d=N(a);this.D.K(a.F).j(a,r(d,r(c,r(b,u))))};e.toString=function(){return"(invoke "+this.D+" <3>)"};e.Ga=function(a){return this.D.K(a.F)};function Oe(){}Oe.prototype=new I;e=Oe.prototype;e.Ba=!0;e.className="Invoke_3.Free";e.i=function(a){var b=N(a),c=N(a),d=N(a);this.D.value().j(a,r(d,r(c,r(b,u))))};e.toString=function(){return"(invoke_3:free "+this.D+" <3>)"};e.Ga=function(){return this.D.value()};function Pe(){}Pe.prototype=new I;e=Pe.prototype;e.Ba=!0;
e.className="Invoke_3.Other";e.i=function(a){var b=N(a),c=N(a),d=N(a),f=N(a);b.j(a,r(f,r(d,r(c,u))))};e.toString=function(){return"(invoke <3>)"};e.Ga=function(a){return Qc(a)};function Qe(){}Qe.prototype=new I;e=Qe.prototype;e.Ba=!0;e.className="Invoke_N.Lex";e.i=function(a){this.D.K(a.F).j(a,Rc(a,this.rb))};e.toString=function(){return"(invoke "+this.D+" <"+this.rb+">)"};e.Ga=function(a){return this.D.K(a.F)};function Re(){}Re.prototype=new I;e=Re.prototype;e.Ba=!0;e.className="Invoke_N.Free";
e.i=function(a){this.D.value().j(a,Rc(a,this.rb))};e.toString=function(){return"(invoke "+this.D+" <"+this.rb+">)"};e.Ga=function(){return this.D.value()};function Se(){}Se.prototype=new I;e=Se.prototype;e.Ba=!0;e.className="Invoke_N.Other";function Ma(a){var b=new Se;x(b);b.rb=a;return b}e.i=function(a){N(a).j(a,Rc(a,this.rb))};e.toString=function(){return"(invoke <"+this.rb+">)"};e.Ga=function(a){return Qc(a)};function ve(){}ve.prototype=new p;e=ve.prototype;e.className="StackSymbol";
function Te(a,b){var c=new ve;c.name=a;c.ub=b;return c}e.get=function(a){return a.Xb[this.ub]};e.set=function(a,b){a.Da[a.m][this.ub]=b};e.l=function(a){var b=a.push,c=this.name,d=this.ub,f=new md;x(f);f.gb=c;f.ub=d;b.call(a,f)};e.type=function(){return D("stack-symbol")};e.toString=function(){return this.name.toString()};function Ce(a,b){return a.name===b.name&&a.ub===b.ub}e.ea=function(a,b,c){return Ce(this,a)?b:c<this.ub?Te(this.name,this.index-1):this};function V(){}V.prototype=new p;e=V.prototype;
e.className="BoundSymbol";function Ue(a,b,c){var d=new V;d.bb=b;d.index=c;d.name=a;return d}function rd(a,b,c){b.Pb(a.bb).set(a.index,c)}e.K=function(a){for(var b=this.bb;0<b;)a=a.parent,b--;return a.tb[this.index]};e.l=function(a){var b=a.push,c=new dd;x(c);c.gb=this;b.call(a,c)};e.type=function(){return Ve};e.toString=function(){return this.name.toString()};function ee(a,b){return a.bb===b.bb&&a.name===b.name&&a.index===b.index}
e.$=function(a){return a<=this.bb?Ue(this.name,this.bb+1,this.index):this};function We(a){return Ue(a.name,a.bb-1,a.index)}e.fa=function(a,b,c,d,f){if(ee(this,a))return b;if(c){if(0===this.bb)throw h("can't unnest "+this+", looking for "+a+" to inline with "+b);return We(this)}return d===this.bb&&f<this.index?Ue(this.name,this.bb,this.index-1):this};e.v=function(a){a.Hc(this)};
e.ka=function(a){a=a[this.name.name()];if(void 0===a)return We(this);if(a===this.index)return Te(this.name,a);throw h("error: parameter index mismatch: expected "+a+", got "+this.index);};var Ve=D("bound-symbol");function Xe(){}Xe.prototype=new p;e=Xe.prototype;e.className="SingleAssignment";function Ye(a,b){a.name=null;a.O=null;a.cb=b;return a}
e.Xa=function(a){if(null===this.name)if(a instanceof F||a instanceof V)this.name=a;else throw h("assign: can't assign to "+a);else null===this.O?this.O=a:this.cb.Xa(a)};e.toString=function(){return""+this.name+" "+this.O};e.l=function(a){Ze(this,a,!1);this.cb.l(a)};
function Ze(a,b,c){if(a.name instanceof V){var d=a.name;a=a.O;if(a instanceof V)if(c){c=b.push;var f=new td;f.T(d);f.value=a;c.call(b,f)}else c=b.push,f=new ud,f.T(d),f.value=a,c.call(b,f);else a instanceof ve?c?(c=b.push,f=new Ad,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Bd,f.T(d),f.value=a,c.call(b,f)):a instanceof F?c?(c=b.push,f=new pd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new sd,f.T(d),f.value=a,c.call(b,f)):a.Ta()?wd(b,d,a,c):a instanceof $e?wd(b,d,a.Sb,c):(a.l(b),c?b.push((new yd).T(d)):
b.push((new zd).T(d)))}else if(a.name instanceof ve)d=a.name,a=a.O,a instanceof V?c?(c=b.push,f=new Rd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Sd,f.T(d),f.value=a,c.call(b,f)):a instanceof ve?c?(c=b.push,f=new Yd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Zd,f.T(d),f.value=a,c.call(b,f)):a instanceof F?c?(c=b.push,f=new Pd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Qd,f.T(d),f.value=a,c.call(b,f)):a.Ta()?Ud(b,d,a,c):a instanceof $e?Ud(b,d,a.Sb,c):(a.l(b),c?b.push((new Wd).T(d)):b.push((new Xd).T(d)));
else if(a.name instanceof F)d=a.name,a=a.O,a instanceof V?c?(c=b.push,f=new Fd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Gd,f.T(d),f.value=a,c.call(b,f)):a instanceof ve?c?(c=b.push,f=new Md,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Nd,f.T(d),f.value=a,c.call(b,f)):a instanceof F?c?(c=b.push,f=new Dd,f.T(d),f.value=a,c.call(b,f)):(c=b.push,f=new Ed,f.T(d),f.value=a,c.call(b,f)):a.Ta()?Id(b,d,a,c):a instanceof $e?Id(b,d,a.Sb,c):(a.l(b),c?b.push((new Kd).T(d)):b.push((new Ld).T(d)));else throw h("what kind of symbol is "+
a.name+"??");}e.type=function(){return D("assignment")};e.ua=function(){return!0};e.ja=function(){return this.O instanceof W?af(this.O)||this.cb.ja():this.O.ja()||this.cb.ja()};e.fa=function(a,b,c,d,f){var g=Ye(new Xe,null);if(this.name instanceof V&&ee(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");g.name=this.name;g.O=this.O.fa(a,b,c,d,f);g.cb=this.Bd(a,b,c,d,f);return g};
e.ea=function(a,b,c){var d=Ye(new Xe,null);if(this.name instanceof ve&&Ce(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");d.name=this.name;d.O=this.O.ea(a,b,c);d.cb=this.Ad(a,b,c);return d};e.$=function(a){var b=Ye(new Xe,null);b.name=this.name.$(a);b.O=this.O.$(a);b.cb=this.cb.$(a);return b};e.ka=function(a){var b=Ye(new Xe,null);b.name=this.name.ka(a);b.O=this.O.ka(a);a=this.cb.ka(a);if(!(a instanceof Xe))throw new TypeError;b.cb=a;return b};
e.v=function(a){a.Ja(this);this.name.v(a);this.O.v(a);this.cb.v(a);a.Va()};function bf(){}bf.prototype=new Xe;e=bf.prototype;e.className="LastAssignment";function cf(){return Ye(new bf,null)}e.Xa=function(a){if(null===this.name)if(a instanceof F||a instanceof V)this.name=a;else throw h("assign: can't assign to "+a);else if(null===this.O)this.O=a;else throw h("assign: error: unexpected "+a);};e.toString=function(){return""+this.name+" "+this.O};e.l=function(a){Ze(this,a,!0)};
e.ja=function(){return this.O instanceof W?af(this.O):this.O.ja()};e.fa=function(a,b,c,d,f){var g=cf();if(this.name instanceof V&&ee(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");g.name=this.name.fa(a,b,c,d,f);g.O=this.O.fa(a,b,c,d,f);return g};e.ea=function(a,b,c){var d=cf();if(this.name instanceof ve&&Ce(a,this.name))throw h("Can't inline "+a+" -> "+b+"; assignment");d.name=this.name.ea(a,b,c);d.O=this.O.ea(a,b,c);return d};
e.$=function(a){var b=cf();b.name=this.name.$(a);b.O=this.O.$(a);return b};e.ka=function(a){var b=cf();b.name=this.name.ka(a);b.O=this.O.ka(a);return b};e.v=function(a){a.Ja(this);this.name.v(a);this.O.v(a);a.Va()};function df(){}df.prototype=new p;e=df.prototype;e.className="Assignment";function ef(){var a=new df;a.na=null;return a}e.type=function(){return D("assignment")};e.Xa=function(a){this.na.Xa(a)};e.l=function(a){this.na.l(a)};e.toString=function(){return"(assign "+this.na+")"};e.ua=function(a){return this.na.ua(a)};
e.ja=function(){return this.na.ja()};e.fa=function(a,b,c,d,f){var g=ef();g.na=this.na.fa(a,b,c,d,f);return g};e.ea=function(a,b,c){var d=ef();d.na=this.na.ea(a,b,c);return d};e.$=function(a){var b=ef();b.na=this.na.$(a);return b};e.v=function(a){a.Ja(this);this.na.v(a);a.Va()};e.ka=function(a){var b=ef();a=this.na.ka(a);if(!(a instanceof Xe))throw new TypeError;b.na=a;return b};function de(){}de.prototype=new p;e=de.prototype;e.Wa=!0;e.className="Else";
function ff(){var a=new de;a.A=null;return a}e.type=function(){return D("else-clause")};e.add=function(a){throw h("Internal error: if clause: unexpected extra condition: "+a);};e.Xa=function(a){if(null===this.A)this.A=a;else throw h("Internal error: if clause: unexpected: "+a);};e.l=function(a){this.A.l(a)};e.reduce=function(){return this};e.toString=function(){return""+this.A};e.ua=function(a){return this.A.ua(a)};e.ja=function(){return this.A instanceof W?af(this.A):this.A.ja()};
e.fa=function(a,b,c,d,f){var g=ff();g.A=this.A.fa(a,b,c,d,f).reduce();return g};e.ea=function(a,b,c){var d=ff();d.A=this.A.ea(a,b,c).reduce();return d};e.$=function(a){var b=ff();b.A=this.A.$(a);return b};e.ka=function(a){var b=ff();b.A=this.A.ka(a);return b};e.v=function(a){a.Ja(this);this.A.v(a);a.Va()};e.Ac=function(){return"_"+gf(this.A)};function hf(){}hf.prototype=new p;e=hf.prototype;e.className="IfClause";function jf(){var a=new hf;a.la=null;return a}e.type=function(){return kf};
e.append=function(a){null!==this.la?this.la.add(a):this.la=a};e.reduce=function(){var a=this.la.reduce();if(!a.Wa)throw new TypeError;this.la=a;return a instanceof de?a.A:this};e.Xa=function(a){this.la.Xa(a)};e.l=function(a){this.la.l(a)};e.toString=function(){return"(if "+this.la+")"};e.ua=function(a){return this.la.ua(a)};e.ja=function(){return this.la.ja()};e.fa=function(a,b,c,d,f){var g=jf();a=this.la.fa(a,b,c,d,f).reduce();if(!a.Wa)throw new TypeError;g.la=a;return g};
e.ea=function(a,b,c){var d=jf();a=this.la.ea(a,b,c).reduce();if(!a.Wa)throw new TypeError;d.la=a;return d};e.$=function(a){var b=jf();a=this.la.$(a);if(!a.Wa)throw new TypeError;b.la=a;return b};e.ka=function(a){var b=jf();a=this.la.ka(a);if(!a.Wa)throw new TypeError;b.la=a;return b};e.v=function(a){a.Ja(this);this.la.v(a);a.Va()};e.ca=function(){var a=this.la;if(!(a instanceof lf))throw new TypeError;return a.ca};var kf=D("if-clause");function lf(){}lf.prototype=new p;e=lf.prototype;e.Wa=!0;
e.className="IfThen";function mf(){var a=new lf;a.A=null;a.ca=null;a.next=null;return a}e.type=function(){return D("if-then-clause")};e.add=function(a){null!==this.next?this.next.add(a):this.next=a};e.Xa=function(a){null===this.A?this.A=a:null===this.ca?this.ca=a:this.next.Xa(a)};
e.l=function(a){var b="rainbow.vm.instructions.cond.optimise.If"+this.Ac();try{if(b in nf){var c=nf[b];null===c?this.Jc(a):c(a,this.A,this.ca,this.next)}else{var d=k[b];if(void 0===d)nf[b]=null;else{var f=d.l;if(void 0===f)throw h("couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+b);nf[b]=f}this.l(a)}}catch(g){if(!(g instanceof Error))throw g;throw h("Couldn't instantiate "+b+": "+g,g);}};
e.Jc=function(a){this.A.l(a);var b=a.push,c=this.ca,d=this.next,f=new $d;x(f);f.V=c;f.hb=ae(c);f.H=d;f.Aa=ae(d);b.call(a,f)};
e.reduce=function(){var a=this.next.reduce();if(!a.Wa)throw new TypeError;this.next=a;if(this.A instanceof q)return this.next;this.A instanceof V&&this.ca instanceof V&&this.next instanceof de?(a=this.next,a=ee(this.A,this.ca)&&a.A instanceof q):a=!1;a||(this.A instanceof ve&&this.ca instanceof ve&&this.next instanceof de?(a=this.next,a=Ce(this.A,this.ca)&&a.A instanceof q):a=!1);return a?(a=ff(),a.Xa(this.A),a):this};e.toString=function(){return""+this.A+" "+this.ca+" "+this.next};
e.ua=function(a){return this.A.ua(a)||this.ca.ua(a)||this.next.ua(a)};e.ja=function(){return this.A instanceof W&&af(this.A)||this.ca instanceof W&&af(this.ca)?!0:this.A.ja()||this.ca.ja()||this.next.ja()};e.fa=function(a,b,c,d,f){var g=mf();g.A=this.A.fa(a,b,c,d,f).reduce();g.ca=this.ca.fa(a,b,c,d,f).reduce();a=this.next.fa(a,b,c,d,f).reduce();if(!a.Wa)throw new TypeError;g.next=a;return g};
e.ea=function(a,b,c){var d=mf();d.A=this.A.ea(a,b,c).reduce();d.ca=this.ca.ea(a,b,c).reduce();a=this.next.ea(a,b,c).reduce();if(!a.Wa)throw new TypeError;d.next=a;return d};e.$=function(a){var b=mf();b.A=this.A.$(a);b.ca=this.ca.$(a);a=this.next.$(a);if(!a.Wa)throw new TypeError;b.next=a;return b};e.ka=function(a){var b=mf();b.A=this.A.ka(a);b.ca=this.ca.ka(a);a=this.next.ka(a);if(!a.Wa)throw new TypeError;b.next=a;return b};e.v=function(a){a.Ja(this);this.A.v(a);this.ca.v(a);this.next.v(a);a.Va()};
e.Ac=function(){var a="_"+gf(this.A);a=a+"_"+gf(this.ca);return a=this.next instanceof de?a+"_"+gf(this.next.A):a+"_other"};var nf={};function $e(){}$e.prototype=new p;e=$e.prototype;e.className="Quotation";e.l=function(a){a.push(Na(this.Sb))};e.type=function(){return D("quotation")};e.K=function(){return this.Sb};e.toString=function(){return"'"+this.Sb};function of(){}of.prototype=new p;e=of.prototype;e.className="Invocation";function pf(a,b){a.M=b;a.lc={};return a}e.type=function(){return D("if-then-clause")};
e.toString=function(){if(this.M.g()instanceof W){var a=this.M;var b=a.g();var c=a.h(),d=b.J;if(c.xa()===d.xa())if(0===c.xa())b=m([qf].concat(b.body));else if(1===c.xa())b=m([rf,d.g(),c.g()].concat(b.body));else{a=c;for(c=[];!(d instanceof q);)c.push(d.g()),c.push(a.g()),d=d.h(),a=a.h();b=m([sf,m(c)].concat(b.body))}else b=a;if(b.g()===rf)a:{b=b.h();if(b.g()===tf){if(d=b.h().g(),a=b.h().h(),a.h()instanceof q&&a.g()instanceof hf&&(a=a.g(),a.la instanceof lf&&"it"===a.la.A.toString())){b=a.ca();a=a.la;
if(!(a instanceof lf))throw new TypeError;b=m([uf,d,b,a.next]);break a}}else if(b.g()===vf&&b.h().g()instanceof q&&(a=b.h().h(),a.g()instanceof df&&a.h()instanceof q)){d=a.g();a=d.na;if(a.name instanceof F)a="self"===a.name.name();else if(a.name instanceof ve)a="self"===a.name.name.name();else{a=a.name;if(!(a instanceof V))throw new TypeError;a="self"===a.name.name()}if(a&&d.na.O instanceof W&&d.na instanceof bf){b=d.na.O;b=m([wf,b.J].concat(b.body));break a}}b=r(rf,b)}}else b=this.M;return b.toString()};
e.l=function(a){if(1===this.M.xa()&&this.M.g()instanceof xf){yf(this.M.g(),a);var b=!0}else b=!1;b||zf(this,a)||this.Jc(a)};e.reduce=function(){if(this.M.tc(1)&&this.M.g()instanceof W){var a=this.M.g(),b=a.J;if(b.ba()||!(b.g()instanceof F))return this;b=b.g();var c=this.M.h().g();if(a.xb(b,c)){try{var d=a.zb(b,c,!0)}catch(f){if(!(f instanceof Error))throw f;throw h("couldn't curry "+b+"->"+c+" for "+a+" in expression "+this+": "+f,f);}return pf(new of,r(d,this.M.h().h())).reduce()}}return this};
function zf(a,b){for(var c="",d=a.M;!(d instanceof q);)if(c+="_",c+=gf(d.g()),d=d.h(),!(d instanceof G))throw new TypeError;c="rainbow.vm.instructions.invoke.optimise.Invoke"+c;if(c in a.lc){d=a.lc[c];if(null===d)return!1;try{var f=d.of(a.M),g=a.M.h();if(!(g instanceof G))throw new TypeError;for(;!(g instanceof q);)if("other"===a.Ac(g.g())&&g.g().l(b),g=g.h(),!(g instanceof G))throw new TypeError;"other"===a.Ac(a.M.g())&&a.M.g().l(b);b.push(f);return!0}catch(l){if(!(l instanceof Error))throw l;throw h("couldn't create optimiser "+
c,l);}}else{f=k[c];if(void 0===f)return a.lc[c]=null,!1;a.lc[c]=f;return zf(a,b)}}function gf(a){return a instanceof V?"bound":a instanceof F?"free":a instanceof ve?"stack":a.Ta()?"literal":a instanceof $e?"quote":"other"}
e.Jc=function(a){switch(this.M.xa()){case 1:var b=this.M.g();if(b instanceof V){var c=a.push,d=new Ee;x(d);d.D=b;c.call(a,d)}else b instanceof F?(c=a.push,d=new Fe,x(d),d.D=b,c.call(a,d)):(b.l(a),a.push(x(new Ge)));break;case 2:b=this.M.g();this.M.h().g().l(a);b instanceof V?(c=a.push,d=new He,x(d),d.D=b,c.call(a,d)):b instanceof F?(c=a.push,d=new Ie,x(d),d.D=b,c.call(a,d)):(b.l(a),a.push(x(new Je)));break;case 3:b=this.M.g();c=this.M.h().g();d=this.M.h().h().g();c.l(a);d.l(a);b instanceof V?(c=a.push,
d=new Ke,x(d),d.D=b,c.call(a,d)):b instanceof F?(c=a.push,d=new Le,x(d),d.D=b,c.call(a,d)):(b.l(a),a.push(x(new Me)));break;case 4:b=this.M.g();c=this.M.h().g();d=this.M.h().h().g();var f=this.M.h().h().h().g();c.l(a);d.l(a);f.l(a);b instanceof V?(c=a.push,d=new Ne,x(d),d.D=b,c.call(a,d)):b instanceof F?(c=a.push,d=new Oe,x(d),d.D=b,c.call(a,d)):(b.l(a),a.push(x(new Pe)));break;default:b=this.M.g();c=this.M.h();if(!(c instanceof G))throw new TypeError;d=c;for(c=d.xa();!(d instanceof q);)if(d.g().l(a),
d=d.h(),!(d instanceof G))throw new TypeError;b instanceof V?(d=a.push,f=new Qe,x(f),f.D=b,f.rb=c,d.call(a,f)):b instanceof F?(d=a.push,f=new Re,x(f),f.D=b,f.rb=c,d.call(a,f)):(b.l(a),a.push(Ma(c)))}};e.ua=function(a){for(var b=this.M;!(b instanceof q);){if(b.g().ua(a))return!0;b=b.h();if(!(b instanceof G))throw new TypeError;}return!1};
e.ja=function(){for(var a=this.M;!(a instanceof q);){if(a.g()instanceof W){if(af(a.g()))return!0}else if(a.g().ja())return!0;a=a.h();if(!(a instanceof G))throw new TypeError;}return!1};e.fa=function(a,b,c,d,f){for(var g=this.M,l=[];!(g instanceof q);){try{l.push(g.g().fa(a,b,c,d,f))}catch(t){if(!(t instanceof Error))throw t;throw h("couldn't inline "+a+"->"+b+"(unnest:"+c+";nesting:"+d+") in "+this+" : "+t,t);}g=g.h();if(!(g instanceof G))throw new TypeError;}return pf(new of,m(l))};
e.ea=function(a,b,c){for(var d=this.M,f=[];!(d instanceof q);){try{f.push(d.g().ea(a,b,c))}catch(g){if(!(g instanceof Error))throw g;throw h("couldn't inline "+a+"->"+b+") in "+this+" : "+g,g);}d=d.h();if(!(d instanceof G))throw new TypeError;}return pf(new of,m(f))};e.$=function(a){for(var b=this.M,c=[];!(b instanceof q);)if(c.push(b.g().$(a)),b=b.h(),!(b instanceof G))throw new TypeError;return pf(new of,m(c))};
e.ka=function(a){for(var b=this.M,c=[];!(b instanceof q);)if(c.push(b.g().ka(a)),b=b.h(),!(b instanceof G))throw new TypeError;return pf(new of,m(c))};e.v=function(a){a.Ja(this);for(var b=this.M;!(b instanceof q);)if(b.g().v(a),b=b.h(),!(b instanceof G))throw new TypeError;a.Va()};function Af(){}Af.prototype=new p;e=Af.prototype;e.className="QuasiQuotation";function Bf(a,b){a.Ua=b;return a}e.type=function(){return D("quasiquotation")};e.l=function(a){Cf(this,a,this.Ua,1)};
e.toString=function(){return"`"+this.Ua};function Df(a){var b=[];Ef(a,b,a.Ua,1);return b}function Ef(a,b,c,d){if(Ff(c))1===d?b.push(c.h().g()):Ef(a,b,c.h().g(),d-1);else if(Gf(c))1===d?b.push(c.h().g()):Ef(a,b,c.h().g(),d-1);else if(Hf(c))Ef(a,b,c.h().g(),d+1);else if(!c.ba())for(;!c.ba();)if(Ff(c)||Hf(c))Ef(a,b,c,d),c=c.h().h();else{var f=c.g();c=c.h();Gf(f)?Ef(a,b,f,d):(Ff(f)||Hf(f)||If(f))&&Ef(a,b,f,d)}}
function Cf(a,b,c,d){if(Ff(c))1===d?c.h().g().l(b):(b.push(Na(Jf)),Cf(a,b,c.h().g(),d-1),b.push(fd()));else if(Gf(c))1===d?(c.h().g().l(b),b.push(x(new Xc))):(b.push(Na(Kf)),Cf(a,b,c.h().g(),d-1),b.push(fd()),b.push(x(new Wc)));else if(Hf(c))b.push(Na(Lf)),Cf(a,b,c.h().g(),d+1),b.push(fd());else if(c.ba())b.push(Na(c));else{for(b.push(x(new hd));!c.ba();)if(Ff(c)||Hf(c))Cf(a,b,c,d),c=c.h().h(),b.push(x(new Yc));else{var f=c.g();c=c.h();Gf(f)?Cf(a,b,f,d):(Ff(f)||Hf(f)||If(f)?Cf(a,b,f,d):b.push(Na(f)),
b.push(x(new Wc)))}c instanceof q||(b.push(Na(c)),b.push(x(new Yc)));b.push(x(new cd))}}function Mf(a,b){return a instanceof G&&a.Mc(b)&&a.h().h()instanceof q}function Ff(a){return Mf(a,Jf)}function Gf(a){return Mf(a,Kf)}function Hf(a){return Mf(a,Lf)}function If(a){return a instanceof G}e.ua=function(a){for(var b=Df(this),c=0,d=b.length;c<d;c++)if(b[c].ua(a))return!0;return!1};e.ja=function(){for(var a=Df(this),b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof W){if(af(d))return!0}else if(d.ja())return!0}return!1};
e.fa=function(a,b,c,d,f){return Bf(new Af,Nf(a,b,c,d,f,this.Ua,1))};
function Nf(a,b,c,d,f,g,l){if(Ff(g))return 1===l?m([Jf,g.h().g().fa(a,b,c,d,f)]):m([Jf,Nf(a,b,c,d,f,g.h().g(),l-1)]);if(Gf(g))return 1===l?m([Kf,g.h().g().fa(a,b,c,d,f)]):m([Kf,Nf(a,b,c,d,f,g.h().g(),l-1)]);if(Hf(g))return m([Lf,Nf(a,b,c,d,f,g.h().g(),l+1)]);if(g.ba())return g;for(var t=[],J=u;!g.ba();)if(Ff(g)||Hf(g))J=Nf(a,b,c,d,f,g,l),g=g.h().h();else{var M=g.g();g=g.h();Gf(M)?t.push(Nf(a,b,c,d,f,M,l)):Ff(M)||Hf(M)||If(M)?t.push(Nf(a,b,c,d,f,M,l)):t.push(M)}g instanceof q||(J=g);return qb(t,J)}
e.ea=function(a,b,c){return Bf(new Af,Of(a,b,c,this.Ua,1))};
function Of(a,b,c,d,f){if(Ff(d))return 1===f?m([Jf,d.h().g().ea(a,b,c)]):m([Jf,Of(a,b,c,d.h().g(),f-1)]);if(Gf(d))return 1===f?m([Kf,d.h().g().ea(a,b,c)]):m([Kf,Of(a,b,c,d.h().g(),f-1)]);if(Hf(d))return m([Lf,Of(a,b,c,d.h().g(),f+1)]);if(d.ba())return d;for(var g=[],l=u;!d.ba();)if(Ff(d)||Hf(d))l=Of(a,b,c,d,f),d=d.h().h();else{var t=d.g();d=d.h();Gf(t)?g.push(Of(a,b,c,t,f)):Ff(t)||Hf(t)||If(t)?g.push(Of(a,b,c,t,f)):g.push(t)}d instanceof q||(l=d);return qb(g,l)}
e.$=function(a){return Bf(new Af,Pf(a,this.Ua,1))};function Pf(a,b,c){if(Ff(b))return 1===c?m([Jf,b.h().g().$(a)]):m([Jf,Pf(a,b.h().g(),c-1)]);if(Gf(b))return 1===c?m([Kf,b.h().g().$(a)]):m([Kf,Pf(a,b.h().g(),c-1)]);if(Hf(b))return m([Lf,Pf(a,b.h().g(),c+1)]);if(b.ba())return b;for(var d=[],f=u;!b.ba();)if(Ff(b)||Hf(b))f=Pf(a,b,c),b=b.h().h();else{var g=b.g();b=b.h();Gf(g)||Ff(g)||Hf(g)||If(g)?d.push(Pf(a,g,c)):d.push(g)}b instanceof q||(f=b);return qb(d,f)}
e.ka=function(a){return Bf(new Af,Qf(a,this.Ua,1))};function Qf(a,b,c){if(Ff(b))return 1===c?m([Jf,b.h().g().ka(a)]):m([Jf,Qf(a,b.h().g(),c-1)]);if(Gf(b))return 1===c?m([Kf,b.h().g().ka(a)]):m([Kf,Qf(a,b.h().g(),c-1)]);if(Hf(b))return m([Lf,Qf(a,b.h().g(),c+1)]);if(b.ba())return b;for(var d=[],f=u;!b.ba();)if(Ff(b)||Hf(b))f=Qf(a,b,c),b=b.h().h();else{var g=b.g();b=b.h();Gf(g)||Ff(g)||Hf(g)||If(g)?d.push(Qf(a,g,c)):d.push(g)}b instanceof q||(f=b);return qb(d,f)}
e.v=function(a){a.Ja(this);for(var b=Df(this),c=0,d=b.length;c<d;c++)b[c].v(a);a.Va()};function Rf(){}e=Rf.prototype;e.Ja=function(){};e.Va=function(){};e.hc=function(a){this.Ja(a)};e.Hc=function(a){this.Ja(a)};e.fc=function(a){this.Ja(a)};e.pc=function(){this.Va()};function Sf(){}Sf.prototype=new Rf;Sf.prototype.hc=function(a){a.o(this.ac.g());this.ac=r(a,this.ac)};Sf.prototype.pc=function(){this.ac=this.ac.h()};function Tf(){}Tf.prototype=new Rf;e=Tf.prototype;e.hc=function(a){a.$b()&&this.Eb++};
e.Ja=function(){};e.Va=function(){};e.pc=function(a){a.$b()&&this.Eb--};e.Hc=function(a){a=a.bb-this.Eb;this.Rc<a&&(this.Rc=a)};function Uf(){}Uf.prototype=new Rf;e=Uf.prototype;e.count=function(){return this.Sc.length};e.hc=function(a){this.Ib.unshift(a);a.$b()&&(this.Ua=this.Ua.$(0))};e.Ja=function(a){this.Ib.unshift(a)};e.Va=function(){this.Ib.shift()};e.pc=function(a){this.Ib.shift();a.$b()&&(this.Ua=We(this.Ua))};e.Hc=function(a){ee(a,this.Ua)&&0<this.Ib.length&&this.Sc.push(this.Ib[0])};
function Vf(){}function Wf(a,b){var c=b.fb(),d=a[c];void 0===d&&(d=new Vf,d.target=null,d.name=null,d.md=0,d.Dc=0,d.children=[],d.parent=null,d.gd={},d.ia={},d.target=b,d.name=c,a[c]=d,b instanceof W&&(b=b.sc,null!==b&&(a=Wf(a,b),a.children.push(d),d.parent=a)));return d}function Xf(){}function Yf(a,b){var c=a[b.fb()];void 0===c&&(c=new Xf,c.target=b,c.count=0,c.key=b.fb(),a[c.key]=c);return c}function Zf(){}function $f(){}$f.prototype.check=void 0;$f.prototype.end=void 0;$f.prototype.Nb=void 0;
function ag(a){a.show();var b=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");null!==b&&(/^q$/i.test(b)?Sc(a,Gc):/^f$/i.test(b)&&(a.Xc=a.m-1,Sc(a,bg)))}function cg(){}cg.prototype=new $f;cg.prototype.check=function(){};cg.prototype.end=function(){};cg.prototype.Nb=function(){};var Gc=new cg;function dg(){}dg.prototype=new $f;dg.prototype.check=function(a){ag(a)};dg.prototype.end=function(a){xa("VM thread finished: returning.");ag(a)};dg.prototype.Nb=function(){};
var eg=new dg;function fg(){}fg.prototype=new $f;fg.prototype.check=function(a){a.nc=!0;for(var b=[],c=[];0<=a.m;)Jc(a).g().Yb&&(b.push(Jc(a)),c.push(a.wa[a.m])),a.m--;for(var d=b.length-1;0<=d;d--)P(a,c[d],b[d])};fg.prototype.end=function(){};fg.prototype.Nb=function(){};var gg=new fg;function hg(){}hg.prototype=new $f;hg.prototype.check=function(a){a.m<=a.Xc&&Sc(a,eg)};hg.prototype.end=function(){};hg.prototype.Nb=function(){};var bg=new hg;function ig(){}ig.prototype=new $f;
ig.prototype.check=function(a){var b=a.nb.Nc;if(null!==b){var c=Wf(a.nb.Lc,b);b=1E6*(new Date).getTime()-a.nb.now;c.Dc+=b;for(c=c.parent;null!==c;)c.Dc+=b,c=c.parent}var d=Uc(a);null!==d&&(a.F=a.wa[a.m],a.Xb=a.Da[a.m],this.xd(d,a),d.Ba?(b=d.Ga(a),b instanceof ad&&(b=b.D()),c=Wf(a.nb.Lc,b),d=d.Ha,null!==d&&Yf(c.gd,d).count++,d=Wf(a.nb.Lc,d),null!==b&&Yf(d.ia,b).count++,c.md++,a.nb.Nc=b):a.nb.Nc=null!==d.Ha?d.Ha:u,a.nb.now=1E6*(new Date).getTime())};ig.prototype.end=function(){};
ig.prototype.Nb=function(a){var b=new Zf;b.Lc={};b.Nc=null;b.now=0;a.nb=b;a.nb.now=1E6*(new Date).getTime()};var jg=new ig;function kg(){}kg.prototype=new I;kg.prototype.className="AssignmentBuilder.BuildAssignment1";function lg(a,b,c){var d=new kg;x(d);d.kc=a;d.Z=b;d.I=c;d.o(B("AssignmentBuilder.build"));return d}
kg.prototype.i=function(a){if(!(this.Z instanceof q)){try{this.Z.Ob()}catch(g){if(!(g instanceof Ia))throw g;throw h("assign: unexpected: "+this.Z);}var b=new mg,c=this.kc,d=this.Z.h(),f=this.I;x(b);b.kc=c;b.Z=d;b.I=f;b.o(B("AssignmentBuilder.build"));z(a,b);ng(a,this.Z.g(),this.I)}};function mg(){}mg.prototype=new I;mg.prototype.className="AssignmentBuilder.BuildAssignment2";mg.prototype.i=function(a){this.kc.Xa(N(a).reduce());z(a,lg(this.kc,this.Z,this.I))};var og=u,pg=D("at-string");
function ng(a,b,c){if(b instanceof q)v(a,b);else if(b instanceof Qa&&!(og instanceof q)){var d=new qg;x(d);d.I=c;d.o(B("Compiler.compile"));z(a,d);pg.bound()?Ka(pg.value(),a,r(b,u)):v(a,b)}else if(b instanceof F&&rg(b))ng(a,sg(ib(b,"ssexpand")),c);else if(b instanceof G)if(d=b.g(),d=d instanceof F&&d.bound()?oc(d.value()):null,null!==d){b=b.h();if(!(b instanceof G))throw new TypeError;var f=new tg;x(f);f.I=c;f.o(B("Compiler.compilePair"));z(a,f);Ka(d,a,b)}else if(f=b.g(),hb("quote",f))c=new $e,b=
b.h().g(),c.Sb=b,v(a,c);else if(f===Lf)d=new ug,x(d),d.o(B("Compiler.compilePair")),z(a,d),vg(a,b.h().g(),c,1);else if(hb("fn",f)){b=b.h();if(!(b instanceof G))throw new TypeError;d=c;if(null===d)throw new ReferenceError("can't have null lexical bindings!");f={};c=b.g();c instanceof q||(d=[f].concat(d));var g=d,l=new wg;x(l);l.sb=b;l.I=g;l.Oc=f;l.o(B("FunctionBodyBuilder.build"));z(a,l);c instanceof q?v(a,r(u,u)):(b=d,xg(c,b[0],[0],!1),yg(a,c,b))}else if(hb("if",f)){f=b=b.h();for(d=jf();0<b.xa();)switch(b.xa()){case 0:break;
case 1:d.append(ff());b=b.h();break;case 2:d.append(mf());b=b.h();if(!(b instanceof G))throw new TypeError;b.Tc(r(u,u));b=b.h();break;default:d.append(mf()),b=b.h().h()}b=f;f=new zg;x(f);f.Jb=d;f.o(B("IfBuilder.build"));z(a,f);z(a,Ag(d,b,c))}else if(hb("assign",f)){b=b.h();d=ef();f=b.xa();if(0!==f%2)throw h("assign: requires even number of arguments");f=f/2-1;if(0>f)throw h("assign: nothing to assign");for(d.na=cf();0<f;)d.na=Ye(new Xe,d.na),f--;f=Na(d);f.o(B("AssignmentBuilder.build"));z(a,f);z(a,
lg(d,b,c))}else if(hb("compose",f.Gc())){d=f.h();if(!(d instanceof G))throw new TypeError;b=b.h();if(!(b instanceof G))throw new TypeError;ng(a,Bg(d,b),c)}else if(hb("complement",f.Gc())){b=b.h();if(!(b instanceof G))throw new TypeError;d=ng;f=f.h().g();b=r(D("no"),r(r(f,b),u));d(a,b,c)}else f instanceof F&&rg(f)?ng(a,r(sg(ib(f,"ssexpand")),b.h()),c):z(a,Cg(b,c,b,[]));else if(b instanceof F){for(d=0;d<c.length;d++)if(b.name()in c[d]){c=c[d][b.name()];c=Ue(b,d,c);v(a,c);return}v(a,b)}else v(a,b)}
function qg(){}qg.prototype=new I;qg.prototype.className="Compiler.FinishAtString";qg.prototype.i=function(a){var b=N(a);b instanceof Qa?v(a,b):ng(a,b,this.I)};function tg(){}tg.prototype=new I;tg.prototype.className="Compiler.ThenCompile";tg.prototype.i=function(a){ng(a,N(a),this.I)};function ug(){}ug.prototype=new I;ug.prototype.className="Compiler.WrapQuasiQuotation";ug.prototype.i=function(a){v(a,Bf(new Af,N(a)))};
function Bg(a,b){var c=a.g();if(a.h()instanceof q)return r(c,b);a=a.h();if(!(a instanceof G))throw new TypeError;return r(c,r(Bg(a,b),u))}function wg(){}wg.prototype=new I;wg.prototype.className="FunctionBodyBuilder.Intermediate";wg.prototype.i=function(a){var b=N(a),c=b.g();b=b.h();var d=this.sb.h();if(!(d instanceof G))throw new TypeError;var f=this.Oc,g=a.aa,l=new Dg;x(l);l.J=b;l.Oc=f;l.Z=d;l.Ka=c;l.Vb=g;l.o(B("FunctionBodyBuilder.build"));z(a,l);z(a,Eg(d,this.I,[]))};function Dg(){}
Dg.prototype=new I;Dg.prototype.rc=!0;Dg.prototype.className="FunctionBodyBuilder.Finish";Dg.prototype.Ic=function(a){return a instanceof Error};Dg.prototype.i=function(a){var b=a.error();if(null!==b)throw a.jb=null,a.aa=this.Vb,h("building function fn "+this.J+" "+this.Z+": "+b,b);v(a,Fg(this.J,this.Oc,N(a),this.Ka))};
function Fg(a,b,c,d){var f="rainbow.function.interpreted.optimise.Bind"+Gg(a,!1),g=k[f];if(void 0===g)return d instanceof q?Hg(new Ig,a,b,c):Hg(new Jg,a,b,c);try{var l=g.of(a,b,c);if(!(l instanceof p))throw new TypeError;return l}catch(t){if(!(t instanceof Error))throw t;throw h("Couldn't instantiate "+f+": "+t,t);}}
function Gg(a,b){if(a instanceof q)return"";if(a instanceof G){if(b){if(Kg(a))return a=a.h().h().g(),a.Ta()?"_Oliteral":a instanceof V?"_Obound":"_Oother";b=a.g();return"_D"+Gg(b,!0)+Gg(a.h(),!1)+"_d"}return Gg(a.g(),!0)+Gg(a.h(),!1)}return b?"_A":"_R"}function Lg(a,b,c){!(b instanceof q)&&b instanceof G&&(c&&Kg(b)?b.h().h().g().v(a):(Lg(a,b.g(),!0),Lg(a,b.h(),!1)))}var Mg=D("o"),Ng=D("#NIL#");
function yg(a,b,c){var d={value:u},f=[],g=new Og;x(g);g.Y=f;g.Ka=d;g.o(B("FunctionParameterListBuilder.buildParams_"));z(a,g);z(a,Pg(f,d,b,c))}function Og(){}Og.prototype=new I;Og.prototype.className="FunctionParameterListBuilder.ReturnParams";Og.prototype.i=function(a){if(0===this.Y.length){var b=N(a);b=r(this.Ka.value,b);v(a,b)}else b=qb(this.Y,N(a)),b=r(this.Ka.value,b),v(a,b)};function Qg(){}Qg.prototype=new I;Qg.prototype.className="FunctionParameterListBuilder.BuildParams1";
function Pg(a,b,c,d){var f=new Qg;x(f);f.Y=a;f.Ka=b;f.Ia=c;f.I=d;f.o(B("FunctionParameterListBuilder.buildParams_"));return f}
Qg.prototype.i=function(a){if(this.Ia.ba()){var b=Na(this.Ia);b.o(this);z(a,b)}else{b=this.Ia.g();var c=this.Ia.h();if(b instanceof G)if(b instanceof q)this.Y.push(Ng),z(a,Pg(this.Y,this.Ka,c,this.I));else if(this.Ka.value=bb,Kg(b)){var d=b.h().g(),f=this.Y,g=this.Ka,l=this.I,t=new Rg;x(t);t.Y=f;t.Ka=g;t.Ia=c;t.I=l;t.od=d;t.o(B("FunctionParameterListBuilder.buildParams_"));z(a,t);ng(a,b.h().h().g(),this.I)}else d=this.Y,f=this.Ka,g=this.I,l=new Sg,x(l),l.Y=d,l.Ka=f,l.Ia=c,l.I=g,l.o(B("FunctionParameterListBuilder.buildParams_")),
z(a,l),yg(a,b,this.I);else this.Y.push(b),z(a,Pg(this.Y,this.Ka,c,this.I))}};function Rg(){}Rg.prototype=new I;Rg.prototype.className="FunctionParameterListBuilder.BuildParams2a";Rg.prototype.i=function(a){this.Y.push(m([Mg,this.od,N(a)]));z(a,Pg(this.Y,this.Ka,this.Ia,this.I))};function Sg(){}Sg.prototype=new I;Sg.prototype.className="FunctionParameterListBuilder.BuildParams2b";Sg.prototype.i=function(a){this.Y.push(N(a).h());z(a,Pg(this.Y,this.Ka,this.Ia,this.I))};
function Tg(a){for(;!a.ba();){if(a.g()instanceof G)return bb;a=a.h()}return u}function xg(a,b,c,d){if(!(a instanceof q))if(a instanceof G)d&&Kg(a)?xg(a.h().g(),b,c,!0):(d=a.g(),d instanceof q?(b[Ng.name()]=c[0],c[0]++):xg(d,b,c,!0),xg(a.h(),b,c,!1));else{if(!(a instanceof F))throw new TypeError;b[a.name()]=c[0];c[0]++}}function Ug(a,b,c,d){var f=null;d instanceof F&&!d.Sa(a.name)?f=d:Kg(d)&&!d.h().g().Sa(a.name)?f=m([Mg,d.h().g(),d.h().h().g().ea(a,b,c)]):!Kg(d)&&d instanceof G&&(f=d);return f}
function Vg(a,b,c,d){var f=null;d instanceof F&&!d.Sa(a.name)?f=d:Kg(d)&&!d.h().g().Sa(a.name)?f=m([Mg,d.h().g(),d.h().h().g().fa(a,b,!1,0,c)]):!Kg(d)&&d instanceof G&&(f=d);return f}function zg(){}zg.prototype=new I;zg.prototype.className="IfBuilder.Reduce";zg.prototype.i=function(a){v(a,this.Jb.reduce())};function Wg(){}Wg.prototype=new I;Wg.prototype.className="IfBuilder.BuildIf1";function Ag(a,b,c){var d=new Wg;x(d);d.Jb=a;d.Z=b;d.I=c;d.o(B("IfBuilder.build"));return d}
Wg.prototype.i=function(a){if(!(this.Z instanceof q)){try{this.Z.Ob()}catch(g){if(!(g instanceof Ia))throw g;throw h("if: unexpected: "+this.Z);}var b=new Xg,c=this.Jb,d=this.Z.h(),f=this.I;x(b);b.Jb=c;b.Z=d;b.I=f;b.o(B("IfBuilder.build"));z(a,b);ng(a,this.Z.g(),this.I)}};function Xg(){}Xg.prototype=new I;Xg.prototype.className="IfBuilder.BuildIf2";Xg.prototype.i=function(a){this.Jb.Xa(N(a).reduce());z(a,Ag(this.Jb,this.Z,this.I))};function Yg(){}Yg.prototype=new I;Yg.prototype.className="InvocationBuilder.BuildInvocation";
function Cg(a,b,c,d){var f=new Yg;x(f);f.Z=a;f.I=b;f.Na=c;f.$a=d;f.o(B("InvocationBuilder.build"));return f}Yg.prototype.i=function(a){if(this.Z instanceof q)v(a,pf(new of,m(this.$a)).reduce());else{try{this.Z.Ob()}catch(d){if(!(d instanceof Ia))throw d;throw h("can't compile "+this.Na+"; not a proper list");}z(a,Cg(this.Z.h(),this.I,this.Na,this.$a));var b=this.$a,c=new Zg;x(c);c.$a=b;c.o(B("InvocationBuilder.build"));z(a,c);ng(a,this.Z.g(),this.I)}};function Zg(){}Zg.prototype=new I;
Zg.prototype.className="InvocationBuilder.ReducePush";Zg.prototype.i=function(a){this.$a.push(N(a).reduce())};function $g(){}$g.prototype=new I;$g.prototype.className="PairExpander.ExpandPair";function Eg(a,b,c){var d=new $g;x(d);d.Z=a;d.I=b;d.Y=c;d.o(B("PairExpander.expand"));return d}
$g.prototype.i=function(a){if(this.Z instanceof q||!(this.Z instanceof G)){var b=this.Y,c=new ah;x(c);c.Y=b;c.o(B("PairExpander.expand"));z(a,c);ng(a,this.Z,this.I)}else{z(a,Eg(this.Z.h(),this.I,this.Y));b=this.Z.g();c=this.Y;var d=new bh;x(d);d.$a=c;d.o(B("PairExpander.expand"));z(a,d);ng(a,b,this.I)}};function bh(){}bh.prototype=new I;bh.prototype.className="PairExpander.ReducePush";bh.prototype.i=function(a){this.$a.push(N(a).reduce())};function ah(){}ah.prototype=new I;
ah.prototype.className="PairExpander.FinishPair";ah.prototype.i=function(a){var b=qb(this.Y,N(a).reduce());if(!(b instanceof G))throw new TypeError;v(a,b)};var Lf=D("quasiquote"),Jf=D("unquote"),Kf=D("unquote-splicing");function vg(a,b,c,d){b.ba()?v(a,b):Ff(b)?ch(a,Jf,b,d,c):Gf(b)?ch(a,Kf,b,d,c):Hf(b)?(z(a,dh(Lf)),vg(a,b.h().g(),c,d+1)):z(a,eh([],b,c,d))}function fh(){}fh.prototype=new I;fh.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";
function eh(a,b,c,d){var f=new fh;x(f);f.Y=a;f.La=b;f.I=c;f.Eb=d;f.o(B("QuasiQuoteCompiler.compile"));return f}fh.prototype.i=function(a){if(this.La.ba()){var b=this.Y,c=new gh;x(c);c.Y=b;c.o(B("QuasiQuoteCompiler.compile"));z(a,c);vg(a,this.La,this.I,this.Eb)}else if(b=this.La.g(),z(a,eh(this.Y,this.La.h(),this.I,this.Eb)),b.ba())this.Y.push(b);else{c=this.Y;var d=new hh;x(d);d.Y=c;d.o(B("QuasiQuoteCompiler.compile"));z(a,d);vg(a,b,this.I,this.Eb)}};function gh(){}gh.prototype=new I;
gh.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";gh.prototype.i=function(a){v(a,qb(this.Y,N(a)))};function hh(){}hh.prototype=new I;hh.prototype.className="QuasiQuoteCompiler.Push";hh.prototype.i=function(a){this.Y.push(N(a))};function ch(a,b,c,d,f){c=c.h().g();z(a,dh(b));1===d?ng(a,c,f):vg(a,c,f,d-1)}function ih(){}ih.prototype=new I;ih.prototype.className="QuasiQuoteCompiler.Prefix";function dh(a){var b=new ih;x(b);b.rd=a;b.o(B("QuasiQuoteCompiler.compile"));return b}
ih.prototype.i=function(a){v(a,m([this.rd,N(a)]))};var rf=D("let"),vf=D("self"),tf=D("it"),wf=D("afn"),qf=D("do"),sf=D("with"),uf=D("aif");function X(){}X.prototype=new p;e=X.prototype;e.className="Builtin";function Y(a,b){a.ma=b;D(b).ta(a)}e.s=function(a){throw h("Builtin:invoke(args):provide implementation! "+this.name()+" args "+a);};e.j=function(a,b){v(a,this.s(b))};e.Ea=function(){return 0};e.type=function(){return jh};
function Nb(a,b,c){if(c<a.xa())throw xa(b+" got args "+a+" was expecting expecting at most "+c),h(b.toLowerCase()+" expects at most "+c+" arguments: given "+a);}function kh(a,b,c){if(a.xa()!==b)throw h(c.toLowerCase()+" expects "+b+" arguments: given "+a);}e.toString=function(){return"[builtin:"+(null===this.ma||0===this.ma.length?this.className:this.ma)+"]"};e.fb=function(){return this.toString()};e.name=function(){return""===this.ma?this.className.toLowerCase():this.ma};var jh=D("fn");
function ad(){}ad.prototype=new p;e=ad.prototype;e.className="Closure";e.Ca=function(a){this.La.ya(a,this.va)};e.G=function(a,b){this.La.L(a,this.va,b)};e.ga=function(a,b,c){this.La.Qa(a,this.va,b,c)};e.j=function(a,b){this.La.P(a,this.va,b)};e.type=function(){return jh};e.toString=function(){return this.La.toString()};e.fb=function(){return this.La.fb()};e.D=function(){return this.La};
function lh(a){return 0===a.length?!1:a.charCodeAt(0)===mh?lh(a.substring(1)):a.charAt(a.length-1)===mh?lh(a.substring(0,a.length-1)):-1!==a.indexOf(nh)}function W(){}W.prototype=new p;e=W.prototype;e.X=W;e.className="InterpretedFunction";function Hg(a,b,c,d){a.name=u;a.J=b;a.C=c;a.body=ub(d);a.B=null;a.sc=null;a.oa=null;a.Hb=null;oh(a);return a}e.Ec=function(a){this.name===a&&(this.name=u)};e.ic=function(a){this.name=a;a=new Sf;a.ac=r(this,u);for(var b=0,c=this.body.length;b<c;b++)this.body[b].v(a)};
e.jc=function(){return this.name};e.fb=function(){if(null!==this.Hb)return this.Hb;this.name instanceof q?(this.Hb=this.toString(),null!==this.sc&&(this.Hb+=" in "+this.sc.fb())):this.Hb=this.jc().toString();return this.Hb};
e.reduce=function(){if(!ph||this.ja()||this.J instanceof q)var a=this;else{var b="rainbow.function.interpreted.optimise.stack.Stack"+Gg(this.J,!1),c=k[b];if(void 0===c)a=this;else try{var d=c.eb(this);if(!(d instanceof p))throw new TypeError;a=d}catch(f){if(!(f instanceof Error))throw f;throw h("Couldn't instantiate "+b+": "+f,f);}}return a};function oh(a){var b=[];yf(a,b);a.B=m(b);b=a.B;var c=b.v,d=new qh;d.Ha=a;c.call(b,d)}e.o=function(a){this.sc=a};function qh(){}qh.prototype=new Rf;
qh.prototype.fc=function(a){a.o(this.Ha)};function yf(a,b){if(0===a.body.length)b.push(Na(u));else for(var c=0;c<a.body.length;c++){var d=c===a.body.length-1;a.body[c].l(b);d||b.push(jd("intermediate-fn-expression"))}}e=W.prototype;e.xb=function(a,b){return 1===this.body.length&&this.Kc(a,b)&&!this.ua(0)&&!this.ja()};
e.Kc=function(a,b){var c=this.C[a.name()];a=Ue(a,0,c);if(!(b=b.Ta()||b instanceof $e||b instanceof F||b instanceof V)){b=new Uf;b.Ib=[];b.Sc=[];b.Ua=a;a=0;for(c=this.body.length;a<c;a++)this.body[a].v(b);b=1>=b.count()}return b};e.ja=function(){for(var a=0,b=this.body.length;a<b;a++){var c=this.body[a];if(c instanceof W){if(af(c))return!0}else if(c.ja())return!0}return!1};function rh(a,b){for(var c=0,d=a.body.length;c<d;c++)if(a.body[c].ua(b))return!0;return!1}
e.$b=function(){return!(this.J instanceof q)};e.ua=function(a){return this.J instanceof q?rh(this,a):rh(this,a+1)};e.Ca=function(a){this.ya(a,null)};e.ya=function(a,b){this.P(a,b,u)};e.G=function(a,b){this.L(a,null,b)};e.L=function(a,b,c){this.P(a,b,r(c,u))};e.ga=function(a,b,c){this.Qa(a,null,b,c)};e.Qa=function(a,b,c,d){this.P(a,b,r(c,r(d,u)))};e.lb=function(a,b,c,d){this.Zb(a,null,b,c,d)};e.Zb=function(a,b,c,d,f){this.P(a,b,r(c,r(d,r(f,u))))};e.j=function(a,b){return this.P(a,null,b)};
e.P=function(){throw h("error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this);};e.l=function(a){if(af(this)){var b=a.push,c=new $c;x(c);c.Zc=this;b.call(a,c)}else a.push(Na(this))};e.Ta=function(){return!af(this)};function af(a){var b=new Tf;b.Ib=[];b.Sc=[];b.Eb=0;b.Rc=-1;a.v(b);return-1<b.Rc}e.v=function(a){a.hc(this);Lg(a,this.J,!1);for(var b=0,c=this.body.length;b<c;b++)this.body[b].v(a);a.pc(this);null!==this.oa&&this.oa.v(a)};
e.Ea=function(a){throw h("Can't compare "+this+" to "+a);};e.toString=function(){if(this.J instanceof G&&this.J.g()===D("_")&&this.J.h()instanceof q&&1===this.body.length&&!(this.body[0]instanceof Bb)){if(this.body[0]instanceof q)return"[]";var a=this.body[0].toString();return"["+a.substring(1,a.length-1)+"]"}return m([D("fn"),this.J].concat(this.body)).toString()};e.type=function(){return jh};e.Pb=function(a){return this.body[a]};e.length=function(){return this.body.length};
function sh(a,b,c){try{b.h().ab()}catch(d){if(!(d instanceof Ia))throw d;th(a,c)}}function th(a,b){throw h("args "+b+" doesn't match signature for "+a);}
e.zb=function(a,b,c){var d=this.C[a.name()];if(void 0===d)throw new ReferenceError;a=Ue(a,0,d);for(var f=this.J,g=b,l=u,t=[];!f.ba();){var J=Vg(a,g,d,f.g());null!==J&&t.push(J);f=f.h()}f instanceof F&&(g=Vg(a,g,d,f),null!==g&&(l=g));try{var M=qb(t,l)}catch(aa){if(!(aa instanceof Error))throw aa;throw h("couldn't curry params "+f+", got list "+t+" and last "+l);}f={};xg(M,f,[0],!1);l=M instanceof q;!l&&c&&(b=b.$(0));c=[];for(t=0;t<this.body.length;t++)c.push(this.body[t].fa(a,b,l,0,d).reduce());b=
m(c);d=Tg(M);return Fg(M,f,b,d)};e.fa=function(a,b,c,d,f){a=this.J instanceof q?a:a.$(0);c=uh(this);for(var g=[],l=0;l<this.body.length;l++)g.push(this.body[l].fa(a,b,!1,d+1,f).reduce());a=m(g);c.body=ub(a);oh(c);return c};e.ea=function(a,b,c){if(!(this.J instanceof q))return this;for(var d=uh(this),f=[],g=0;g<this.body.length;g++)f.push(this.body[g].ea(a,b,c).reduce());a=m(f);d.body=ub(a);oh(d);return d};
e.$=function(a){this.J instanceof q||a++;for(var b=uh(this),c=[],d=0;d<this.body.length;d++)c.push(this.body[d].$(a));a=m(c);b.body=ub(a);oh(b);return b};function uh(a){var b=new a.X,c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function vh(a,b,c){if(!c.Mb(b))throw h("error: "+a+" expects "+b+" args, got "+c);}function Ig(){}Ig.prototype=new W;Ig.prototype.X=Ig;Ig.prototype.className="SimpleArgs";
Ig.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;d=b=Ea(d,b);for(f=this.J;!(f instanceof q);)if(f instanceof F){d.add(c);break}else d.add(c.g()),c=c.h(),f=f.h();P(a,b,this.B)};function Jg(){}Jg.prototype=new W;Jg.prototype.X=Jg;Jg.prototype.className="ComplexArgs";Jg.prototype.P=function(a,b,c){var d=0;for(f in this.C)d++;d=b=Ea(d,b);var f=this.B;var g=new wh;x(g);g.va=d;g.B=f;g.o(this);z(a,g);z(a,xh(b,this.J,c,this))};function wh(){}wh.prototype=new I;wh.prototype.className="ComplexArgs.Run";
wh.prototype.i=function(a){P(a,this.va,this.B)};function yh(){}yh.prototype=new I;yh.prototype.className="ComplexArgs.BuildComplex";function xh(a,b,c,d){var f=new yh;x(f);f.va=a;f.Ia=b;f.sb=c;f.o(d);return f}
yh.prototype.i=function(a){if(this.Ia.ba())this.Ia instanceof F&&this.va.add(this.sb);else{var b=this.Ia.g(),c=this.sb.g();z(a,xh(this.va,this.Ia.h(),this.sb.h(),this.Ha));if(b instanceof F)this.va.add(c);else if(Kg(b)){b=b.h();if(!(b instanceof G))throw new TypeError;if(this.sb instanceof q){c=this.va;var d=new zh;x(d);d.va=c;d.o(this);z(a,d);c=this.va;d=[];b.h().g().l(d);P(a,c,m(d))}else this.va.add(c)}else{try{c.Ob()}catch(f){if(!(f instanceof Ia))throw f;throw h("Expected list argument for destructuring parameter "+
b+", got "+c);}z(a,xh(this.va,b,c,this.Ha))}this.Ia=this.Ia.h();this.sb=this.sb.h()}};function zh(){}zh.prototype=new I;zh.prototype.className="ComplexArgs.AddToLc";zh.prototype.i=function(a){this.va.add(N(a))};function Kg(a){return a instanceof G?a.g()===Ah:!1}var Ah=D("o");function Bh(){}Bh.prototype=new W;e=Bh.prototype;e.X=Bh;e.className="StackFunctionSupport";function Ch(a,b,c,d){return Hg(a,b,c,d)}e.xb=function(a,b){return this.Kc(a,b)&&!this.ua(0)};
e.Kc=function(a,b){var c=this.C[a.name()];a=Te(a,c);return b.Ta()||b instanceof $e||b instanceof F||1===this.body.length&&this.body[0]instanceof ve&&Ce(a,this.body[0])};e.$b=function(){return!1};
e.zb=function(a,b){var c=this.C[a.name()],d=Te(a,c);a=this.J;for(var f=u,g=[];!a.ba();){var l=Ug(d,b,c,a.g());null!==l&&g.push(l);a=a.h()}a instanceof F&&(l=Ug(d,b,c,a),null!==l&&(f=l));try{var t=qb(g,f)}catch(aa){if(!(aa instanceof Error))throw aa;throw h("couldn't curry params "+a+", got list "+g+" and last "+f);}a={};xg(t,a,[0],!1);f=[];for(g=0;g<this.body.length;g++)f.push(this.body[g].ea(d,b,c).reduce());b=m(f);c=Tg(t);d=Gg(t,!1);if(""===d)var J=Fg(t,a,b,c);else{c="rainbow.function.interpreted.optimise.stack.Stack"+
d;d=k[c];if(void 0===d)throw h("no stack-based function implementation for "+t+"; couldn't find "+c);try{var M=d.sa(t,a,b);if(!(M instanceof p))throw new TypeError;J=M}catch(aa){if(!(aa instanceof Error))throw aa;throw h("Couldn't instantiate "+c+": "+aa,aa);}}return J};function Dh(a,b){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=b[d].ka(a);return m(c)}function xf(){}var Eh={};k["rainbow.function.interpreted.optimise.Bind"]=Eh;xf.prototype=new W;xf.prototype.X=xf;xf.prototype.className="Bind";
Eh.of=function(a,b,c){return Hg(new xf,a,b,c)};xf.prototype.ya=function(a,b){P(a,b,this.B)};xf.prototype.P=function(a,b,c){try{c.ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 0 args, got "+c);}P(a,b,this.B)};function Fh(){}var Gh={};k["rainbow.function.interpreted.optimise.Bind_A"]=Gh;Fh.prototype=new W;Fh.prototype.X=Fh;Fh.prototype.className="Bind_A";Gh.of=function(a,b,c){return Hg(new Fh,a,b,c)};Fh.prototype.ya=function(){throw h("function "+this+" expects 1 arg, got none");};
Fh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);P(a,b,this.B)};Fh.prototype.P=function(a,b,c){c instanceof q&&this.ya(a,b);try{c.h().ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 1 arg, got "+c+" calling "+this);}this.L(a,b,c.g())};function Hh(){}var Ih={};k["rainbow.function.interpreted.optimise.Bind_A_A"]=Ih;Hh.prototype=new W;Hh.prototype.X=Hh;Hh.prototype.className="Bind_A_A";Ih.of=function(a,b,c){return Hg(new Hh,a,b,c)};
Hh.prototype.ya=function(){throw h("error: expected 2 args, got none");};Hh.prototype.L=function(a,b,c){throw h("error: expected 2 args, got 1: "+c);};Hh.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Ea(f,b);b.add(c);b.add(d);P(a,b,this.B)};Hh.prototype.P=function(a,b,c){try{c.h().h().ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 2 args, got "+c);}this.Qa(a,b,c.g(),c.h().g())};function Jh(){}var Kh={};k["rainbow.function.interpreted.optimise.Bind_A_A_A"]=Kh;
Jh.prototype=new W;Jh.prototype.X=Jh;Jh.prototype.className="Bind_A_A_A";Kh.of=function(a,b,c){return Hg(new Jh,a,b,c)};Jh.prototype.Zb=function(a,b,c,d,f){var g=0,l;for(l in this.C)g++;b=Ea(g,b);b.add(c);b.add(d);b.add(f);P(a,b,this.B)};Jh.prototype.P=function(a,b,c){sh(this,c.h().h().h(),c);this.Zb(a,b,c.g(),c.h().g(),c.h().h().g())};function Lh(){}var Mh={};k["rainbow.function.interpreted.optimise.Bind_A_A_R"]=Mh;Lh.prototype=new W;Lh.prototype.X=Lh;Lh.prototype.className="Bind_A_A_R";
Mh.of=function(a,b,c){return Hg(new Lh,a,b,c)};Lh.prototype.ya=function(){throw h("error: expected at least 2 arg, got none");};Lh.prototype.L=function(a,b,c){throw h("error: expected at least 2 args, got one: "+c);};Lh.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c.g());b.add(c.h().g());b.add(c.h().h());P(a,b,this.B)};function Nh(){}var Oh={};k["rainbow.function.interpreted.optimise.Bind_A_Obound"]=Oh;Nh.prototype=new W;Nh.prototype.X=Nh;Nh.prototype.className="Bind_A_Obound";
Oh.of=function(a,b,c){b=Hg(new Nh,a,b,c);c=a.h().g().h().h().g();if(!(c instanceof V))throw new TypeError;b.ha=c;a=a.h().g().h().g();if(!(a instanceof F))throw new TypeError;if(b.xb(a,b.ha))try{var d=b.zb(a,b.ha,!1);if(!(d instanceof W))throw new TypeError;b.oa=d}catch(f){if(!(f instanceof Error))throw f;ya(f)}return b};Nh.prototype.L=function(a,b,c){if(null!==this.oa)this.oa.L(a,b,c);else{var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);b.add(this.ha.K(b));P(a,b,this.B)}};
Nh.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Ea(f,b);b.add(c);b.add(d);P(a,b,this.B)};Nh.prototype.P=function(a,b,c){c instanceof q&&th(this,c);var d=c.g(),f=c.h();f instanceof q?this.L(a,b,d):(sh(this,f.h(),c),this.Qa(a,b,d,f.g()))};function Ph(){}var Qh={};k["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=Qh;Ph.prototype=new W;Ph.prototype.X=Ph;Ph.prototype.className="Bind_A_Oliteral";
Qh.of=function(a,b,c){b=Hg(new Ph,a,b,c);b.ha=a.h().g().h().h().g();a=a.h().g().h().g();if(!(a instanceof F))throw new TypeError;if(b.xb(a,b.ha))try{var d=b.zb(a,b.ha,!1);if(!(d instanceof W))throw new TypeError;b.oa=d}catch(f){if(!(f instanceof Error))throw f;ya(f)}return b};Ph.prototype.L=function(a,b,c){if(null!==this.oa)this.oa.L(a,b,c);else{var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);b.add(this.ha);P(a,b,this.B)}};
Ph.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Ea(f,b);b.add(c);b.add(d);P(a,b,this.B)};Ph.prototype.P=function(a,b,c){c instanceof q&&th(this,c);var d=c.g(),f=c.h();f instanceof q?this.L(a,b,d):(sh(this,f.h(),c),this.Qa(a,b,d,f.g()))};function Rh(){}var Sh={};k["rainbow.function.interpreted.optimise.Bind_A_Oother"]=Sh;Rh.prototype=new W;Rh.prototype.X=Rh;Rh.prototype.className="Bind_A_Oother";Sh.of=function(a,b,c){b=Hg(new Rh,a,b,c);c=[];a.h().g().h().h().g().l(c);b.Qc=m(c);return b};
Rh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);z(a,Th(b,this.B,this));P(a,b,this.Qc)};Rh.prototype.Qa=function(a,b,c,d){var f=0,g;for(g in this.C)f++;b=Ea(f,b);b.add(c);b.add(d);P(a,b,this.B)};Rh.prototype.P=function(a,b,c){c instanceof q&&th(this,c);var d=c.g(),f=c.h();f instanceof q?this.L(a,b,d):(sh(this,f.h(),c),this.Qa(a,b,d,f.g()))};function Uh(){}var Vh={};k["rainbow.function.interpreted.optimise.Bind_A_R"]=Vh;Uh.prototype=new W;Uh.prototype.X=Uh;
Uh.prototype.className="Bind_A_R";Vh.of=function(a,b,c){return Hg(new Uh,a,b,c)};Uh.prototype.ya=function(){throw h("error: expected at least 1 arg, got none");};Uh.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c.g());b.add(c.h());P(a,b,this.B)};function Wh(){}var Xh={};k["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=Xh;Wh.prototype=new W;Wh.prototype.X=Wh;Wh.prototype.className="Bind_D_A_A_A_d";Xh.of=function(a,b,c){return Hg(new Wh,a,b,c)};
Wh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);if(!(c instanceof G))throw new TypeError;b.add(c.g());c=c.h();if(!(c instanceof G))throw new TypeError;b.add(c.g());c=c.h();if(!(c instanceof G))throw new TypeError;b.add(c.g());P(a,b,this.B)};Wh.prototype.P=function(a,b,c){try{c.h().ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 1 arg, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())};function Yh(){}var Zh={};
k["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=Zh;Yh.prototype=new W;Yh.prototype.X=Yh;Yh.prototype.className="Bind_D_A_A_d";Zh.of=function(a,b,c){return Hg(new Yh,a,b,c)};Yh.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);if(!(c instanceof G))throw new TypeError;b.add(c.g());c=c.h();if(!(c instanceof G))throw new TypeError;b.add(c.g());P(a,b,this.B)};Yh.prototype.P=function(a,b,c){sh(this,c.h(),c);this.L(a,b,c.g())};function $h(){}var ai={};
k["rainbow.function.interpreted.optimise.Bind_Obound"]=ai;$h.prototype=new W;$h.prototype.X=$h;$h.prototype.className="Bind_Obound";ai.of=function(a,b,c){b=Hg(new $h,a,b,c);a=a.g();if(!(a instanceof G))throw new TypeError;a=a.h().h().g();if(!(a instanceof V))throw new TypeError;b.nd=a;return b};$h.prototype.ya=function(a,b){var c=0,d;for(d in this.C)c++;b=Ea(c,b);b.add(this.nd.K(b));P(a,b,this.B)};$h.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);P(a,b,this.B)};
$h.prototype.P=function(a,b,c){if(c instanceof q)this.ya(a,b);else{try{c.h().ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 0 or 1 args, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())}};function bi(){}var ci={};k["rainbow.function.interpreted.optimise.Bind_Oliteral"]=ci;bi.prototype=new W;bi.prototype.X=bi;bi.prototype.className="Bind_Oliteral";
ci.of=function(a,b,c){b=Hg(new bi,a,b,c);b.ha=a.g().h().h().g();a=a.g().h().g();if(!(a instanceof F))throw new TypeError;if(b.xb(a,b.ha)){a=b.zb(a,b.ha,!1);if(!(a instanceof W))throw new TypeError;b.oa=a}return b};bi.prototype.ya=function(a,b){if(null!==this.oa)this.oa.ya(a,b);else{var c=0,d;for(d in this.C)c++;b=Ea(c,b);b.add(this.ha);P(a,b,this.B)}};bi.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);P(a,b,this.B)};
bi.prototype.P=function(a,b,c){if(c instanceof q)this.ya(a,b);else{try{c.h().ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 0 or 1 args, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())}};function di(){}var ei={};k["rainbow.function.interpreted.optimise.Bind_Oother"]=ei;di.prototype=new W;di.prototype.X=di;di.prototype.className="Bind_Oother";ei.of=function(a,b,c){b=Hg(new di,a,b,c);b.ha=a.g().h().h().g();a=[];b.ha.l(a);b.Qc=m(a);return b};
di.prototype.ya=function(a,b){var c=0,d;for(d in this.C)c++;b=Ea(c,b);z(a,Th(b,this.B,this));P(a,b,this.Qc)};di.prototype.L=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);P(a,b,this.B)};di.prototype.P=function(a,b,c){if(c instanceof q)this.ya(a,b);else{try{c.h().ab()}catch(d){if(!(d instanceof Ja))throw d;throw h("expected 0 or 1 args, got extra "+c.h()+" calling "+this);}this.L(a,b,c.g())}};function fi(){}var gi={};k["rainbow.function.interpreted.optimise.Bind_R"]=gi;
fi.prototype=new W;fi.prototype.X=fi;fi.prototype.className="Bind_R";gi.of=function(a,b,c){return Hg(new fi,a,b,c)};fi.prototype.P=function(a,b,c){var d=0,f;for(f in this.C)d++;b=Ea(d,b);b.add(c);P(a,b,this.B)};function hi(){}var ii={};k["rainbow.function.interpreted.optimise.stack.Stack_A"]=ii;hi.prototype=new Bh;hi.prototype.X=hi;hi.prototype.className="Stack_A";ii.eb=function(a){return ii.sa(a.J,a.C,Dh(a.C,a.body))};ii.sa=function(a,b,c){return Ch(new hi,a,b,c)};
hi.prototype.G=function(a,b){Nc(a,null,this.B,[b])};hi.prototype.L=function(a,b,c){Nc(a,b,this.B,[c])};hi.prototype.j=function(a,b){vh(this,1,b);this.G(a,b.g())};hi.prototype.P=function(a,b,c){vh(this,1,c);this.L(a,b,c.g())};function ji(){}var ki={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=ki;ji.prototype=new Bh;ji.prototype.X=ji;ji.prototype.className="Stack_A_A";ki.eb=function(a){return ki.sa(a.J,a.C,Dh(a.C,a.body))};ki.sa=function(a,b,c){return Ch(new ji,a,b,c)};
ji.prototype.ga=function(a,b,c){Nc(a,null,this.B,[b,c])};ji.prototype.Qa=function(a,b,c,d){Nc(a,b,this.B,[c,d])};ji.prototype.j=function(a,b){vh(this,2,b);this.ga(a,b.g(),b.h().g())};ji.prototype.P=function(a,b,c){vh(this,2,c);this.Qa(a,b,c.g(),c.h().g())};function li(){}var mi={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=mi;li.prototype=new Bh;li.prototype.X=li;li.prototype.className="Stack_A_A_A";mi.eb=function(a){return mi.sa(a.J,a.C,Dh(a.C,a.body))};
mi.sa=function(a,b,c){return Ch(new li,a,b,c)};li.prototype.lb=function(a,b,c,d){Nc(a,null,this.B,[b,c,d])};li.prototype.Zb=function(a,b,c,d,f){Nc(a,b,this.B,[c,d,f])};li.prototype.j=function(a,b){vh(this,3,b);this.lb(a,b.g(),b.h().g(),b.h().h().g())};li.prototype.P=function(a,b,c){vh(this,3,c);this.Zb(a,b,c.g(),c.h().g(),c.h().h().g())};function ni(){}var oi={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=oi;ni.prototype=new Bh;ni.prototype.X=ni;ni.prototype.className="Stack_A_A_A_A";
oi.eb=function(a){return oi.sa(a.J,a.C,Dh(a.C,a.body))};oi.sa=function(a,b,c){return Ch(new ni,a,b,c)};ni.prototype.j=function(a,b){vh(this,4,b);var c=b.g(),d=b.h().g(),f=b.h().h().g();b=b.h().h().h().g();Nc(a,null,this.B,[c,d,f,b])};ni.prototype.P=function(a,b,c){vh(this,4,c);var d=c.g(),f=c.h().g(),g=c.h().h().g();c=c.h().h().h().g();Nc(a,b,this.B,[d,f,g,c])};function pi(){}var qi={};k["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=qi;pi.prototype=new Bh;pi.prototype.X=pi;
pi.prototype.className="Stack_A_A_R";qi.eb=function(a){return qi.sa(a.J,a.C,Dh(a.C,a.body))};qi.sa=function(a,b,c){return Ch(new pi,a,b,c)};pi.prototype.P=function(a,b,c){Nc(a,b,this.B,[c.g(),c.h().g(),c.h().h()])};function ri(){}var si={};k["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=si;ri.prototype=new Bh;ri.prototype.X=ri;ri.prototype.className="Stack_A_R";si.eb=function(a){return si.sa(a.J,a.C,Dh(a.C,a.body))};si.sa=function(a,b,c){return Ch(new ri,a,b,c)};
ri.prototype.P=function(a,b,c){Nc(a,b,this.B,[c.g(),c.h()])};function ti(){}var ui={};k["rainbow.function.interpreted.optimise.stack.Stack_R"]=ui;ti.prototype=new Bh;ti.prototype.X=ti;ti.prototype.className="Stack_R";ui.eb=function(a){return ui.sa(a.J,a.C,Dh(a.C,a.body))};ui.sa=function(a,b,c){return Ch(new ti,a,b,c)};ti.prototype.P=function(a,b,c){Nc(a,b,this.B,[c])};function vi(){}var wi={};k["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=wi;vi.prototype=new Bh;
vi.prototype.X=vi;vi.prototype.className="Stack_D_A_A_A_A_d";wi.eb=function(a){return wi.sa(a.J,a.C,Dh(a.C,a.body))};wi.sa=function(a,b,c){return Ch(new vi,a,b,c)};vi.prototype.G=function(a,b){Nc(a,null,this.B,[b.g(),b.h().g(),b.h().h().g(),b.h().h().h().g()])};vi.prototype.L=function(a,b,c){Nc(a,b,this.B,[c.g(),c.h().g(),c.h().h().g(),c.h().h().h().g()])};vi.prototype.j=function(a,b){vh(this,1,b);this.G(a,b.g())};vi.prototype.P=function(a,b,c){vh(this,1,c);this.L(a,b,c.g())};function xi(){}
var yi={};k["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=yi;xi.prototype=new Bh;xi.prototype.X=xi;xi.prototype.className="Stack_D_A_A_d";yi.eb=function(a){return yi.sa(a.J,a.C,Dh(a.C,a.body))};yi.sa=function(a,b,c){return Ch(new xi,a,b,c)};xi.prototype.G=function(a,b){Nc(a,null,this.B,[b.g(),b.h().g()])};xi.prototype.L=function(a,b,c){Nc(a,b,this.B,[c.g(),c.h().g()])};xi.prototype.j=function(a,b){vh(this,1,b);this.G(a,b.g())};
xi.prototype.P=function(a,b,c){vh(this,1,c);this.L(a,b,c.g())};function zi(){}var Ai={};k["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=Ai;zi.prototype=new Bh;zi.prototype.X=zi;zi.prototype.className="Stack_A_Oliteral";Ai.eb=function(a){a=Ch(new zi,a.J,a.C,Dh(a.C,a.body));a.ha=a.J.h().g().h().h().g();var b=a.J.h().g().h().g();if(!(b instanceof F))throw new TypeError;if(a.xb(b,a.ha)){b=a.zb(b,a.ha,!1);if(!(b instanceof W))throw new TypeError;a.oa=b}return a};
Ai.sa=function(a,b,c){b=Ch(new zi,a,b,c);b.ha=a.g().h().h().g();return b};e=zi.prototype;e.G=function(a,b){null!==this.oa?this.oa.G(a,b):Nc(a,null,this.B,[b,this.ha])};e.ga=function(a,b,c){Nc(a,null,this.B,[b,c])};e.L=function(a,b,c){null!==this.oa?this.oa.L(a,b,c):Nc(a,b,this.B,[c,this.ha])};e.Qa=function(a,b,c,d){Nc(a,b,this.B,[c,d])};e.j=function(a,b){if(b instanceof q)th(this,b);else{var c=b.g();b.h()instanceof q?this.G(a,c):this.ga(a,c,b.h().g())}};
e.P=function(a,b,c){if(c instanceof q)th(this,c);else{var d=c.g();c.h()instanceof q?this.L(a,b,d):this.zd(a,b,d,c.h().g())}};function Bi(){}var Ci={};k["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=Ci;Bi.prototype=new Bh;Bi.prototype.X=Bi;Bi.prototype.className="Stack_Oliteral";
Ci.eb=function(a){a=Ch(new Bi,a.J,a.C,Dh(a.C,a.body));a.ha=a.J.g().h().h().g();var b=a.J.g().h().g();if(!(b instanceof F))throw new TypeError;if(a.xb(b,a.ha)){b=a.zb(b,a.ha,!1);if(!(b instanceof W))throw new TypeError;a.oa=b}return a};Ci.sa=function(a,b,c){b=Ch(new Bi,a,b,c);b.ha=a.g().h().h().g();return b};e=Bi.prototype;e.Ca=function(a){null!==this.oa?this.oa.Ca(a):Nc(a,null,this.B,[this.ha])};e.G=function(a,b){Nc(a,null,this.B,[b])};
e.ya=function(a,b){null!==this.oa?this.oa.L(a,b):Nc(a,b,this.B,[this.ha])};e.L=function(a,b,c){Nc(a,b,this.B,[c])};e.j=function(a,b){b instanceof q?this.Ca(a):(vh(this,1,b),this.G(a,b.g()))};e.P=function(a,b,c){c instanceof q?this.ya(a):(vh(this,1,c),this.L(a,b,c.g()))};function Di(){}Di.prototype=new X;Di.prototype.className="Macex";
Di.prototype.j=function(a,b){if(b instanceof q)v(a,u);else if(b=b.g(),b instanceof G){var c=b.g();if(c instanceof F)if(c.bound())if(c=c.value(),c=oc(c),null===c)v(a,b);else{b=b.h();if(!(b instanceof G))throw new TypeError;var d=new Ei;x(d);d.o(this);z(a,d);Ka(c,a,b)}else v(a,b);else v(a,b)}else v(a,b)};function Ei(){}Ei.prototype=new I;Ei.prototype.className="Macex.Again";Ei.prototype.i=function(a){this.Ha.j(a,r(N(a),u))};function Fi(){}Fi.prototype=new X;Fi.prototype.className="Uniq";
Fi.prototype.Ca=function(a){v(a,D("gs"+ ++Gi))};Fi.prototype.s=function(a){try{a.ab()}catch(b){if(!(b instanceof Ja))throw h("uniq: expects no args, got "+a);}return D("gs"+ ++Gi)};var Gi=0;function Hi(){}Hi.prototype=new X;Hi.prototype.className="Details";Hi.prototype.s=function(a){a=a.g();try{if(!(a instanceof Aa))throw new TypeError;var b=a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+this+" expected an exception, got "+a);}return b.message()};function Ii(){}
Ii.prototype=new X;Ii.prototype.className="Err";Ii.prototype.s=function(a){throw h(Rb(a.g(),this).value());};function Ji(){}Ji.prototype=new X;Ji.prototype.className="OnErr";Ji.prototype.j=function(a,b){var c=new Zc,d=b.g(),f=a.aa;x(c);c.cd=d;c.Vb=f;c.o(this);z(a,c);b.h().g().j(a,u)};function Ki(){}Ki.prototype=new X;Ki.prototype.className="Protect";function Li(){var a=new Ki;Y(a,"protect");var b=new Mi;b.ud=a;a.wd=b}function Mi(){}Mi.prototype=new Rf;Mi.prototype.fc=function(a){a.o(this.ud)};
Ki.prototype.j=function(a,b){var c=new bd,d=b.h().g();x(c);c.Vc=d;c=r(c,r(jd("clear up 'protect/after' return value"),u));c.v(this.wd);P(a,null,c);b.g().j(a,u)};function Ni(){}Ni.prototype=new X;e=Ni.prototype;e.className="Apply";e.Ca=function(){throw h("apply: expects at least 2 args, got none");};e.G=function(a,b){throw h("apply: expects at least 2 args, got "+b);};e.ga=function(a,b,c){if(!(c instanceof G))throw new TypeError;b.j(a,c)};e.lb=function(a,b,c,d){b.j(a,r(c,d))};
e.j=function(a,b){var c=b.g();b=b.h();if(!(b instanceof G))throw new TypeError;c.j(a,Oi(this,b))};function Oi(a,b){return b.h()instanceof q?wb(b.g(),a):r(b.g(),Oi(a,wb(b.h(),a)))}function Pi(){}Pi.prototype=new X;Pi.prototype.className="Eval";Pi.prototype.j=function(a,b){var c=new Qi;x(c);c.o(this);z(a,c);ng(a,b.g(),[])};function Qi(){}Qi.prototype=new I;Qi.prototype.className="Eval.ReduceAndExecute";Qi.prototype.i=function(a){var b=[];N(a).reduce().l(b);P(a,null,m(b))};function Ri(){}
Ri.prototype=new X;Ri.prototype.className="SSExpand";Ri.prototype.s=function(a){return sg(ib(a.g(),this))};
function sg(a){a=a.name();if(/:/.test(a)||/^~/.test(a)){a=a.split(":");if(1===a.length)a=Si(a[0]);else{for(var b=[D("compose")],c=0,d=a.length;c<d;c++)b.push(Si(a[c]));a=qb(b,u)}return a}if(lh(a)){b=[D("andf")];a=Ti(a);c=0;for(d=a.length;c<d;c++){var f=Ta(a[c]);if(!(f instanceof F))throw new TypeError;b.push(Ui(f))}return m(b)}if(/[.!]/.test(a)){b=a.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/);c=[];d=!1;f=0;for(var g=b.length;f<g;f++)if(""!==b[f]){var l=Ta(b[f].replace(/#p/g,
"%").replace(/#h/g,"#"));if(l===Xa||l===kb){if(d)throw h("Bad syntax "+a);d=!0}else d=!1;c.unshift(l)}d&&c.unshift(D("#<eof>"));return Vi(c,0)}throw h("Unknown syntax "+a);}function Ti(a){return 0===a.length?[""]:a.charCodeAt(0)===mh?(a=Ti(a.substring(1)),a[0]=nh+a[0],a):a.charCodeAt(a.length-1)===mh?(a=Ti(a.substring(0,a.length-1)),a[a.length-1]+=nh,a):a.split(nh)}
function Vi(a,b){var c=Ui(a[b++]),d=null;if(b<a.length&&(d=a[b++],!(d instanceof F)))throw new TypeError;c=d===kb?m([D("quote"),c]):c;return b<a.length?m([Vi(a,b),c]):null!==d?m([D("get"),c]):c}function Wi(a){try{return Oa(a)}catch(b){if(!(b instanceof Fa))throw b;throw h("Couldn't read value of symbol: "+a,b);}}function Ui(a){if(a instanceof q)return a;if(!(a instanceof F))throw new TypeError;return Wi(a.name())}function Si(a){return/^~/.test(a)?m([D("complement"),Wi(a.substring(1))]):Wi(a)}
var nh="&",mh=38;function Xi(){}Xi.prototype=new X;Xi.prototype.className="SSyntax";Xi.prototype.s=function(a){return a.g()instanceof F&&rg(a.g())?bb:u};function rg(a){var b=a.name();return/:/.test(b)||/^~/.test(b)||lh(a.name())||/[.!]/.test(a.name())}function Yi(){}Yi.prototype=new X;Yi.prototype.className="JavaDebug";Yi.prototype.s=function(a){return a.g()};function Zi(){}Zi.prototype=new X;Zi.prototype.className="JavaInvoke";
Zi.prototype.s=function(a){var b=a.g();try{if(!(b instanceof tc))throw new TypeError;var c=b}catch(g){if(!(g instanceof TypeError))throw g;throw h("Wrong argument type: "+this+" expected a java-object, got "+b);}b=ib(a.h().g(),this).name();a=a.h().h().g();if(!(a instanceof G))throw new TypeError;c=c.Pc;var d=Object(c)[b];if("[object Function]"!==Object.prototype.toString.call(d))throw h("Field "+b+" is not a method on "+c);b=d.apply;var f=[];wc(f,a);a=b.call(d,c,f);return xc(a)};function $i(){}
$i.prototype=new X;$i.prototype.className="Car";$i.prototype.G=function(a,b){v(a,b.g())};$i.prototype.s=function(a){kh(a,1,this.className);return a.g().g()};function aj(){}aj.prototype=new X;aj.prototype.className="Cdr";aj.prototype.G=function(a,b){v(a,b.h())};aj.prototype.s=function(a){kh(a,1,this.className);return a.g().h()};function bj(){}bj.prototype=new X;bj.prototype.className="Cons";bj.prototype.ga=function(a,b,c){v(a,r(b,c))};
bj.prototype.s=function(a){kh(a,2,this.className);return r(a.g(),a.h().g())};function cj(){}cj.prototype=new X;cj.prototype.className="Len";cj.prototype.s=function(a){Nb(a,this.className,1);return hc(a.g().xa(),1)};function dj(){}dj.prototype=new X;dj.prototype.className="NewString";dj.prototype.s=function(a){var b=a.g();if(!(b instanceof K))throw new TypeError;var c=Ib;if(!(a.h()instanceof q||(c=a.h().g(),c instanceof Cb)))throw new TypeError;a=[];for(var d=0;d<b.W();d++)a.push(c.value());return B(a.join(""))};
function ej(){}ej.prototype=new X;ej.prototype.className="Scar";ej.prototype.ga=function(a,b,c){v(a,b.dc(c))};ej.prototype.s=function(a){return a.g().dc(a.h().g())};function fj(){}fj.prototype=new X;fj.prototype.className="Scdr";fj.prototype.s=function(a){var b=a.g();if(!(b instanceof G))throw new TypeError;a=a.h().g();b.Tc(a);return a};function gj(){}gj.prototype=new X;gj.prototype.className="Acos";gj.prototype.s=function(a){Nb(a,this.className,1);a=Math.acos(lb(a.g(),this).N());return C(a)};
function hj(){}hj.prototype=new X;e=hj.prototype;e.className="Add";e.Ca=function(a){v(a,kc)};e.G=function(a,b){v(a,b)};e.ga=function(a,b,c){v(a,b.add(c))};e.lb=function(a,b,c,d){v(a,b.add(c).add(d))};e.s=function(a){if(a instanceof q)return kc;var b=a.g();for(a=a.h();!(a instanceof q);)b=b.add(a.g()),a=a.h();return b};function ij(){}ij.prototype=new X;ij.prototype.className="Asin";ij.prototype.s=function(a){Nb(a,this.className,1);a=Math.asin(lb(a.g(),this).N());return C(a)};function jj(){}
jj.prototype=new X;jj.prototype.className="Atan";jj.prototype.s=function(a){Nb(a,this.className,1);a=Math.atan(lb(a.g(),this).N());return C(a)};function kj(){}kj.prototype=new X;kj.prototype.className="ComplexParts";kj.prototype.s=function(a){Nb(a,this.className,1);a=$b(a.g(),this);return m([C(a.U),C(a.S)])};function lj(){}lj.prototype=new X;lj.prototype.className="Cosine";lj.prototype.s=function(a){Nb(a,this.className,1);a=Math.cos(lb(a.g(),this).N());return C(a)};function mj(){}mj.prototype=new X;
mj.prototype.className="Divide";mj.prototype.s=function(a){if(a instanceof q)throw h("Function `/` expected at least 1 arg");return nj(a).oc(a)};function oj(){}oj.prototype=new X;oj.prototype.className="Expt";oj.prototype.s=function(a){Nb(a,this.className,2);var b=a.g();if(!(b instanceof K))throw new TypeError;a=a.h().g();if(!(a instanceof K))throw new TypeError;if(b instanceof Zb)return ec(b,a);if(a instanceof Zb)return ec(Va(b.N(),0),a);b=b.N();a=a.N();return C(Math.pow(b,a))};function pj(){}
pj.prototype=new X;pj.prototype.className="Logarithm";pj.prototype.s=function(a){Nb(a,this.className,1);a=lb(a.g(),this);return a instanceof Zb?a.log():C(Math.log(a.N()))};function qj(){}qj.prototype=new X;qj.prototype.className="MakeComplex";qj.prototype.s=function(a){Nb(a,this.className,2);var b=lb(a.g(),this);a=lb(a.h().g(),this);return Va(b.N(),a.N())};
function nj(a){if(a instanceof q)return rj;if(a.g()instanceof dc)return sj;if(a.g()instanceof Zb)return tj;if(!(a.h()instanceof G))throw new TypeError;return nj(a.h())}function uj(){}uj.prototype.Tb=void 0;uj.prototype.multiply=void 0;uj.prototype.oc=void 0;function vj(){}vj.prototype=new uj;vj.prototype.Tb=function(a){return C(wj(this,a))};
function wj(a,b){if(b instanceof q)return 0;var c=b.g();if(!(c instanceof K))throw new TypeError;c=c.N();b=b.h();if(!(b instanceof G))throw new TypeError;return c+wj(a,b)}vj.prototype.multiply=function(a){return C(xj(this,a))};vj.prototype.oc=function(a){var b=a.h(),c=a.g();if(!(c instanceof K))throw new TypeError;b=b instanceof q?1/c.N():c.N();a=a.h();if(!(a instanceof G))throw new TypeError;return C(b/xj(this,a))};
function xj(a,b){if(b instanceof q)return 1;var c=b.g();if(!(c instanceof K))throw new TypeError;c=c.N();b=b.h();if(!(b instanceof G))throw new TypeError;a=xj(a,b);return c*a}var sj=new vj;function yj(){}yj.prototype=new uj;yj.prototype.Tb=function(a){if(a instanceof q)return gc;var b=fc(a.g());a=a.h();if(!(a instanceof G))throw new TypeError;a=this.Tb(a);return Va(b.U+a.U,b.S+a.S)};
yj.prototype.multiply=function(a){if(a instanceof q)return Va(1,0);var b=fc(a.g());a=a.h();if(!(a instanceof G))throw new TypeError;return bc(b,this.multiply(a))};yj.prototype.oc=function(a){var b=fc(a.g());a=a.h();if(!(a instanceof G))throw new TypeError;return bc(b,this.multiply(a).inverse())};var tj=new yj;function zj(){}zj.prototype=new uj;
zj.prototype.Tb=function(a){if(a instanceof q)return kc;var b=a.g();if(!(b instanceof cc))throw new TypeError;a=a.h();if(!(a instanceof G))throw new TypeError;return b.Rb(this.Tb(a))};zj.prototype.multiply=function(a){if(a instanceof q)return lc;var b=a.g();if(!(b instanceof cc))throw new TypeError;a=a.h();if(!(a instanceof G))throw new TypeError;return jc(b,this.multiply(a))};
zj.prototype.oc=function(a){var b=a.h(),c=a.g();if(!(c instanceof cc))throw new TypeError;b=b instanceof q?hc(c.da,c.ra):c;a=a.h();if(!(a instanceof G))throw new TypeError;a=this.multiply(a);a=hc(a.da,a.ra);return jc(b,a)};var rj=new zj;function Aj(){}Aj.prototype=new X;Aj.prototype.className="Mod";Aj.prototype.ga=function(a,b,c){if(!(b instanceof K))throw new TypeError;if(!(c instanceof K))throw new TypeError;v(a,b.bd(c))};Aj.prototype.j=function(a,b){Nb(b,this.className,2);this.ga(a,b.g(),b.h().g())};
function Bj(){}Bj.prototype=new X;e=Bj.prototype;e.className="Multiply";e.Ca=function(a){v(a,lc)};e.G=function(a,b){v(a,b)};e.ga=function(a,b,c){v(a,b.multiply(c))};e.lb=function(a,b,c,d){v(a,b.multiply(c).multiply(d))};e.s=function(a){if(a instanceof q)return lc;var b=a.g();for(a=a.h();!(a instanceof q);)b=b.multiply(a.g()),a=a.h();return b};function Cj(){}Cj.prototype=new X;Cj.prototype.className="PolarCoordinates";
Cj.prototype.s=function(a){Nb(a,this.className,1);a=$b(a.g(),this);return m([C(Math.sqrt(a.U*a.U+a.S*a.S)),C(Math.atan2(a.S,a.U))])};function Dj(){}Dj.prototype=new X;Dj.prototype.className="Quotient";Dj.prototype.s=function(a){kh(a,2,this.className);var b=mb(a.g(),this),c=mb(a.h().g(),this);if(!b.isInteger()||!c.isInteger())throw h("Type error: "+this+" : expected integer, got "+a);a=b.W()/c.W();return Sa(0>a?Math.ceil(a):Math.floor(a))};function Ej(){}Ej.prototype=new X;Ej.prototype.className="Rand";
Ej.prototype.s=function(a){if(a instanceof q)return C(Math.random());var b=a.g();if(!(b instanceof K))throw new TypeError;if(!b.isInteger())throw h("rand: requires one exact integer argument, got "+a);a:for(;;)if(a=Math.floor(9007199254740992*Math.random()),9007199254740992>a)break a;return hc(Math.abs(a%b.W()),1)};function Fj(){}Fj.prototype=new X;Fj.prototype.className="Sine";Fj.prototype.s=function(a){Nb(a,this.className,1);a=Math.sin(lb(a.g(),this).N());return C(a)};function Gj(){}
Gj.prototype=new X;Gj.prototype.className="Sqrt";Gj.prototype.G=function(a,b){v(a,b.sqrt())};Gj.prototype.j=function(a,b){kh(b,1,this.className);this.G(a,b.g())};function Hj(){}Hj.prototype=new X;e=Hj.prototype;e.className="Subtract";e.Ca=function(){throw h("- : expected at least 1 arg");};e.G=function(a,b){if(!(b instanceof K))throw new TypeError;v(a,b.Db())};e.ga=function(a,b,c){if(!(c instanceof K))throw new TypeError;v(a,b.add(c.Db()))};
e.s=function(a){if(a instanceof q)throw h("Function `-` expected at least 1 arg");var b=a.g();if(!(b instanceof K))throw new TypeError;b=b.Db();a=a.h();if(!(a instanceof G))throw new TypeError;a instanceof q?a=b:(a=r(b,a),a=nj(a).Tb(a).Db());return a};function Ij(){}Ij.prototype=new X;Ij.prototype.className="Tangent";Ij.prototype.s=function(a){Nb(a,this.className,1);a=Math.tan(lb(a.g(),this).N());return C(a)};function Jj(){}Jj.prototype=new X;Jj.prototype.className="Trunc";
Jj.prototype.s=function(a){Nb(a,this.className,1);a=a.g();if(!(a instanceof K))throw new TypeError;a=a.N();return hc(Math.floor(a),1)};function Kj(){}Kj.prototype=new X;Kj.prototype.className="Bound";Kj.prototype.Ca=function(){throw h("bound: requires 1 arg");};Kj.prototype.G=function(a,b){if(!(b instanceof F))throw new TypeError;v(a,zb(b.bound()))};Kj.prototype.s=function(a){Nb(a,this.className,1);a=ib(a.g(),this);return zb(a.bound())};function Lj(){}Lj.prototype=new X;Lj.prototype.className="Exact";
Lj.prototype.s=function(a){a=lb(a.g(),this);return zb(a instanceof cc&&a.isInteger())};function Mj(){}Mj.prototype=new X;e=Mj.prototype;e.className="GreaterThan";e.Ca=function(a){v(a,bb)};e.G=function(a){v(a,bb)};e.ga=function(a,b,c){v(a,0>=b.Ea(c)?u:bb)};e.s=function(a){if(2>a.xa())return bb;var b=a.g();a=a.h();if(!(a instanceof G))throw new TypeError;for(;!(a instanceof q);){var c=a.g();if(0>=b.Ea(c))return u;b=c;a=a.h();if(!(a instanceof G))throw new TypeError;}return bb};function Nj(){}
Nj.prototype=new X;e=Nj.prototype;e.className="Is";e.Ca=function(a){v(a,bb)};e.G=function(a){v(a,bb)};e.ga=function(a,b,c){v(a,zb(b.Sa(c)))};e.s=function(a){return Oj(this,a.g(),a.h())};function Oj(a,b,c){return c instanceof q?bb:b.Sa(c.g())?Oj(a,b,c.h()):u}function Pj(){}Pj.prototype=new X;e=Pj.prototype;e.className="LessThan";e.Ca=function(a){v(a,bb)};e.G=function(a){v(a,bb)};e.ga=function(a,b,c){v(a,0>b.Ea(c)?bb:u)};
e.s=function(a){var b=a.g();a=a.h();if(!(a instanceof G))throw new TypeError;for(;!(a instanceof q);){var c=a.g();if(0<=b.Ea(c))return u;b=c;a=a.h();if(!(a instanceof G))throw new TypeError;}return bb};function Qj(){}Qj.prototype=new X;Qj.prototype.className="RainbowDebug";Qj.prototype.j=function(a){Sc(a,eg);v(a,D(this.ma))};function Rj(){}Rj.prototype=new X;Rj.prototype.className="RainbowProfile";Rj.prototype.Ca=function(a){this.profile(a);v(a,u)};
Rj.prototype.G=function(a,b){if(!(b instanceof Ec))throw new TypeError;this.profile(b);v(a,u)};Rj.prototype.profile=function(a){Sc(a,jg)};function Sj(){}Sj.prototype=new X;Sj.prototype.className="RainbowProfileReport";Sj.prototype.Ca=function(a){v(a,this.sd(a))};Sj.prototype.G=function(a,b){if(!(b instanceof Ec))throw new TypeError;v(a,this.sd(a))};function Tj(){}Tj.prototype=new X;Tj.prototype.className="CurrentGcMilliseconds";Tj.prototype.j=function(a){v(a,Sa(1))};function Uj(){}Uj.prototype=new X;
Uj.prototype.className="CurrentProcessMilliseconds";Uj.prototype.j=function(a){v(a,Sa(1))};function Vj(){}Vj.prototype=new X;Vj.prototype.className="Declare";Vj.prototype.ga=function(a,b,c){b===Wj?(b=og,og=c,v(a,b)):v(a,u)};Vj.prototype.j=function(a,b){this.ga(a,b.g(),b.h().g())};var Wj=D("atstrings");function Xj(){}Xj.prototype=new X;Xj.prototype.className="MSec";Xj.prototype.s=function(){return Sa((new Date).getTime())};function Yj(){}Yj.prototype=new X;Yj.prototype.className="Seconds";
Yj.prototype.s=function(){var a=(new Date).getTime()/1E3;return Sa(0>a?Math.ceil(a):Math.floor(a))};function Zj(){}Zj.prototype=new X;Zj.prototype.className="MapTable";Zj.prototype.ga=function(a,b,c){v(a,c);if(!(c instanceof Ha))throw new TypeError;v(a,Bc(c));c=new nd;x(c);c.Yc=b;c.o(this);z(a,c)};Zj.prototype.j=function(a,b){kh(b,2,this.className);this.ga(a,b.g(),b.h().g())};function ak(){}ak.prototype=new X;ak.prototype.className="Sref";ak.prototype.lb=function(a,b,c,d){v(a,b.Bc(c,d))};
ak.prototype.j=function(a,b){kh(b,3,this.className);this.lb(a,b.g(),b.h().g(),b.h().h().g())};function bk(){}bk.prototype=new X;bk.prototype.className="Table";bk.prototype.j=function(a,b){var c=yc();v(a,c);if(!(b instanceof q)){var d=jd("table-initialiser");d.o(this);z(a,d);b.g().j(a,m([c]))}};function ck(){}ck.prototype=new X;ck.prototype.className="AtomicInvoke";ck.prototype.G=function(a,b){for(;a!==dk&&null!==dk;);dk=a;ek++;var c=x(new fk);c.o(this);z(a,c);b.j(a,u)};
ck.prototype.j=function(a,b){this.G(a,b.g())};function fk(){}fk.prototype=new I;fk.prototype.className="AtomicInvoke.ReleaseLock";fk.prototype.i=function(){ek--;0===ek&&(dk=null)};var dk=null,ek=0;function gk(){}gk.prototype=new X;gk.prototype.className="BreakThread";gk.prototype.s=function(a){a=a.g();if(!(a instanceof Ec))throw new TypeError;Sc(a,gg);return u};function hk(){}hk.prototype=new X;hk.prototype.className="CCC";
hk.prototype.G=function(a,b){if(b instanceof q)throw h("Can't ccc nil!");var c=new ik;c.ec=a.mc();b.G(a,c)};hk.prototype.j=function(a,b){Nb(b,this.className,1);this.G(a,b.g())};function ik(){}ik.prototype=new p;e=ik.prototype;e.className="CCC.ContinuationWrapper";
e.G=function(a,b){var c;a:{for(c=0;c<a.m;c++)if(a.R[c]!==this.ec.R[c]){--c;break a}c=a.m}for(var d=[],f=[];c<a.m;)Jc(a).g().Yb&&(d.push(Jc(a)),f.push(a.wa[a.m])),a.m--;c=[d,f];this.ec.copyTo(a);v(a,b);for(b=c[0].length-1;0<=b;b--){d=c[1][b];if(!(d instanceof Da))throw new TypeError;f=c[0][b];if(!(f instanceof G))throw new TypeError;P(a,d,f)}};e.j=function(a,b){this.G(a,b.g())};e.type=function(){return jh};
e.toString=function(){return"#<continuation ip:"+this.ec.m+";ap:"+this.ec.aa+";VM#"+this.ec.Cc+">"};function jk(){}jk.prototype=new X;jk.prototype.className="Dead";jk.prototype.j=function(a,b){b=b.g();if(!(b instanceof Ec))throw new TypeError;v(a,zb(b.nc))};function kk(){}kk.prototype=new X;kk.prototype.className="KillThread";kk.prototype.j=function(a,b){b=b.g();if(!(b instanceof Ec))throw new TypeError;Sc(b,gg);v(a,u)};function lk(){}lk.prototype=new X;lk.prototype.className="NewThreadLocal";
lk.prototype.s=function(){var a=new Wb;a.u=null;return a};function mk(){}mk.prototype=new X;mk.prototype.className="ThreadLocalGet";mk.prototype.s=function(a){return Yb(a.g(),this).get()};function nk(){}nk.prototype=new X;nk.prototype.className="ThreadLocalSet";nk.prototype.s=function(a){var b=Yb(a.g(),this);a=a.h().g();b.set(a);return a};function ok(){}ok.prototype=new X;ok.prototype.className="Annotate";
ok.prototype.s=function(a){var b=a.g();a=a.h().g();if(b===a.type())b=a;else{var c=new nc;c.Ub=b;c.wb=a;b=c}return b};function pk(){}pk.prototype=new X;pk.prototype.className="Coerce";pk.prototype.ga=function(a,b,c){var d=b.type();if(d===c)v(a,b);else try{if(!(c instanceof F))throw new TypeError;if(!(d instanceof F))throw new TypeError;(c.Lb[d]||null).G(a,b)}catch(f){if(f instanceof qk)throw h("Can't coerce "+b+" to "+c);throw h("Can't coerce "+b+" ( a "+b.type()+" ) to "+c,f);}};
pk.prototype.lb=function(a,b,c,d){var f=b.type();if(f===c)v(a,b);else try{if(!(c instanceof F))throw new TypeError;if(!(f instanceof F))throw new TypeError;(c.Lb[f]||null).ga(a,b,d)}catch(g){if(g instanceof qk)throw h("Can't coerce "+b+" to "+c);throw h("Can't coerce "+b+" ( a "+b.type()+" ) to "+c,g);}};pk.prototype.j=function(a,b){if(b.Mb(2))this.ga(a,b.g(),b.h().g());else if(b.Mb(3))this.lb(a,b.g(),b.h().g(),b.h().h().g());else throw h("coerce expects 2 or 3 args, got "+b);};function rk(){}
rk.prototype=new X;rk.prototype.className="Rep";rk.prototype.s=function(a){var b=a.g();if(b instanceof nc){a=a.g();try{if(!(a instanceof nc))throw new TypeError;var c=a}catch(d){if(!(d instanceof TypeError))throw d;throw h("Wrong argument type: "+this+" expected a Tagged, got "+a);}c=c.wb}else c=b;return c};function sk(){}sk.prototype=new X;sk.prototype.className="Type";sk.prototype.G=function(a,b){v(a,b.type())};sk.prototype.s=function(a){Nb(a,this.className,1);return a.g().type()};
var Pb=D("string"),tk=D("sym"),uk=D("int"),vk=D("num"),wk=D("cons"),xk=D("char");
function yk(){jb(wk,Pb,zk("string-cons",function(a){if(!(a instanceof Qa))throw new TypeError;a=a.value();for(var b=[],c=0;c<a.length;c++)b.push(Ra(a.charCodeAt(c)));return m(b)}));jb(Pb,wk,zk("cons-string",function(a){if(!(a instanceof G))throw new TypeError;for(var b=[];!(a instanceof q);)if(b.push(a.g().pb()),a=a.h(),!(a instanceof G))throw new TypeError;return B(b.join(""))}));jb(Pb,uk,zk("int-string",function(a){return this.Kb(a,mc)},function(a,b){if(!(b instanceof K))throw new TypeError;if(!(a instanceof
K))throw new TypeError;if(a instanceof Zb)a=B(a.toString());else{if(a instanceof dc&&10!==b.W())throw new qk;a=a instanceof cc?a.stringify(b):Ak(a,b)}return a}));jb(Pb,vk,zk("num-string",function(a){return this.Kb(a,mc)},function(a,b){if(!(b instanceof K))throw new TypeError;if(!(a instanceof K))throw new TypeError;if(a instanceof Zb)a=B(a.toString());else{if(a instanceof dc&&10!==b.W())throw new qk;a=a instanceof cc?a.stringify(b):Ak(a,b)}return a}));jb(tk,Pb,zk("string-sym",function(a){if(!(a instanceof
Qa))throw new TypeError;return Ta(a.value())}));jb(Pb,tk,zk("sym-string",function(a){return a instanceof q?B(""):B(a.pb())}));jb(uk,xk,zk("char-int",function(a){if(!(a instanceof Cb))throw new TypeError;a=a.value();return Sa(a)},function(a){return this.Wb(a)}));jb(uk,vk,zk("num-int",function(a){if(!(a instanceof K))throw new TypeError;return a.round()},function(a){return this.Wb(a)}));jb(vk,uk,zk("int-num",function(a){return a}));jb(xk,uk,zk("int-char",function(a){if(!(a instanceof K))throw new TypeError;
if(!a.isInteger())throw new qk;return Ra(a.W())}));jb(Pb,xk,zk("char-string",function(a){if(!(a instanceof Cb))throw new TypeError;a=a.value();return B(String.fromCharCode(a))}));jb(tk,xk,zk("char-sym",function(a){if(!(a instanceof Cb))throw new TypeError;a=a.value();return Ta(String.fromCharCode(a))}));jb(vk,Pb,zk("string-num",function(a){return this.Kb(a,mc)},function(a,b){if(!(b instanceof K))throw new TypeError;if(!(a instanceof Qa))throw new TypeError;a=a.value().toLowerCase();if("+inf.0"===
a)b=C(1/0);else if("-inf.0"===a)b=C(-1/0);else if("+nan.0"===a)b=C(0/0);else{if(/i$/i.test(a))try{var c;if("+i"===a)var d=Va(0,1);else if("-i"===a)d=Va(0,-1);else if(c=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(a))d=Va(C(parseFloat(c[1])).value(),C(parseFloat(c[2]+(c[3]||"1"))).value());else throw new Fa;}catch(f){if(!(f instanceof Fa))throw f;throw new qk;}else/\./.test(a)||15>b.W()&&/.e./.test(a)?b=Bk(a,b.W()):/\//.test(a)?b=Ck(a,b.W()):(b=b.W(),b=
Sa(parseInt(a,~~b))),d=b;b=d}return b}));jb(uk,Pb,zk("string-int",function(a){return this.Kb(a,mc)},function(a,b){if(!(b instanceof K))throw new TypeError;if(!(a instanceof Qa))throw new TypeError;a=a.value().toLowerCase();if("+inf.0"===a||"-inf.0"===a||"+nan.0"===a||/i$/i.test(a))throw new qk;if(/\./.test(a)||15>b.W()&&/.e./i.test(a)){b=Bk(a,b.W());if(!(b instanceof dc))throw new TypeError;return b.zc()}if(/\//.test(a)){b=Ck(a,b.W());if(!(b instanceof cc))throw new TypeError;return b.zc()}b=b.W();
return Sa(parseInt(a,~~b))}))}function Ak(a,b){if(10===b.W())return B(a.toString());a=a.W().toString(~~b.W());return B(""+a+".0")}function Ck(a,b){a=a.split(/\//g);if(2<a.length)throw new qk;return hc(parseInt(a[0],~~b),parseInt(a[1],~~b))}
function Bk(a,b){var c=!1;/^-/.test(a)&&(c=!0,a=a.substring(1));a=a.toUpperCase();/E/.test(a)||(a+="E0");/\./.test(a)?/^\./.test(a)&&(a="0"+a):(a=a.split(/E/g),a=a[0]+".0E"+a[1]);a=a.split(/\./g);var d=parseInt(a[0],~~b);a=a[1].split(/E/g);/^\+/.test(a[1])&&(a[1]=a[1].substring(1));b=(d+parseInt(a[0],~~b)/Math.pow(b,a[0].length))*Math.pow(b,parseInt(a[1],~~b));c&&(b=-b);return C(b)}function Qb(){}Qb.prototype=new p;e=Qb.prototype;e.className="Typing.Coercion";
function zk(a,b,c){var d=new Qb;d.ma=a;void 0!==b&&(d.Wb=b);void 0!==c&&(d.Kb=c);return d}e.type=function(){return D("fn")};e.Wb=function(){throw h("not implemented: "+this.ma+".coerce 1 arg");};e.Kb=function(){throw h("not implemented: "+this.ma+".coerce 2 args");};e.G=function(a,b){v(a,this.Wb(b))};e.ga=function(a,b,c){v(a,this.Kb(b,c))};function qk(){}qk.prototype=Error();function Dk(){}Dk.prototype=new Bb;e=Dk.prototype;e.className="Input";function Ek(a,b){a.Na=b;return a}
e.xc=function(a,b){return this.Na.xc(function(c,d){return c?a(h("Cannot read byte from "+this,c)):null===d?a(null,u):a(null,Sa(d))},b)};function Fk(a,b,c){return a.Na.yc(function(d,f){return d?b(h("reading character: "+d)):null===f?b(null,u):b(null,Ra(f))},c)}function Gk(a,b,c,d){return Pa(a.Na,function(f,g){return f?c(h("Can't parse input: "+f,f)):null===g?c(null,b):c(null,g)},d)}e.type=function(){return Hk};e.za=function(){return this.Na};e.close=function(){this.Na.close()};
function Ik(a,b){try{if(!(a instanceof Dk))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected input-port, got "+a);}}var Hk=D("input");function Jk(){}Jk.prototype=new Bb;e=Jk.prototype;e.className="Output";function Kk(a,b){a.Qb=b;return a}e.write=function(a){this.Qb.ib(""+a)};e.type=function(){return Lk};e.za=function(){return this.Qb};e.close=function(){this.Qb.close()};e.Fc=function(a){this.Qb.Fc(a)};
function Mk(a,b){try{if(!(a instanceof Jk))throw new TypeError;return a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+b+" expected output-port, got "+a);}}e.flush=function(){this.Qb.flush()};var Lk=D("output");function Nk(){}Nk.prototype=new Dk;Nk.prototype.className="StringInputPort";
function qa(a){function b(){if(a.length<=f)return!1;var g=a.charCodeAt(f++);d.push(g>>>8&255,g&255);return!0}function c(){return 0!==d.length||b()?d.shift():null}var d=[],f=0;return Ek(new Nk,{xc:function(g){g(null,c());return!0},yc:function(g){var l=c(),t=c();g(null,null===t?null:l<<8|t);return!0},vb:function(g){g(null,2<=d.length||b()?d[0]<<8|d[1]:null);return!0},close:function(){}})}function Ok(){}Ok.prototype=new Jk;Ok.prototype.className="StringOutputPort";
function Pk(){var a=new Ok;a.bc=[];a.Cb=null;return Kk(a,{ib:function(b){if(null===a.Cb)a.bc.push(b);else for(var c=0,d=b.length;c<d;c++){var f=b.charCodeAt(c);a.bc.push(String.fromCharCode(a.Cb<<8|f>>>8&255));a.Cb=f&255}},Fc:function(b){null===a.Cb?a.Cb=b:(a.bc.push(String.fromCharCode(a.Cb<<8|b)),a.Cb=null)},close:function(){},flush:function(){}})}Ok.prototype.value=function(){var a=this.bc.join("");this.bc=[a];return B(a)};Ok.prototype.toString=function(){return"#<string-output-port>"};
function Qk(){}Qk.prototype=new Jk;Qk.prototype.className="IO.Anon_STD_OUT_";Qk.prototype.close=function(){};Qk.prototype.toString=function(){return"IO.STD_OUT"};var Rk;Rk=Kk(new Qk,ka);function Sk(){}Sk.prototype=new Jk;Sk.prototype.className="IO.Anon_STD_ERR_";Sk.prototype.close=function(){};Sk.prototype.toString=function(){return"IO.STD_ERR"};var Tk;Tk=Kk(new Sk,la);function Uk(){}Uk.prototype=new Dk;Uk.prototype.className="IO.Anon_STD_IN_";Uk.prototype.close=function(){};
Uk.prototype.toString=function(){return"IO.STD_IN"};var Vk={value:Ek(new Uk,ja)},Wk={value:Rk};function Xk(a,b){return a instanceof q?Wk.value:Mk(a,b)}function Yk(a,b){return a instanceof q?Vk.value:Ik(a,b)}function Zk(a){for(;!(a instanceof q);){var b=a.g();if(b instanceof Dk)b.close();else if(b instanceof Jk)b.close();else if(b instanceof tc)b.close();else throw h("close: expected Input or Output object; got "+b);a=a.h();if(!(a instanceof G))throw new TypeError;}return u}function $k(){}
$k.prototype=new X;$k.prototype.className="Close_Builtin";$k.prototype.s=function(a){return Zk(a)};function al(){}al.prototype=new X;al.prototype.className="Disp";al.prototype.G=function(a,b){Wk.value.write(b.pb());v(a,u)};al.prototype.s=function(a){var b=Xk(a.h().g(),this);a=a.g();b.write(a.pb());return u};function bl(){}bl.prototype=new X;bl.prototype.className="FlushOut";bl.prototype.s=function(){Wk.value.flush();return bb};function cl(){}cl.prototype=new X;cl.prototype.className="ForceClose";
cl.prototype.s=function(a){return Zk(a)};function dl(){}dl.prototype=new X;dl.prototype.className="StdErr";dl.prototype.s=function(){return Tk};function el(){}el.prototype=new X;el.prototype.className="StdIn";el.prototype.s=function(a){kh(a,0,this.className);return Vk.value};function fl(){}fl.prototype=new X;fl.prototype.className="StdOut";fl.prototype.s=function(){return Wk.value};function gl(){}gl.prototype=new X;gl.prototype.className="Write";
gl.prototype.s=function(a){Xk(a.h().g(),this).write(a.g());return u};function hl(){}hl.prototype=new X;hl.prototype.className="WriteB";hl.prototype.s=function(a){var b=Xk(a.h().g(),this);a=mb(a.g(),this);if(!a.isInteger())throw h("write byte: expected byte, got "+a);b.Fc(a.W());return u};function il(){}il.prototype=new X;il.prototype.className="WriteC";il.prototype.s=function(a){var b=Xk(a.h().g(),this),c=Gb(a.g(),this);b.Qb.ib(String.fromCharCode(c.value()));return a.g()};function jl(){}
jl.prototype=new X;jl.prototype.className="InString";jl.prototype.s=function(a){return qa(Rb(a.g(),this).value())};function kl(){}kl.prototype=new X;kl.prototype.className="Inside";kl.prototype.s=function(a){a=a.g();try{if(!(a instanceof Ok))throw new TypeError;var b=a}catch(c){if(!(c instanceof TypeError))throw c;throw h("Wrong argument type: "+this+" expected a StringOutputPort, got "+a);}return b.value()};function ll(){}ll.prototype=new X;ll.prototype.className="OutString";ll.prototype.s=function(){return Pk()};
function ml(){}ml.prototype=new X;ml.prototype.className="CallWStdIn";ml.prototype.j=function(a,b){var c=ld(Vk,Vk.value);c.o(this);z(a,c);Vk.value=Ik(b.g(),this);b.h().g().j(a,u)};function nl(){}nl.prototype=new X;nl.prototype.className="CallWStdOut";nl.prototype.j=function(a,b){var c=ld(Wk,Wk.value);c.o(this);z(a,c);Wk.value=Mk(b.g(),this);b.h().g().j(a,u)};function ol(){}ol.prototype=new X;ol.prototype.className="ReadB";
ol.prototype.G=function(a,b){var c=new pl;b=Yk(b,this);x(c);c.Gb=b;c.o(this);z(a,c)};ol.prototype.j=function(a,b){var c=new pl;b=Yk(b.g(),this);x(c);c.Gb=b;c.o(this);z(a,c)};function pl(){}pl.prototype=new I;pl.prototype.Pa=!0;pl.prototype.className="ReadB.Go";pl.prototype.ia=function(a,b,c){return this.Gb.xc(function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};pl.prototype.i=function(){throw Error();};function ql(){}ql.prototype=new X;ql.prototype.className="ReadC";
ql.prototype.G=function(a,b){var c=new rl;b=Yk(b,this);x(c);c.Gb=b;c.o(this);z(a,c)};ql.prototype.j=function(a,b){var c=new rl;b=Yk(b.g(),this);x(c);c.Gb=b;c.o(this);z(a,c)};function rl(){}rl.prototype=new I;rl.prototype.Pa=!0;rl.prototype.className="ReadC.Go";rl.prototype.ia=function(a,b,c){return Fk(this.Gb,function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};rl.prototype.i=function(){throw Error();};function sl(){}sl.prototype=new X;sl.prototype.className="Sread";
sl.prototype.j=function(a,b){var c=new tl,d=Ik(b.g(),this);b=b.h().g();x(c);c.Gb=d;c.jd=b;c.o(this);z(a,c)};function tl(){}tl.prototype=new I;tl.prototype.Pa=!0;tl.prototype.className="Sread.Go";tl.prototype.ia=function(a,b,c){return Gk(this.Gb,this.jd,function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};tl.prototype.i=function(){throw Error();};function ul(){}ul.prototype=new X;ul.prototype.className="Dir";
ul.prototype.j=function(a,b){var c=new vl;b=Rb(b.g(),this).value();x(c);c.mb=b;c.o(this);z(a,c)};function vl(){}vl.prototype=new I;vl.prototype.Pa=!0;vl.prototype.className="Dir.Go";vl.prototype.ia=function(a,b){return ma(function(c,d){if(c)return void b(c);v(a,d);b(null)})};vl.prototype.i=function(){throw Error();};function wl(){}wl.prototype=new X;wl.prototype.className="DirExists";wl.prototype.j=function(a,b){var c=new xl;b=b.g();x(c);c.mb=b;c.o(this);z(a,c)};function xl(){}xl.prototype=new I;
xl.prototype.Pa=!0;xl.prototype.className="DirExists.Go";xl.prototype.ia=function(a,b){return na(Rb(this.mb,this.Ha).value(),function(c,d){if(c)return void b(c);v(a,d?this.mb:u);b(null)})};xl.prototype.i=function(){throw Error();};function yl(){}yl.prototype=new X;yl.prototype.className="FileExists";yl.prototype.j=function(a,b){var c=new zl;b=b.g();x(c);c.mb=b;c.o(this);z(a,c)};function zl(){}zl.prototype=new I;zl.prototype.Pa=!0;zl.prototype.className="FileExists.Go";
zl.prototype.ia=function(a,b,c){return oa(Rb(this.mb,this.Ha).value(),function(d,f){if(d)return void b(d);v(a,f);b(null)},c)};zl.prototype.i=function(){throw Error();};function Al(){}Al.prototype=new X;Al.prototype.className="InFile";Al.prototype.j=function(a,b){var c=new Bl;b=Rb(b.g(),this).value();x(c);c.mb=b;c.o(this);z(a,c)};function Bl(){}Bl.prototype=new I;Bl.prototype.Pa=!0;Bl.prototype.className="InFile.Go";
Bl.prototype.ia=function(a,b,c){return pa(this.mb,function(d,f){if(d)return void b(d);v(a,Ek(new Dk,f));b(null)},c)};Bl.prototype.i=function(){throw Error();};function Cl(){}Cl.prototype=new X;Cl.prototype.className="OutFile";Cl.prototype.j=function(a,b){var c=Rb(b.g(),this).value();b=b.h().g();b=!(b instanceof q)&&"append"===ib(b,this).name();var d=new Dl;x(d);d.ma=c;d.yd=b;d.o(this);z(a,d)};function Dl(){}Dl.prototype=new I;Dl.prototype.Pa=!0;Dl.prototype.className="OutFile.Go";
Dl.prototype.ia=function(a,b){return ra(function(c,d){if(c)return void b(c);v(a,Kk(new Jk,d));b(null)})};Dl.prototype.i=function(){throw Error();};function El(){}El.prototype=new X;El.prototype.className="MakeDirectory";El.prototype.j=function(a,b){var c=new Fl;b=Rb(b.g(),this).value();x(c);c.mb=b;c.o(this);z(a,c)};function Fl(){}Fl.prototype=new I;Fl.prototype.Pa=!0;Fl.prototype.className="MakeDirectory.Go";Fl.prototype.ia=function(a,b){return sa(function(c,d){if(c)return void b(c);v(a,d?bb:u);b(null)})};
Fl.prototype.i=function(){throw Error();};function Gl(){}Gl.prototype=new X;Gl.prototype.className="MakeDirectories";Gl.prototype.j=function(a,b){var c=new Hl;b=Rb(b.g(),this).value();x(c);c.mb=b;c.o(this);z(a,c)};function Hl(){}Hl.prototype=new I;Hl.prototype.Pa=!0;Hl.prototype.className="MakeDirectories.Go";Hl.prototype.ia=function(a,b){return ta(function(c,d){if(c)return void b(c);v(a,d?bb:u);b(null)})};Hl.prototype.i=function(){throw Error();};function Il(){}Il.prototype=new X;
Il.prototype.className="MvFile";Il.prototype.j=function(a,b){var c=new Jl,d=Rb(b.g(),this).value();b=Rb(b.h().g(),this).value();x(c);c.Dd=d;c.Cd=b;c.o(this);z(a,c)};function Jl(){}Jl.prototype=new I;Jl.prototype.Pa=!0;Jl.prototype.className="MvFile.Go";Jl.prototype.ia=function(a,b){return ua(function(c){if(c)return void b(c);v(a,u);b(null)})};Jl.prototype.i=function(){throw Error();};function Kl(){}Kl.prototype=new X;Kl.prototype.className="RmFile";
Kl.prototype.j=function(a,b){var c=new Ll;b=Rb(b.g(),this).value();x(c);c.mb=b;c.o(this);z(a,c)};function Ll(){}Ll.prototype=new I;Ll.prototype.Pa=!0;Ll.prototype.className="RmFile.Go";Ll.prototype.ia=function(a,b){return va(function(c){if(c)return void b(c);v(a,u);b(null)})};Ll.prototype.i=function(){throw Error();};var ph=!0;
function Ml(a){var b={noLibs:!0,e:['(assign load-from-web  (fn ()    ( (fn (eof f loop)        (assign loop          (fn ()            ( (fn (command)              (if (is command eof)                (eval                  \'(do (load "strings.arc")                       (load "lib/bag-of-tricks.arc")                       (load "rainbow/rainbow.arc")                       (load "rainbow/rainbow-libs.arc")                       ))                ( (fn ()                  eval.command                  (loop)                ) ))            ) (sread f eof))))        (loop)    ) (uniq) (infile "arc.arc") nil)))'].concat("#libs"!==location.hash?
[]:["(load-from-web)"])},c=(new Date).getTime(),d=b.ARC_PATH||[];-1===d.indexOf(".")&&(d=["."].concat(d));var f=Nl(b.args||[]);b.nosf&&(ph=!1);Y(new Xj,"msec");Y(new Yj,"seconds");Y(new Uj,"current-process-milliseconds");Y(new Tj,"current-gc-milliseconds");Y(new Vj,"declare");D("pi").ta(C(Math.PI));D("e").ta(C(Math.E));Y(new Jj,"trunc");Y(new oj,"expt");Y(new Ej,"rand");Y(new Gj,"sqrt");Y(new Dj,"quotient");Y(new Aj,"mod");Y(new hj,"+");Y(new Hj,"-");Y(new Bj,"*");Y(new mj,"/");Y(new Fj,"sin");Y(new lj,
"cos");Y(new Ij,"tan");Y(new ij,"asin");Y(new gj,"acos");Y(new jj,"atan");Y(new pj,"log");Y(new kj,"complex-parts");Y(new qj,"make-complex");Y(new Cj,"polar-coordinates");Y(new sk,"type");Y(new ok,"annotate");Y(new rk,"rep");Y(new pk,"coerce");yk();Y(new Zi,"java-invoke");Y(new Yi,"java-debug");Y(new Ol,"new-thread");Y(new kk,"kill-thread");Y(new gk,"break-thread");Y(new jk,"dead");Y(new ck,"atomic-invoke");Y(new hk,"ccc");Y(new lk,"thread-local");Y(new mk,"thread-local-ref");Y(new nk,"thread-local-set");
Y(new Fi,"uniq");Y(new Di,"macex");Li();Y(new Ii,"err");Y(new Ji,"on-err");Y(new Hi,"details");Y(new dj,"newstring");Y(new $i,"car");Y(new aj,"cdr");Y(new ej,"scar");Y(new fj,"scdr");Y(new bj,"cons");Y(new cj,"len");Y(new Kj,"bound");Y(new Pj,"<");Y(new Mj,">");Y(new Lj,"exact");Y(new Nj,"is");Y(new Ni,"apply");Y(new Pi,"eval");Y(new Ri,"ssexpand");Y(new Xi,"ssyntax");Y(new bk,"table");Y(new Zj,"maptable");Y(new ak,"sref");Y(new ml,"call-w/stdin");Y(new nl,"call-w/stdout");Y(new el,"stdin");Y(new fl,
"stdout");Y(new dl,"stderr");Y(new al,"disp");Y(new gl,"write");Y(new sl,"sread");Y(new hl,"writeb");Y(new il,"writec");Y(new ol,"readb");Y(new ql,"readc");Y(new bl,"flushout");Y(new $k,"close");Y(new cl,"force-close");Y(new Cl,"outfile");Y(new Al,"infile");Y(new wl,"dir-exists");Y(new yl,"file-exists");Y(new ul,"dir");Y(new Kl,"rmfile");Y(new Il,"mvfile");Y(new El,"make-directory");Y(new Gl,"make-directory*");Y(new jl,"instring");Y(new ll,"outstring");Y(new kl,"inside");Y(new Qj,"rainbow-debug");
Y(new Rj,"rainbow-profile");Y(new Sj,"rainbow-profile-report");var g=rc();D("*argv*").ta(m(f));D("call*").ta(yc());D("sig").ta(yc());Pl(g,d,(b.noLibs?[]:["arc","strings","lib/bag-of-tricks","rainbow/rainbow","rainbow/rainbow-libs"]).concat(b.f||[]),function(l){if(l)return void a(l);Ql(g,b.e||[],function(t){if(t)return void a(t);b.q?a():(xa("repl in "+((new Date).getTime()-c)+"ms"),Rl(g,a,void 0))})})}
function Nl(a){for(var b=[],c=0,d=a.length;c<d;c++){var f=a[c];if("[object String]"!==Object.prototype.toString.call(f))throw new TypeError;b.push(Oa(""+f))}return b}function Pl(a,b,c,d){function f(l){if(l===g)return void d();Sl(a,b,c[l],function(t){if(t)return void d(t);f(l+1)})}var g=c.length;f(0)}
function Ql(a,b,c){function d(M,aa){if(M)return void c(M);if(null===aa)return void c();Tl(a,aa,function(A){if(A)return void c(A);Pa(J,d,void 0)},void 0)}for(var f=[],g=0,l=b.length;g<l;g++){var t=b[g];if("[object String]"!==Object.prototype.toString.call(t))throw new TypeError;f.push(t+" ")}var J=qa(f.join("")).za();Pa(J,d,void 0)}
function Rl(a,b,c){wa("arc> ");for(var d=!0,f=!1;!f;)if(Pa(ja,function(g,l){if(g){if(!(g instanceof Fa))return void b(g);ya(g);d||Rl(a,b,c)}else null===l?(f=!0,d||b()):Tl(a,l,function(t){if(t)return void b(t);d||Rl(a,b,c)},c)||(d=!1)},c)||(d=!1),!d)return;b()}function Tl(a,b,c,d){return Ul(a,b,function(f,g){if(f){if(!(f instanceof za))return void c(f);xa("Message    : "+f.message);wa("Java stack : ");ya(f,ka)}else xa(g);c()},d)}
function Vl(a,b,c){function d(aa){if(aa===J)return void c(Error("Could not find "+b+" under "+JSON.stringify(a)));var A=f[aa];Wl(A,function(S,U){if(S)return void c(S);if(U)return void c(null,A);d(aa+1)})||(M=!1)}for(var f=[],g=a.length,l=0;l<g;l++){var t=""+a[l]+"/"+b;f.push(t,t+".arc")}var J=f.length,M=!0;d(0);return M}
function Sl(a,b,c,d){function f(l){pa(l,function(t,J){if(t)return void d(t);Xl(a,J,d,void 0)||(g=!1)},void 0)||(g=!1)}var g=!0;Wl(c,function(l,t){if(l)return void d(l);t?f(c):Vl(b,c,function(J,M){if(J)return void d(J);f(M)})||(g=!1)})||(g=!1);return g}function Xl(a,b,c,d){for(var f=!0,g=!1;f&&!g;)g=!0,Pa(b,function(l,t){if(l)return void c(l);if(null===t)return void c();Ul(a,t,function(J){if(J)return void c(J);f?g=!1:Xl(a,b,c)},d)||(f=!1)},d)||(f=!1);return f}function Yl(){}Yl.prototype=new Rf;
Yl.prototype.className="Console.Anon_mkVisitor_";Yl.prototype.fc=function(a){a.o(this.Ha)};function Ul(a,b,c,d){var f=new Zl;x(f);f.La=b;f.o(B("Console.compileAndEvalAsync_"));z(a,f);return sc(a,c,d)}function Zl(){}Zl.prototype=new I;Zl.prototype.className="Console.CompileAndEval";Zl.prototype.i=function(a){var b=new $l;x(b);b.o(B("Console.compileAndEvalAsync_"));z(a,b);ng(a,this.La,[])};function $l(){}$l.prototype=new I;$l.prototype.className="Console.AndEval";
$l.prototype.i=function(a){var b=N(a).reduce(),c=[];b.l(c);c=m(c);var d=c.v,f=new Yl;f.Ha=b;d.call(c,f);P(a,null,c)};function Wl(a,b){return oa(a,b,void 0)}function Ol(){}Ol.prototype=new X;Ol.prototype.className="NewThread";Ol.prototype.s=function(){throw h("Rainbow.js doesn't support new-thread.");};function am(){}am.prototype=new I;am.prototype.className="BindAndRun";function Th(a,b,c){var d=new am;x(d);d.va=a;d.B=b;d.o(c);return d}am.prototype.i=function(a){this.va.add(N(a));P(a,this.va,this.B)};Ta("window").ta(uc(window));da(window,"hashchange",function(){location.reload(!1)});
da(window,"load",function(){function a(){var A=J.value+"\n";J.value="";ea.wc.ib(A)}function b(A){if(void 0!==A.dd)return A.dd();for(var S=[],U=!0;U;)A.yc(function(n,w){if(n)throw n;null===w?U=!1:S.push(String.fromCharCode(w))},!0)||(U=!1);return S.join("")}function c(A){t.appendChild(document.createTextNode(A));aa||(aa=!0,setTimeout(function(){aa=!1;t.scrollTop=t.scrollHeight},0))}function d(A){if(A)throw A;A=b(ea.kb);""!==A&&(c(A),fa.wc.ib(A),ea.kb.vb(d))}function f(A){if(A)throw A;A=b(ha.kb);""!==
A&&(c(A),ha.kb.vb(f))}function g(A){if(A)throw A;A=b(ia.kb);""!==A&&(c(A),ia.kb.vb(g))}var l=document.getElementById("repl"),t=document.createElement("pre");t.className="scrollback";t.appendChild(document.createTextNode(""));l.appendChild(t);var J=document.createElement("textarea");J.className="prompt";da(J,"keydown",function(A){13===(A.which||A.keyCode)&&(A.preventDefault?A.preventDefault():A.returnValue=!1)});da(J,"keyup",function(A){13===(A.which||A.keyCode)&&a()});l.appendChild(J);var M=document.createElement("button");
M.className="eval";M.appendChild(document.createTextNode("Eval"));da(M,"click",function(){a()});l.appendChild(M);var aa=!1;ea.kb.vb(d);ha.kb.vb(f);ia.kb.vb(g);Ml(function(){})});
