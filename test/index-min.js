function f(b){throw b;}var i=void 0,k=!0,l=null,m=!1;function aa(){return function(b){return b}}function n(){return function(){}}function ba(b){return function(c){this[b]=c}}function o(b){return function(){return this[b]}}function p(b){return function(){return b}}var r;
function da(){function b(){if(0!==j.length){var c=j.shift(),d=q.shift();setTimeout(function(){d(c)},0);setTimeout(b,0)}}function c(b,c,s,ca){if(0!==d.length&&0===j.length){var ic=d[0];if(1===d.length&&("byte"===ic.type||ic.Ea.length<<1===g+1)){if(h)return c&&(d=[]),b(l,l),k;ca||(j.push(b),q.push(s));return m}var Na,s=0,ca=g,$=ic;if("byte"===$.type)s++,ic=$.Ea;else{$=$.Ea;Na=$.charCodeAt(ca>>>1);if(ca&1)return c&&(g++,$.length<<1<=g&&(d.shift(),g=0)),b(l,Na),k;ic=Na>>>8&255;ca++;$.length<<1<=ca&&(s++,
ca=0)}$=d[s];"byte"===$.type?(s++,Na=$.Ea):($=$.Ea,Na=$.charCodeAt(ca>>>1),Na=(ca&1?Na:Na>>>8)&255,ca++,$.length<<1<=ca&&(s++,ca=0));if(c){for(;s--;)d.shift();g=ca}b(l,ic<<8|Na);return k}if(h)return b(l,l),k;ca||(j.push(b),q.push(s));return m}var d=[],g=0,h=m,j=[],q=[],s={},F=s.nc=function(b,c){if(0!==d.length&&0===j.length){var s=d[0];if("byte"===s.type)d.shift(),b(l,s.Ea);else{var s=s.Ea,ca=s.charCodeAt(g>>>1),ca=(g&1?ca:ca>>>8)&255;g++;s.length<<1<=g&&(d.shift(),g=0);b(l,ca)}return k}if(h)return b(l,
l),k;c||(j.push(b),q.push(F));return m},L=s.oc=function(b,d){return c(b,k,L,d)},na=s.mb=function(b,d){return c(b,m,na,d)};s.close=n();s.$c=function(){var b=d.length,c=m,h,j=[],q=0;if(g&1){var s=d[0].Ea,c=k;h=s.charCodeAt(g>>>1)&255;g++;for(var $=g>>>1,F=s.length;$<F;$++){var Cb=s.charCodeAt($);j.push(String.fromCharCode(h<<8|Cb>>>8&255));h=Cb&255}g=0;q++}else g&&(j.push(d[0].Ea.substring(g>>>1)),g=0,q++);for(b=d.length;q<b;q++)if(s=d[q],"byte"===s.type)c?(j.push(String.fromCharCode(h<<8|s.Ea)),c=
m):(h=s.Ea,c=k);else if(s=s.Ea,c){$=0;for(F=s.length;$<F;$++)Cb=s.charCodeAt($),j.push(String.fromCharCode(h<<8|Cb>>>8&255)),h=Cb&255}else j.push(s);d=c?[{type:"byte",Ea:h}]:[];return j.join("")};return{Ya:s,mc:{bb:function(c){h||""===c||(d.push({type:"string",Ea:c}),b())},vc:function(c){h||(d.push({type:"byte",Ea:c}),b())},close:function(){h=k;b()},flush:n()}}}function ea(b,c,d){b.addEventListener?b.addEventListener(c,d,m):b.attachEvent("on"+c,d)}
var fa=da(),ga=da(),ha=da(),ia=da(),ja=ga.Ya,ka=ha.mc,la=ia.mc;function ma(b){b(t(new u,"No filesystem."));return k}function pa(b,c){c(l,m);return k}function qa(b,c,d){if(d)return c(t(new u,"Can't access the Web synchronously.")),k;d=new XMLHttpRequest;d.open("GET",b,k);d.onerror=function(){c(l,m)};d.onload=function(){c(l,k)};d.send(l);return m}
function ra(b,c,d){if(d)return c(t(new u,"Can't access the Web synchronously.")),k;var g=new XMLHttpRequest;g.open("GET",b,k);g.onerror=function(){c(t(new u,"Couldn't open page: "+b+" because of error: "+g.statusText))};g.onload=function(){c(l,(new sa).a(g.responseText).sa())};g.send(l);return m}function ta(b){b(t(new u,"No filesystem."));return k}function ua(b){b(t(new u,"No filesystem."));return k}function va(b){b(t(new u,"No filesystem."));return k}
function wa(b){b(t(new u,"No filesystem."));return k}function xa(b){b(t(new u,"No filesystem."));return k};function ya(b){ka.bb(""+b)}function za(b){ka.bb(""+b+"\n")}function Aa(b,c){i===c&&(c=la);for(c.bb(""+b+"\n"+(b.stack||b)+"\n");b instanceof u&&(b=b.fd);)b instanceof Ba&&(b=b.Da),c.bb("Caused by: "+b+"\n"+(b.stack||b)+"\n")}var v={};function Ca(){}Ca.prototype.a=function(){this.zc={};return this};Ca.prototype.get=function(b){return this.zc["rainbow_"+b]};Ca.prototype.put=function(b,c){return this.zc["rainbow_"+b]=c};function u(){}u.prototype=Error();
function t(b,c,d){b.message=c;b.stack=Error().stack;b.fd=d;b.yd=[];return b}function w(){}r=w.prototype;r.a=function(b,c){this.parent=c;this.jb=Array(~~b);this.Nb=0;return this};r.add=function(b){this.jb.length<=this.Nb&&f(t(new u,"Can't add "+b+" to bindings: already full ("+this.Nb+") "+x(this.jb)));this.jb[this.Nb]=b;this.Nb++};r.Fb=function(b){return 0===b?this:this.parent.Fb(b-1)};
r.toString=function(){for(var b=[],c=0;c<this.jb.length;c++)b.push(c),b.push(" : "),b.push(this.jb[c]),b.push("\n");return b.join("")+"\nparent: "+(this.parent===l?"<none>":this.parent.toString())};r.set=function(b,c){return this.jb[b]=c};r.Mb=o("Nb");r.size=function(){return this.jb.length};function Da(){}Da.prototype=Error();Da.prototype.a=function(){return this};function y(){}r=y.prototype;r.Ma=m;r.className="ArcObject";r.Ja=p(m);
r.h=function(){f(t(new u,"addInstructions not defined on "+this+", a "+this.className))};r.g=function(b,c){var d=Ea.value();d instanceof Fa||f(new TypeError);d=d.value(this.type());d instanceof z&&f(t(new u,"No handler for "+this.type()+" in call* table: called "+this+" with args "+c));d.g(b,A(new B,this,c))};r.wa=function(b){this.g(b,C)};r.t=function(b,c){this.g(b,A(new B,c,C))};r.U=function(b,c,d){this.g(b,A(new B,c,A(new B,d,C)))};r.Za=function(b,c,d,g){this.g(b,A(new B,c,A(new B,d,A(new B,g,C))))};
r.la=function(){f(t(new u,"len: expects one string, list or hash argument, got "+this.type()))};r.Xb=function(){f(t(new u,"Can't set car of "+this.type()))};r.rc=function(b,c){f(t(new u,"Can't sref "+this+"( a "+this.type()+"), other args were "+b+", "+c))};r.ta=p(0);r.wc=function(){return C};r.b=function(){f(t(new u,"Can't take car of "+this))};r.c=function(){f(t(new u,"Can't take cdr of "+this))};r.Ec=p(m);r.type=i;r.copy=function(){return this};r.sa=function(){return this};
r.Ia=function(b){return this===b};r.copyTo=aa();r.O=p(k);r.Eb=function(){f(new Ga)};r.Ra=function(){f(new Ha)};r.Zc=function(){return this};function Ia(b,c,d){for(var g=d,h=0;!(d instanceof z);)D(c,d.b()),d=d.c(),h++;E(c,(new Ja).a(g,c.N,b));d=(new Ka).a(h);d.m(b);E(c,d);d=(new La).a(b);d.m(b);E(c,d)}r.Cb=function(){f(t(new u,"has length: not a proper list: ends with "+this))};r.jc=function(){f(t(new u,"longer than: not a proper list: ends with "+this))};r.M=function(){return this};r.l=n();r.Y=function(){return this};
r.uc=n();r.ac=n();r.bc=function(){return C};r.Va=function(){return this.bc().toString()};r.add=function(){f(t(new u,"add not implemented for "+this.type()+" "+this))};r.sqrt=function(){f(t(new u,"sqrt not implemented for "+this.type()+" "+this))};r.multiply=function(){f(t(new u,"multiply not implemented for "+this.type()+" "+this))};function Ha(){}r.reduce=function(){return this};r.W=p(m);r.T=function(){return this};r.S=function(){return this};r.ia=p(m);r.eb=function(){return this.toString()};
r.Ca=function(){return this.hd||(this.hd=1+Math.random())};r.ua=function(b){return this===b};function Ma(b){var c=l;Oa((new sa).a(b).sa(),function(b,g){b&&f(b);c=g},k)||f((new Da).a());return c}
function Oa(b,c,d){function g(c){return b.mb(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))},d)}function h(c){return b.oc(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))})}function j(b){for(var c=k,d=m;c&&!d;)d=k,h(function(q,s){if(q)return void b(q);s===l||"\n"===s?b(l):"\r"===s?g(function(d,g){if(d)return void b(d);"\n"===g?h(function(c){if(c)return void b(c);b(l)})||(c=m):b(l)})||(c=m):(d=m,c||j(b))})||(c=m);return c}function q(b){for(var c=k,d=
m;c&&!d;)d=k,g(function(g,s){function F(g){if(g)return void b(g);d=m;c||q(b)}if(g)return void b(g);";"===s?j(F)||(c=m):s===l||/[^ \t\r\n]/.test(s)?b(l):h(F)||(c=m)})||(c=m);return c}function s(b,c){function d(g){var h=b.length-1,j=b[h];b="string"===typeof g&&j instanceof Pa?b.slice(0,h).concat([G(j.value()+g)]):"string"===typeof g?b.concat([G(g)]):b.concat([g]);L=m;Y||s(b,c)}function j(b){b===i&&(b=(new Da).a());c(b)}function F(){Pf(function(b,c){if(b)return j(b);q(function(b){if(b)return j(b);h(function(b,
g){if(b)return j(b);")"===g?d(c):j()})||(Y=m)})||(Y=m)})||(Y=m)}for(var Y=k,L=m;Y&&!L;)L=k,h(function(s,q){if(s)return j(s);q===l?j():'"'===q?c(l,b):"\\"===q?h(function(b,c){if(b)return j(b);'"'===c?d('"'):"\\"===c?d("\\"):"n"===c?d("\n"):"r"===c?d("\r"):"t"===c?d("\t"):"#"===c?h(function(b,c){if(b)return j(b);"("===c?d("#("):j()})||(Y=m):j()})||(Y=m):"#"===q?g(function(b,c){if(b)return j(b);if("("!==c)return void d("#");h(function(b){if(b)return j(b);F()})||(Y=m)})||(Y=m):d(q)})||(Y=m);return Y}
function F(b,c){function d(b){c(l,Qa(b))}for(var j=k,q=m;j&&!q;)q=k,g(function(g,s){if(g)return void c(g);s===l||/[^01-9a-zA-Z]/.test(s)?"newline"===b?d(10):"tab"===b?d(9):"space"===b?d(32):"return"===b?d(13):"null"===b?d(0):/^[01-9][01-9]+$/.test(b)?d(parseInt(b,10)):/^u[0-9a-f]+$/i.test(b)?d(parseInt(b.substring(1),16)):1===b.length?d(b.charCodeAt(0)):c((new Da).a()):h(function(d,g){if(d)return void c(d);q=m;b+=g;j||F(b,c)})||(j=m)})||(j=m);return j}function L(b,c){for(var d=k,j=m;d&&!j;)j=k,g(function(g,
q){if(g)return void c(g);if(q===l||/[^01-9a-fA-F]/.test(q)){if(""===b)return void c((new Da).a());c(l,H(parseInt(b,16)))}else h(function(g,h){if(g)return void c(g);j=m;b+=h;d||L(b,c)})||(d=m)})||(d=m);return d}function na(b,c){for(var d=k,g=m;d&&!g;)g=k,h(function(h,j){if(h)return void c(h);j===l?c((new Da).a()):"|"===j?c(l,Ra(b)):(g=m,b+=j,d||na(b,c))})||(d=m);return d}function Y(b,c,d){for(var j=k,s=m;j&&!s;)s=k,q(function(q){if(q)return void d(q);g(function(g,q){if(g)return void d(g);q===l?d((new Da).a()):
q===c?h(function(c){if(c)return void d(c);d(l,b)})||(j=m):Pf(function(g,h){if(g)return void d(g);s=m;b=b.concat([h]);j||Y(b,c,d)})||(j=m)})||(j=m)})||(j=m);return j}function bb(b,c){for(var d=k,j=m;d&&!j;)j=k,g(function(g,q){if(g)return void c(g);var s=q!==l&&q.charCodeAt(0);if(q!==l&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(q)||128<=s&&65536>s))h(function(g,h){if(g)return void c(g);j=m;b+=h;d||bb(b,c)})||(d=m);else if("\\"===q)h(function(g){if(g)return void c(g);h(function(g,h){if(g)return void c(g);
"|"===h?(j=m,b+="\\|",d||bb(b,c)):c((new Da).a())})||(d=m)})||(d=m);else{var Y;/^-?[01-9]+\/[01-9]+$/.test(b)?c(l,Sa(b)):/^-?[01-9]+$/.test(b)?c(l,H(parseInt(b,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)?c(l,Ta(parseFloat(b))):"+inf.0"===b?c(l,(new I).a(1/0)):"-inf.0"===b?c(l,(new I).a(-1/0)):"+nan.0"===b?c(l,(new I).a(0/0)):"+i"===b?c(l,(new J).a(0,1)):"-i"===b?c(l,(new J).a(0,-1)):(Y=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(b))?c(l,(new J).a(Ta(parseFloat(Y[1])).value(),
Ta(parseFloat(Y[2]+(Y[3]||"1"))).value())):c(l,Ra(b))}})||(d=m);return d}function Pf(b){function c(){s([],function(c,d){if(c)return void b(c);0===d.length?b(l,G("")):1===d.length?b(l,d[0]):b(l,x([Ra("string")].concat(d)))})||(oa=m)}function d(){na("",function(c,d){if(c)return void b(c);b(l,Ra(d))})||(oa=m)}function j(){h(function(c,d){if(c)return void b(c);d!==l&&/x/i.test(d)?L("",b)||(oa=m):"\\"===d?h(function(c,d){if(c)return void b(c);if(/[^a-zA-Z]/.test(c))return void b(l,Qa(c.charCodeAt(0)));
F(d,b)||(oa=m)})||(oa=m):b((new Da).a())})||(oa=m)}function Qf(c){Pf(function(d,g){if(d)return void b(d);g===l?b((new Da).a()):b(l,x([K(c),g]))})||(oa=m)}function Cb(){g(function(c,d){if(c)return void b(c);d===l?b((new Da).a()):"@"===d?h(function(c){if(c)return void b(c);Qf("unquote-splicing")})||(oa=m):Qf("unquote")})||(oa=m)}function xk(){Y([],")",function(c,d){if(c)return void b(c);if(0===d.length)b(l,Ua);else{try{var g=d===l||0===d.length?C:d[0]===Va?Wa(d):A(new B,d[0],Xa(d.slice(1)))}catch(h){return void b(h)}b(l,
g)}})||(oa=m)}function yk(){Y([],"]",function(c,d){if(c)return void b(c);b(l,x([K("fn"),x([K("_")]),x(d)]))})||(oa=m)}var oa=k;q(function(g){if(g)return void b(g);h(function(g,h){if(g)return void b(g);h===l?b(l,l):'"'===h?c():"|"===h?d():"#"===h?j():"'"===h?Qf("quote"):","===h?Cb():"`"===h?Qf("quasiquote"):"("===h?xk():"["===h?yk():bb(h,b)||(oa=m)})||(oa=m)})||(oa=m);return oa}return Pf(c)}function M(){}M.prototype=new y;r=M.prototype;r.className="Symbol";
function Ya(b,c,d){b.ea=c;b.od=d;b.jd=c;b.k=l;b.Bb=l;return b}r.h=function(b){b.push((new Za).a(this))};function K(b){var c=Ra(b);if(c instanceof M)return c;f(t(new u,"can't make symbol from \""+b+'"'))}
function Ra(b){if("t"===b)b=$a;else if("nil"===b)b=C;else{var c;if(!(c=ab.test(b))){a:if(/^-?[01-9]+\/[01-9]+$/.test(b)||/^-?[01-9]+$/.test(b)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)||"+inf.0"===b||"-inf.0"===b||"+nan.0"===b||"+i"===b||"-i"===b||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(b)||/\\(?!\|)/.test(b))c=k;else{c=0;for(var d=b.length;c<d;c++){var g=b.charCodeAt(c);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(b.charAt(c))||128<=g&&65536>
g)){c=k;break a}}c=m}c=c||"."===b}b=c?cb(b,"|"+b+"|"):db.test(b)?cb(b.replace(/\\\|/g,"|"),b):cb(b,b)}return b}r.eb=o("ea");r.toString=o("od");function cb(b,c){if("rainbow_"+b in eb.zc)return eb.get(b);var d=Ya(new M,b,c);eb.put(b,d);return d}r.name=o("ea");r.ta=function(b){b instanceof M||f(new TypeError);return this.ea.localeCompare(b.name)};r.type=function(){return fb};r.sa=function(){return this.name()};r.Ca=o("jd");r.ua=function(b){return this===b};
function gb(b,c){return c instanceof M&&c.name()===b}r.ha=function(b){var c=this.k;this.k=b;c!==l&&c.uc(this);b.ac(this)};r.value=function(){this.k===l&&f(t(new u,"Symbol "+this.ea+" is not bound"));return this.k};r.bound=function(){return this.k!==l};function hb(b,c){try{return b instanceof M||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a Symbol, got "+b))}}function ib(b,c,d){if(b.Bb===l)b.Bb={};b.Bb[c.name()]=d}
var eb=(new Ca).a(),ab=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,db=/.*\\\|/,fb=K("sym"),Va=K("."),jb=K("!");function B(){}B.prototype=new y;r=B.prototype;r.className="Pair";function A(b,c,d){c===l&&f(t(new u,"Can't create Pair with null car: use NIL instead"));d===l&&f(t(new u,"Can't create Pair with null cdr: use NIL instead"));b.cb=c;b.ob=d;return b}r.g=function(b,c){var d=kb(c.b(),this);D(b,this.Fb(d.I()).b())};r.wc=o("cb");r.b=o("cb");r.c=o("ob");r.Ra=function(){this.cb!==l&&f(new Ha)};r.O=p(m);
r.Xb=function(b){return this.cb=b};r.rc=function(b,c){return this.Fb(lb(c,this).I()).Xb(b)};r.Ec=function(b){return b===this.cb};r.toString=function(){if(this.b()instanceof M&&this.b().name()in mb&&this.c()instanceof B&&1===this.c().size()){var b=this.b(),b=mb[b.name()],c=this.c();c instanceof B||f(new TypeError);return b+nb(c)}return"("+nb(this)+")"};function nb(b){for(var c=[];!b.O();)c.push(b.b()),b.c().O()||c.push(" "),b=b.c();b instanceof z||c.push(" . ",b);return c.join("")}r.Lc=ba("ob");
function Xa(b){if(0===b.length)return C;if(b[0]===Va)return 2===b.length?(b=b[1],b instanceof y||f(new TypeError),b):Wa(b);var c=b[0];c instanceof y||f(new TypeError);return A(new B,c,Xa(b.slice(1)))}function Wa(b){f(t(new u,'Error: illegal use of "." in '+b))}function ob(b,c,d){if(d===b.length)return c;var g=b[d];g instanceof y||f(new TypeError);return A(new B,g,ob(b,c,d+1))}function pb(b,c){return b===l||0===b.length?c:ob(b,c,0)}function x(b){return pb(b,C)}r.type=function(){return qb};r.la=function(){return this.size()};
r.size=function(){if(this instanceof z)return 0;for(var b=1,c=this.ob;!(c instanceof z);)c.O()&&f(t(new u,"cannot take size: not a proper list: "+this)),b++,c=c.c();return b};r.ta=function(){f(t(new u,"Pair.compareTo:unimplemented"))};r.copyTo=function(b){b.push(this.b());if(this.c()instanceof z)return b;this.c()instanceof B||f(t(new u,"Not a list: "+this));this.c().copyTo(b);return b};
r.ua=function(b){if(this===b)return k;var c=this instanceof z;b instanceof y||f(new TypeError);var d=b instanceof z;if(c!==d)return m;if(c&&d)return k;return b instanceof B?(c=b.cb.ua(this.cb),b=b.ob.ua(this.ob),c&&b):m};r.Ca=function(){return this.b().Ca()+this.c().Ca()};r.Fb=function(b){try{for(var c,d=this,g=b;0<g;)d.c()instanceof z&&f((new rb).a()),d=d.c(),g--;c=d;c instanceof B||f(new TypeError);return c}catch(h){h instanceof rb||f(e),f(t(new u,"Error: index "+b+" too large for list "+this))}};
r.Cb=function(b){return this.c().Cb(b-1)};r.jc=function(b){return 0>b||this.c().jc(b-1)};r.Va=function(){return"ref:"+this.type().toString()};function rb(){}rb.prototype=Error();rb.prototype.a=function(){return this};r=B.prototype;r.copy=function(){return this instanceof z?this:A(new B,this.b(),this.c().copy())};r.sa=function(){var b=[];sb(b,this);return b};r.Ia=function(b){return y.prototype.Ia.call(this,b)||this instanceof z&&b instanceof z};
function sb(b,c){if(!(c instanceof z)){b.push(c.b().sa());var d=c.c();d instanceof B||f(new TypeError);sb(b,d)}}function tb(b){var c=Array(~~b.size());ub(b,c,0);return c}function ub(b,c,d){if(d<c.length)c[d]=b.cb,b=b.ob,b instanceof B||f(new TypeError),b instanceof z||ub(b,c,d+1)}function vb(b,c){try{return b instanceof B||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a cons, got "+b))}}r.Eb=n();
r.add=function(b){if(b instanceof B){var c=[];this.copyTo(c);b.copyTo(c);return x(c)}f(t(new u,"+ : expects cons, got "+b.type()+" "+b))};r.l=function(b){b.za(this);for(var c=this;!c.O();)c.b().l(b),c=c.c();c instanceof z||c.l(b);b.La(this)};function Ga(){}var qb=K("cons"),mb={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function z(){}z.prototype=new B;r=z.prototype;r.className="Nil";function wb(b){var c=new z;c.cb=c.ob=l;c.xb=b;return c}r.h=function(b){b.push((new La).a(xb))};
r.g=function(b,c){f(t(new u,"Function dispatch on inappropriate object: "+this+" with args "+c))};r.Eb=n();r.Ja=p(k);r.la=p(0);r.O=p(k);r.Ra=n();r.toString=o("xb");r.wc=function(){return this};r.b=function(){return this};r.c=function(){return this};r.Ec=p(m);r.Lc=function(){f(Error("can't set the cdr of "+this))};r.size=p(0);r.copyTo=aa();r.type=function(){return yb};r.Ca=p("nil");r.ua=function(b){if(this===b)return k;b instanceof y||f(new TypeError);return b instanceof z};r.sa=p(m);
r.Ia=function(b){return b instanceof z};r.Zc=aa();r.Cb=function(b){return 0===b};r.jc=function(b){return 0>b};var yb=fb,xb=wb("nil"),zb=wb("()");function Ab(){}var Bb={};Ab.prototype=new M;r=Ab.prototype;r.className="Truth";r.Ja=p(k);r.h=function(b){b.push((new La).a(Db))};r.toString=p("t");r.ta=function(){f(t(new u,"Truth.compareTo:unimplemented"))};r.type=function(){return fb};function Eb(b){return b?Db:C}r.Ca=p("t");r.ua=function(b){return this===b};r.sa=p(k);r.ha=function(){f(t(new u,"error: can't rebind t!"))};
r.value=function(){return this};var Db=Ya(new Ab,"t","t");function N(){}N.prototype=new y;r=N.prototype;r.Pb=m;r.hc=m;r.pa=m;r.Fa=m;r.className="Instruction";function O(b){b.xa=l;return b}r.type=function(){return K("instruction")};r.gb=function(){return this.toString()};r.toString=function(){return"("+this.className+")"};r.d=i;r.m=ba("xa");r.l=function(b){b.Zb(this)};function Ja(){}Ja.prototype=new N;r=Ja.prototype;r.hc=k;r.className="ArcObject.ConvertError";
r.a=function(b,c,d){O(this);this.nd=b;this.Kb=c;this.m(d);return this};r.yc=function(b){return b instanceof Error};r.d=function(b){var c=b.error();if(c!==l)b.Xa=l,b.N=this.Kb,f(t(new u,"error invoking "+this.xa+" with args "+this.nd+": "+c,c))};var Ea=K("call*"),C=xb,Ua=zb,$a=Db;function Fb(){}Fb.prototype=new y;Fb.prototype.className="LiteralObject";Fb.prototype.Ja=p(k);Fb.prototype.h=function(b){b.push((new La).a(this))};Fb.prototype.Va=function(){return"ref:"+this.type().toString()};
function Gb(){}Gb.prototype=new Fb;r=Gb.prototype;r.className="ArcCharacter";function Hb(b,c){b.k=c;return Ib[c]=b}function Qa(b){return Ib[b]===i?Hb(new Gb,b):Ib[b]}r.Ja=p(k);r.toString=function(){return"#\\"+String.fromCharCode(this.k)};r.ta=function(b){b instanceof Gb||f(new TypeError);return this.k-other.k};r.type=function(){return Jb};r.sa=function(){return this.value()};r.value=o("k");r.eb=function(){return String.fromCharCode(this.k)};r.Ca=function(){return this.eb()};
r.ua=function(b){return this===b||b instanceof Gb&&b.k===this.k};function Kb(b,c){try{return b instanceof Gb||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a character, got "+b))}}var Jb=K("char"),Ib=Array(65536);function Lb(){}Lb.prototype=new Gb;Lb.prototype.className="ArcCharacter.Anon_NULL_";Lb.prototype.a=function(){return Hb(this,0)};Lb.prototype.toString=p("#\\null");var Mb=(new Lb).a();function Nb(){}Nb.prototype=new Gb;
Nb.prototype.className="ArcCharacter.Anon_named_1_";Nb.prototype.a=function(){return Hb(this,10)};Nb.prototype.toString=p("#\\newline");function Ob(){}Ob.prototype=new Gb;Ob.prototype.className="ArcCharacter.Anon_named_2_";Ob.prototype.a=function(){return Hb(this,9)};Ob.prototype.toString=p("#\\tab");function Pb(){}Pb.prototype=new Gb;Pb.prototype.className="ArcCharacter.Anon_named_3_";Pb.prototype.a=function(){return Hb(this,13)};Pb.prototype.toString=p("#\\return");function Qb(){}Qb.prototype=new Gb;
Qb.prototype.className="ArcCharacter.Anon_named_4_";Qb.prototype.a=function(){return Hb(this,32)};Qb.prototype.toString=p("#\\space");(new Nb).a();(new Ob).a();(new Pb).a();(new Qb).a();function Pa(){}Pa.prototype=new Fb;r=Pa.prototype;r.className="ArcString";r.a=function(b){this.k=b;return this};
r.g=function(b,c){Rb(c,this.className,1);var d=lb(c.b(),this);d.na()||f(t(new u,"string-ref: expects exact integer: got "+d));d=~~d.I();0<=d||d<this.value.length()||f(t(new u,"string-ref: index "+d+" out of range [0, "+(this.k.length-1)+"] for string "+this.toString()));D(b,Qa(this.k.charCodeAt(d)))};r.value=o("k");r.eb=o("k");
r.toString=function(){var b=this.k,c=[];c.push('"');for(var d=0;d<b.length;d++)switch(b.charAt(d)){case '"':c.push('\\"');break;case "\\":c.push("\\\\");break;case "\n":c.push("\\n");break;case "\r":c.push("\\r");break;default:c.push(b.charAt(d))}c.push('"');return c.join("")};r.ta=function(b){b instanceof Pa||f(new TypeError);return this.k.localeCompare(b.k)};r.la=function(){return this.k.length};r.Xb=function(b){var c=[Kb(b,this).eb()];c.push(this.value().substring(1));this.ha(c.join(""));return b};
r.rc=function(b,c){var d=Kb(b,Gb),g=lb(c,this),g=g.I();0<=g&&g<this.k.length||f(new RangeError);this.k=this.k.substring(0,g)+String.fromCharCode(d.value())+this.k.substring(g+1);return b};r.type=function(){return Sb};r.sa=function(){return this.value()};function G(b){return(new Pa).a(b)}r.ha=ba("k");r.Ca=o("k");r.ua=function(b){return this===b||b instanceof Pa&&b.k===this.k};r.Ia=function(b){return this.ua(b)};
r.add=function(b){var c=[this.k];if(!(b instanceof Pa)){var d=b.type();d instanceof M||f(new TypeError);d=Tb.Bb[d]||l;d instanceof Ub||f(new TypeError);b=d.Lb(b);b instanceof Pa||f(new TypeError)}c.push(b.value());return G(c.join(""))};function Vb(b,c){try{return b instanceof Pa||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a string, got "+b))}}var Sb=K("string");function Ba(){}Ba.prototype=new Fb;r=Ba.prototype;r.className="ArcException";
r.a=function(b,c,d){this.vb=c;this.Da=b;this.sd=d;return this};r.type=function(){return Wb};r.message=function(){return this.Da!==l?G(this.Da.message):Xb};r.toString=function(){return this.message().toString()};var Wb=K("exn"),Xb=G("no message");function P(){}P.prototype=new Fb;r=P.prototype;r.className="ArcNumber";r.na=i;r.F=i;r.I=i;r.tb=i;r.round=i;r.pc=function(){f(t(new u,"round[closest] not implemented for "+this.className+"("+this+")"))};r.Ja=p(k);
r.ta=function(b){b instanceof P||f(new TypeError);b=b.F()-this.F();return 0>b?1:0===b?0:-1};r.type=function(){return this.na()?Yb:Zb};r.Ia=function(b){return this.ua(b)};function kb(b,c){try{return b instanceof P||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a number, got "+b))}}r.Wc=function(){f(t(new u,"mod: not implemented for "+this.className+"("+this+")"))};var Yb=K("int"),Zb=K("num");function $b(){}$b.prototype=new Fb;r=$b.prototype;
r.className="ArcThreadLocal";r.a=function(){this.k=l;return this};r.set=ba("k");r.get=o("k");r.type=function(){return ac};function bc(b,c){try{return b instanceof $b||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a thread-local, got "+b))}}var ac=K("thread-local");function J(){}J.prototype=new P;r=J.prototype;r.className="Complex";r.a=function(b,c){this.X=b;this.P=c;return this};
function cc(){var b;if("+i"===soFar)return(new J).a(0,1);if("-i"===soFar)return(new J).a(0,-1);if(b=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(soFar))return(new J).a(Ta(parseFloat(b[1])).value(),Ta(parseFloat(b[2]+(b[3]||"1"))).value());f((new Da).a())}r.na=function(){return 0===this.P&&Math.floor(this.X)===real};r.F=function(){f(t(new u,"Cannot convert complex to double"))};r.I=function(){f(t(new u,"Cannot convert complex to int"))};
r.tb=function(){return(new J).a(-this.X,-this.P)};r.toString=function(){return(new I).a(this.X).toString()+(0>this.P?"":"+")+(new I).a(this.P).toString()+"i"};function dc(b,c){try{return b instanceof J||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a complex number, got "+b))}}r.round=function(){return t(new u,"Can't convert "+this+" to integer")};function ec(b){var c=argument.F();return(new J).a(b.X*c,b.P*c)}
r.multiply=function(b){if(b instanceof J)return fc(this,b);b instanceof P||f(new TypeError);b=b.F();return(new J).a(this.X*b,this.P*b)};function fc(b,c){var d=b.X,g=c.X,h=b.P,j=c.P;return(new J).a(d*g-h*j,d*j+g*h)}r.add=function(b){if(b instanceof J)return(new J).a(this.X+b.X,this.P+b.P);if(b instanceof Q||b instanceof I)return(new J).a(this.X+b.F(),this.P);f(t(new u,"+: expects a number, got "+b.type()+" "+b))};
r.log=function(){return(new J).a(Math.log(Math.sqrt(this.X*this.X+this.P*this.P)),Math.atan2(this.P,this.X))};function gc(b,c){var d;if(c instanceof J)d=fc(b.log(),c).exp();else{d=b.log();var g=c.F();d=(new J).a(d.X*g,d.P*g).exp()}return d}r.sqrt=function(){return gc(this,Ta(0.5))};r.exp=function(){var b=Math.exp(this.X);return(new J).a(b*Math.cos(this.P),b*Math.sin(this.P))};r.ta=function(){f(t(new u,"Compare: complex numbers are unordered and cannot be compared"))};
r.Ia=function(b){return b instanceof J?b.X===this.X&&b.P===this.P:b instanceof P&&0===this.P&&b.F()===this.X};(new J).a(0,0);function Q(){}Q.prototype=new P;r=Q.prototype;r.className="Rational";r.a=function(b,c){0===c&&0!==b&&f(t(new u,"/: division by zero"));var d=hc(this,b,c);this.fa=b/d;this.R=c/d;return this};function Sa(b){b=b.split("/");return(new Q).a(parseInt(b[0],10),parseInt(b[1],10))}function H(b){return(new Q).a(b,1)}r.toString=function(){return this.fa+(1===this.R?"":"/"+this.R)};
r.na=function(){return 1===this.R};r.F=function(){return this.fa/this.R};r.I=function(){if(0===this.fa)return 0;var b=this.fa/this.R;return 0>b?Math.ceil(b):Math.floor(b)};function hc(b,c,d){return 0===d?c:hc(b,d,c%d)}r.Wc=function(b){(!this.na()||!b.na())&&f(t(new u,"modulo: expects integer, got ("+this+" "+b+")"));var b=b.I(),c=this.fa%b;0>c&&(c+=b);return H(c)};function jc(b,c){return(new Q).a(b.fa*c.fa,b.R*c.R)}r.Ub=function(b){return(new Q).a(this.fa*b.R+b.fa*this.R,this.R*b.R)};
r.tb=function(){return(new Q).a(-this.fa,this.R)};r.sa=function(){return this.na()?this.I():this.F()};r.Ca=function(){return this.na()?this.I():this.F()};r.Ca=function(){return 37*this.fa+this.R+""};r.ua=function(b){return b instanceof Q&&this.fa===b.fa&&this.R===b.R};function lb(b,c){try{return b instanceof Q||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected a Rational, got "+b))}}
r.round=function(){if(1===this.R)return this;if(2===this.R){var b=this.fa/this.R,b=0>b?Math.ceil(b):Math.floor(b);return H(b+(1===b%2?1:0))}return H(Math.round(this.fa/this.R))};r.pc=function(){return 1===this.R?this:H(Math.round(this.fa/this.R))};r.stringify=function(b){var c=this.fa.toString(b.I());if(this.na())return G(c);b=this.R.toString(b.I());return G(c+"/"+b)};r.sqrt=function(){var b=Math.sqrt(this.fa/this.R);return Math.floor(b)===b?H(b):Ta(b)};
r.multiply=function(b){if(b instanceof J)return ec(b);if(b instanceof I)return Ta(b.k*this.F());if(b instanceof Q)return jc(this,b);f(t(new u,"*: expects a number, got "+b.type()+" "+b))};r.add=function(b){if(b instanceof J)return(new J).a(b.X+this.F(),b.P);if(b instanceof I)return b.Ub(this);if(b instanceof Q)return this.Ub(b);f(t(new u,"+: expects a number, got "+b.type()+" "+b))};var kc=H(0),lc=H(1),mc=H(10);function I(){}I.prototype=new P;r=I.prototype;r.className="Real";
r.a=function(b){this.k=b;return this};function Ta(b){return(new I).a(b)}r.toString=function(){return this.k===-1/0?"-inf.0":this.k===1/0?"+inf.0":this.k!==this.k?"+nan.0":""+this.k};r.sa=function(){this.na();return this.value()};r.type=function(){return Zb};r.value=o("k");r.na=function(){return Math.floor(this.k)===this.k};r.F=o("k");r.I=function(){return 0>this.k?Math.ceil(this.k):Math.floor(this.k)};r.tb=function(){return Ta(-this.k)};r.Ca=function(){return""+this.k};
r.ua=function(b){return b instanceof J?b.Ia(this):this===b||b instanceof I&&this.k===b.k};r.round=function(){var b=Math.round(this.k);return 0.5===Math.abs(this.k-b)&&1==b%2?b<this.k?H(b+1):H(b-1):H(b)};r.pc=function(){return H(Math.round(this.k))};r.Ub=function(b){return Ta(this.k+b.F())};r.sqrt=function(){return Ta(Math.sqrt(this.k))};r.multiply=function(b){if(b instanceof J)return ec(b);if(b instanceof P)return Ta(this.k*b.F());f(t(new u,"*: expects a number, got "+b.type()+" "+b))};
r.add=function(b){if(b instanceof J)return(new J).a(b.X+this.F(),b.P);if(b instanceof Q||b instanceof I)return this.Ub(b);f(t(new u,"+: expects a number, got "+b.type()+" "+b))};function nc(){}nc.prototype=new Fb;r=nc.prototype;r.className="Tagged";r.a=function(b,c){this.Ib=b;this.xb=c;return this};r.g=function(b,c){var d=Ea.value();d instanceof Fa||f(new TypeError);return d.value(this.Ib).g(b,A(new B,this.xb,c))};r.ta=p(0);r.type=o("Ib");
function oc(b){return b instanceof nc&&"mac"===b.Ib.toString()?b.xb:l}r.toString=function(){return pc(this)};function pc(b){if(!qc.bound())return"#<tagged "+b.Ib+" "+b.xb+">";var c=qc.value();c instanceof Fa||f(new TypeError);c=c.value(b.Ib);if(c instanceof z)return"#<tagged "+b.Ib+" "+b.xb+">";b=(new rc).a();c.g(b,x([rep]));var d;sc(b,function(b,c){b&&f(b);d=c},k)||f(t(new u,"An asynchronous operation was attempted during a toString()."));return""+tc(d)}var qc=K("tagged-writers");
function uc(){}uc.prototype=new Fb;r=uc.prototype;r.className="JsObject";r.a=function(b){this.Hc=b;return this};r.type=function(){return vc};r.sa=o("Hc");r.toString=function(){return""+this.Hc};function wc(b){var c=[];xc(c,b);return c}function xc(b,c){b.push(tc(c.b()));if(!(c.c()instanceof z)){var d=c.c();d instanceof B||f(new TypeError);xc(b,d)}}function tc(b){return b.sa()}
function yc(b){if(b===l)return C;if(b instanceof y)return b;var c=Object.prototype.toString.call(b);if("[object Number]"===c)return b*=1,b===Math.floor(b)?H(b):Ta(b);if("[object String]"===c)b=G(""+b);else if("[object Array]"===c||"[object Arguments]"===c){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=yc(b[d]);b=x(c)}else b="[object Boolean]"===c?b?$a:C:(new uc).a(b);return b}r.close=function(){f(t(new u,"close: unexpected object: "+this))};var vc=K("java-object");function Fa(){}
Fa.prototype=new Fb;r=Fa.prototype;r.className="Hash";r.a=function(){this.ea=C;this.kc=(new Ca).a();this.rb=this.gc=l;this.lc=new zc;this.Vc=0;return this};r.uc=function(b){if(this.ea===b)this.ea=C,this.lc=new zc};r.ac=function(b){this.ea=b;this.lc=(new Ac).a(this)};r.bc=o("ea");r.g=function(b,c){D(b,this.value(c.b()).Zc(c.c().b()))};r.toString=function(){return"#hash"+Bc(this)};
function Bc(b){for(var c=[],d=b.gc;d!==l;d=d.next){var g=d.key,g=A(new B,g,A(new B,b.value(g),C));c.push(g)}return pb(c,Ua)}r.la=function(){return this.size()};
r.rc=function(b,c){if(b instanceof z){var d=this.value(c),g=this.kc.get(c.Ca());if(g)for(var h=0,j=g.length;h<j;h++){var q=g[h];if(c.ua(q.key)){g.splice(h,1);if(q.Wb)q.Wb.next=q.next;if(q.next)q.next.Wb=q.Wb;if(this.gc===q)this.gc=q.next;if(this.rb===q)this.rb=q.Wb;this.la--;break}}this.lc.Nc(d,c)}else{d=c.Ca();d=this.kc.get(d)||this.kc.put(d,[]);g=l;h=0;for(j=d.length;h<j;h++)if(q=d[h],c.ua(q.key)){g=q;break}g===l?(g=this.rb,this.rb={key:c,value:b,Wb:g,next:l},g===l?this.gc=this.rb:g.next=this.rb,
d.push(this.rb),this.Vc++):g.value=b;this.lc.name(b,c)}return b};r.value=function(b){var c=this.kc.get(b.Ca());if(!c)return C;for(var d=0,g=c.length;d<g;d++){var h=c[d];if(b.ua(h.key))return h.value}return C};r.ta=p(0);r.type=function(){return Cc};r.size=o("Vc");function Dc(){}Dc.prototype.name=i;Dc.prototype.Nc=i;function Ac(){}Ac.prototype=new Dc;Ac.prototype.a=function(b){this.bd=b;return this};Ac.prototype.name=function(b,c){b.ac(A(new B,c,this.bd))};
Ac.prototype.Nc=function(b,c){b.uc(A(new B,c,this.bd))};function zc(){}zc.prototype=new Dc;zc.prototype.name=n();zc.prototype.Nc=n();var Cc=K("table");function rc(){}rc.prototype=new y;r=rc.prototype;r.className="VM";r.a=function(){this.Mc=Ec++;this.ba=Array(100);this.N=-1;this.ra=[];this.ka=Array(100);this.G=Array(100);this.i=-1;this.Xa=this.Ob=this.s=l;this.qb=Fc;this.ec=m;this.Ha=0;this.ab=l;this.Qc=0;this.vb=l;return this};
function sc(b,c,d){var g=b.Ha;b.Ha=b.i;var h=Gc(b,function(){b.Ha=g;if(b.Xa===l)b.qb.end(b),c(l,R(b));else{var d=b.Xa;b.Xa=l;var h=d.sd,s="\nAt instruction "+d.vb;if(h!==l)for(var F=0,L=h.length;F<L;F++)s+="\n"+h[F].Va();c(t(new u,"Unhandled exception on thread#"+b.Mc+": "+d.Da.message+s,d.Da))}},d);if(d&&!h)b.Ha=g;return h}
function Gc(b,c,d){function g(){for(;h.Ha<=h.i;)try{if(h.G[h.i]instanceof z)h.i--;else{h.s=h.ka[h.i];h.Ob=h.ra[h.i];var b=h.G[h.i].b();b instanceof N||f(new TypeError);h.vb=b;var s=h.G[h.i].c();s instanceof B||f(new TypeError);h.G[h.i]=s;if(h.vb.Fa){var F=k,F=h.vb.Na(h,function(b){b?Hc(h,b):h.qb.kb(h);F||g()},d);if(!F){j=m;return}}else h.vb.d(h),h.qb.kb(h)}}catch(L){Hc(h,L)}c()}b.qb.kb(b);var h=b,j=k;g();return j}
function Hc(b,c){for(var d=[],g=[],h=[];b.Ha<=b.i;){var j=Ic(b).b();if(j.hc&&j.yc(c))break;j=Ic(b).b();j.Pb&&(g.push(Ic(b)),h.push(b.ka[b.i]));if(j instanceof N)j=Ic(b).b().xa,j!==l&&d.push(j);b.i--}b.Xa=(new Ba).a(c,b.vb,d);for(d=g.length-1;0<=d;d--)S(b,h[d],g[d])}r.error=o("Xa");
r.show=function(){za("Thread Dump for thread#"+threadId);za(""+(this.N+1)+" args");for(var b=5<this.N?this.N-5:0;b<this.N+1;b++)za(""+b+". "+this.ba[b]);za();b=this.i+1;if(this.G[this.i]instanceof z)b=this.i;za(""+b+" instruction frames");for(var b=20<this.i?this.i-20:0,c=this.i;b<=c;c--)if(!(this.G[c]instanceof z)){var d=this.G[c],g=this.ka[c],h=this.ra[c];for(ya("\nInstruction Frame "+c+":");!(d instanceof z);){var j=d.b();j instanceof N||f(new TypeError);d=d.c();newInstructions instanceof B||f(new TypeError);
ya(j.gb(g));ya(" ")}ya("[");j=0;for(d=h.length;j<d;j++)ya(""+h[j]+" ");ya("]");ka.bb("\n")}};function E(b,c){b.Ha<=b.i&&Ic(b)instanceof z||(b.i++,0<=b.i&&b.i<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ka.length),Lc(b,2*b.ra.length)));b.G[b.i]=A(new B,c,C)}function S(b,c,d){b.Ha<=b.i&&Ic(b)instanceof z||(b.i++,0<=b.i&&b.i<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ka.length),Lc(b,2*b.ra.length)));b.G[b.i]=d;b.ka[b.i]=c}
function T(b,c,d,g){b.Ha<=b.i&&Ic(b)instanceof z||(b.i++,0<=b.i&&b.i<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ka.length),Lc(b,2*b.ra.length)));b.G[b.i]=d;b.ka[b.i]=c;b.ra[b.i]=g}function Mc(b,c){b.Ha<=b.i&&Ic(b)instanceof z?b.G[b.i]=c:(b.i++,0<=b.i&&b.i<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ka.length),Lc(b,2*b.ra.length)),b.G[b.i]=c,b.ka[b.i]=b.s,b.ra[b.i]=b.Ob)}function Ic(b){return b.G[b.i]}
function D(b,c){b.N++;if(!(0<=b.N&&b.N<b.ba.length)){var d=Array(~~(2*b.ba.length));Nc(b.ba,d);b.ba=d}b.ba[b.N]=c}function Oc(b){return b.ba[b.N]}function R(b){return b.ba[b.N--]}function Pc(b,c){for(var d=Ua,g=0;g<c;g++)d=A(new B,b.ba[b.N-g],d);b.N-=c;return d}function Qc(b,c){b.qb=c;c.Db(b)}r.type=function(){return Rc};r.copy=function(){var b=(new rc).a();this.copyTo(b);return b};
r.copyTo=function(b){b.N=this.N;b.i=this.i;b.G.length<this.G.length?(b.G=this.G.slice(),b.ka=this.ka.slice(),b.ra=this.ra.slice()):(Nc(this.G,b.G),Nc(this.ka,b.ka),Nc(this.ra,b.ra));b.ba.length!==this.ba.length?b.ba=this.ba.slice():Nc(this.ba,b.ba);b.s=this.s;b.Xa=this.Xa;b.qb=this.qb;b.ec=this.ec;b.Ha=this.Ha};r.toString=function(){return"[thread#"+this.Mc+": instruction stack "+this.i+"; arg stack "+this.N+"]"};function Kc(b,c){var d=Array(~~c);Nc(b.ka,d);b.ka=d}
function Jc(b,c){var d=Array(~~c);Nc(b.G,d);b.G=d}function Lc(b,c){var d=Array(~~c);Nc(b.ra,d);b.ra=d}function Nc(b,c){for(var d=0,g=b.length;d<g;d++)c[d]=b[d]}function Sc(b){if(!(b.Ha<=b.i))return l;return b.G[b.i]instanceof z?(b.i--,Sc(b)):b.G[b.i].b()}var Rc=K("thread"),Ec=0;function Tc(){}Tc.prototype=new y;r=Tc.prototype;r.className="ListBuilder";r.a=function(){this.Qa=[];this.Uc=C;return this};r.append=function(b){this.Qa.push(b)};r.Tc=ba("Uc");r.list=function(){return pb(this.Qa,this.Uc)};
r.type=function(){return K("list-builder")};r.toString=function(){return"ListBuilder:"+this.list().toString()};function Uc(){}Uc.prototype=new N;Uc.prototype.className="Append";Uc.prototype.d=function(b){var c=R(b),b=Oc(b);b instanceof Tc||f(new TypeError);b.append(c)};Uc.prototype.toString=p("(append)");function Vc(){}Vc.prototype=new N;Vc.prototype.className="AppendAll";Vc.prototype.d=function(b){var c=R(b),b=Oc(b);b instanceof Tc||f(new TypeError);c instanceof B||f(new TypeError);c.copyTo(b.Qa)};
Vc.prototype.toString=p("(append-all)");function Wc(){}Wc.prototype=new N;Wc.prototype.className="AppendDot";Wc.prototype.d=function(b){var c=R(b),b=Oc(b);b instanceof Tc||f(new TypeError);b.Tc(c)};Wc.prototype.toString=p("(append-dot)");function Xc(){}Xc.prototype=new N;r=Xc.prototype;r.hc=k;r.className="Catch";r.a=function(b,c){O(this);this.Yc=b;this.Kb=c;return this};r.yc=p(k);r.d=function(b){var c=b.error();if(c!==l)b.Xa=l,b.N=this.Kb,this.Yc.g(b,x([c]))};
r.toString=function(){return"(catch "+this.Yc+")"};function Yc(){}Yc.prototype=new N;Yc.prototype.className="Close_Instruction";Yc.prototype.a=function(b){O(this);this.Sc=b;return this};Yc.prototype.d=function(b){D(b,(new Zc).a(this.Sc,b.s))};Yc.prototype.toString=function(){return"(close "+this.Sc+")"};function $c(){}$c.prototype=new N;r=$c.prototype;r.Pb=k;r.className="FinallyInvoke";r.a=function(b){O(this);this.Oc=b;return this};r.d=function(b){this.Oc.g(b,C)};
r.toString=function(){return"(finally:"+this.Oc+")"};function ad(){}ad.prototype=new N;ad.prototype.className="FinishList";ad.prototype.d=function(b){var c=R(b);c instanceof Tc||f(new TypeError);D(b,c.list())};ad.prototype.toString=p("(finish-list)");function Za(){}Za.prototype=new N;r=Za.prototype;r.className="FreeSym";r.a=function(b){O(this);this.Oa=b;return this};r.d=function(b){D(b,this.Oa.value())};r.toString=function(){return"(free-sym "+this.Oa+")"};
r.gb=function(){return"(free-sym "+this.Oa+" -> "+(this.Oa.bound()?""+this.Oa.value():"#unbound#")+")"};function bd(){}bd.prototype=new N;r=bd.prototype;r.className="LexSym";r.a=function(b){O(this);this.Oa=b;return this};r.d=function(b){D(b,this.Oa.v(b.s))};r.toString=function(){return"(lex-sym "+this.Oa+")"};r.gb=function(b){return"(lex-sym "+this.Oa+" -> "+this.Oa.v(b)+")"};function cd(){}cd.prototype=new N;cd.prototype.className="Listify";cd.prototype.a=function(b){O(this);this.ad=b;return this};
cd.prototype.d=function(b){D(b,Pc(b,this.ad))};cd.prototype.toString=function(){return"(listify "+this.ad+")"};function La(){}La.prototype=new N;La.prototype.className="Literal";La.prototype.a=function(b){O(this);this.Pc=b;return this};La.prototype.d=function(b){D(b,this.Pc)};La.prototype.toString=function(){return"(literal "+this.Pc+")"};function dd(){}dd.prototype=new N;dd.prototype.className="NewList";dd.prototype.d=function(b){D(b,(new Tc).a())};dd.prototype.toString=p("(new-list)");
function ed(){}ed.prototype=new N;ed.prototype.className="PopArg";ed.prototype.a=function(b){O(this);this.ea=b;return this};ed.prototype.d=function(b){R(b)};ed.prototype.toString=function(){return"(pop-arg:"+this.ea+")"};function fd(){}fd.prototype=new N;fd.prototype.Pb=k;fd.prototype.className="SetThreadLocal";fd.prototype.a=function(b,c){O(this);this.ud=b;this.k=c;return this};fd.prototype.d=function(){this.ud.value=this.k};function gd(){}gd.prototype=new N;gd.prototype.className="StackSym";
gd.prototype.a=function(b,c){O(this);this.Oa=b;this.lb=c;return this};gd.prototype.d=function(b){var c=this.lb;b.N++;if(!(0<=b.N&&b.N<b.ba.length)){var d=Array(~~(2*b.ba.length));Nc(b.ba,d);b.ba=d}b.ba[b.N]=b.Ob[c]};gd.prototype.toString=function(){return"(stack-bound symbol:"+this.Oa+")"};function hd(){}hd.prototype=new N;hd.prototype.className="TableMapper";hd.prototype.a=function(b){O(this);this.Rc=b;return this};
hd.prototype.d=function(b){var c=R(b);c instanceof B||f(new TypeError);if(!(c instanceof z)){D(b,c.c());E(b,this);c=c.b();c instanceof B||f(new TypeError);var d=(new ed).a("map-table-iterator");d.m(this);E(b,d);this.Rc.g(b,c)}};hd.prototype.toString=function(){return"(table-mapper "+this.Rc+")"};function id(){}id.prototype=new N;id.prototype.className="Assign_Lex";id.prototype.da=function(b){O(this);this.name=b;return this};function jd(){}jd.prototype=new id;jd.prototype.className="Assign_Lex_Free";
jd.prototype.a=function(b,c){this.da(b);this.value=c;return this};jd.prototype.d=function(b){var c=this.value.value();kd(this.name,b.s,c);D(b,c)};jd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function ld(){}ld.prototype=new jd;ld.prototype.className="Assign_Lex_Free.Intermediate";ld.prototype.d=function(b){kd(this.name,b.s,this.value.value())};function md(){}md.prototype=new id;r=md.prototype;r.className="Assign_Lex_Lex";
r.a=function(b,c){this.da(b);this.value=c;return this};r.d=function(b){var c=this.value.v(b.s);kd(this.name,b.s,c);D(b,c)};r.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};r.gb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.v(b)+this.value+"--\>"+this.value.v(b)+")"};function nd(){}nd.prototype=new md;nd.prototype.className="Assign_Lex_Lex.Intermediate";nd.prototype.d=function(b){kd(this.name,b.s,this.value.v(b.s))};function od(){}od.prototype=new id;
od.prototype.className="Assign_Lex_Literal";od.prototype.a=function(b,c){this.da(b);this.fb=c;return this};od.prototype.d=function(b){kd(this.name,b.s,this.fb);D(b,this.fb)};od.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.fb+")"};function pd(){}pd.prototype=new od;pd.prototype.className="Assign_Lex_Literal.Intermediate";pd.prototype.d=function(b){kd(this.name,b.s,this.fb)};function qd(){}qd.prototype=new id;qd.prototype.className="Assign_Lex_Other";
qd.prototype.d=function(b){kd(this.name,b.s,Oc(b))};qd.prototype.toString=function(){return"(assign-lex "+this.name+")"};qd.prototype.gb=function(b){return"(assign-lex "+this.name+" -> "+this.name.v(b)+")"};function rd(){}rd.prototype=new qd;rd.prototype.className="Assign_Lex_Other.Intermediate";rd.prototype.d=function(b){kd(this.name,b.s,R(b))};function sd(){}sd.prototype=new id;r=sd.prototype;r.className="Assign_Lex_Stack";r.a=function(b,c){this.da(b);this.value=c;return this};
r.d=function(b){var c=this.value.get(b);kd(this.name,b.s,c);D(b,c)};r.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};r.gb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.v(b)+" <-- "+this.value+")"};function td(){}td.prototype=new sd;td.prototype.className="Assign_Lex_Stack.Intermediate";td.prototype.d=function(b){kd(this.name,b.s,this.value.get(b))};function ud(){}ud.prototype=new N;ud.prototype.className="Assign_Free";
ud.prototype.da=function(b){O(this);this.name=b;return this};function vd(){}vd.prototype=new ud;vd.prototype.className="Assign_Free_Free";vd.prototype.a=function(b,c){this.da(b);this.value=c;return this};vd.prototype.d=function(b){var c=this.value.value();this.name.ha(c);D(b,c)};vd.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function wd(){}wd.prototype=new vd;wd.prototype.className="Assign_Free_Free.Intermediate";wd.prototype.d=function(){this.name.ha(this.value.value())};
function xd(){}xd.prototype=new ud;xd.prototype.className="Assign_Free_Lex";xd.prototype.a=function(b,c){this.da(b);this.value=c;return this};xd.prototype.d=function(b){var c=this.value.v(b.s);this.name.ha(c);D(b,c)};xd.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function yd(){}yd.prototype=new xd;yd.prototype.className="Assign_Free_Lex.Intermediate";yd.prototype.d=function(b){this.name.ha(this.value.v(b.s))};function zd(){}zd.prototype=new ud;
zd.prototype.className="Assign_Free_Literal";zd.prototype.a=function(b,c){this.da(b);this.fb=c;return this};zd.prototype.d=function(b){this.name.ha(this.fb);D(b,this.fb)};zd.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.fb+")"};function Ad(){}Ad.prototype=new zd;Ad.prototype.className="Assign_Free_Literal.Intermediate";Ad.prototype.d=function(){this.name.ha(this.fb)};function Bd(){}Bd.prototype=new ud;Bd.prototype.className="Assign_Free_Other";Bd.prototype.d=function(b){this.name.ha(Oc(b))};
Bd.prototype.toString=function(){return"(assign-free-other "+this.name+")"};Bd.prototype.gb=function(){return"(assign-free-other "+this.name+" -> "+(name.bound()?""+name.value():"#unbound#")+")"};function Cd(){}Cd.prototype=new Bd;Cd.prototype.className="Assign_Free_Other.Intermediate";Cd.prototype.d=function(b){this.name.ha(R(b))};function Dd(){}Dd.prototype=new ud;Dd.prototype.className="Assign_Free_Stack";Dd.prototype.a=function(b,c){this.da(b);this.value=c;return this};
Dd.prototype.d=function(b){var c=this.value.get(b);this.name.ha(c);D(b,c)};Dd.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function Ed(){}Ed.prototype=new Dd;Ed.prototype.className="Assign_Free_Stack.Intermediate";Ed.prototype.d=function(b){this.name.ha(this.value.get(b))};function Fd(){}Fd.prototype=new N;Fd.prototype.className="Assign_Stack";Fd.prototype.da=function(b){O(this);this.name=b;return this};function Gd(){}Gd.prototype=new Fd;
Gd.prototype.className="Assign_Stack_Free";Gd.prototype.a=function(b,c){this.da(b);this.value=c;return this};Gd.prototype.d=function(b){var c=this.value.value();this.name.set(b,c);D(b,c)};Gd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Hd(){}Hd.prototype=new Gd;Hd.prototype.className="Assign_Stack_Free.Intermediate";Hd.prototype.d=function(b){this.name.set(b,this.value.value())};function Id(){}Id.prototype=new Fd;Id.prototype.className="Assign_Stack_Lex";
Id.prototype.a=function(b,c){this.da(b);this.value=c;return this};Id.prototype.d=function(b){var c=this.value.v(b.s);this.name.set(b,c);D(b,c)};Id.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Jd(){}Jd.prototype=new Id;Jd.prototype.className="Assign_Stack_Lex.Intermediate";Jd.prototype.d=function(b){this.name.set(b,this.value.v(b.s))};function Kd(){}Kd.prototype=new Fd;Kd.prototype.className="Assign_Stack_Literal";
Kd.prototype.a=function(b,c){this.da(b);this.value=c;return this};Kd.prototype.d=function(b){this.name.set(b,this.value);D(b,this.value)};Kd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Ld(){}Ld.prototype=new Kd;Ld.prototype.className="Assign_Stack_Literal.Intermediate";Ld.prototype.d=function(b){this.name.set(b,this.value)};function Md(){}Md.prototype=new Fd;Md.prototype.className="Assign_Stack_Other";Md.prototype.d=function(b){this.name.set(b,Oc(b))};
Md.prototype.toString=function(){return"(assign-stack "+this.name+")"};function Nd(){}Nd.prototype=new Md;Nd.prototype.className="Assign_Stack_Other.Intermediate";Nd.prototype.d=function(b){this.name.set(b,R(b))};function Od(){}Od.prototype=new Fd;Od.prototype.className="Assign_Stack_Stack";Od.prototype.a=function(b,c){this.da(b);this.value=c;return this};Od.prototype.d=function(b){var c=this.value.get(b);this.name.set(b,c);D(b,c)};
Od.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Pd(){}Pd.prototype=new Od;Pd.prototype.className="Assign_Stack_Stack.Intermediate";Pd.prototype.d=function(b){this.name.set(b,this.value.get(b))};function Qd(){}Qd.prototype=new N;r=Qd.prototype;r.className="Cond";r.a=function(b,c){O(this);this.H=b;this.Wa=Rd(b);this.B=c;this.oa=Rd(c);return this};function Rd(b){var c=[];b.h(c);return x(c)}r.d=function(b){Mc(b,R(b)instanceof z?this.oa:this.Wa)};
r.l=function(b){N.prototype.l.call(this,b);this.Wa.l(b);this.oa.l(b)};r.toString=function(){return"(cond then:"+this.H+", else:"+this.B+")"};function Sd(){}var Td={};v["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=Td;Sd.prototype=new N;Sd.prototype.className="If_bound_bound_literal";Sd.prototype.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.B=d;return this};Sd.prototype.d=function(b){this.ca.v(b.s)instanceof z?D(b,this.B):D(b,this.H.v(b.s))};
Td.h=function(b,c,d,g){c instanceof U||f(new TypeError);d instanceof U||f(new TypeError);g instanceof Ud||f(new TypeError);Vd(c,d)?g.n instanceof z?c.h(b):b.push((new Wd).a(c,g.n)):b.push((new Sd).a(c,d,g.n))};Sd.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};function Wd(){}Wd.prototype=new N;Wd.prototype.className="If_bound_bound_literal.Or";Wd.prototype.a=function(b,c){O(this);this.Jb=b;this.B=c;return this};
Wd.prototype.d=function(b){var c=this.Jb.v(b.s);c instanceof z?D(b,this.B):D(b,c)};Wd.prototype.toString=function(){return"(if[bbl$or] "+a+" "+a+" "+elseExpr+")"};function Xd(){}var Yd={};v["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=Yd;Xd.prototype=new N;Xd.prototype.className="If_bound_bound_other";Xd.prototype.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.oa=Rd(d);this.B=d;return this};Xd.prototype.d=function(b){this.ca.v(b.s)instanceof z?Mc(b,this.oa):D(b,this.H.v(b.s))};
Yd.h=function(b,c,d,g){c instanceof U||f(new TypeError);d instanceof U||f(new TypeError);Vd(c,d)?b.push((new Zd).a(c,g)):b.push((new Xd).a(c,d,g))};Xd.prototype.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};Xd.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};function Zd(){}Zd.prototype=new N;r=Zd.prototype;r.className="If_bound_bound_other.Or";r.a=function(b,c){O(this);this.Jb=b;this.oa=Rd(c);this.B=c;return this};
r.d=function(b){var c=this.Jb.v(b.s);c instanceof z?Mc(b,this.oa):D(b,c)};r.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};r.toString=function(){return"(if "+a+" "+a+" "+elseExpr+")"};function $d(){}var ae={};v["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=ae;$d.prototype=new N;$d.prototype.className="If_bound_literal_literal";$d.prototype.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.B=d;return this};
$d.prototype.d=function(b){this.ca.v(b.s)instanceof z?D(b,this.B):D(b,this.H)};$d.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};ae.h=function(b,c,d,g){g instanceof Ud||f(new TypeError);c instanceof U||f(new TypeError);b.push((new $d).a(c,d,g.n))};function be(){}var ce={};v["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=ce;be.prototype=new N;r=be.prototype;r.className="If_bound_other_literal";
r.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.Wa=Rd(c);this.B=d;return this};r.d=function(b){this.ca.v(b.s)instanceof z?D(b,this.B):Mc(b,this.Wa)};r.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};r.l=function(b){N.prototype.l.call(this,b);this.Wa.l(b)};ce.h=function(b,c,d,g){c instanceof U||f(new TypeError);g instanceof Ud||f(new TypeError);b.push((new be).a(c,d,g.n))};function de(){}var ee={};v["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=ee;
de.prototype=new N;r=de.prototype;r.className="If_bound_other_other";r.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.Wa=Rd(c);this.B=d;this.oa=Rd(d);return this};r.d=function(b){this.ca.v(b.s)instanceof z?Mc(b,this.oa):Mc(b,this.Wa)};r.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};r.l=function(b){N.prototype.l.call(this,b);this.Wa.l(b)};ee.h=function(b,c,d,g){c instanceof U||f(new TypeError);b.push((new de).a(c,d,g))};function fe(){}var ge={};
v["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=ge;fe.prototype=new N;r=fe.prototype;r.className="If_other_bound_other";r.a=function(b,c){O(this);this.oa=Rd(c);this.H=b;this.B=c;return this};r.d=function(b){R(b)instanceof z?Mc(b,this.oa):D(b,this.H.v(b.s))};r.toString=function(){return"(if ? "+this.H+" "+this.B+")"};r.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};ge.h=function(b,c,d,g){c.h(b);d instanceof U||f(new TypeError);b.push((new fe).a(d,g))};function he(){}
var ie={};v["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=ie;he.prototype=new N;r=he.prototype;r.className="If_other_other_literal";r.a=function(b,c){O(this);this.Wa=Rd(b);this.H=b;this.B=c;return this};r.d=function(b){R(b)instanceof z?D(b,this.B):Mc(b,this.Wa)};r.toString=function(){return"(if ? "+this.H+" "+this.B+")"};r.l=function(b){N.prototype.l.call(this,b);this.Wa.l(b)};ie.h=function(b,c,d,g){g instanceof Ud||f(new TypeError);c.h(b);b.push((new he).a(d,g.n))};
function je(){}var ke={};v["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=ke;je.prototype=new N;je.prototype.className="If_other_stack_literal";je.prototype.a=function(b,c){O(this);this.H=b;this.B=c;return this};je.prototype.d=function(b){R(b)instanceof z?D(b,this.B):D(b,this.H.get(b))};je.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};ke.h=function(b,c,d,g){g instanceof Ud||f(new TypeError);c.h(b);d instanceof le||f(new TypeError);b.push((new je).a(d,g.n))};
function me(){}var ne={};v["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=ne;me.prototype=new N;r=me.prototype;r.className="If_other_stack_other";r.a=function(b,c){O(this);this.H=b;this.oa=Rd(c);this.B=c;return this};r.d=function(b){R(b)instanceof z?Mc(b,this.oa):D(b,this.H.get(b))};r.toString=function(){return"(if ? "+this.H+" "+this.B+")"};r.l=function(b){N.prototype.l.call(this,b);this.oa.l(b)};ne.h=function(b,c,d,g){c.h(b);d instanceof le||f(new TypeError);b.push((new me).a(d,g))};
function oe(){}var pe={};v["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=pe;oe.prototype=new N;oe.prototype.className="If_stack_literal_free";oe.prototype.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.B=d;return this};oe.prototype.d=function(b){this.ca.get(b)instanceof z?D(b,this.B.value()):D(b,this.H)};oe.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};
pe.h=function(b,c,d,g){c instanceof le||f(new TypeError);g instanceof Ud||f(new TypeError);g=g.n;g instanceof M||f(new TypeError);b.push((new oe).a(c,d,g))};function qe(){}var re={};v["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=re;qe.prototype=new N;qe.prototype.className="If_stack_stack_literal";qe.prototype.a=function(b,c,d){O(this);this.ca=b;this.H=c;this.B=d;return this};qe.prototype.d=function(b){this.ca.get(b)instanceof z?D(b,this.B):D(b,this.H.get(b))};
qe.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};re.h=function(b,c,d,g){c instanceof le||f(new TypeError);d instanceof le||f(new TypeError);g instanceof Ud||f(new TypeError);se(c,d)?g.n instanceof z?c.h(b):b.push((new te).a(c,g.n)):b.push((new qe).a(c,d,g.n))};function te(){}te.prototype=new N;te.prototype.className="If_stack_stack_literal.Or";te.prototype.a=function(b,c){O(this);this.Jb=b;this.B=c;return this};
te.prototype.d=function(b){var c=this.Jb.get(b);c instanceof z?D(b,this.B):D(b,c)};te.prototype.toString=function(){return"(if[ssl$or] "+a+" "+a+" "+elseExpr+")"};function ue(){}ue.prototype=new N;r=ue.prototype;r.pa=k;r.className="Invoke_0.Lex";r.a=function(b){O(this);this.r=b;return this};r.d=function(b){this.r.v(b.s).g(b,C)};r.toString=function(){return"(invoke "+this.r+")"};r.va=function(b){return this.r.v(b.s)};function ve(){}ve.prototype=new N;r=ve.prototype;r.pa=k;r.className="Invoke_0.Free";
r.a=function(b){O(this);this.r=b;return this};r.d=function(b){this.r.value().g(b,C)};r.toString=function(){return"(invoke "+this.r+")"};r.va=function(){return this.r.value()};function we(){}we.prototype=new N;r=we.prototype;r.pa=k;r.className="Invoke_0.Other";r.a=function(){return O(this)};r.d=function(b){R(b).g(b,C)};r.toString=p("(invoke <0>)");r.va=function(b){return Oc(b)};function xe(){}xe.prototype=new N;r=xe.prototype;r.pa=k;r.className="Invoke_1.Lex";r.a=function(b){O(this);this.r=b;return this};
r.d=function(b){this.r.v(b.s).g(b,A(new B,R(b),C))};r.toString=function(){return"(invoke "+this.r+" <1>)"};r.va=function(b){return this.r.v(b.s)};function ye(){}ye.prototype=new N;r=ye.prototype;r.pa=k;r.className="Invoke_1.Free";r.a=function(b){O(this);this.r=b;return this};r.d=function(b){this.r.value().g(b,A(new B,R(b),C))};r.toString=function(){return"(invoke "+this.r+" <1>)"};r.va=function(){return this.r.value()};function ze(){}ze.prototype=new N;r=ze.prototype;r.pa=k;r.className="Invoke_1.Other";
r.a=function(){return O(this)};r.d=function(b){R(b).g(b,A(new B,R(b),C))};r.toString=p("(invoke <1>)");r.va=function(b){return Oc(b)};function Ae(){}Ae.prototype=new N;r=Ae.prototype;r.pa=k;r.className="Invoke_2.Lex";r.a=function(b){O(this);this.r=b;return this};r.d=function(b){var c=R(b),d=R(b);this.r.v(b.s).g(b,A(new B,d,A(new B,c,C)))};r.toString=function(){return"(invoke "+this.r+" <2>)"};r.gb=function(b){return"(invoke "+this.r+" -> "+this.r.v(b)+" <2>)"};r.va=function(b){return this.r.v(b.s)};
function Be(){}Be.prototype=new N;r=Be.prototype;r.pa=k;r.className="Invoke_2.Free";r.a=function(b){O(this);this.r=b;return this};r.d=function(b){var c=R(b),d=R(b);this.r.value().g(b,A(new B,d,A(new B,c,C)))};r.toString=function(){return"(invoke_2:free "+this.r+" <2>)"};r.gb=function(){return"(invoke_2:free "+this.r+" -> "+this.r.value()+" <2>)"};r.va=function(){return this.r.value()};function Ce(){}Ce.prototype=new N;r=Ce.prototype;r.pa=k;r.className="Invoke_2.Other";r.a=function(){return O(this)};
r.d=function(b){var c=R(b),d=R(b),g=R(b);try{c.g(b,A(new B,g,A(new B,d,C)))}catch(h){h instanceof Error||f(h),Aa(h)}};r.toString=p("(invoke <2>)");r.va=function(b){return Oc(b)};function De(){}De.prototype=new N;r=De.prototype;r.pa=k;r.className="Invoke_3.Lex";r.a=function(b){O(this);this.r=b;return this};r.d=function(b){var c=R(b),d=R(b),g=R(b);this.r.v(b.s).g(b,A(new B,g,A(new B,d,A(new B,c,C))))};r.toString=function(){return"(invoke "+this.r+" <3>)"};r.va=function(b){return this.r.v(b.s)};
function Ee(){}Ee.prototype=new N;r=Ee.prototype;r.pa=k;r.className="Invoke_3.Free";r.a=function(b){O(this);this.r=b;return this};r.d=function(b){var c=R(b),d=R(b),g=R(b);this.r.value().g(b,A(new B,g,A(new B,d,A(new B,c,C))))};r.toString=function(){return"(invoke_3:free "+this.r+" <3>)"};r.va=function(){return this.r.value()};function Fe(){}Fe.prototype=new N;r=Fe.prototype;r.pa=k;r.className="Invoke_3.Other";r.a=function(){return O(this)};
r.d=function(b){var c=R(b),d=R(b),g=R(b),h=R(b);c.g(b,A(new B,h,A(new B,g,A(new B,d,C))))};r.toString=p("(invoke <3>)");r.va=function(b){return Oc(b)};function Ge(){}Ge.prototype=new N;r=Ge.prototype;r.pa=k;r.className="Invoke_N.Lex";r.a=function(b,c){O(this);this.r=b;this.hb=c;return this};r.d=function(b){this.r.v(b.s).g(b,Pc(b,this.hb))};r.toString=function(){return"(invoke "+this.r+" <"+this.hb+">)"};r.va=function(b){return this.r.v(b.s)};function He(){}He.prototype=new N;r=He.prototype;r.pa=k;
r.className="Invoke_N.Free";r.a=function(b,c){O(this);this.r=b;this.hb=c;return this};r.d=function(b){this.r.value().g(b,Pc(b,this.hb))};r.toString=function(){return"(invoke "+this.r+" <"+this.hb+">)"};r.va=function(){return this.r.value()};function Ka(){}Ka.prototype=new N;r=Ka.prototype;r.pa=k;r.className="Invoke_N.Other";r.a=function(b){O(this);this.hb=b;return this};r.d=function(b){R(b).g(b,Pc(b,this.hb))};r.toString=function(){return"(invoke <"+this.hb+">)"};r.va=function(b){return Oc(b)};
function le(){}le.prototype=new y;r=le.prototype;r.className="StackSymbol";r.a=function(b,c){this.name=b;this.lb=c;return this};r.get=function(b){return b.Ob[this.lb]};r.set=function(b,c){b.ra[b.i][this.lb]=c};r.h=function(b){b.push((new gd).a(this.name,this.lb))};r.type=function(){return K("stack-symbol")};r.toString=function(){return this.name.toString()};function se(b,c){return b.name===c.name&&b.lb===c.lb}r.S=function(b,c,d){return se(this,b)?c:d<this.lb?(new le).a(this.name,this.index-1):this};
function U(){}U.prototype=new y;r=U.prototype;r.className="BoundSymbol";r.a=function(b,c,d){this.Sa=c;this.index=d;this.name=b;return this};function Ie(b,c,d){return(new U).a(b,c,d)}function kd(b,c,d){c.Fb(b.Sa).set(b.index,d)}r.v=function(b){for(var c=this.Sa;0<c;)b=b.parent,c--;return b.jb[this.index]};r.h=function(b){b.push((new bd).a(this))};r.type=function(){return Je};r.toString=function(){return this.name.toString()};function Vd(b,c){return b.Sa===c.Sa&&b.name===c.name&&b.index===c.index}
r.M=function(b){return b<=this.Sa?Ie(this.name,this.Sa+1,this.index):this};function Ke(b){return Ie(b.name,b.Sa-1,b.index)}r.T=function(b,c,d,g,h){if(Vd(this,b))return c;return d?(0===this.Sa&&f(t(new u,"can't unnest "+this+", looking for "+b+" to inline with "+c)),Ke(this)):g===this.Sa&&h<this.index?Ie(this.name,this.Sa,this.index-1):this};r.l=function(b){b.xc(this)};
r.Y=function(b){b=b[this.name.name()];if(b===i)return Ke(this);if(b===this.index)return(new le).a(this.name,b);f(t(new u,"error: parameter index mismatch: expected "+b+", got "+this.index))};var Je=K("bound-symbol");function Le(){}Le.prototype=new y;r=Le.prototype;r.className="SingleAssignment";function Me(b,c){b.name=l;b.C=l;b.Ta=c;return b}r.Pa=function(b){this.name===l?b instanceof M||b instanceof U?this.name=b:f(t(new u,"assign: can't assign to "+b)):this.C===l?this.C=b:this.Ta.Pa(b)};
r.toString=function(){return""+this.name+" "+this.C};r.h=function(b){Ne(this,b,m);this.Ta.h(b)};
function Ne(b,c,d){if(b.name instanceof U){var g=b.name,b=b.C;b instanceof U?d?c.push((new md).a(g,b)):c.push((new nd).a(g,b)):b instanceof le?d?c.push((new sd).a(g,b)):c.push((new td).a(g,b)):b instanceof M?d?c.push((new jd).a(g,b)):c.push((new ld).a(g,b)):b.Ja()?d?c.push((new od).a(g,b)):c.push((new pd).a(g,b)):b instanceof Oe?(b=b.Hb,d?c.push((new od).a(g,b)):c.push((new pd).a(g,b))):(b.h(c),d?c.push((new qd).da(g)):c.push((new rd).da(g)))}else b.name instanceof le?(g=b.name,b=b.C,b instanceof
U?d?c.push((new Id).a(g,b)):c.push((new Jd).a(g,b)):b instanceof le?d?c.push((new Od).a(g,b)):c.push((new Pd).a(g,b)):b instanceof M?d?c.push((new Gd).a(g,b)):c.push((new Hd).a(g,b)):b.Ja()?d?c.push((new Kd).a(g,b)):c.push((new Ld).a(g,b)):b instanceof Oe?(b=b.Hb,d?c.push((new Kd).a(g,b)):c.push((new Ld).a(g,b))):(b.h(c),d?c.push((new Md).da(g)):c.push((new Nd).da(g)))):b.name instanceof M?(g=b.name,b=b.C,b instanceof U?d?c.push((new xd).a(g,b)):c.push((new yd).a(g,b)):b instanceof le?d?c.push((new Dd).a(g,
b)):c.push((new Ed).a(g,b)):b instanceof M?d?c.push((new vd).a(g,b)):c.push((new wd).a(g,b)):b.Ja()?d?c.push((new zd).a(g,b)):c.push((new Ad).a(g,b)):b instanceof Oe?(b=b.Hb,d?c.push((new zd).a(g,b)):c.push((new Ad).a(g,b))):(b.h(c),d?c.push((new Bd).da(g)):c.push((new Cd).da(g)))):f(t(new u,"what kind of symbol is "+b.name+"??"))}r.type=function(){return K("assignment")};r.ia=p(k);r.W=function(){return this.C instanceof V?Pe(this.C)||this.Ta.W():this.C.W()||this.Ta.W()};
r.T=function(b,c,d,g,h){var j=Me(new Le,l);this.name instanceof U&&Vd(b,this.name)&&f(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));j.name=this.name;j.C=this.C.T(b,c,d,g,h);j.Ta=this.Gd(b,c,d,g,h);return j};r.S=function(b,c,d){var g=Me(new Le,l);this.name instanceof le&&se(b,this.name)&&f(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));g.name=this.name;g.C=this.C.S(b,c,d);g.Ta=this.Fd(b,c,d);return g};
r.M=function(b){var c=Me(new Le,l);c.name=this.name.M(b);c.C=this.C.M(b);c.Ta=this.Ta.M(b);return c};r.Y=function(b){var c=Me(new Le,l);c.name=this.name.Y(b);c.C=this.C.Y(b);b=this.Ta.Y(b);b instanceof Le||f(new TypeError);c.Ta=b;return c};r.l=function(b){b.za(this);this.name.l(b);this.C.l(b);this.Ta.l(b);b.La(this)};function Qe(){}Qe.prototype=new Le;r=Qe.prototype;r.className="LastAssignment";r.a=function(){return Me(this,l)};
r.Pa=function(b){this.name===l?b instanceof M||b instanceof U?this.name=b:f(t(new u,"assign: can't assign to "+b)):this.C===l?this.C=b:f(t(new u,"assign: error: unexpected "+b))};r.toString=function(){return""+this.name+" "+this.C};r.h=function(b){Ne(this,b,k)};r.W=function(){return this.C instanceof V?Pe(this.C):this.C.W()};
r.T=function(b,c,d,g,h){var j=(new Qe).a();this.name instanceof U&&Vd(b,this.name)&&f(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));j.name=this.name.T(b,c,d,g,h);j.C=this.C.T(b,c,d,g,h);return j};r.S=function(b,c,d){var g=(new Qe).a();this.name instanceof le&&se(b,this.name)&&f(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));g.name=this.name.S(b,c,d);g.C=this.C.S(b,c,d);return g};r.M=function(b){var c=(new Qe).a();c.name=this.name.M(b);c.C=this.C.M(b);return c};
r.Y=function(b){var c=(new Qe).a();c.name=this.name.Y(b);c.C=this.C.Y(b);return c};r.l=function(b){b.za(this);this.name.l(b);this.C.l(b);b.La(this)};function Re(){}Re.prototype=new y;r=Re.prototype;r.className="Assignment";r.a=function(){this.$=l;return this};r.type=function(){return K("assignment")};r.Pa=function(b){this.$.Pa(b)};r.h=function(b){this.$.h(b)};r.toString=function(){return"(assign "+this.$+")"};r.ia=function(b){return this.$.ia(b)};r.W=function(){return this.$.W()};
r.T=function(b,c,d,g,h){var j=(new Re).a();j.$=this.$.T(b,c,d,g,h);return j};r.S=function(b,c,d){var g=(new Re).a();g.$=this.$.S(b,c,d);return g};r.M=function(b){var c=(new Re).a();c.$=this.$.M(b);return c};r.l=function(b){b.za(this);this.$.l(b);b.La(this)};r.Y=function(b){var c=(new Re).a(),b=this.$.Y(b);b instanceof Le||f(new TypeError);c.$=b;return c};function Ud(){}Ud.prototype=new y;r=Ud.prototype;r.Ma=k;r.className="Else";r.a=function(){this.n=l;return this};r.type=function(){return K("else-clause")};
r.add=function(b){f(t(new u,"Internal error: if clause: unexpected extra condition: "+b))};r.Pa=function(b){this.n===l?this.n=b:f(t(new u,"Internal error: if clause: unexpected: "+b))};r.h=function(b){this.n.h(b)};r.reduce=function(){return this};r.toString=function(){return""+this.n};r.ia=function(b){return this.n.ia(b)};r.W=function(){return this.n instanceof V?Pe(this.n):this.n.W()};r.T=function(b,c,d,g,h){var j=(new Ud).a();j.n=this.n.T(b,c,d,g,h).reduce();return j};
r.S=function(b,c,d){var g=(new Ud).a();g.n=this.n.S(b,c,d).reduce();return g};r.M=function(b){var c=(new Ud).a();c.n=this.n.M(b);return c};r.Y=function(b){var c=(new Ud).a();c.n=this.n.Y(b);return c};r.l=function(b){b.za(this);this.n.l(b);b.La(this)};r.qc=function(){return"_"+Se(this.n)};function Te(){}Te.prototype=new y;r=Te.prototype;r.className="IfClause";r.a=function(){this.Z=l;return this};r.type=function(){return Ue};r.append=function(b){this.Z!==l?this.Z.add(b):this.Z=b};
r.reduce=function(){var b=this.Z.reduce();b.Ma||f(new TypeError);this.Z=b;return b instanceof Ud?b.n:this};r.Pa=function(b){this.Z.Pa(b)};r.h=function(b){this.Z.h(b)};r.toString=function(){return"(if "+this.Z+")"};r.ia=function(b){return this.Z.ia(b)};r.W=function(){return this.Z.W()};r.T=function(b,c,d,g,h){var j=(new Te).a(),b=this.Z.T(b,c,d,g,h).reduce();b.Ma||f(new TypeError);j.Z=b;return j};r.S=function(b,c,d){var g=(new Te).a(),b=this.Z.S(b,c,d).reduce();b.Ma||f(new TypeError);g.Z=b;return g};
r.M=function(b){var c=(new Te).a(),b=this.Z.M(b);b.Ma||f(new TypeError);c.Z=b;return c};r.Y=function(b){var c=(new Te).a(),b=this.Z.Y(b);b.Ma||f(new TypeError);c.Z=b;return c};r.l=function(b){b.za(this);this.Z.l(b);b.La(this)};r.Q=function(){var b=this.Z;b instanceof Ve||f(new TypeError);return b.Q};var Ue=K("if-clause");function Ve(){}Ve.prototype=new y;r=Ve.prototype;r.Ma=k;r.className="IfThen";r.a=function(){this.next=this.Q=this.n=l;return this};r.type=function(){return K("if-then-clause")};
r.add=function(b){this.next!==l?this.next.add(b):this.next=b};r.Pa=function(b){this.n===l?this.n=b:this.Q===l?this.Q=b:this.next.Pa(b)};
r.h=function(b){var c=this.qc(),d="rainbow.vm.instructions.cond.optimise.If"+c;try{if(d in We){var g=We[d];g===l?this.Ac(b,c):g(b,this.n,this.Q,this.next)}else{var h=v[d];if(h===i)We[d]=l;else{var j=h.h;j===i&&f(t(new u,"couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+d));We[d]=j}this.h(b)}}catch(q){q instanceof Error||f(q),f(t(new u,"Couldn't instantiate "+d+": "+q,q))}};r.Ac=function(b,c){this.n.h(b);b.push((new Qd).a(this.Q,this.next,c))};
r.reduce=function(){var b=this.next.reduce();b.Ma||f(new TypeError);this.next=b;if(this.n instanceof z)return this.next;!(this.n instanceof U)||!(this.Q instanceof U)||!(this.next instanceof Ud)?b=m:(b=this.next,b=Vd(this.n,this.Q)&&b.n instanceof z);if(!b)!(this.n instanceof le)||!(this.Q instanceof le)||!(this.next instanceof Ud)?b=m:(b=this.next,b=se(this.n,this.Q)&&b.n instanceof z);return b?(b=(new Ud).a(),b.Pa(this.n),b):this};r.toString=function(){return""+this.n+" "+this.Q+" "+this.next};
r.ia=function(b){return this.n.ia(b)||this.Q.ia(b)||this.next.ia(b)};r.W=function(){return this.n instanceof V&&Pe(this.n)||this.Q instanceof V&&Pe(this.Q)?k:this.n.W()||this.Q.W()||this.next.W()};r.T=function(b,c,d,g,h){var j=(new Ve).a();j.n=this.n.T(b,c,d,g,h).reduce();j.Q=this.Q.T(b,c,d,g,h).reduce();b=this.next.T(b,c,d,g,h).reduce();b.Ma||f(new TypeError);j.next=b;return j};
r.S=function(b,c,d){var g=(new Ve).a();g.n=this.n.S(b,c,d).reduce();g.Q=this.Q.S(b,c,d).reduce();b=this.next.S(b,c,d).reduce();b.Ma||f(new TypeError);g.next=b;return g};r.M=function(b){var c=(new Ve).a();c.n=this.n.M(b);c.Q=this.Q.M(b);b=this.next.M(b);b.Ma||f(new TypeError);c.next=b;return c};r.Y=function(b){var c=(new Ve).a();c.n=this.n.Y(b);c.Q=this.Q.Y(b);b=this.next.Y(b);b.Ma||f(new TypeError);c.next=b;return c};r.l=function(b){b.za(this);this.n.l(b);this.Q.l(b);this.next.l(b);b.La(this)};
r.qc=function(){var b;b="_"+Se(this.n);b=b+"_"+Se(this.Q);return b=this.next instanceof Ud?b+"_"+Se(this.next.n):b+"_other"};var We={};function Oe(){}Oe.prototype=new y;r=Oe.prototype;r.className="Quotation";r.a=function(b){this.Hb=b;return this};r.h=function(b){b.push((new La).a(this.Hb))};r.type=function(){return K("quotation")};r.v=o("Hb");r.toString=function(){return"'"+this.Hb};function Xe(){}Xe.prototype=new y;r=Xe.prototype;r.className="Invocation";r.a=function(b){this.A=b;this.dc={};return this};
r.type=function(){return K("if-then-clause")};r.toString=function(){return(this.A.b()instanceof V?Ye(Ze(this.A)):this.A).toString()};r.h=function(b){var c;1===this.A.la()&&this.A.b()instanceof $e?(af(this.A.b(),b),c=k):c=m;c||bf(this,b)||this.Ac(b)};
r.reduce=function(){if(this.A.jc(1)&&this.A.b()instanceof V){var b=this.A.b(),c=b.z;if(c.O()||!(c.b()instanceof M))return this;var c=c.b(),d=this.A.c().b();if(b.nb(c,d)){try{var g=b.pb(c,d,k)}catch(h){h instanceof Error||f(h),f(t(new u,"couldn't curry "+c+"->"+d+" for "+b+" in expression "+this+": "+h,h))}return(new Xe).a(A(new B,g,this.A.c().c())).reduce()}}return this};
function bf(b,c){for(var d="",g=b.A;!(g instanceof z);)d+="_",d+=Se(g.b()),g=g.c(),g instanceof B||f(new TypeError);d="rainbow.vm.instructions.invoke.optimise.Invoke"+d;if(d in b.dc){g=b.dc[d];if(g===l)return m;try{var h=g.qa(b.A),j=b.A.c();for(j instanceof B||f(new TypeError);!(j instanceof z);)"other"===b.qc(j.b())&&j.b().h(c),j=j.c(),j instanceof B||f(new TypeError);"other"===b.qc(b.A.b())&&b.A.b().h(c);c.push(h);return k}catch(q){q instanceof Error||f(q),f(t(new u,"couldn't create optimiser "+
d,q))}}else{h=v[d];if(h===i)return b.dc[d]=l,m;b.dc[d]=h;return bf(b,c)}}function Se(b){return b instanceof U?"bound":b instanceof M?"free":b instanceof le?"stack":b.Ja()?"literal":b instanceof Oe?"quote":"other"}
r.Ac=function(b){switch(this.A.la()){case 1:var c=this.A.b();c instanceof U?b.push((new ue).a(c)):c instanceof M?b.push((new ve).a(c)):(c.h(b),b.push((new we).a()));break;case 2:c=this.A.b();this.A.c().b().h(b);c instanceof U?b.push((new xe).a(c)):c instanceof M?b.push((new ye).a(c)):(c.h(b),b.push((new ze).a()));break;case 3:var c=this.A.b(),d=this.A.c().b(),g=this.A.c().c().b();d.h(b);g.h(b);c instanceof U?b.push((new Ae).a(c)):c instanceof M?b.push((new Be).a(c)):(c.h(b),b.push((new Ce).a()));
break;case 4:var c=this.A.b(),d=this.A.c().b(),g=this.A.c().c().b(),h=this.A.c().c().c().b();d.h(b);g.h(b);h.h(b);c instanceof U?b.push((new De).a(c)):c instanceof M?b.push((new Ee).a(c)):(c.h(b),b.push((new Fe).a()));break;default:c=this.A.b();d=this.A.c();d instanceof B||f(new TypeError);for(g=d.la();!(d instanceof z);)d.b().h(b),d=d.c(),d instanceof B||f(new TypeError);c instanceof U?b.push((new Ge).a(c,g)):c instanceof M?b.push((new He).a(c,g)):(c.h(b),b.push((new Ka).a(g)))}return k};
r.ia=function(b){for(var c=this.A;!(c instanceof z);){if(c.b().ia(b))return k;c=c.c();c instanceof B||f(new TypeError)}return m};r.W=function(){for(var b=this.A;!(b instanceof z);){if(b.b()instanceof V){if(Pe(b.b()))return k}else if(b.b().W())return k;b=b.c();b instanceof B||f(new TypeError)}return m};
r.T=function(b,c,d,g,h){for(var j=this.A,q=[];!(j instanceof z);){try{q.push(j.b().T(b,c,d,g,h))}catch(s){s instanceof Error||f(s),f(t(new u,"couldn't inline "+b+"->"+c+"(unnest:"+d+";nesting:"+g+") in "+this+" : "+s,s))}j=j.c();j instanceof B||f(new TypeError)}return(new Xe).a(x(q))};r.S=function(b,c,d){for(var g=this.A,h=[];!(g instanceof z);){try{h.push(g.b().S(b,c,d))}catch(j){j instanceof Error||f(j),f(t(new u,"couldn't inline "+b+"->"+c+") in "+this+" : "+j,j))}g=g.c();g instanceof B||f(new TypeError)}return(new Xe).a(x(h))};
r.M=function(b){for(var c=this.A,d=[];!(c instanceof z);)d.push(c.b().M(b)),c=c.c(),c instanceof B||f(new TypeError);return(new Xe).a(x(d))};r.Y=function(b){for(var c=this.A,d=[];!(c instanceof z);)d.push(c.b().Y(b)),c=c.c(),c instanceof B||f(new TypeError);return(new Xe).a(x(d))};r.l=function(b){b.za(this);for(var c=this.A;!(c instanceof z);)c.b().l(b),c=c.c(),c instanceof B||f(new TypeError);b.La(this)};function cf(){}cf.prototype=new y;r=cf.prototype;r.className="QuasiQuotation";
r.a=function(b){this.Ka=b;return this};r.type=function(){return K("quasiquotation")};r.h=function(b){df(this,b,this.Ka,1)};r.toString=function(){return"`"+this.Ka};function ef(b){var c=[];ff(b,c,b.Ka,1);return c}
function ff(b,c,d,g){if(gf(d))1===g?c.push(d.c().b()):ff(b,c,d.c().b(),g-1);else if(hf(d))1===g?c.push(d.c().b()):ff(b,c,d.c().b(),g-1);else if(jf(d))ff(b,c,d.c().b(),g+1);else if(!d.O())for(;!d.O();)if(gf(d)||jf(d))ff(b,c,d,g),d=d.c().c();else{var h=d.b(),d=d.c();hf(h)?ff(b,c,h,g):(gf(h)||jf(h)||kf(h))&&ff(b,c,h,g)}}
function df(b,c,d,g){if(gf(d))1===g?d.c().b().h(c):(c.push((new La).a(lf)),df(b,c,d.c().b(),g-1),c.push((new cd).a(2)));else if(hf(d))1===g?(d.c().b().h(c),c.push(O(new Vc))):(c.push((new La).a(mf)),df(b,c,d.c().b(),g-1),c.push((new cd).a(2)),c.push(O(new Uc)));else if(jf(d))c.push((new La).a(nf)),df(b,c,d.c().b(),g+1),c.push((new cd).a(2));else if(d.O())c.push((new La).a(d));else{for(c.push(O(new dd));!d.O();)if(gf(d)||jf(d))df(b,c,d,g),d=d.c().c(),c.push(O(new Wc));else{var h=d.b(),d=d.c();hf(h)?
df(b,c,h,g):(gf(h)||jf(h)||kf(h)?df(b,c,h,g):c.push((new La).a(h)),c.push(O(new Uc)))}d instanceof z||(c.push((new La).a(d)),c.push(O(new Wc)));c.push(O(new ad))}}function of(b,c){return b instanceof B&&b.Ec(c)&&b.c().c()instanceof z}function gf(b){return of(b,lf)}function hf(b){return of(b,mf)}function jf(b){return of(b,nf)}function kf(b){return b instanceof B}r.ia=function(b){for(var c=ef(this),d=0,g=c.length;d<g;d++)if(c[d].ia(b))return k;return m};
r.W=function(){for(var b=ef(this),c=0,d=b.length;c<d;c++){var g=b[c];if(g instanceof V){if(Pe(g))return k}else if(g.W())return k}return m};r.T=function(b,c,d,g,h){return(new cf).a(pf(b,c,d,g,h,this.Ka,1))};
function pf(b,c,d,g,h,j,q){if(gf(j))return 1===q?x([lf,j.c().b().T(b,c,d,g,h)]):x([lf,pf(b,c,d,g,h,j.c().b(),q-1)]);if(hf(j))return 1===q?x([mf,j.c().b().T(b,c,d,g,h)]):x([mf,pf(b,c,d,g,h,j.c().b(),q-1)]);if(jf(j))return x([nf,pf(b,c,d,g,h,j.c().b(),q+1)]);if(j.O())return j;for(var s=[],F=C;!j.O();)if(gf(j)||jf(j))F=pf(b,c,d,g,h,j,q),j=j.c().c();else{var L=j.b(),j=j.c();hf(L)?s.push(pf(b,c,d,g,h,L,q)):gf(L)||jf(L)||kf(L)?s.push(pf(b,c,d,g,h,L,q)):s.push(L)}j instanceof z||(F=j);return pb(s,F)}
r.S=function(b,c,d){return(new cf).a(qf(b,c,d,this.Ka,1))};
function qf(b,c,d,g,h){if(gf(g))return 1===h?x([lf,g.c().b().S(b,c,d)]):x([lf,pf(b,c,d,g.c().b(),h-1)]);if(hf(g))return 1===h?x([mf,g.c().b().S(b,c,d)]):x([mf,qf(b,c,d,g.c().b(),h-1)]);if(jf(g))return x([nf,qf(b,c,d,g.c().b(),h+1)]);if(g.O())return g;for(var j=[],q=C;!g.O();)if(gf(g)||jf(g))q=qf(b,c,d,g,h),g=g.c().c();else{var s=g.b(),g=g.c();hf(s)?j.push(qf(b,c,d,s,h)):gf(s)||jf(s)||kf(s)?j.push(qf(b,c,d,s,h)):j.push(s)}g instanceof z||(q=g);return pb(j,q)}
r.M=function(b){return(new cf).a(rf(b,this.Ka,1))};function rf(b,c,d){if(gf(c))return 1===d?x([lf,c.c().b().M(b)]):x([lf,rf(b,c.c().b(),d-1)]);if(hf(c))return 1===d?x([mf,c.c().b().M(b)]):x([mf,rf(b,c.c().b(),d-1)]);if(jf(c))return x([nf,rf(b,c.c().b(),d+1)]);if(c.O())return c;for(var g=[],h=C;!c.O();)if(gf(c)||jf(c))h=rf(b,c,d),c=c.c().c();else{var j=c.b(),c=c.c();hf(j)||gf(j)||jf(j)||kf(j)?g.push(rf(b,j,d)):g.push(j)}c instanceof z||(h=c);return pb(g,h)}
r.Y=function(b){return(new cf).a(sf(b,this.Ka,1))};function sf(b,c,d){if(gf(c))return 1===d?x([lf,c.c().b().Y(b)]):x([lf,sf(b,c.c().b(),d-1)]);if(hf(c))return 1===d?x([mf,c.c().b().Y(b)]):x([mf,sf(b,c.c().b(),d-1)]);if(jf(c))return x([nf,sf(b,c.c().b(),d+1)]);if(c.O())return c;for(var g=[],h=C;!c.O();)if(gf(c)||jf(c))h=sf(b,c,d),c=c.c().c();else{var j=c.b(),c=c.c();hf(j)||gf(j)||jf(j)||kf(j)?g.push(sf(b,j,d)):g.push(j)}c instanceof z||(h=c);return pb(g,h)}
r.l=function(b){b.za(this);for(var c=ef(this),d=0,g=c.length;d<g;d++)c[d].l(b);b.La(this)};function tf(){}r=tf.prototype;r.za=n();r.La=n();r.$b=function(b){this.za(b)};r.xc=function(b){this.za(b)};r.Zb=function(b){this.za(b)};r.fc=function(b){this.La(b)};function uf(){}uf.prototype=new tf;uf.prototype.a=function(b){this.Sb=A(new B,b,C);return this};uf.prototype.$b=function(b){b.m(this.Sb.b());this.Sb=A(new B,b,this.Sb)};uf.prototype.fc=function(){this.Sb=this.Sb.c()};function vf(){}vf.prototype=new tf;
r=vf.prototype;r.a=function(){this.yb=[];this.Kc=[];this.ub=0;this.Jc=-1;return this};r.$b=function(b){b.Rb()&&this.ub++};r.za=n();r.La=n();r.fc=function(b){b.Rb()&&this.ub--};r.xc=function(b){b=b.Sa-this.ub;if(this.Jc<b)this.Jc=b};function wf(){}wf.prototype=new tf;r=wf.prototype;r.a=function(b){this.yb=[];this.Kc=[];this.Ka=b;return this};r.Mb=function(){return this.Kc.length};r.$b=function(b){this.yb.unshift(b);if(b.Rb())this.Ka=this.Ka.M(0)};r.za=function(b){this.yb.unshift(b)};r.La=function(){this.yb.shift()};
r.fc=function(b){this.yb.shift();if(b.Rb())this.Ka=Ke(this.Ka)};r.xc=function(b){Vd(b,this.Ka)&&0<this.yb.length&&this.Kc.push(this.yb[0])};function xf(){}xf.prototype.a=function(){this.name=this.target=l;this.tc=this.Xc=this.kd=0;this.children=[];this.parent=l;this.ed={};this.dd={};return this};function yf(b,c){var d=c.Va(),g=b[d];if(g===i&&(g=(new xf).a(),g.target=c,g.name=d,b[d]=g,c instanceof V&&(d=c.ic,d!==l)))d=yf(b,d),d.children.push(g),g.parent=d;return g}function zf(){}
zf.prototype.a=function(b){this.target=b;this.Mb=0;this.key=b.Va();return this};function Af(b,c){var d=b[c.Va()];d===i&&(d=(new zf).a(c),b[d.key]=d);return d}function Bf(){}Bf.prototype.a=function(){this.Dc={};this.Bd={};this.Fc=l;this.now=0;return this};function Cf(){}Cf.prototype.kb=i;Cf.prototype.end=i;Cf.prototype.Db=i;
function Df(b){b.show();var c=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");if(c!==l)if(/^q$/i.test(c))Qc(b,Fc);else if(/^f$/i.test(c))b.Qc=b.i-1,Qc(b,Ef)}function Ff(){}Ff.prototype=new Cf;Ff.prototype.kb=n();Ff.prototype.end=n();Ff.prototype.Db=n();var Fc=new Ff;function Gf(){}Gf.prototype=new Cf;Gf.prototype.kb=function(b){Df(b)};Gf.prototype.end=function(b){za("VM thread finished: returning.");Df(b)};Gf.prototype.Db=n();var Hf=new Gf;
function If(){}If.prototype=new Cf;If.prototype.kb=function(b){b.ec=k;for(var c=[],d=[];0<=b.i;)Ic(b).b().Pb&&(c.push(Ic(b)),d.push(b.ka[b.i])),b.i--;for(var g=c.length-1;0<=g;g--)S(b,d[g],c[g])};If.prototype.end=n();If.prototype.Db=n();var Jf=new If;function Kf(){}Kf.prototype=new Cf;Kf.prototype.kb=function(b){b.i<=b.Qc&&Qc(b,Hf)};Kf.prototype.end=n();Kf.prototype.Db=n();var Ef=new Kf;function Lf(){}Lf.prototype=new Cf;
Lf.prototype.kb=function(b){var c=b.ab.Fc;if(c!==l){var d=yf(b.ab.Dc,c),c=1E6*(new Date).getTime()-b.ab.now;d.Xc+=c;d.tc+=c;for(d=d.parent;d!==l;)d.tc+=c,d=d.parent}var g=Sc(b);if(g!==l)b.s=b.ka[b.i],b.Ob=b.ra[b.i],this.wd(g,b),g.pa?(c=g.va(b),c instanceof Zc&&(c=c.r()),d=yf(b.ab.Dc,c),g=g.xa,g!==l&&Af(d.ed,g).Mb++,g=yf(b.ab.Dc,g),c!==l&&Af(g.dd,c).Mb++,d.kd++,b.ab.Fc=c):b.ab.Fc=g.xa!==l?g.xa:C,b.ab.now=1E6*(new Date).getTime()};Lf.prototype.end=n();
Lf.prototype.Db=function(b){b.ab=(new Bf).a();b.ab.now=1E6*(new Date).getTime()};var Mf=new Lf;function Nf(){}Nf.prototype=new N;Nf.prototype.className="AssignmentBuilder.BuildAssignment1";Nf.prototype.a=function(b,c,d){O(this);this.cc=b;this.L=c;this.u=d;this.m(G("AssignmentBuilder.build"));return this};
Nf.prototype.d=function(b){if(!(this.L instanceof z)){try{this.L.Eb()}catch(c){c instanceof Ga||f(c),f(t(new u,"assign: unexpected: "+this.L))}E(b,(new Of).a(this.cc,this.L.c(),this.u));Rf(b,this.L.b(),this.u)}};function Of(){}Of.prototype=new N;Of.prototype.className="AssignmentBuilder.BuildAssignment2";Of.prototype.a=function(b,c,d){O(this);this.cc=b;this.L=c;this.u=d;this.m(G("AssignmentBuilder.build"));return this};
Of.prototype.d=function(b){this.cc.Pa(R(b).reduce());E(b,(new Nf).a(this.cc,this.L,this.u))};var Sf=C,Tf=K("at-string");
function Rf(b,c,d){if(c instanceof z)D(b,c);else if(c instanceof Pa&&!(Sf instanceof z))E(b,(new Uf).a(d)),Tf.bound()?Ia(Tf.value(),b,A(new B,c,C)):D(b,c);else if(c instanceof M&&Vf(c))Rf(b,Wf(hb(c,"ssexpand")),d);else if(c instanceof B){var g,h=c.b();g=!(h instanceof M)||!h.bound()?l:oc(h.value());if(g!==l)h=c.c(),h instanceof B||f(new TypeError),E(b,(new Xf).a(d)),Ia(g,b,h);else if(g=c.b(),gb("quote",g))D(b,(new Oe).a(c.c().b()));else if(g===nf)E(b,(new Yf).a()),Zf(b,c.c().b(),d,1);else if(gb("fn",
g))h=c.c(),h instanceof B||f(new TypeError),c=h,h=d,h===l&&f(new ReferenceError("can't have null lexical bindings!")),g={},d=c.b(),d instanceof z||(h=[g].concat(h)),E(b,(new $f).a(c,h,g)),d instanceof z?D(b,A(new B,C,C)):(c=h,ag(d,c[0],[0],m),bg(b,d,c));else if(gb("if",g)){h=c=c.c();for(g=(new Te).a();0<c.la();)switch(c.la()){case 0:break;case 1:g.append((new Ud).a());c=c.c();break;case 2:g.append((new Ve).a());c=c.c();c instanceof B||f(new TypeError);c.Lc(A(new B,C,C));c=c.c();break;default:g.append((new Ve).a()),
c=c.c().c()}c=h;E(b,(new cg).a(g));E(b,(new dg).a(g,c,d))}else if(gb("assign",g)){c=c.c();h=(new Re).a();g=c.la();0!==g%2&&f(t(new u,"assign: requires even number of arguments"));g=g/2-1;0>g&&f(t(new u,"assign: nothing to assign"));for(h.$=(new Qe).a();0<g;)h.$=Me(new Le,h.$),g--;g=(new La).a(h);g.m(G("AssignmentBuilder.build"));E(b,g);E(b,(new Nf).a(h,c,d))}else gb("compose",g.wc())?(h=g.c(),h instanceof B||f(new TypeError),c=c.c(),c instanceof B||f(new TypeError),Rf(b,eg(h,c),d)):gb("complement",
g.wc())?(h=c.c(),h instanceof B||f(new TypeError),c=Rf,g=g.c().b(),h=A(new B,K("no"),A(new B,A(new B,g,h),C)),c(b,h,d)):g instanceof M&&Vf(g)?Rf(b,A(new B,Wf(hb(g,"ssexpand")),c.c()),d):E(b,(new fg).a(c,d,c,[]))}else{if(c instanceof M)for(h=0;h<d.length;h++)if(c.name()in d[h]){D(b,Ie(c,h,d[h][c.name()]));return}D(b,c)}}function Uf(){}Uf.prototype=new N;Uf.prototype.className="Compiler.FinishAtString";Uf.prototype.a=function(b){O(this);this.u=b;this.m(G("Compiler.compile"));return this};
Uf.prototype.d=function(b){var c=R(b);c instanceof Pa?D(b,c):Rf(b,c,this.u)};function Xf(){}Xf.prototype=new N;Xf.prototype.className="Compiler.ThenCompile";Xf.prototype.a=function(b){O(this);this.u=b;this.m(G("Compiler.compilePair"));return this};Xf.prototype.d=function(b){Rf(b,R(b),this.u)};function Yf(){}Yf.prototype=new N;Yf.prototype.className="Compiler.WrapQuasiQuotation";Yf.prototype.a=function(){O(this);this.m(G("Compiler.compilePair"));return this};Yf.prototype.d=function(b){D(b,(new cf).a(R(b)))};
function eg(b,c){var d=b.b();if(b.c()instanceof z)return A(new B,d,c);var g=b.c();g instanceof B||f(new TypeError);return A(new B,d,A(new B,eg(g,c),C))}function $f(){}$f.prototype=new N;$f.prototype.className="FunctionBodyBuilder.Intermediate";$f.prototype.a=function(b,c,d){O(this);this.ib=b;this.u=c;this.Gc=d;this.m(G("FunctionBodyBuilder.build"));return this};
$f.prototype.d=function(b){var c=R(b),d=c.b(),c=c.c(),g=this.ib.c();g instanceof B||f(new TypeError);E(b,(new gg).a(c,this.Gc,g,d,b.N));E(b,(new hg).a(g,this.u,[]))};function gg(){}gg.prototype=new N;r=gg.prototype;r.hc=k;r.className="FunctionBodyBuilder.Finish";r.a=function(b,c,d,g,h){O(this);this.z=b;this.Gc=c;this.L=d;this.Aa=g;this.Kb=h;this.m(G("FunctionBodyBuilder.build"));return this};r.yc=function(b){return b instanceof Error};
r.d=function(b){var c=b.error();if(c!==l)b.Xa=l,b.N=this.Kb,f(t(new u,"building function fn "+this.z+" "+this.L+": "+c,c));D(b,ig(this.z,this.Gc,R(b),this.Aa))};function ig(b,c,d,g){var h="rainbow.function.interpreted.optimise.Bind"+jg(b,m),j=v[h];if(j===i)return g instanceof z?W(new kg,b,c,d):W(new lg,b,c,d);try{var q=j.qa(b,c,d);q instanceof y||f(new TypeError);return q}catch(s){s instanceof Error||f(s),f(t(new u,"Couldn't instantiate "+h+": "+s,s))}}
function jg(b,c){if(b instanceof z)return"";if(b instanceof B){if(c){if(mg(b)){var d=b.c().c().b();return d.Ja()?"_Oliteral":d instanceof U?"_Obound":"_Oother"}d=b.b();return"_D"+jg(d,k)+jg(b.c(),m)+"_d"}return jg(b.b(),k)+jg(b.c(),m)}return c?"_A":"_R"}function ng(b,c,d){!(c instanceof z)&&c instanceof B&&(d&&mg(c)?c.c().c().b().l(b):(ng(b,c.b(),k),ng(b,c.c(),m)))}var og=K("o"),pg=K("#NIL#");function bg(b,c,d){var g={value:C},h=[];E(b,(new qg).a(h,g));E(b,(new rg).a(h,g,c,d))}function qg(){}
qg.prototype=new N;qg.prototype.className="FunctionParameterListBuilder.ReturnParams";qg.prototype.a=function(b,c){O(this);this.K=b;this.Aa=c;this.m(G("FunctionParameterListBuilder.buildParams_"));return this};qg.prototype.d=function(b){if(0===this.K.length){var c;c=R(b)}else c=pb(this.K,R(b));c=A(new B,this.Aa.value,c);D(b,c)};function rg(){}rg.prototype=new N;rg.prototype.className="FunctionParameterListBuilder.BuildParams1";
rg.prototype.a=function(b,c,d,g){O(this);this.K=b;this.Aa=c;this.ya=d;this.u=g;this.m(G("FunctionParameterListBuilder.buildParams_"));return this};
rg.prototype.d=function(b){if(this.ya.O()){var c=(new La).a(this.ya);c.m(this);E(b,c)}else{var c=this.ya.b(),d=this.ya.c();if(c instanceof B)if(c instanceof z)this.K.push(pg),E(b,(new rg).a(this.K,this.Aa,d,this.u));else if(this.Aa.value=$a,mg(c)){var g=c.c().b();E(b,(new sg).a(this.K,this.Aa,d,this.u,g));Rf(b,c.c().c().b(),this.u)}else E(b,(new tg).a(this.K,this.Aa,d,this.u)),bg(b,c,this.u);else this.K.push(c),E(b,(new rg).a(this.K,this.Aa,d,this.u))}};function sg(){}sg.prototype=new N;
sg.prototype.className="FunctionParameterListBuilder.BuildParams2a";sg.prototype.a=function(b,c,d,g,h){O(this);this.K=b;this.Aa=c;this.ya=d;this.u=g;this.md=h;this.m(G("FunctionParameterListBuilder.buildParams_"));return this};sg.prototype.d=function(b){this.K.push(x([og,this.md,R(b)]));E(b,(new rg).a(this.K,this.Aa,this.ya,this.u))};function tg(){}tg.prototype=new N;tg.prototype.className="FunctionParameterListBuilder.BuildParams2b";
tg.prototype.a=function(b,c,d,g){O(this);this.K=b;this.Aa=c;this.ya=d;this.u=g;this.m(G("FunctionParameterListBuilder.buildParams_"));return this};tg.prototype.d=function(b){this.K.push(R(b).c());E(b,(new rg).a(this.K,this.Aa,this.ya,this.u))};function ug(b){for(;!b.O();){if(b.b()instanceof B)return $a;b=b.c()}return C}
function ag(b,c,d,g){b instanceof z||(b instanceof B?g&&mg(b)?ag(b.c().b(),c,d,k):(g=b.b(),g instanceof z?(c[pg.name()]=d[0],d[0]++):ag(g,c,d,k),ag(b.c(),c,d,m)):(b instanceof M||f(new TypeError),c[b.name()]=d[0],d[0]++))}function vg(b,c,d,g){var h=l;g instanceof M&&!g.Ia(b.name)?h=g:mg(g)&&!g.c().b().Ia(b.name)?h=x([og,g.c().b(),g.c().c().b().S(b,c,d)]):!mg(g)&&g instanceof B&&(h=g);return h}
function wg(b,c,d,g){var h=l;g instanceof M&&!g.Ia(b.name)?h=g:mg(g)&&!g.c().b().Ia(b.name)?h=x([og,g.c().b(),g.c().c().b().T(b,c,m,0,d)]):!mg(g)&&g instanceof B&&(h=g);return h}function cg(){}cg.prototype=new N;cg.prototype.className="IfBuilder.Reduce";cg.prototype.a=function(b){O(this);this.zb=b;this.m(G("IfBuilder.build"));return this};cg.prototype.d=function(b){D(b,this.zb.reduce())};function dg(){}dg.prototype=new N;dg.prototype.className="IfBuilder.BuildIf1";
dg.prototype.a=function(b,c,d){O(this);this.zb=b;this.L=c;this.u=d;this.m(G("IfBuilder.build"));return this};dg.prototype.d=function(b){if(!(this.L instanceof z)){try{this.L.Eb()}catch(c){c instanceof Ga||f(c),f(t(new u,"if: unexpected: "+this.L))}E(b,(new xg).a(this.zb,this.L.c(),this.u));Rf(b,this.L.b(),this.u)}};function xg(){}xg.prototype=new N;xg.prototype.className="IfBuilder.BuildIf2";xg.prototype.a=function(b,c,d){O(this);this.zb=b;this.L=c;this.u=d;this.m(G("IfBuilder.build"));return this};
xg.prototype.d=function(b){this.zb.Pa(R(b).reduce());E(b,(new dg).a(this.zb,this.L,this.u))};function fg(){}fg.prototype=new N;fg.prototype.className="InvocationBuilder.BuildInvocation";fg.prototype.a=function(b,c,d,g){O(this);this.L=b;this.u=c;this.Da=d;this.Qa=g;this.m(G("InvocationBuilder.build"));return this};
fg.prototype.d=function(b){if(this.L instanceof z)D(b,(new Xe).a(x(this.Qa)).reduce());else{try{this.L.Eb()}catch(c){c instanceof Ga||f(c),f(t(new u,"can't compile "+this.Da+"; not a proper list"))}E(b,(new fg).a(this.L.c(),this.u,this.Da,this.Qa));E(b,(new yg).a(this.Qa));Rf(b,this.L.b(),this.u)}};function yg(){}yg.prototype=new N;yg.prototype.className="InvocationBuilder.ReducePush";yg.prototype.a=function(b){O(this);this.Qa=b;this.m(G("InvocationBuilder.build"));return this};yg.prototype.d=function(b){this.Qa.push(R(b).reduce())};
function hg(){}hg.prototype=new N;hg.prototype.className="PairExpander.ExpandPair";hg.prototype.a=function(b,c,d){O(this);this.L=b;this.u=c;this.K=d;this.m(G("PairExpander.expand"));return this};hg.prototype.d=function(b){if(this.L instanceof z||!(this.L instanceof B))E(b,(new zg).a(this.K)),Rf(b,this.L,this.u);else{E(b,(new hg).a(this.L.c(),this.u,this.K));var c=this.L.b();E(b,(new Ag).a(this.K));Rf(b,c,this.u)}};function Ag(){}Ag.prototype=new N;Ag.prototype.className="PairExpander.ReducePush";
Ag.prototype.a=function(b){O(this);this.Qa=b;this.m(G("PairExpander.expand"));return this};Ag.prototype.d=function(b){this.Qa.push(R(b).reduce())};function zg(){}zg.prototype=new N;zg.prototype.className="PairExpander.FinishPair";zg.prototype.a=function(b){O(this);this.K=b;this.m(G("PairExpander.expand"));return this};zg.prototype.d=function(b){var c=pb(this.K,R(b).reduce());c instanceof B||f(new TypeError);D(b,c)};var nf=K("quasiquote"),lf=K("unquote"),mf=K("unquote-splicing");
function Zf(b,c,d,g){c.O()?D(b,c):gf(c)?Bg(b,lf,c,g,d):hf(c)?Bg(b,mf,c,g,d):jf(c)?(E(b,(new Cg).a(nf)),Zf(b,c.c().b(),d,g+1)):E(b,(new Dg).a([],c,d,g))}function Dg(){}Dg.prototype=new N;Dg.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";Dg.prototype.a=function(b,c,d,g){O(this);this.K=b;this.Ba=c;this.u=d;this.ub=g;this.m(G("QuasiQuoteCompiler.compile"));return this};
Dg.prototype.d=function(b){if(this.Ba.O())E(b,(new Eg).a(this.K)),Zf(b,this.Ba,this.u,this.ub);else{var c=this.Ba.b();E(b,(new Dg).a(this.K,this.Ba.c(),this.u,this.ub));c.O()?this.K.push(c):(E(b,(new Fg).a(this.K)),Zf(b,c,this.u,this.ub))}};function Eg(){}Eg.prototype=new N;Eg.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";Eg.prototype.a=function(b){O(this);this.K=b;this.m(G("QuasiQuoteCompiler.compile"));return this};Eg.prototype.d=function(b){D(b,pb(this.K,R(b)))};function Fg(){}
Fg.prototype=new N;Fg.prototype.className="QuasiQuoteCompiler.Push";Fg.prototype.a=function(b){O(this);this.K=b;this.m(G("QuasiQuoteCompiler.compile"));return this};Fg.prototype.d=function(b){this.K.push(R(b))};function Bg(b,c,d,g,h){d=d.c().b();E(b,(new Cg).a(c));1===g?Rf(b,d,h):Zf(b,d,h,g-1)}function Cg(){}Cg.prototype=new N;Cg.prototype.className="QuasiQuoteCompiler.Prefix";Cg.prototype.a=function(b){O(this);this.pd=b;this.m(G("QuasiQuoteCompiler.compile"));return this};
Cg.prototype.d=function(b){D(b,x([this.pd,R(b)]))};var Gg={},Hg=K("let"),Ig=K("self"),Jg=K("it");K("afn");var Kg=K("do"),Lg=K("with"),Mg=K("aif");
function Ye(b){if(b.b()===Hg)a:{b=b.c();if(b.b()===Jg){var c=b.c().b(),d=b.c().c();if(d.c()instanceof z&&d.b()instanceof Te&&(d=d.b(),!(d.Z instanceof Ve)?0:"it"===d.Z.n.toString())){b=d.Q();d=d.Z;d instanceof Ve||f(new TypeError);b=x([Mg,c,b,d.next]);break a}}else if(b.b()===Ig&&b.c().b()instanceof z&&(d=b.c().c(),d.b()instanceof Re&&d.c()instanceof z)){c=d.b();var d=c.$,g="self";if(d.name instanceof M)d=d.name.name()===g;else{if(!(d.name instanceof le))g=d.name,g instanceof U||f(new TypeError);
d=d.name.name.name()===g}if(d&&c.$.C instanceof V&&c.$ instanceof Qe){b=Gg.Ed(c.$.C);break a}}b=A(new B,Hg,b)}return b}function Ze(b){var c=b.b(),d=b.c(),g=c.z;if(d.la()===g.la())if(0===d.la())c=x([Kg].concat(c.body));else if(1===d.la())c=x([Hg,g.b(),d.b()].concat(c.body));else{b=d;for(d=[];!(g instanceof z);)d.push(g.b()),d.push(b.b()),g=g.c(),b=b.c();c=x([Lg,x(d)].concat(c.body))}else c=b;return c}function X(){}X.prototype=new y;r=X.prototype;r.className="Builtin";
function Z(b,c){b.ea=c;K(c).ha(b);return b}r.j=function(b){f(t(new u,"Builtin:invoke(args):provide implementation! "+this.name()+" args "+b))};r.g=function(b,c){D(b,this.j(c))};r.ta=p(0);r.type=function(){return Ng};function Rb(b,c,d){d<b.la()&&(za(c+" got args "+b+" was expecting expecting at most "+d),f(t(new u,c.toLowerCase()+" expects at most "+d+" arguments: given "+b)))}function Og(b,c,d){b.la()!==c&&f(t(new u,d.toLowerCase()+" expects "+c+" arguments: given "+b))}
r.toString=function(){return"[builtin:"+(this.ea===l||0===this.ea.length?this.className:this.ea)+"]"};r.Va=function(){return this.toString()};r.name=function(){return""===this.ea?this.className.toLowerCase():this.ea};var Ng=K("fn");function Zc(){}Zc.prototype=new y;r=Zc.prototype;r.className="Closure";r.a=function(b,c){this.Ba=b;this.ja=c;return this};r.wa=function(b){this.Ba.ma(b,this.ja)};r.t=function(b,c){this.Ba.w(b,this.ja,c)};r.U=function(b,c,d){this.Ba.Ga(b,this.ja,c,d)};
r.g=function(b,c){this.Ba.D(b,this.ja,c)};r.type=function(){return Ng};r.toString=function(){return this.Ba.toString()};r.Va=function(){return this.Ba.Va()};r.r=o("Ba");function Pg(b){return 0===b.length?m:b.charCodeAt(0)===Qg?Pg(b.substring(1)):b.charAt(b.length-1)===Qg?Pg(b.substring(0,b.length-1)):-1!==b.indexOf(Rg)}function V(){}V.prototype=new y;r=V.prototype;r.J=V;r.className="InterpretedFunction";
function W(b,c,d,g){b.name=C;b.z=c;b.p=d;b.body=tb(g);b.o=l;b.ic=l;b.aa=l;b.wb=l;b.Dd=l;Sg(b);return b}r.uc=function(b){if(this.name===b)this.name=C};r.ac=function(b){this.name=b;for(var b=(new uf).a(this),c=0,d=this.body.length;c<d;c++)this.body[c].l(b)};r.bc=o("name");r.Va=function(){if(this.wb!==l)return this.wb;this.name instanceof z?(this.wb=this.toString(),this.ic!==l&&(this.wb+=" in "+this.ic.Va())):this.wb=this.bc().toString();return this.wb};
r.reduce=function(){var b;if(Tg&&!this.W()&&!(this.z instanceof z)){var c="rainbow.function.interpreted.optimise.stack.Stack"+jg(this.z,m),d=v[c];if(d===i)b=this;else try{var g=d.Ua(this);g instanceof y||f(new TypeError);b=g}catch(h){h instanceof Error||f(h),f(t(new u,"Couldn't instantiate "+c+": "+h,h))}}else b=this;return b};function Sg(b){var c=[];af(b,c);b.o=x(c);b.o.l((new Ug).a(b))}r.m=ba("ic");function Ug(){}Ug.prototype=new tf;Ug.prototype.a=function(b){this.xa=b;return this};
Ug.prototype.Zb=function(b){b.m(this.xa)};function af(b,c){if(0===b.body.length)c.push((new La).a(C));else for(var d=0;d<b.body.length;d++){var g=d===b.body.length-1;b.body[d].h(c);g||c.push((new ed).a("intermediate-fn-expression"))}}r=V.prototype;r.nb=function(b,c){return 1===this.body.length&&this.Cc(b,c)&&!this.ia(0)&&!this.W()};
r.Cc=function(b,c){var d=this.p[b.name()],d=Ie(b,0,d),g;if(!(g=c.Ja()))if(!(g=c instanceof Oe))if(!(g=c instanceof M))if(!(g=c instanceof U)){d=(new wf).a(d);g=0;for(var h=this.body.length;g<h;g++)this.body[g].l(d);g=1>=d.Mb()}return g};r.W=function(){for(var b=0,c=this.body.length;b<c;b++){var d=this.body[b];if(d instanceof V){if(Pe(d))return k}else if(d.W())return k}return m};function Vg(b,c){for(var d=0,g=b.body.length;d<g;d++)if(b.body[d].ia(c))return k;return m}
r.Rb=function(){return!(this.z instanceof z)};r.ia=function(b){return this.z instanceof z?Vg(this,b):Vg(this,b+1)};r.wa=function(b){return this.ma(b,l)};r.ma=function(b,c){return this.D(b,c,C)};r.t=function(b,c){return this.w(b,l,c)};r.w=function(b,c,d){return this.D(b,c,A(new B,d,C))};r.U=function(b,c,d){return this.Ga(b,l,c,d)};r.Ga=function(b,c,d,g){return this.D(b,c,A(new B,d,A(new B,g,C)))};r.Za=function(b,c,d,g){return this.Qb(b,l,c,d,g)};
r.Qb=function(b,c,d,g,h){return this.D(b,c,A(new B,d,A(new B,g,A(new B,h,C))))};r.g=function(b,c){return this.D(b,l,c)};r.D=function(){f(t(new u,"error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this))};r.h=function(b){Pe(this)?b.push((new Yc).a(this)):b.push((new La).a(this))};r.Ja=function(){return!Pe(this)};function Pe(b){var c=(new vf).a();b.l(c);return-1<c.Jc}
r.l=function(b){b.$b(this);ng(b,this.z,m);for(var c=0,d=this.body.length;c<d;c++)this.body[c].l(b);b.fc(this);this.aa!==l&&this.aa.l(b)};r.ta=function(b){f(t(new u,"Can't compare "+this+" to "+b))};r.toString=function(){if(this.z instanceof B&&this.z.b()===K("_")&&this.z.c()instanceof z&&1===this.body.length&&!(this.body[0]instanceof Fb)){if(this.body[0]instanceof z)return"[]";var b=this.body[0].toString();return"["+b.substring(1,b.length-1)+"]"}return x([K("fn"),this.z].concat(this.body)).toString()};
r.type=function(){return Ng};r.Fb=function(b){return this.body[b]};r.Tc=function(){return this.body[this.body.length-1]};r.length=function(){return this.body.length};function Wg(b,c,d){try{c.c().Ra()}catch(g){g instanceof Ga||f(g),Xg(b,d)}}function Xg(b,c){f(t(new u,"args "+c+" doesn't match signature for "+b))}
r.pb=function(b,c,d){var g=this.p[b.name()];g===i&&f(new ReferenceError);var b=Ie(b,0,g),h;for(var j=this.z,q=c,s=C,F=[];!j.O();){var L=wg(b,q,g,j.b());L!==l&&F.push(L);j=j.c()}j instanceof M&&(q=wg(b,q,g,j),q!==l&&(s=q));try{h=pb(F,s)}catch(na){na instanceof Error||f(na),f(t(new u,"couldn't curry params "+j+", got list "+F+" and last "+s))}j={};ag(h,j,[0],m);s=h instanceof z;!s&&d&&(c=c.M(0));d=[];for(F=0;F<this.body.length;F++)d.push(this.body[F].T(b,c,s,0,g).reduce());c=x(d);g=ug(h);return ig(h,
j,c,g)};r.T=function(b,c,d,g,h){for(var b=this.z instanceof z?b:b.M(0),d=Yg(this),j=[],q=0;q<this.body.length;q++)j.push(this.body[q].T(b,c,m,g+1,h).reduce());b=x(j);d.body=tb(b);Sg(d);return d};r.S=function(b,c,d){if(!(this.z instanceof z))return this;for(var g=Yg(this),h=[],j=0;j<this.body.length;j++)h.push(this.body[j].S(b,c,d).reduce());b=x(h);g.body=tb(b);Sg(g);return g};
r.M=function(b){this.z instanceof z||b++;for(var c=Yg(this),d=[],g=0;g<this.body.length;g++)d.push(this.body[g].M(b));b=x(d);c.body=tb(b);Sg(c);return c};function Yg(b){var c=new b.J,d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function Zg(b,c,d){d.Cb(c)||f(t(new u,"error: "+b+" expects "+c+" args, got "+d))}function kg(){}kg.prototype=new V;kg.prototype.J=kg;kg.prototype.className="SimpleArgs";
kg.prototype.D=function(b,c,d){var g=0,h;for(h in this.p)g++;g=c=(new w).a(g,c);for(h=this.z;!(h instanceof z);)if(h instanceof M){g.add(d);break}else g.add(d.b()),d=d.c(),h=h.c();S(b,c,this.o)};function lg(){}lg.prototype=new V;lg.prototype.J=lg;lg.prototype.className="ComplexArgs";lg.prototype.D=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);E(b,(new $g).a(c,this.o,this));E(b,(new ah).a(c,this.z,d,this))};function $g(){}$g.prototype=new N;$g.prototype.className="ComplexArgs.Run";
$g.prototype.a=function(b,c,d){O(this);this.ja=b;this.o=c;this.m(d);return this};$g.prototype.d=function(b){S(b,this.ja,this.o)};function ah(){}ah.prototype=new N;ah.prototype.className="ComplexArgs.BuildComplex";ah.prototype.a=function(b,c,d,g){O(this);this.ja=b;this.ya=c;this.ib=d;this.m(g);return this};
ah.prototype.d=function(b){if(this.ya.O())this.ya instanceof M&&this.ja.add(this.ib);else{var c=this.ya.b(),d=this.ib.b();E(b,(new ah).a(this.ja,this.ya.c(),this.ib.c(),this.xa));if(c instanceof M)this.ja.add(d);else if(mg(c))if(c=c.c(),c instanceof B||f(new TypeError),this.ib instanceof z){E(b,(new bh).a(this.ja,this));var d=this.ja,g=[];c.c().b().h(g);S(b,d,x(g))}else this.ja.add(d);else{try{d.Eb()}catch(h){h instanceof Ga||f(h),f(t(new u,"Expected list argument for destructuring parameter "+c+
", got "+d))}E(b,(new ah).a(this.ja,c,d,this.xa))}this.ya=this.ya.c();this.ib=this.ib.c()}};function bh(){}bh.prototype=new N;bh.prototype.className="ComplexArgs.AddToLc";bh.prototype.a=function(b,c){O(this);this.ja=b;this.m(c);return this};bh.prototype.d=function(b){this.ja.add(R(b))};function mg(b){return!(b instanceof B)?m:b.b()===ch}var ch=K("o");function dh(){}dh.prototype=new V;r=dh.prototype;r.J=dh;r.className="StackFunctionSupport";r.nb=function(b,c){return this.Cc(b,c)&&!this.ia(0)};
r.Cc=function(b,c){var d=this.p[b.name()],d=(new le).a(b,d);return c.Ja()||c instanceof Oe||c instanceof M||1===this.body.length&&this.body[0]instanceof le&&se(d,this.body[0])};r.Rb=p(m);
r.pb=function(b,c){var d=this.p[b.name()],g=(new le).a(b,d),h;for(var j=this.z,q=C,s=[];!j.O();){var F=vg(g,c,d,j.b());F!==l&&s.push(F);j=j.c()}j instanceof M&&(F=vg(g,c,d,j),F!==l&&(q=F));try{h=pb(s,q)}catch(L){L instanceof Error||f(L),f(t(new u,"couldn't curry params "+j+", got list "+s+" and last "+q))}j={};ag(h,j,[0],m);q=[];for(s=0;s<this.body.length;s++)q.push(this.body[s].S(g,c,d).reduce());var d=x(q),g=ug(h),na;q=jg(h,m);if(""===q)na=ig(h,j,d,g);else{g="rainbow.function.interpreted.optimise.stack.Stack"+
q;q=v[g];q===i&&f(t(new u,"no stack-based function implementation for "+h+"; couldn't find "+g));try{var Y=q.ga(h,j,d);Y instanceof y||f(new TypeError);na=Y}catch(bb){bb instanceof Error||f(bb),f(t(new u,"Couldn't instantiate "+g+": "+bb,bb))}}return na};function eh(b,c){for(var d=Array(~~c.length),g=0;g<c.length;g++)d[g]=c[g].Y(b);return x(d)}function $e(){}var fh={};v["rainbow.function.interpreted.optimise.Bind"]=fh;$e.prototype=new V;$e.prototype.J=$e;$e.prototype.className="Bind";
fh.qa=function(b,c,d){return W(new $e,b,c,d)};$e.prototype.ma=function(b,c){S(b,c,this.o)};$e.prototype.D=function(b,c,d){try{d.Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 0 args, got "+d))}S(b,c,this.o)};function gh(){}var hh={};v["rainbow.function.interpreted.optimise.Bind_A"]=hh;gh.prototype=new V;gh.prototype.J=gh;gh.prototype.className="Bind_A";hh.qa=function(b,c,d){return W(new gh,b,c,d)};gh.prototype.ma=function(){f(t(new u,"function "+this+" expects 1 arg, got none"))};
gh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);S(b,c,this.o)};gh.prototype.D=function(b,c,d){d instanceof z&&this.ma(b,c);try{d.c().Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 1 arg, got "+d+" calling "+this))}this.w(b,c,d.b())};function ih(){}var jh={};v["rainbow.function.interpreted.optimise.Bind_A_A"]=jh;ih.prototype=new V;ih.prototype.J=ih;ih.prototype.className="Bind_A_A";jh.qa=function(b,c,d){return W(new ih,b,c,d)};
ih.prototype.ma=function(){f(t(new u,"error: expected 2 args, got none"))};ih.prototype.w=function(b,c,d){f(t(new u,"error: expected 2 args, got 1: "+d))};ih.prototype.Ga=function(b,c,d,g){var h=0,j;for(j in this.p)h++;c=(new w).a(h,c);c.add(d);c.add(g);S(b,c,this.o)};ih.prototype.D=function(b,c,d){try{d.c().c().Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 2 args, got "+d))}this.Ga(b,c,d.b(),d.c().b())};function kh(){}var lh={};v["rainbow.function.interpreted.optimise.Bind_A_A_A"]=lh;
kh.prototype=new V;kh.prototype.J=kh;kh.prototype.className="Bind_A_A_A";lh.qa=function(b,c,d){return W(new kh,b,c,d)};kh.prototype.Qb=function(b,c,d,g,h){var j=0,q;for(q in this.p)j++;c=(new w).a(j,c);c.add(d);c.add(g);c.add(h);S(b,c,this.o)};kh.prototype.D=function(b,c,d){Wg(this,d.c().c().c(),d);this.Qb(b,c,d.b(),d.c().b(),d.c().c().b())};function mh(){}var nh={};v["rainbow.function.interpreted.optimise.Bind_A_A_R"]=nh;mh.prototype=new V;mh.prototype.J=mh;mh.prototype.className="Bind_A_A_R";
nh.qa=function(b,c,d){return W(new mh,b,c,d)};mh.prototype.ma=function(){f(t(new u,"error: expected at least 2 arg, got none"))};mh.prototype.w=function(b,c,d){f(t(new u,"error: expected at least 2 args, got one: "+d))};mh.prototype.D=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d.b());c.add(d.c().b());c.add(d.c().c());S(b,c,this.o)};function oh(){}var ph={};v["rainbow.function.interpreted.optimise.Bind_A_Obound"]=ph;oh.prototype=new V;oh.prototype.J=oh;
oh.prototype.className="Bind_A_Obound";ph.qa=function(b,c,d){c=W(new oh,b,c,d);d=b.c().b().c().c().b();d instanceof U||f(new TypeError);c.V=d;b=b.c().b().c().b();b instanceof M||f(new TypeError);if(c.nb(b,c.V))try{var g=c.pb(b,c.V,m);g instanceof V||f(new TypeError);c.aa=g}catch(h){h instanceof Error||f(h),Aa(h)}return c};oh.prototype.w=function(b,c,d){if(this.aa!==l)this.aa.w(b,c,d);else{var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);c.add(this.V.v(c));S(b,c,this.o)}};
oh.prototype.Ga=function(b,c,d,g){var h=0,j;for(j in this.p)h++;c=(new w).a(h,c);c.add(d);c.add(g);S(b,c,this.o)};oh.prototype.D=function(b,c,d){d instanceof z&&Xg(this,d);var g=d.b(),h=d.c();h instanceof z?this.w(b,c,g):(Wg(this,h.c(),d),this.Ga(b,c,g,h.b()))};function qh(){}var rh={};v["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=rh;qh.prototype=new V;qh.prototype.J=qh;qh.prototype.className="Bind_A_Oliteral";
rh.qa=function(b,c,d){c=W(new qh,b,c,d);c.V=b.c().b().c().c().b();b=b.c().b().c().b();b instanceof M||f(new TypeError);if(c.nb(b,c.V))try{var g=c.pb(b,c.V,m);g instanceof V||f(new TypeError);c.aa=g}catch(h){h instanceof Error||f(h),Aa(h)}return c};qh.prototype.w=function(b,c,d){if(this.aa!==l)this.aa.w(b,c,d);else{var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);c.add(this.V);S(b,c,this.o)}};
qh.prototype.Ga=function(b,c,d,g){var h=0,j;for(j in this.p)h++;c=(new w).a(h,c);c.add(d);c.add(g);S(b,c,this.o)};qh.prototype.D=function(b,c,d){d instanceof z&&Xg(this,d);var g=d.b(),h=d.c();h instanceof z?this.w(b,c,g):(Wg(this,h.c(),d),this.Ga(b,c,g,h.b()))};function sh(){}var th={};v["rainbow.function.interpreted.optimise.Bind_A_Oother"]=th;sh.prototype=new V;sh.prototype.J=sh;sh.prototype.className="Bind_A_Oother";
th.qa=function(b,c,d){c=W(new sh,b,c,d);d=[];b.c().b().c().c().b().h(d);c.Ic=x(d);return c};sh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);E(b,(new uh).a(c,this.o,this));S(b,c,this.Ic)};sh.prototype.Ga=function(b,c,d,g){var h=0,j;for(j in this.p)h++;c=(new w).a(h,c);c.add(d);c.add(g);S(b,c,this.o)};sh.prototype.D=function(b,c,d){d instanceof z&&Xg(this,d);var g=d.b(),h=d.c();h instanceof z?this.w(b,c,g):(Wg(this,h.c(),d),this.Ga(b,c,g,h.b()))};
function vh(){}var wh={};v["rainbow.function.interpreted.optimise.Bind_A_R"]=wh;vh.prototype=new V;vh.prototype.J=vh;vh.prototype.className="Bind_A_R";wh.qa=function(b,c,d){return W(new vh,b,c,d)};vh.prototype.ma=function(){f(t(new u,"error: expected at least 1 arg, got none"))};vh.prototype.D=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d.b());c.add(d.c());S(b,c,this.o)};function xh(){}var yh={};v["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=yh;xh.prototype=new V;
xh.prototype.J=xh;xh.prototype.className="Bind_D_A_A_A_d";yh.qa=function(b,c,d){return W(new xh,b,c,d)};xh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);d instanceof B||f(new TypeError);c.add(d.b());d=d.c();d instanceof B||f(new TypeError);c.add(d.b());d=d.c();d instanceof B||f(new TypeError);c.add(d.b());S(b,c,this.o)};
xh.prototype.D=function(b,c,d){try{d.c().Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 1 arg, got extra "+d.c()+" calling "+this))}this.w(b,c,d.b())};function zh(){}var Ah={};v["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=Ah;zh.prototype=new V;zh.prototype.J=zh;zh.prototype.className="Bind_D_A_A_d";Ah.qa=function(b,c,d){return W(new zh,b,c,d)};
zh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);d instanceof B||f(new TypeError);c.add(d.b());d=d.c();d instanceof B||f(new TypeError);c.add(d.b());S(b,c,this.o)};zh.prototype.D=function(b,c,d){Wg(this,d.c(),d);this.w(b,c,d.b())};function Bh(){}var Ch={};v["rainbow.function.interpreted.optimise.Bind_Obound"]=Ch;Bh.prototype=new V;Bh.prototype.J=Bh;Bh.prototype.className="Bind_Obound";
Ch.qa=function(b,c,d){c=W(new Bh,b,c,d);b=b.b();b instanceof B||f(new TypeError);b=b.c().c().b();b instanceof U||f(new TypeError);c.ld=b;return c};Bh.prototype.ma=function(b,c){var d=0,g;for(g in this.p)d++;c=(new w).a(d,c);c.add(this.ld.v(c));S(b,c,this.o)};Bh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);S(b,c,this.o)};
Bh.prototype.D=function(b,c,d){if(d instanceof z)this.ma(b,c);else{try{d.c().Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 0 or 1 args, got extra "+d.c()+" calling "+this))}this.w(b,c,d.b())}};function Dh(){}var Eh={};v["rainbow.function.interpreted.optimise.Bind_Oliteral"]=Eh;Dh.prototype=new V;Dh.prototype.J=Dh;Dh.prototype.className="Bind_Oliteral";
Eh.qa=function(b,c,d){c=W(new Dh,b,c,d);c.V=b.b().c().c().b();b=b.b().c().b();b instanceof M||f(new TypeError);if(c.nb(b,c.V))b=c.pb(b,c.V,m),b instanceof V||f(new TypeError),c.aa=b;return c};Dh.prototype.ma=function(b,c){if(this.aa!==l)this.aa.ma(b,c);else{var d=0,g;for(g in this.p)d++;c=(new w).a(d,c);c.add(this.V);S(b,c,this.o)}};Dh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);S(b,c,this.o)};
Dh.prototype.D=function(b,c,d){if(d instanceof z)this.ma(b,c);else{try{d.c().Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 0 or 1 args, got extra "+d.c()+" calling "+this))}this.w(b,c,d.b())}};function Fh(){}var Gh={};v["rainbow.function.interpreted.optimise.Bind_Oother"]=Gh;Fh.prototype=new V;Fh.prototype.J=Fh;Fh.prototype.className="Bind_Oother";Gh.qa=function(b,c,d){c=W(new Fh,b,c,d);c.V=b.b().c().c().b();b=[];c.V.h(b);c.Ic=x(b);return c};
Fh.prototype.ma=function(b,c){var d=0,g;for(g in this.p)d++;c=(new w).a(d,c);E(b,(new uh).a(c,this.o,this));S(b,c,this.Ic)};Fh.prototype.w=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);S(b,c,this.o)};Fh.prototype.D=function(b,c,d){if(d instanceof z)this.ma(b,c);else{try{d.c().Ra()}catch(g){g instanceof Ha||f(g),f(t(new u,"expected 0 or 1 args, got extra "+d.c()+" calling "+this))}this.w(b,c,d.b())}};function Hh(){}var Ih={};
v["rainbow.function.interpreted.optimise.Bind_R"]=Ih;Hh.prototype=new V;Hh.prototype.J=Hh;Hh.prototype.className="Bind_R";Ih.qa=function(b,c,d){return W(new Hh,b,c,d)};Hh.prototype.D=function(b,c,d){var g=0,h;for(h in this.p)g++;c=(new w).a(g,c);c.add(d);S(b,c,this.o)};function Jh(){}var Kh={};v["rainbow.function.interpreted.optimise.stack.Stack_A"]=Kh;Jh.prototype=new dh;Jh.prototype.J=Jh;Jh.prototype.className="Stack_A";Kh.Ua=function(b){return Kh.ga(b.z,b.p,eh(b.p,b.body))};
Kh.ga=function(b,c,d){return W(new Jh,b,c,d)};Jh.prototype.t=function(b,c){T(b,l,this.o,[c])};Jh.prototype.w=function(b,c,d){T(b,c,this.o,[d])};Jh.prototype.g=function(b,c){Zg(this,1,c);this.t(b,c.b())};Jh.prototype.D=function(b,c,d){Zg(this,1,d);this.w(b,c,d.b())};function Lh(){}var Mh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=Mh;Lh.prototype=new dh;Lh.prototype.J=Lh;Lh.prototype.className="Stack_A_A";Mh.Ua=function(b){return Mh.ga(b.z,b.p,eh(b.p,b.body))};
Mh.ga=function(b,c,d){return W(new Lh,b,c,d)};Lh.prototype.U=function(b,c,d){T(b,l,this.o,[c,d])};Lh.prototype.Ga=function(b,c,d,g){T(b,c,this.o,[d,g])};Lh.prototype.g=function(b,c){Zg(this,2,c);this.U(b,c.b(),c.c().b())};Lh.prototype.D=function(b,c,d){Zg(this,2,d);this.Ga(b,c,d.b(),d.c().b())};function Nh(){}var Oh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=Oh;Nh.prototype=new dh;Nh.prototype.J=Nh;Nh.prototype.className="Stack_A_A_A";
Oh.Ua=function(b){return Oh.ga(b.z,b.p,eh(b.p,b.body))};Oh.ga=function(b,c,d){return W(new Nh,b,c,d)};Nh.prototype.Za=function(b,c,d,g){T(b,l,this.o,[c,d,g])};Nh.prototype.Qb=function(b,c,d,g,h){T(b,c,this.o,[d,g,h])};Nh.prototype.g=function(b,c){Zg(this,3,c);this.Za(b,c.b(),c.c().b(),c.c().c().b())};Nh.prototype.D=function(b,c,d){Zg(this,3,d);this.Qb(b,c,d.b(),d.c().b(),d.c().c().b())};function Ph(){}var Qh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=Qh;Ph.prototype=new dh;
Ph.prototype.J=Ph;Ph.prototype.className="Stack_A_A_A_A";Qh.Ua=function(b){return Qh.ga(b.z,b.p,eh(b.p,b.body))};Qh.ga=function(b,c,d){return W(new Ph,b,c,d)};Ph.prototype.g=function(b,c){Zg(this,4,c);var d=c.b(),g=c.c().b(),h=c.c().c().b(),j=c.c().c().c().b();T(b,l,this.o,[d,g,h,j])};Ph.prototype.D=function(b,c,d){Zg(this,4,d);var g=d.b(),h=d.c().b(),j=d.c().c().b(),d=d.c().c().c().b();T(b,c,this.o,[g,h,j,d])};function Rh(){}var Sh={};
v["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=Sh;Rh.prototype=new dh;Rh.prototype.J=Rh;Rh.prototype.className="Stack_A_A_R";Sh.Ua=function(b){return Sh.ga(b.z,b.p,eh(b.p,b.body))};Sh.ga=function(b,c,d){return W(new Rh,b,c,d)};Rh.prototype.D=function(b,c,d){T(b,c,this.o,[d.b(),d.c().b(),d.c().c()])};function Th(){}var Uh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=Uh;Th.prototype=new dh;Th.prototype.J=Th;Th.prototype.className="Stack_A_R";
Uh.Ua=function(b){return Uh.ga(b.z,b.p,eh(b.p,b.body))};Uh.ga=function(b,c,d){return W(new Th,b,c,d)};Th.prototype.D=function(b,c,d){T(b,c,this.o,[d.b(),d.c()])};function Vh(){}var Wh={};v["rainbow.function.interpreted.optimise.stack.Stack_R"]=Wh;Vh.prototype=new dh;Vh.prototype.J=Vh;Vh.prototype.className="Stack_R";Wh.Ua=function(b){return Wh.ga(b.z,b.p,eh(b.p,b.body))};Wh.ga=function(b,c,d){return W(new Vh,b,c,d)};Vh.prototype.D=function(b,c,d){T(b,c,this.o,[d])};function Xh(){}var Yh={};
v["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=Yh;Xh.prototype=new dh;Xh.prototype.J=Xh;Xh.prototype.className="Stack_D_A_A_A_A_d";Yh.Ua=function(b){return Yh.ga(b.z,b.p,eh(b.p,b.body))};Yh.ga=function(b,c,d){return W(new Xh,b,c,d)};Xh.prototype.t=function(b,c){T(b,l,this.o,[c.b(),c.c().b(),c.c().c().b(),c.c().c().c().b()])};Xh.prototype.w=function(b,c,d){T(b,c,this.o,[d.b(),d.c().b(),d.c().c().b(),d.c().c().c().b()])};Xh.prototype.g=function(b,c){Zg(this,1,c);this.t(b,c.b())};
Xh.prototype.D=function(b,c,d){Zg(this,1,d);this.w(b,c,d.b())};function Zh(){}var $h={};v["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=$h;Zh.prototype=new dh;Zh.prototype.J=Zh;Zh.prototype.className="Stack_D_A_A_d";$h.Ua=function(b){return $h.ga(b.z,b.p,eh(b.p,b.body))};$h.ga=function(b,c,d){return W(new Zh,b,c,d)};Zh.prototype.t=function(b,c){T(b,l,this.o,[c.b(),c.c().b()])};Zh.prototype.w=function(b,c,d){T(b,c,this.o,[d.b(),d.c().b()])};
Zh.prototype.g=function(b,c){Zg(this,1,c);this.t(b,c.b())};Zh.prototype.D=function(b,c,d){Zg(this,1,d);this.w(b,c,d.b())};function ai(){}var bi={};v["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=bi;ai.prototype=new dh;ai.prototype.J=ai;ai.prototype.className="Stack_A_Oliteral";
bi.Ua=function(b){var c=new ai,d=eh(b.p,b.body),b=W(c,b.z,b.p,d);b.V=b.z.c().b().c().c().b();c=b.z.c().b().c().b();c instanceof M||f(new TypeError);if(b.nb(c,b.V))c=b.pb(c,b.V,m),c instanceof V||f(new TypeError),b.aa=c;return b};bi.ga=function(b,c,d){c=W(new ai,b,c,d);c.V=b.b().c().c().b();return c};r=ai.prototype;r.t=function(b,c){this.aa!==l?this.aa.t(b,c):T(b,l,this.o,[c,this.V])};r.U=function(b,c,d){T(b,l,this.o,[c,d])};r.w=function(b,c,d){this.aa!==l?this.aa.w(b,c,d):T(b,c,this.o,[d,this.V])};
r.Ga=function(b,c,d,g){T(b,c,this.o,[d,g])};r.g=function(b,c){if(c instanceof z)Xg(this,c);else{var d=c.b();c.c()instanceof z?this.t(b,d):this.U(b,d,c.c().b())}};r.D=function(b,c,d){if(d instanceof z)Xg(this,d);else{var g=d.b();d.c()instanceof z?this.w(b,c,g):this.Cd(b,c,g,d.c().b())}};function ci(){}var di={};v["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=di;ci.prototype=new dh;ci.prototype.J=ci;ci.prototype.className="Stack_Oliteral";
di.Ua=function(b){var c=new ci,d=eh(b.p,b.body),b=W(c,b.z,b.p,d);b.V=b.z.b().c().c().b();c=b.z.b().c().b();c instanceof M||f(new TypeError);if(b.nb(c,b.V))c=b.pb(c,b.V,m),c instanceof V||f(new TypeError),b.aa=c;return b};di.ga=function(b,c,d){c=W(new ci,b,c,d);c.V=b.b().c().c().b();return c};r=ci.prototype;r.wa=function(b){this.aa!==l?this.aa.wa(b):T(b,l,this.o,[this.V])};r.t=function(b,c){T(b,l,this.o,[c])};r.ma=function(b,c){this.aa!==l?this.aa.w(b,c):T(b,c,this.o,[this.V])};
r.w=function(b,c,d){T(b,c,this.o,[d])};r.g=function(b,c){c instanceof z?this.wa(b):(Zg(this,1,c),this.t(b,c.b()))};r.D=function(b,c,d){d instanceof z?this.ma(b):(Zg(this,1,d),this.w(b,c,d.b()))};function ei(){}ei.prototype=new X;ei.prototype.className="Macex";ei.prototype.a=function(){return Z(this,"macex")};
ei.prototype.g=function(b,c){if(c instanceof z)D(b,C);else{var d=c.b();if(d instanceof B){var g=d.b();g instanceof M?g.bound()?(g=g.value(),g=oc(g),g===l?D(b,d):(d=d.c(),d instanceof B||f(new TypeError),E(b,(new fi).a(this)),Ia(g,b,d))):D(b,d):D(b,d)}else D(b,d)}};function fi(){}fi.prototype=new N;fi.prototype.className="Macex.Again";fi.prototype.a=function(b){O(this);this.m(b);return this};fi.prototype.d=function(b){this.xa.g(b,A(new B,R(b),C))};function gi(){}gi.prototype=new X;
gi.prototype.className="Uniq";gi.prototype.a=function(){return Z(this,"uniq")};gi.prototype.wa=function(b){D(b,K("gs"+ ++hi))};gi.prototype.j=function(b){try{b.Ra()}catch(c){c instanceof Ha||f(t(new u,"uniq: expects no args, got "+b))}return K("gs"+ ++hi)};var hi=0;function ii(){}ii.prototype=new X;ii.prototype.className="Details";ii.prototype.a=function(){return Z(this,"details")};
ii.prototype.j=function(b){var c;b=b.b();try{b instanceof Ba||f(new TypeError),c=b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+this+" expected an exception, got "+b))}return c.message()};function ji(){}ji.prototype=new X;ji.prototype.className="Err";ji.prototype.a=function(){return Z(this,"err")};ji.prototype.j=function(b){f(t(new u,Vb(b.b(),this).value()))};function ki(){}ki.prototype=new X;ki.prototype.className="OnErr";ki.prototype.a=function(){return Z(this,"on-err")};
ki.prototype.g=function(b,c){var d=(new Xc).a(c.b(),b.N);d.m(this);E(b,d);c.c().b().g(b,C)};function li(){}li.prototype=new X;li.prototype.className="Protect";li.prototype.a=function(){Z(this,"protect");this.vd=(new mi).a(this);return this};function mi(){}mi.prototype=new tf;mi.prototype.a=function(b){this.td=b;return this};mi.prototype.Zb=function(b){b.m(this.td)};
li.prototype.g=function(b,c){var d=A(new B,(new $c).a(c.c().b()),A(new B,(new ed).a("clear up 'protect/after' return value"),C));d.l(this.vd);S(b,l,d);c.b().g(b,C)};function ni(){}ni.prototype=new X;r=ni.prototype;r.className="Apply";r.a=function(){return Z(this,"apply")};r.wa=function(){f(t(new u,"apply: expects at least 2 args, got none"))};r.t=function(b,c){f(t(new u,"apply: expects at least 2 args, got "+c))};r.U=function(b,c,d){d instanceof B||f(new TypeError);c.g(b,d)};
r.Za=function(b,c,d,g){c.g(b,A(new B,d,g))};r.g=function(b,c){var d=c.b(),g=c.c();g instanceof B||f(new TypeError);d.g(b,oi(this,g))};function oi(b,c){return c.c()instanceof z?vb(c.b(),b):A(new B,c.b(),oi(b,vb(c.c(),b)))}function pi(){}pi.prototype=new X;pi.prototype.className="Eval";pi.prototype.a=function(){return Z(this,"eval")};pi.prototype.g=function(b,c){E(b,(new qi).a(this));Rf(b,c.b(),[])};function qi(){}qi.prototype=new N;qi.prototype.className="Eval.ReduceAndExecute";
qi.prototype.a=function(b){O(this);this.m(b);return this};qi.prototype.d=function(b){var c=[];R(b).reduce().h(c);S(b,l,x(c))};function ri(){}ri.prototype=new X;ri.prototype.className="SSExpand";ri.prototype.a=function(){return Z(this,"ssexpand")};ri.prototype.j=function(b){return Wf(hb(b.b(),this))};
function Wf(b){b=b.name();if(/:/.test(b)||/^~/.test(b)){b=b.split(":");if(1===b.length)b=si(b[0]);else{for(var c=[K("compose")],d=0,g=b.length;d<g;d++)c.push(si(b[d]));b=pb(c,C)}return b}if(Pg(b)){c=[K("andf")];b=ti(b);d=0;for(g=b.length;d<g;d++){var h=Ra(b[d]);h instanceof M||f(new TypeError);c.push(ui(h))}return x(c)}if(/[.!]/.test(b)){for(var c=b.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/),d=[],g=m,h=0,j=c.length;h<j;h++)if(""!==c[h]){var q=Ra(c[h].replace(/#p/g,
"%").replace(/#h/g,"#"));q===Va||q===jb?(g&&f(t(new u,"Bad syntax "+b)),g=k):g=m;d.unshift(q)}g&&d.unshift(K("#<eof>"));return vi(d,0)}f(t(new u,"Unknown syntax "+b))}function ti(b){if(0===b.length)return[""];if(b.charCodeAt(0)===Qg)return b=ti(b.substring(1)),b[0]=Rg+b[0],b;return b.charCodeAt(b.length-1)===Qg?(b=ti(b.substring(0,b.length-1)),b[b.length-1]+=Rg,b):b.split(Rg)}
function vi(b,c){var d=ui(b[c++]),g=l;c<b.length&&(g=b[c++],g instanceof M||f(new TypeError));d=g===jb?x([K("quote"),d]):d;return c<b.length?x([vi(b,c),d]):g!==l?x([K("get"),d]):d}function wi(b){try{return Ma(b)}catch(c){c instanceof Da||f(c),f(t(new u,"Couldn't read value of symbol: "+b,c))}}function ui(b){if(b instanceof z)return b;b instanceof M||f(new TypeError);return wi(b.name())}function si(b){return/^~/.test(b)?x([K("complement"),wi(b.substring(1))]):wi(b)}var Rg="&",Qg=38;
function xi(){}xi.prototype=new X;xi.prototype.className="SSyntax";xi.prototype.a=function(){return Z(this,"ssyntax")};xi.prototype.j=function(b){return b.b()instanceof M&&Vf(b.b())?$a:C};function Vf(b){var c;c=b.name();if(!(c=/:/.test(c)||/^~/.test(c)))if(!(c=Pg(b.name())))c=/[.!]/.test(b.name());return c}function yi(){}yi.prototype=new X;yi.prototype.className="JavaDebug";yi.prototype.a=function(){return Z(this,"java-debug")};yi.prototype.j=function(b){return b.b()};function zi(){}
zi.prototype=new X;zi.prototype.className="JavaInvoke";zi.prototype.a=function(){Z(this,"java-invoke")};
zi.prototype.j=function(b){var c;var d=b.b();try{d instanceof uc||f(new TypeError),c=d}catch(g){g instanceof TypeError||f(g),f(t(new u,"Wrong argument type: "+this+" expected a java-object, got "+d))}var d=hb(b.c().b(),this).name(),h=b.c().c().b();h instanceof B||f(new TypeError);b=yc;c=c.Hc;var j=Object(c)[d];"[object Function]"!==Object.prototype.toString.call(j)&&f(t(new u,"Field "+d+" is not a method on "+c));d=j.apply(c,wc(h));return b(d)};function Ai(){}Ai.prototype=new X;
Ai.prototype.className="Car";Ai.prototype.a=function(){return Z(this,"car")};Ai.prototype.t=function(b,c){D(b,c.b())};Ai.prototype.j=function(b){Og(b,1,this.className);return b.b().b()};function Bi(){}Bi.prototype=new X;Bi.prototype.className="Cdr";Bi.prototype.a=function(){return Z(this,"cdr")};Bi.prototype.t=function(b,c){D(b,c.c())};Bi.prototype.j=function(b){Og(b,1,this.className);return b.b().c()};function Ci(){}Ci.prototype=new X;Ci.prototype.className="Cons";
Ci.prototype.a=function(){return Z(this,"cons")};Ci.prototype.U=function(b,c,d){D(b,A(new B,c,d))};Ci.prototype.j=function(b){Og(b,2,this.className);return A(new B,b.b(),b.c().b())};function Di(){}Di.prototype=new X;Di.prototype.className="Len";Di.prototype.a=function(){return Z(this,"len")};Di.prototype.j=function(b){Rb(b,this.className,1);return(new Q).a(b.b().la(),1)};function Ei(){}Ei.prototype=new X;Ei.prototype.className="NewString";Ei.prototype.a=function(){return Z(this,"newstring")};
Ei.prototype.j=function(b){var c=b.b();c instanceof P||f(new TypeError);var d=Mb;b.c()instanceof z||(d=b.c().b(),d instanceof Gb||f(new TypeError));for(var b=[],g=0;g<c.I();g++)b.push(d.value());return G(b.join(""))};function Fi(){}Fi.prototype=new X;Fi.prototype.className="Scar";Fi.prototype.a=function(){return Z(this,"scar")};Fi.prototype.U=function(b,c,d){D(vm,c.Xb(d))};Fi.prototype.j=function(b){return b.b().Xb(b.c().b())};function Gi(){}Gi.prototype=new X;Gi.prototype.className="Scdr";
Gi.prototype.a=function(){return Z(this,"scdr")};Gi.prototype.j=function(b){var c=b.b();c instanceof B||f(new TypeError);b=b.c().b();c.Lc(b);return b};function Hi(){}Hi.prototype=new X;Hi.prototype.className="Acos";Hi.prototype.a=function(){return Z(this,"acos")};Hi.prototype.j=function(b){Rb(b,this.className,1);b=Math.acos(kb(b.b(),this).F());return(new I).a(b)};function Ii(){}Ii.prototype=new X;r=Ii.prototype;r.className="Add";r.a=function(){return Z(this,"+")};r.wa=function(b){D(b,kc)};
r.t=function(b,c){D(b,c)};r.U=function(b,c,d){D(b,c.add(d))};r.Za=function(b,c,d,g){D(b,c.add(d).add(g))};r.j=function(b){if(b instanceof z)return kc;for(var c=b.b(),b=b.c();!(b instanceof z);)c=c.add(b.b()),b=b.c();return c};function Ji(){}Ji.prototype=new X;Ji.prototype.className="Asin";Ji.prototype.a=function(){return Z(this,"asin")};Ji.prototype.j=function(b){Rb(b,this.className,1);b=Math.asin(kb(b.b(),this).F());return(new I).a(b)};function Ki(){}Ki.prototype=new X;Ki.prototype.className="Atan";
Ki.prototype.a=function(){return Z(this,"atan")};Ki.prototype.j=function(b){Rb(b,this.className,1);b=Math.atan(kb(b.b(),this).F());return(new I).a(b)};function Li(){}Li.prototype=new X;Li.prototype.className="ComplexParts";Li.prototype.a=function(){return Z(this,"complex-parts")};Li.prototype.j=function(b){Rb(b,this.className,1);b=dc(b.b(),this);return x([(new I).a(b.X),(new I).a(b.P)])};function Mi(){}Mi.prototype=new X;Mi.prototype.className="Cosine";Mi.prototype.a=function(){return Z(this,"cos")};
Mi.prototype.j=function(b){Rb(b,this.className,1);b=Math.cos(kb(b.b(),this).F());return(new I).a(b)};function Ni(){}Ni.prototype=new X;Ni.prototype.className="Divide";Ni.prototype.a=function(){return Z(this,"/")};Ni.prototype.j=function(b){b instanceof z&&f(t(new u,"Function `/` expected at least 1 arg"));return Oi(b).Bc(b)};function Pi(){}Pi.prototype=new X;Pi.prototype.className="Expt";Pi.prototype.a=function(){return Z(this,"expt")};
Pi.prototype.j=function(b){Rb(b,this.className,2);var c=b.b();c instanceof P||f(new TypeError);b=b.c().b();b instanceof P||f(new TypeError);if(c instanceof J)return gc(c,b);if(b instanceof J)return gc((new J).a(c.F(),0),b);c=c.F();b=b.F();return(new I).a(Math.pow(c,b))};function Qi(){}Qi.prototype=new X;Qi.prototype.className="Logarithm";Qi.prototype.a=function(){return Z(this,"log")};Qi.prototype.j=function(b){Rb(b,this.className,1);b=kb(b.b(),this);return b instanceof J?b.log():(new I).a(Math.log(b.F()))};
function Ri(){}Ri.prototype=new X;Ri.prototype.className="MakeComplex";Ri.prototype.a=function(){return Z(this,"make-complex")};Ri.prototype.j=function(b){Rb(b,this.className,2);var c=kb(b.b(),this),b=kb(b.c().b(),this);return(new J).a(c.F(),b.F())};function Si(){for(;;){var b=Math.floor(9007199254740992*Math.qd());if(9007199254740992>b)return b}}
function Oi(b){if(b instanceof z)return Ti;if(b.b()instanceof I)return Ui;if(b.b()instanceof J)return complexOps;b.c()instanceof B||f(new TypeError);return Oi(b.c())}function Vi(){}Vi.prototype.sc=i;Vi.prototype.multiply=i;Vi.prototype.Bc=i;function Wi(){}Wi.prototype=new Vi;Wi.prototype.sc=function(b){return Ta(Xi(this,b))};function Xi(b,c){if(c instanceof z)return 0;var d=c.b();d instanceof P||f(new TypeError);var d=d.F(),g=c.c();g instanceof B||f(new TypeError);return d+Xi(b,g)}
Wi.prototype.multiply=function(b){return Ta(Yi(this,b))};Wi.prototype.Bc=function(b){var c=b.c(),d=b.b();d instanceof P||f(new TypeError);c=c instanceof z?1/d.F():d.F();b=b.c();b instanceof B||f(new TypeError);return Ta(c/Yi(this,b))};function Yi(b,c){if(c instanceof z)return 1;var d=c.b();d instanceof P||f(new TypeError);var d=d.F(),g=c.c();g instanceof B||f(new TypeError);g=Yi(b,g);return d*g}var Ui=new Wi;function Zi(){}Zi.prototype=new Vi;
Zi.prototype.sc=function(b){if(b instanceof z)return kc;var c=b.b();c instanceof Q||f(new TypeError);b=b.c();b instanceof B||f(new TypeError);return c.Ub(this.sc(b))};Zi.prototype.multiply=function(b){if(b instanceof z)return lc;var c=b.b();c instanceof Q||f(new TypeError);b=b.c();b instanceof B||f(new TypeError);return jc(c,this.multiply(b))};
Zi.prototype.Bc=function(b){var c=b.c(),d=b.b();d instanceof Q||f(new TypeError);c=c instanceof z?(new Q).a(d.R,d.fa):d;b=b.c();b instanceof B||f(new TypeError);b=this.multiply(b);b=(new Q).a(b.R,b.fa);return jc(c,b)};var Ti=new Zi;function $i(){}$i.prototype=new X;$i.prototype.className="Mod";$i.prototype.a=function(){return Z(this,"mod")};$i.prototype.U=function(b,c,d){c instanceof P||f(new TypeError);d instanceof P||f(new TypeError);D(b,c.Wc(d))};
$i.prototype.g=function(b,c){Rb(c,this.className,2);this.U(b,c.b(),c.c().b())};function aj(){}aj.prototype=new X;r=aj.prototype;r.className="Multiply";r.a=function(){return Z(this,"*")};r.wa=function(b){D(b,lc)};r.t=function(b,c){D(b,c)};r.U=function(b,c,d){D(b,c.multiply(d))};r.Za=function(b,c,d,g){D(b,c.multiply(d).multiply(g))};r.j=function(b){if(b instanceof z)return lc;for(var c=b.b(),b=b.c();!(b instanceof z);)c=c.multiply(b.b()),b=b.c();return c};function bj(){}bj.prototype=new X;
bj.prototype.className="PolarCoordinates";bj.prototype.a=function(){return Z(this,"polar-coordinates")};bj.prototype.j=function(b){Rb(b,this.className,1);b=dc(b.b(),this);return x([(new I).a(Math.sqrt(b.X*b.X+b.P*b.P)),(new I).a(Math.atan2(b.P,b.X))])};function cj(){}cj.prototype=new X;cj.prototype.className="Quotient";cj.prototype.a=function(){return Z(this,"quotient")};
cj.prototype.j=function(b){Og(b,2,this.className);var c=lb(b.b(),this),d=lb(b.c().b(),this);(!c.na()||!d.na())&&f(t(new u,"Type error: "+this+" : expected integer, got "+b));b=c.I()/d.I();return H(0>b?Math.ceil(b):Math.floor(b))};function dj(){}dj.prototype=new X;dj.prototype.className="Rand";dj.prototype.a=function(){return Z(this,"rand")};
dj.prototype.j=function(b){if(b instanceof z)return(new I).a(Math.qd());var c=b.b();c instanceof P||f(new TypeError);c.na()||f(t(new u,"rand: requires one exact integer argument, got "+b));return(new Q).a(Math.abs(Si()%c.I()),1)};function ej(){}ej.prototype=new X;ej.prototype.className="Sine";ej.prototype.a=function(){return Z(this,"sin")};ej.prototype.j=function(b){Rb(b,this.className,1);b=Math.sin(kb(b.b(),this).F());return(new I).a(b)};function fj(){}fj.prototype=new X;fj.prototype.className="Sqrt";
fj.prototype.a=function(){return Z(this,"sqrt")};fj.prototype.t=function(b,c){D(b,c.sqrt())};fj.prototype.g=function(b,c){Og(c,1,this.className);this.t(b,c.b())};function gj(){}gj.prototype=new X;r=gj.prototype;r.className="Subtract";r.a=function(){return Z(this,"-")};r.t=function(){f(t(new u,"- : expected at least 1 arg"))};r.t=function(b,c){c instanceof P||f(new TypeError);D(b,c.tb())};r.U=function(b,c,d){d instanceof P||f(new TypeError);D(b,c.add(d.tb()))};
r.j=function(b){b instanceof z&&f(t(new u,"Function `-` expected at least 1 arg"));var c=b.b();c instanceof P||f(new TypeError);c=c.tb();b=b.c();b instanceof B||f(new TypeError);b instanceof z?b=c:(b=A(new B,c,b),b=Oi(b).sc(b).tb());return b};function hj(){}hj.prototype=new X;hj.prototype.className="Tangent";hj.prototype.a=function(){return Z(this,"tan")};hj.prototype.j=function(b){Rb(b,this.className,1);b=Math.tan(kb(b.b(),this).F());return(new I).a(b)};function ij(){}ij.prototype=new X;
ij.prototype.className="Trunc";ij.prototype.a=function(){return Z(this,"trunc")};ij.prototype.j=function(b){Rb(b,this.className,1);b=b.b();b instanceof P||f(new TypeError);b=b.F();return(new Q).a(Math.floor(b),1)};function jj(){}jj.prototype=new X;r=jj.prototype;r.className="Bound";r.a=function(){return Z(this,"bound")};r.wa=function(){f(t(new u,"bound: requires 1 arg"))};r.t=function(b,c){c instanceof M||f(new TypeError);D(b,Eb(c.bound()))};
r.j=function(b){Rb(b,this.className,1);b=hb(b.b(),this);return Eb(b.bound())};function kj(){}kj.prototype=new X;kj.prototype.className="Exact";kj.prototype.a=function(){return Z(this,"exact")};kj.prototype.j=function(b){b=kb(b.b(),this);return Eb(b instanceof Q&&b.na())};function lj(){}lj.prototype=new X;r=lj.prototype;r.className="GreaterThan";r.a=function(){return Z(this,">")};r.wa=function(b){D(b,$a)};r.t=function(b){D(b,$a)};r.U=function(b,c,d){D(b,0>=c.ta(d)?C:$a)};
r.j=function(b){if(2>b.la())return $a;var c=b.b(),b=b.c();for(b instanceof B||f(new TypeError);!(b instanceof z);){var d=b.b();if(0>=c.ta(d))return C;c=d;b=b.c();b instanceof B||f(new TypeError)}return $a};function mj(){}mj.prototype=new X;r=mj.prototype;r.className="Is";r.a=function(){return Z(this,"is")};r.wa=function(b){D(b,$a)};r.t=function(b){D(b,$a)};r.U=function(b,c,d){D(b,Eb(c.Ia(d)))};r.j=function(b){return nj(this,b.b(),b.c())};
function nj(b,c,d){return d instanceof z?$a:!c.Ia(d.b())?C:nj(b,c,d.c())}function oj(){}oj.prototype=new X;r=oj.prototype;r.className="LessThan";r.a=function(){return Z(this,"<")};r.wa=function(b){D(b,$a)};r.t=function(b){D(b,$a)};r.U=function(b,c,d){D(b,0>c.ta(d)?$a:C)};r.j=function(b){var c=b.b(),b=b.c();for(b instanceof B||f(new TypeError);!(b instanceof z);){var d=b.b();if(0<=c.ta(d))return C;c=d;b=b.c();b instanceof B||f(new TypeError)}return $a};function pj(){}pj.prototype=new X;
pj.prototype.className="RainbowDebug";pj.prototype.a=function(){return Z(this,"rainbow-debug")};pj.prototype.g=function(b){Qc(b,Hf);D(b,K(this.ea))};function qj(){}qj.prototype=new X;r=qj.prototype;r.className="RainbowProfile";r.a=function(){return Z(this,"rainbow-profile")};r.wa=function(b){this.profile(b);D(b,C)};r.t=function(b,c){c instanceof rc||f(new TypeError);this.profile(c);D(b,C)};r.profile=function(b){Qc(b,Mf)};function rj(){}rj.prototype=new X;rj.prototype.className="RainbowProfileReport";
rj.prototype.a=function(){return Z(this,"rainbow-profile-report")};rj.prototype.wa=function(b){D(b,this.rd(b))};rj.prototype.t=function(b,c){c instanceof rc||f(new TypeError);D(b,this.rd(b))};function sj(){}sj.prototype=new X;sj.prototype.className="CurrentGcMilliseconds";sj.prototype.a=function(){return Z(this,"current-gc-milliseconds")};sj.prototype.g=function(b){D(b,H(1))};function tj(){}tj.prototype=new X;tj.prototype.className="CurrentProcessMilliseconds";
tj.prototype.a=function(){return Z(this,"current-process-milliseconds")};tj.prototype.g=function(b){D(b,H(1))};function uj(){}uj.prototype=new X;uj.prototype.className="Declare";uj.prototype.a=function(){return Z(this,"declare")};uj.prototype.U=function(b,c,d){c===vj?(c=Sf,Sf=d,D(b,c)):D(b,C)};uj.prototype.g=function(b,c){this.U(b,c.b(),c.c().b())};var vj=K("atstrings");function wj(){}wj.prototype=new X;wj.prototype.className="MSec";wj.prototype.a=function(){return Z(this,"msec")};
wj.prototype.j=function(){return H((new Date).getTime())};function xj(){}xj.prototype=new X;xj.prototype.className="Seconds";xj.prototype.a=function(){return Z(this,"seconds")};xj.prototype.j=function(){var b=(new Date).getTime()/1E3;return H(0>b?Math.ceil(b):Math.floor(b))};function yj(){}yj.prototype=new X;yj.prototype.className="MapTable";yj.prototype.a=function(){return Z(this,"maptable")};
yj.prototype.U=function(b,c,d){D(b,d);d instanceof Fa||f(new TypeError);D(b,Bc(d));c=(new hd).a(c);c.m(this);E(b,c)};yj.prototype.g=function(b,c){Og(c,2,this.className);this.U(b,c.b(),c.c().b())};function zj(){}zj.prototype=new X;zj.prototype.className="Sref";zj.prototype.a=function(){return Z(this,"sref")};zj.prototype.Za=function(b,c,d,g){D(b,c.rc(d,g))};zj.prototype.g=function(b,c){Og(c,3,this.className);this.Za(b,c.b(),c.c().b(),c.c().c().b())};function Aj(){}Aj.prototype=new X;
Aj.prototype.className="Table";Aj.prototype.a=function(){return Z(this,"table")};Aj.prototype.g=function(b,c){var d=(new Fa).a();D(b,d);if(!(c instanceof z)){var g=(new ed).a("table-initialiser");g.m(this);E(b,g);c.b().g(b,x([d]))}};function Bj(){}Bj.prototype=new X;Bj.prototype.className="AtomicInvoke";Bj.prototype.a=function(){return Z(this,"atomic-invoke")};Bj.prototype.t=function(b,c){for(;b!==Cj&&Cj!==l;);Cj=b;Dj++;var d=O(new Ej);d.m(this);E(b,d);c.g(b,C)};
Bj.prototype.g=function(b,c){this.t(b,c.b())};function Ej(){}Ej.prototype=new N;Ej.prototype.className="AtomicInvoke.ReleaseLock";Ej.prototype.d=function(){Dj--;0===Dj&&(Cj=l)};var Cj=l,Dj=0;function Fj(){}Fj.prototype=new X;Fj.prototype.className="BreakThread";Fj.prototype.a=function(){return Z(this,"break-thread")};Fj.prototype.j=function(b){b=b.b();b instanceof rc||f(new TypeError);Qc(b,Jf);return C};function Gj(){}Gj.prototype=new X;Gj.prototype.className="CCC";
Gj.prototype.a=function(){return Z(this,"ccc")};Gj.prototype.t=function(b,c){c instanceof z&&f(t(new u,"Can't ccc nil!"));var d=(new Hj).a(b);c.t(b,d)};Gj.prototype.g=function(b,c){Rb(c,this.className,1);this.t(b,c.b())};function Hj(){}Hj.prototype=new y;r=Hj.prototype;r.className="CCC.ContinuationWrapper";r.a=function(b){this.Yb=b.copy();this.Ad=m;return this};
r.t=function(b,c){var d;a:{for(d=0;d<b.i;d++)if(b.G[d]!==this.Yb.G[d]){d-=1;break a}d=b.i}for(var g=[],h=[];d<b.i;)Ic(b).b().Pb&&(g.push(Ic(b)),h.push(b.ka[b.i])),b.i--;d=[g,h];this.Yb.copyTo(b);D(b,c);for(g=d[0].length-1;0<=g;g--)h=d[1][g],h instanceof w||f(new TypeError),d[0][g]instanceof B||f(new TypeError),S(b,h,instructions)};r.g=function(b,c){this.t(b,c.b())};r.type=function(){return Ng};r.toString=function(){return"#<continuation ip:"+this.Yb.i+";ap:"+this.Yb.N+";VM#"+this.Yb.Mc+">"};
function Ij(){}Ij.prototype=new X;Ij.prototype.className="Dead";Ij.prototype.a=function(){return Z(this,"dead")};Ij.prototype.g=function(b,c){var d=c.b();d instanceof rc||f(new TypeError);D(b,Eb(d.ec))};function Jj(){}Jj.prototype=new X;Jj.prototype.className="KillThread";Jj.prototype.a=function(){return Z(this,"kill-thread")};Jj.prototype.g=function(b,c){var d=c.b();d instanceof rc||f(new TypeError);Qc(d,Jf);D(b,C)};function Kj(){}Kj.prototype=new X;Kj.prototype.className="NewThreadLocal";
Kj.prototype.a=function(){return Z(this,"thread-local")};Kj.prototype.j=function(){return(new $b).a()};function Lj(){}Lj.prototype=new X;Lj.prototype.className="ThreadLocalGet";Lj.prototype.a=function(){return Z(this,"thread-local-ref")};Lj.prototype.j=function(b){return bc(b.b(),this).get()};function Mj(){}Mj.prototype=new X;Mj.prototype.className="ThreadLocalSet";Mj.prototype.a=function(){return Z(this,"thread-local-set")};Mj.prototype.j=function(b){var c=bc(b.b(),this),b=b.c().b();c.set(b);return b};
function Nj(){}Nj.prototype=new X;Nj.prototype.className="Annotate";Nj.prototype.a=function(){return Z(this,"annotate")};Nj.prototype.j=function(b){var c=b.b(),b=b.c().b();return c===b.type()?b:(new nc).a(c,b)};function Oj(){}Oj.prototype=new X;r=Oj.prototype;r.className="Coerce";r.a=function(){Z(this,"coerce");Pj();return this};
r.U=function(b,c,d){var g=c.type();if(g===d)D(b,c);else try{d instanceof M||f(new TypeError),g instanceof M||f(new TypeError),(d.Bb[g]||l).t(b,c)}catch(h){h instanceof Qj&&f(t(new u,"Can't coerce "+c+" to "+d)),f(t(new u,"Can't coerce "+c+" ( a "+c.type()+" ) to "+d,h))}};
r.Za=function(b,c,d,g){var h=c.type();if(h===d)D(b,c);else try{d instanceof M||f(new TypeError),h instanceof M||f(new TypeError),(d.Bb[h]||l).U(b,c,g)}catch(j){j instanceof Qj&&f(t(new u,"Can't coerce "+c+" to "+d)),f(t(new u,"Can't coerce "+c+" ( a "+c.type()+" ) to "+d,j))}};r.g=function(b,c){c.Cb(2)?this.U(b,c.b(),c.c().b()):c.Cb(3)?this.Za(b,c.b(),c.c().b(),c.c().c().b()):f(t(new u,"coerce expects 2 or 3 args, got "+c))};function Rj(){}Rj.prototype=new X;Rj.prototype.className="Rep";
Rj.prototype.a=function(){return Z(this,"rep")};Rj.prototype.j=function(b){var c=b.b(),d;if(c instanceof nc){b=b.b();try{b instanceof nc||f(new TypeError),d=b}catch(g){g instanceof TypeError||f(g),f(t(new u,"Wrong argument type: "+this+" expected a Tagged, got "+b))}d=d.xb}else d=c;return d};function Sj(){}Sj.prototype=new X;Sj.prototype.className="Type";Sj.prototype.a=function(){return Z(this,"type")};Sj.prototype.t=function(b,c){D(b,c.type())};Sj.prototype.j=function(b){Rb(b,this.className,1);return b.b().type()};
var Tb=K("string"),Tj=K("sym"),Uj=K("int"),Vj=K("num"),Wj=K("cons"),Xj=K("char");
function Pj(){ib(Wj,Tb,(new Ub).a("string-cons",function(b){b instanceof Pa||f(new TypeError);for(var b=b.value(),c=[],d=0;d<b.length;d++)c.push(Qa(b.charCodeAt(d)));return x(c)}));ib(Tb,Wj,(new Ub).a("cons-string",function(b){b instanceof B||f(new TypeError);for(var c=[];!(b instanceof z);)c.push(b.b().eb()),b=b.c(),b instanceof B||f(new TypeError);return G(c.join(""))}));ib(Tb,Uj,(new Ub).a("int-string",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||f(new TypeError);b instanceof
P||f(new TypeError);var d;b instanceof J?d=G(b.toString()):(b instanceof I&&10!==c.I()&&f(new Qj),d=b instanceof Q?b.stringify(c):Yj(b,c));return d}));ib(Tb,Vj,(new Ub).a("num-string",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||f(new TypeError);b instanceof P||f(new TypeError);var d;b instanceof J?d=G(b.toString()):(b instanceof I&&10!==c.I()&&f(new Qj),d=b instanceof Q?b.stringify(c):Yj(b,c));return d}));ib(Tj,Tb,(new Ub).a("string-sym",function(b){b instanceof Pa||f(new TypeError);
return Ra(b.value())}));ib(Tb,Tj,(new Ub).a("sym-string",function(b){return b instanceof z?G(""):G(b.eb())}));ib(Uj,Xj,(new Ub).a("char-int",function(b){b instanceof Gb||f(new TypeError);b=b.value();return H(b)},function(b){return this.Lb(b)}));ib(Uj,Vj,(new Ub).a("num-int",function(b){b instanceof P||f(new TypeError);return b.round()},function(b){return this.Lb(b)}));ib(Vj,Uj,(new Ub).a("int-num",aa()));ib(Xj,Uj,(new Ub).a("int-char",function(b){b instanceof P||f(new TypeError);b.na()||f(new Qj);
return Qa(b.I())}));ib(Tb,Xj,(new Ub).a("char-string",function(b){b instanceof Gb||f(new TypeError);b=b.value();return G(String.fromCharCode(b))}));ib(Tj,Xj,(new Ub).a("char-sym",function(b){b instanceof Gb||f(new TypeError);b=b.value();return Ra(String.fromCharCode(b))}));ib(Vj,Tb,(new Ub).a("string-num",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||f(new TypeError);b instanceof Pa||f(new TypeError);var d=b.value().toLowerCase();if("+inf.0"===d)d=(new I).a(1/0);else if("-inf.0"===
d)d=(new I).a(-1/0);else if("+nan.0"===d)d=(new I).a(0/0);else{var g;if(/i$/i.test(d))try{g=cc()}catch(h){h instanceof Da||f(h),f(new Qj)}else/\./.test(d)||15>c.I()&&/.e./.test(d)?d=Zj(d,c.I()):/\//.test(d)?d=$j(d,c.I()):(g=c.I(),d=H(parseInt(d,~~g))),g=d;d=g}return d}));ib(Uj,Tb,(new Ub).a("string-int",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||f(new TypeError);b instanceof Pa||f(new TypeError);var d=b.value().toLowerCase();("+inf.0"===d||"-inf.0"===d||"+nan.0"===d||/i$/i.test(d))&&
f(new Qj);if(/\./.test(d)||15>c.I()&&/.e./i.test(d))return d=Zj(d,c.I()),d instanceof I||f(new TypeError),d.pc();if(/\//.test(d))return d=$j(d,c.I()),d instanceof Q||f(new TypeError),d.pc();var g=c.I();return H(parseInt(d,~~g))}))}function Yj(b,c){if(10===c.I())return G(b.toString());var d=b.I().toString(~~c.I());return G(""+d+".0")}function $j(b,c){var d=b.split(/\//g);2<d.length&&f(new Qj);return(new Q).a(parseInt(d[0],~~c),parseInt(d[1],~~c))}
function Zj(b,c){var d=m;/^-/.test(b)&&(d=k,b=b.substring(1));b=b.toUpperCase();/E/.test(b)||(b+="E0");if(/\./.test(b))/^\./.test(b)&&(b="0"+b);else var g=b.split(/E/g),b=g[0]+".0E"+g[1];var g=b.split(/\./g),h=parseInt(g[0],~~c),g=g[1].split(/E/g);/^\+/.test(g[1])&&(g[1]=g[1].substring(1));g=(h+parseInt(g[0],~~c)/Math.pow(c,g[0].length))*Math.pow(c,parseInt(g[1],~~c));d&&(g=-g);return Ta(g)}function Ub(){}Ub.prototype=new y;r=Ub.prototype;r.className="Typing.Coercion";
r.a=function(b,c,d){this.ea=b;if(c!==i)this.Lb=c;if(d!==i)this.Ab=d;return this};r.type=function(){return K("fn")};r.Lb=function(){f(t(new u,"not implemented: "+name+".coerce 1 arg"))};r.Ab=function(){f(t(new u,"not implemented: "+name+".coerce 2 args"))};r.t=function(b,c){D(b,this.Lb(c))};r.U=function(b,c,d){D(b,this.Ab(c,d))};function Qj(){}Qj.prototype=Error();function ak(){}ak.prototype=new Fb;r=ak.prototype;r.className="Input";function bk(b,c){b.Da=c;return b}
r.nc=function(b,c){return this.Da.nc(function(c,g){return c?b(t(new u,"Cannot read byte from "+this,c)):g===l?b(l,C):b(l,H(g))},c)};function ck(b,c,d){return b.Da.oc(function(b,d){return b?c(t(new u,"reading character: "+b)):d===l?c(l,C):c(l,Qa(d))},d)}function dk(b,c,d,g){return Oa(b.Da,function(b,g){return b?d(t(new u,"Can't parse input: "+b,b)):g===l?d(l,c):d(l,g)},g)}r.type=function(){return ek};r.sa=o("Da");r.close=function(){this.zd=k;this.Da.close()};
function fk(b,c){try{return b instanceof ak||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected input-port, got "+b))}}var ek=K("input");function gk(){}gk.prototype=new Fb;r=gk.prototype;r.className="Output";function hk(b,c){b.Gb=c;return b}r.write=function(b){this.Gb.bb(""+b)};r.type=function(){return ik};r.sa=o("Gb");r.close=function(){this.Gb.close()};r.vc=function(b){this.Gb.vc(b)};
function jk(b,c){try{return b instanceof gk||f(new TypeError),b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+c+" expected output-port, got "+b))}}r.flush=function(){this.Gb.flush()};var ik=K("output");function sa(){}sa.prototype=new ak;sa.prototype.className="StringInputPort";
sa.prototype.a=function(b){function c(){if(b.length<=h)return m;var c=b.charCodeAt(h++);g.push(c>>>8&255,c&255);return k}function d(){return 0!==g.length||c()?g.shift():l}var g=[],h=0;return bk(this,{nc:function(b){b(l,d());return k},oc:function(b){var c=d(),g=d();b(l,g===l?l:c<<8|g);return k},mb:function(b){b(l,2<=g.length||c()?g[0]<<8|g[1]:l);return k},close:n()})};function kk(){}kk.prototype=new gk;kk.prototype.className="StringOutputPort";
kk.prototype.a=function(){var b=this;b.Tb=[];b.sb=l;return hk(this,{bb:function(c){if(b.sb===l)b.Tb.push(c);else for(var d=0,g=c.length;d<g;d++){var h=c.charCodeAt(d);b.Tb.push(String.fromCharCode(b.sb<<8|h>>>8&255));b.sb=h&255}},vc:function(c){b.sb===l?b.sb=c:(b.Tb.push(String.fromCharCode(b.sb<<8|c)),b.sb=l)},close:n(),flush:n()})};kk.prototype.value=function(){var b=this.Tb.join("");this.Tb=[b];return G(b)};kk.prototype.toString=p("#<string-output-port>");function lk(){}lk.prototype=new gk;
lk.prototype.className="IO.Anon_STD_OUT_";lk.prototype.a=function(){return hk(this,ka)};lk.prototype.close=n();lk.prototype.toString=p("IO.STD_OUT");var mk=(new lk).a();function nk(){}nk.prototype=new gk;nk.prototype.className="IO.Anon_STD_ERR_";nk.prototype.a=function(){return hk(this,la)};nk.prototype.close=n();nk.prototype.toString=p("IO.STD_ERR");var ok=(new nk).a();function pk(){}pk.prototype=new ak;pk.prototype.className="IO.Anon_STD_IN_";pk.prototype.a=function(){return bk(this,ja)};
pk.prototype.close=n();pk.prototype.toString=p("IO.STD_IN");var qk={value:(new pk).a()},rk={value:mk};function sk(b,c){return b instanceof z?rk.value:jk(b,c)}function tk(b,c){return b instanceof z?qk.value:fk(b,c)}function uk(b){for(;!(b instanceof z);){var c=b.b();c instanceof ak?c.close():c instanceof gk?c.close():c instanceof uc?c.close():f(t(new u,"close: expected Input or Output object; got "+c));b=b.c();b instanceof B||f(new TypeError)}return C}function vk(){}vk.prototype=new X;
vk.prototype.className="Close_Builtin";vk.prototype.a=function(){return Z(this,"close")};vk.prototype.j=function(b){return uk(b)};function wk(){}wk.prototype=new X;wk.prototype.className="Disp";wk.prototype.a=function(){return Z(this,"disp")};wk.prototype.t=function(b,c){rk.value.write(c.eb());D(b,C)};wk.prototype.j=function(b){var c=sk(b.c().b(),this),b=b.b();c.write(b.eb());return C};function zk(){}zk.prototype=new X;zk.prototype.className="FlushOut";zk.prototype.a=function(){return Z(this,"flushout")};
zk.prototype.j=function(){rk.value.flush();return $a};function Ak(){}Ak.prototype=new X;Ak.prototype.className="ForceClose";Ak.prototype.a=function(){return Z(this,"force-close")};Ak.prototype.j=function(b){return uk(b)};function Bk(){}Bk.prototype=new X;Bk.prototype.className="StdErr";Bk.prototype.a=function(){return Z(this,"stderr")};Bk.prototype.j=function(){return ok};function Ck(){}Ck.prototype=new X;Ck.prototype.className="StdIn";Ck.prototype.a=function(){return Z(this,"stdin")};
Ck.prototype.j=function(b){Og(b,0,this.className);return qk.value};function Dk(){}Dk.prototype=new X;Dk.prototype.className="StdOut";Dk.prototype.a=function(){return Z(this,"stdout")};Dk.prototype.j=function(){return rk.value};function Ek(){}Ek.prototype=new X;Ek.prototype.className="Write";Ek.prototype.a=function(){return Z(this,"write")};Ek.prototype.j=function(b){sk(b.c().b(),this).write(b.b());return C};function Fk(){}Fk.prototype=new X;Fk.prototype.className="WriteB";
Fk.prototype.a=function(){return Z(this,"writeb")};Fk.prototype.j=function(b){var c=sk(b.c().b(),this),b=lb(b.b(),this);b.na()||f(t(new u,"write byte: expected byte, got "+b));c.vc(b.I());return C};function Gk(){}Gk.prototype=new X;Gk.prototype.className="WriteC";Gk.prototype.a=function(){return Z(this,"writec")};Gk.prototype.j=function(b){var c=sk(b.c().b(),this),d=Kb(b.b(),this);c.Gb.bb(String.fromCharCode(d.value()));return b.b()};function Hk(){}Hk.prototype=new X;Hk.prototype.className="InString";
Hk.prototype.a=function(){return Z(this,"instring")};Hk.prototype.j=function(b){return(new sa).a(Vb(b.b(),this).value())};function Ik(){}Ik.prototype=new X;Ik.prototype.className="Inside";Ik.prototype.a=function(){return Z(this,"inside")};Ik.prototype.j=function(b){var c;b=b.b();try{b instanceof kk||f(new TypeError),c=b}catch(d){d instanceof TypeError||f(d),f(t(new u,"Wrong argument type: "+this+" expected a StringOutputPort, got "+b))}return c.value()};function Jk(){}Jk.prototype=new X;
Jk.prototype.className="OutString";Jk.prototype.a=function(){return Z(this,"outstring")};Jk.prototype.j=function(){return(new kk).a()};function Kk(){}Kk.prototype=new X;Kk.prototype.className="CallWStdIn";Kk.prototype.a=function(){return Z(this,"call-w/stdin")};Kk.prototype.g=function(b,c){var d=(new fd).a(qk,qk.value);d.m(this);E(b,d);qk.value=fk(c.b(),this);c.c().b().g(b,C)};function Lk(){}Lk.prototype=new X;Lk.prototype.className="CallWStdOut";Lk.prototype.a=function(){return Z(this,"call-w/stdout")};
Lk.prototype.g=function(b,c){var d=(new fd).a(rk,rk.value);d.m(this);E(b,d);rk.value=jk(c.b(),this);c.c().b().g(b,C)};function Mk(){}Mk.prototype=new X;Mk.prototype.className="ReadB";Mk.prototype.a=function(){return Z(this,"readb")};Mk.prototype.t=function(b,c){E(b,(new Nk).a(tk(c,this),this))};Mk.prototype.g=function(b,c){E(b,(new Nk).a(tk(c.b(),this),this))};function Nk(){}Nk.prototype=new N;r=Nk.prototype;r.Fa=k;r.className="ReadB.Go";r.a=function(b,c){O(this);this.Vb=b;this.m(c);return this};
r.Na=function(b,c,d){return this.Vb.nc(function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};r.d=function(){f(Error())};function Ok(){}Ok.prototype=new X;Ok.prototype.className="ReadC";Ok.prototype.a=function(){return Z(this,"readc")};Ok.prototype.t=function(b,c){E(b,(new Pk).a(tk(c,this),this))};Ok.prototype.g=function(b,c){E(b,(new Pk).a(tk(c.b(),this),this))};function Pk(){}Pk.prototype=new N;r=Pk.prototype;r.Fa=k;r.className="ReadC.Go";r.a=function(b,c){O(this);this.Vb=b;this.m(c);return this};
r.Na=function(b,c,d){return ck(this.Vb,function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};r.d=function(){f(Error())};function Qk(){}Qk.prototype=new X;Qk.prototype.className="Sread";Qk.prototype.a=function(){return Z(this,"sread")};Qk.prototype.g=function(b,c){E(b,(new Rk).a(fk(c.b(),this),c.c().b(),this))};function Rk(){}Rk.prototype=new N;r=Rk.prototype;r.Fa=k;r.className="Sread.Go";r.a=function(b,c,d){O(this);this.Vb=b;this.gd=c;this.m(d);return this};
r.Na=function(b,c,d){return dk(this.Vb,this.gd,function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};r.d=function(){f(Error())};function Sk(){}Sk.prototype=new X;Sk.prototype.className="Dir";Sk.prototype.a=function(){return Z(this,"dir")};Sk.prototype.g=function(b,c){E(b,(new Tk).a(Vb(c.b(),this).value(),this))};function Tk(){}Tk.prototype=new N;r=Tk.prototype;r.Fa=k;r.className="Dir.Go";r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};
r.Na=function(b,c){return ma(function(d,g){if(d)return void c(d);D(b,g);c(l)})};r.d=function(){f(Error())};function Uk(){}Uk.prototype=new X;Uk.prototype.className="DirExists";Uk.prototype.a=function(){return Z(this,"dir-exists")};Uk.prototype.g=function(b,c){E(b,(new Vk).a(c.b(),this))};function Vk(){}Vk.prototype=new N;r=Vk.prototype;r.Fa=k;r.className="DirExists.Go";r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};
r.Na=function(b,c){return pa(Vb(this.$a,this.xa).value(),function(d,g){if(d)return void c(d);D(b,g?this.$a:C);c(l)})};r.d=function(){f(Error())};function Wk(){}Wk.prototype=new X;Wk.prototype.className="FileExists";Wk.prototype.a=function(){return Z(this,"file-exists")};Wk.prototype.g=function(b,c){E(b,(new Xk).a(c.b(),this))};function Xk(){}Xk.prototype=new N;r=Xk.prototype;r.Fa=k;r.className="FileExists.Go";r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};
r.Na=function(b,c,d){return qa(Vb(this.$a,this.xa).value(),function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};r.d=function(){f(Error())};function Yk(){}Yk.prototype=new X;Yk.prototype.className="InFile";Yk.prototype.a=function(){return Z(this,"infile")};Yk.prototype.g=function(b,c){E(b,(new Zk).a(Vb(c.b(),this).value(),this))};function Zk(){}Zk.prototype=new N;r=Zk.prototype;r.Fa=k;r.className="InFile.Go";r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};
r.Na=function(b,c,d){return ra(this.$a,function(d,h){if(d)return void c(d);D(b,bk(new ak,h));c(l)},d)};r.d=function(){f(Error())};function $k(){}$k.prototype=new X;$k.prototype.className="OutFile";$k.prototype.a=function(){return Z(this,"outfile")};$k.prototype.g=function(b,c){var d=Vb(c.b(),this).value(),g=c.c().b(),g=!(g instanceof z)&&"append"===hb(g,this).name();E(b,(new al).a(d,g,this))};function al(){}al.prototype=new N;r=al.prototype;r.Fa=k;r.className="OutFile.Go";
r.a=function(b,c,d){O(this);this.ea=b;this.xd=c;this.m(d);return this};r.Na=function(b,c){return ta(function(d,g){if(d)return void c(d);D(b,hk(new gk,g));c(l)})};r.d=function(){f(Error())};function bl(){}bl.prototype=new X;bl.prototype.className="MakeDirectory";bl.prototype.a=function(){return Z(this,"make-directory")};bl.prototype.g=function(b,c){E(b,(new cl).a(Vb(c.b(),this).value(),this))};function cl(){}cl.prototype=new N;r=cl.prototype;r.Fa=k;r.className="MakeDirectory.Go";
r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};r.Na=function(b,c){return ua(function(d,g){if(d)return void c(d);D(b,g?Db:Bb.cd);c(l)})};r.d=function(){f(Error())};function dl(){}dl.prototype=new X;dl.prototype.className="MakeDirectories";dl.prototype.a=function(){return Z(this,"make-directory*")};dl.prototype.g=function(b,c){E(b,(new el).a(Vb(c.b(),this).value(),this))};function el(){}el.prototype=new N;r=el.prototype;r.Fa=k;r.className="MakeDirectories.Go";
r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};r.Na=function(b,c){return va(function(d,g){if(d)return void c(d);D(b,g?Db:Bb.cd);c(l)})};r.d=function(){f(Error())};function fl(){}fl.prototype=new X;fl.prototype.className="MvFile";fl.prototype.a=function(){return Z(this,"mvfile")};fl.prototype.g=function(b,c){E(b,(new gl).a(Vb(c.b(),this).value(),Vb(c.c().b(),this).value(),this))};function gl(){}gl.prototype=new N;r=gl.prototype;r.Fa=k;r.className="MvFile.Go";
r.a=function(b,c,d){O(this);this.Id=b;this.Hd=c;this.m(d);return this};r.Na=function(b,c){return wa(function(d){if(d)return void c(d);D(b,C);c(l)})};r.d=function(){f(Error())};function hl(){}hl.prototype=new X;hl.prototype.className="RmFile";hl.prototype.a=function(){return Z(this,"rmfile")};hl.prototype.g=function(b,c){E(b,(new il).a(Vb(c.b(),this).value(),this))};function il(){}il.prototype=new N;r=il.prototype;r.Fa=k;r.className="RmFile.Go";r.a=function(b,c){O(this);this.$a=b;this.m(c);return this};
r.Na=function(b,c){return xa(function(d){if(d)return void c(d);D(b,C);c(l)})};r.d=function(){f(Error())};var Tg=k;
function jl(b){var c={noLibs:k,e:['(assign load-from-web  (fn ()    ( (fn (eof f loop)        (assign loop          (fn ()            ( (fn (command)              (if (is command eof)                (eval                  \'(do (load "strings.arc")                       (load "lib/bag-of-tricks.arc")                       (load "rainbow/rainbow.arc")                       (load "rainbow/rainbow-libs.arc")                       ))                ( (fn ()                  eval.command                  (loop)                ) ))            ) (sread f eof))))        (loop)    ) (uniq) (infile "arc.arc") nil)))'].concat("#libs"!==location.hash?
[]:["(load-from-web)"])},d=(new Date).getTime(),g=c.ARC_PATH||[];-1===g.indexOf(".")&&(g=["."].concat(g));var h=kl(c.args||[]);c.nosf&&(Tg=m);(new wj).a();(new xj).a();(new tj).a();(new sj).a();(new uj).a();K("pi").ha((new I).a(Math.PI));K("e").ha((new I).a(Math.E));(new ij).a();(new Pi).a();(new dj).a();(new fj).a();(new cj).a();(new $i).a();(new Ii).a();(new gj).a();(new aj).a();(new Ni).a();(new ej).a();(new Mi).a();(new hj).a();(new Ji).a();(new Hi).a();(new Ki).a();(new Qi).a();(new Li).a();
(new Ri).a();(new bj).a();(new Sj).a();(new Nj).a();(new Rj).a();(new Oj).a();(new zi).a();(new yi).a();(new ll).a();(new Jj).a();(new Fj).a();(new Ij).a();(new Bj).a();(new Gj).a();(new Kj).a();(new Lj).a();(new Mj).a();(new gi).a();(new ei).a();(new li).a();(new ji).a();(new ki).a();(new ii).a();(new Ei).a();(new Ai).a();(new Bi).a();(new Fi).a();(new Gi).a();(new Ci).a();(new Di).a();(new jj).a();(new oj).a();(new lj).a();(new kj).a();(new mj).a();(new ni).a();(new pi).a();(new ri).a();(new xi).a();
(new Aj).a();(new yj).a();(new zj).a();(new Kk).a();(new Lk).a();(new Ck).a();(new Dk).a();(new Bk).a();(new wk).a();(new Ek).a();(new Qk).a();(new Fk).a();(new Gk).a();(new Mk).a();(new Ok).a();(new zk).a();(new vk).a();(new Ak).a();(new $k).a();(new Yk).a();(new Uk).a();(new Wk).a();(new Sk).a();(new hl).a();(new fl).a();(new bl).a();(new dl).a();(new Hk).a();(new Jk).a();(new Ik).a();(new pj).a();(new qj).a();(new rj).a();var j=(new rc).a();K("*argv*").ha(x(h));K("call*").ha((new Fa).a());K("sig").ha((new Fa).a());
ml(j,g,(c.noLibs?[]:["arc","strings","lib/bag-of-tricks","rainbow/rainbow","rainbow/rainbow-libs"]).concat(c.f||[]),function(g){if(g)return void b(g);nl(j,c.e||[],function(g){if(g)return void b(g);c.q?b():(za("repl in "+((new Date).getTime()-d)+"ms"),ol(j,b,i))})})}function kl(b){for(var c=[],d=0,g=b.length;d<g;d++){var h=b[d];"[object String]"!==Object.prototype.toString.call(h)&&f(new TypeError);c.push(Ma(""+h))}return c}
function ml(b,c,d,g){var h=i;function j(s){s===q?g():pl(b,c,d[s],function(b){if(b)return void g(b);j(s+1)},h)}var q=d.length;j(0)}function nl(b,c,d){var g=i;function h(c,j){if(c)return void d(c);if(j===l)return void d();ql(b,j,function(b){if(b)return void d(b);Oa(L,h,g)},g)}for(var j=[],q=0,s=c.length;q<s;q++){var F=c[q];"[object String]"!==Object.prototype.toString.call(F)&&f(new TypeError);j.push(F+" ")}var L=(new sa).a(j.join("")).sa();Oa(L,h,g)}
function ol(b,c,d){ya("arc> ");for(var g=k,h=m;!h;)if(Oa(ja,function(j,q){if(j){if(!(j instanceof Da))return void c(j);Aa(j);g||ol(b,c,d)}else q===l?(h=k,g||c()):ql(b,q,function(h){if(h)return void c(h);g||ol(b,c,d)},d)||(g=m)},d)||(g=m),!g)return;c()}function ql(b,c,d,g){return rl(b,c,function(b,c){if(b){if(!(b instanceof u))return void d(b);za("Message    : "+b.message);ya("Java stack : ");Aa(b,ka)}else za(c);d()},g)}
function sl(b,c,d,g){function h(q){if(q===L)d(Error("Could not find "+c+" under "+JSON.stringify(b)));else{var s=j[q];qa(s,function(b,c){if(b)return void d(b);if(c)return void d(l,s);h(q+1)},g)}}for(var j=[],q=b.length,s=0;s<q;s++){var F=""+b[s]+"/"+c;j.push(F,F+".arc")}var L=j.length;h(0)}function pl(b,c,d,g,h){function j(c){ra(c,function(c,d){if(c)return void g(c);tl(b,d,g,h)},h)}qa(d,function(b,s){if(b)return void g(b);s?j(d):sl(c,d,function(b,c){if(b)return void g(b);j(c)},h)},h)}
function tl(b,c,d,g){var h=k;Oa(c,function(j,q){if(j)return void d(j);if(q===l)return void d();rl(b,q,function(j){if(j)return void d(j);tl(b,c,d,g)||(h=m)},g)||(h=m)},g)||(h=m);return h}function ul(){}ul.prototype=new tf;ul.prototype.className="Console.Anon_mkVisitor_";ul.prototype.a=function(b){this.xa=b;return this};ul.prototype.Zb=function(b){b.m(this.xa)};function rl(b,c,d,g){E(b,(new vl).a(c));return sc(b,d,g)}function vl(){}vl.prototype=new N;vl.prototype.className="Console.CompileAndEval";
vl.prototype.a=function(b){O(this);this.Ba=b;this.m(G("Console.compileAndEvalAsync_"));return this};vl.prototype.d=function(b){E(b,(new wl).a());Rf(b,this.Ba,[])};function wl(){}wl.prototype=new N;wl.prototype.className="Console.AndEval";wl.prototype.a=function(){O(this);this.m(G("Console.compileAndEvalAsync_"));return this};wl.prototype.d=function(b){var c=R(b).reduce(),d=[];c.h(d);d=x(d);d.l((new ul).a(c));S(b,l,d)};function ll(){}ll.prototype=new X;ll.prototype.className="NewThread";
ll.prototype.a=function(){return Z(this,"new-thread")};ll.prototype.j=function(){f(t(new u,"Rainbow.js doesn't support new-thread."))};function uh(){}uh.prototype=new N;uh.prototype.className="BindAndRun";uh.prototype.a=function(b,c,d){O(this);this.ja=b;this.o=c;this.m(d);return this};uh.prototype.d=function(b){this.ja.add(R(b));S(b,this.ja,this.o)};Ra("window").ha((new uc).a(window));ea(window,"hashchange",function(){location.reload(m)});
ea(window,"load",function(){function b(){var b=F.value+"\n";F.value="";fa.mc.bb(b)}function c(b){if(b.$c!==i)return b.$c();for(var c=[],d=k;d;)b.oc(function(b,g){b&&f(b);g!==l?d=m:c.push(String.fromCharCode(g))},k)||(d=m);return c.join("")}function d(b){s.appendChild(document.createTextNode(b));na||(na=k,setTimeout(function(){na=m;s.scrollTop=s.scrollHeight},0))}function g(b){b&&f(b);b=c(fa.Ya);""!==b&&(d(b),ga.mc.bb(b),fa.Ya.mb(g))}function h(b){b&&f(b);b=c(ha.Ya);""!==b&&(d(b),ha.Ya.mb(h))}function j(b){b&&
f(b);b=c(ia.Ya);""!==b&&(d(b),ia.Ya.mb(j))}var q=document.getElementById("repl"),s=document.createElement("pre");s.className="scrollback";s.appendChild(document.createTextNode(""));q.appendChild(s);var F=document.createElement("textarea");F.className="prompt";ea(F,"keydown",function(b){if(13===(b.which||b.keyCode))b.preventDefault?b.preventDefault():b.returnValue=m});ea(F,"keyup",function(c){13===(c.which||c.keyCode)&&b()});q.appendChild(F);var L=document.createElement("button");L.className="eval";
L.appendChild(document.createTextNode("Eval"));ea(L,"click",function(){b()});q.appendChild(L);var na=m;fa.Ya.mb(g);ha.Ya.mb(h);ia.Ya.mb(j);jl(n())});
