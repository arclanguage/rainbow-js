function g(b){throw b;}var i=void 0,k=!0,l=null,m=!1;function aa(){return function(b){return b}}function n(){return function(){}}function ca(b){return function(c){this[b]=c}}function o(b){return function(){return this[b]}}function p(b){return function(){return b}}var r;
function da(){function b(){if(0!==j.length){var c=j.shift(),d=q.shift();setTimeout(function(){d(c)},0);setTimeout(b,0)}}function c(b,c,s,ba){if(0!==d.length&&0===j.length){var jc=d[0];if(1===d.length&&("byte"===jc.type||jc.Da.length<<1===f+1)){if(h)return c&&(d=[]),b(l,l),k;ba||(j.push(b),q.push(s));return m}var Ra,s=0,ba=f,$=jc;if("byte"===$.type)s++,jc=$.Da;else{$=$.Da;Ra=$.charCodeAt(ba>>>1);if(ba&1)return c&&(f++,$.length<<1<=f&&(d.shift(),f=0)),b(l,Ra),k;jc=Ra>>>8&255;ba++;$.length<<1<=ba&&(s++,
ba=0)}$=d[s];"byte"===$.type?(s++,Ra=$.Da):($=$.Da,Ra=$.charCodeAt(ba>>>1),Ra=(ba&1?Ra:Ra>>>8)&255,ba++,$.length<<1<=ba&&(s++,ba=0));if(c){for(;s--;)d.shift();f=ba}b(l,jc<<8|Ra);return k}if(h)return b(l,l),k;ba||(j.push(b),q.push(s));return m}var d=[],f=0,h=m,j=[],q=[],s={},F=s.mc=function(b,c){if(0!==d.length&&0===j.length){var s=d[0];if("byte"===s.type)d.shift(),b(l,s.Da);else{var s=s.Da,ba=s.charCodeAt(f>>>1),ba=(f&1?ba:ba>>>8)&255;f++;s.length<<1<=f&&(d.shift(),f=0);b(l,ba)}return k}if(h)return b(l,
l),k;c||(j.push(b),q.push(F));return m},N=s.nc=function(b,d){return c(b,k,N,d)},na=s.mb=function(b,d){return c(b,m,na,d)};s.close=n();s.Zc=function(){var b=d.length,c=m,h,j=[],q=0;if(f&1){var s=d[0].Da,c=k;h=s.charCodeAt(f>>>1)&255;f++;for(var $=f>>>1,F=s.length;$<F;$++){var Fb=s.charCodeAt($);j.push(String.fromCharCode(h<<8|Fb>>>8&255));h=Fb&255}f=0;q++}else f&&(j.push(d[0].Da.substring(f>>>1)),f=0,q++);for(b=d.length;q<b;q++)if(s=d[q],"byte"===s.type)c?(j.push(String.fromCharCode(h<<8|s.Da)),c=
m):(h=s.Da,c=k);else if(s=s.Da,c){$=0;for(F=s.length;$<F;$++)Fb=s.charCodeAt($),j.push(String.fromCharCode(h<<8|Fb>>>8&255)),h=Fb&255}else j.push(s);d=c?[{type:"byte",Da:h}]:[];return j.join("")};return{Wa:s,lc:{ab:function(c){h||""===c||(d.push({type:"string",Da:c}),b())},uc:function(c){h||(d.push({type:"byte",Da:c}),b())},close:function(){h=k;b()},flush:n()}}}function ea(b,c,d){b.addEventListener?b.addEventListener(c,d,m):b.attachEvent("on"+c,d)}
var fa=da(),ga=da(),ha=da(),ia=da(),ja=ga.Wa,ka=ha.lc,la=ia.lc;function ma(b){b(t(new u,"No filesystem."));return k}function pa(b,c){c(l,m);return k}function qa(b,c,d){if(d)return c(t(new u,"Can't access the Web synchronously.")),k;d=new XMLHttpRequest;d.open("GET",b,k);d.onerror=function(){c(l,m)};d.onload=function(){c(l,k)};d.send(l);return m}
function ra(b,c,d){if(d)return c(t(new u,"Can't access the Web synchronously.")),k;var f=new XMLHttpRequest;f.open("GET",b,k);f.onerror=function(){c(t(new u,"Couldn't open page: "+b+" because of error: "+f.statusText))};f.onload=function(){c(l,(new sa(f.responseText)).qa())};f.send(l);return m}function ta(b){b(t(new u,"No filesystem."));return k}function ua(b){b(t(new u,"No filesystem."));return k}function va(b){b(t(new u,"No filesystem."));return k}
function wa(b){b(t(new u,"No filesystem."));return k}function xa(b){b(t(new u,"No filesystem."));return k};function ya(b){ka.ab(""+b)}function za(b){ka.ab(""+b+"\n")}function Aa(b,c){i===c&&(c=la);for(c.ab(""+b+"\n"+(b.stack||b)+"\n");b instanceof u&&(b=b.ed);)b instanceof Ba&&(b=b.wa),c.ab("Caused by: "+b+"\n"+(b.stack||b)+"\n")}var v={};function Ca(){}Ca.prototype.o=function(){this.yc={};return this};Ca.prototype.get=function(b){return this.yc["rainbow_"+b]};Ca.prototype.put=function(b,c){return this.yc["rainbow_"+b]=c};function u(){}u.prototype=Error();
function t(b,c,d){b.message=c;b.stack=Error().stack;b.ed=d;b.xd=[];return b}function w(){}r=w.prototype;r.o=function(b,c){this.parent=c;this.ib=Array(~~b);this.Mb=0;return this};r.add=function(b){this.ib.length<=this.Mb&&g(t(new u,"Can't add "+b+" to bindings: already full ("+this.Mb+") "+x(this.ib)));this.ib[this.Mb]=b;this.Mb++};r.Fb=function(b){return 0===b?this:this.parent.Fb(b-1)};
r.toString=function(){for(var b=[],c=0;c<this.ib.length;c++)b.push(c),b.push(" : "),b.push(this.ib[c]),b.push("\n");return b.join("")+"\nparent: "+(this.parent===l?"<none>":this.parent.toString())};r.set=function(b,c){return this.ib[b]=c};r.Lb=o("Mb");r.size=function(){return this.ib.length};function Da(){}Da.prototype=Error();Da.prototype.o=function(){return this};function y(){}r=y.prototype;r.La=m;r.className="ArcObject";r.Ia=p(m);
r.g=function(){g(t(new u,"addInstructions not defined on "+this+", a "+this.className))};r.d=function(b,c){var d=Ea.value();d instanceof Fa||g(new TypeError);d=d.value(this.type());d instanceof z&&g(t(new u,"No handler for "+this.type()+" in call* table: called "+this+" with args "+c));d.d(b,A(new B,this,c))};r.ua=function(b){this.d(b,C)};r.t=function(b,c){this.d(b,A(new B,c,C))};r.U=function(b,c,d){this.d(b,A(new B,c,A(new B,d,C)))};r.Xa=function(b,c,d,f){this.d(b,A(new B,c,A(new B,d,A(new B,f,C))))};
r.ka=function(){g(t(new u,"len: expects one string, list or hash argument, got "+this.type()))};r.Wb=function(){g(t(new u,"Can't set car of "+this.type()))};r.qc=function(b,c){g(t(new u,"Can't sref "+this+"( a "+this.type()+"), other args were "+b+", "+c))};r.ra=p(0);r.vc=function(){return C};r.a=function(){g(t(new u,"Can't take car of "+this))};r.b=function(){g(t(new u,"Can't take cdr of "+this))};r.Dc=p(m);r.type=i;r.copy=function(){return this};r.qa=function(){return this};
r.Ha=function(b){return this===b};r.copyTo=aa();r.O=p(k);r.Eb=function(){g(new Ga)};r.Pa=function(){g(new Ha)};r.Yc=function(){return this};function Ia(b,c,d){for(var f=d,h=0;!(d instanceof z);)D(c,d.a()),d=d.b(),h++;E(c,(new Ja).o(f,c.N,b));d=new Ka(h);d.l(b);E(c,d);d=new La(b);d.l(b);E(c,d)}r.Cb=function(){g(t(new u,"has length: not a proper list: ends with "+this))};r.ic=function(){g(t(new u,"longer than: not a proper list: ends with "+this))};r.M=function(){return this};r.k=n();r.Y=function(){return this};
r.tc=n();r.$b=n();r.ac=function(){return C};r.Ta=function(){return this.ac().toString()};r.add=function(){g(t(new u,"add not implemented for "+this.type()+" "+this))};r.sqrt=function(){g(t(new u,"sqrt not implemented for "+this.type()+" "+this))};r.multiply=function(){g(t(new u,"multiply not implemented for "+this.type()+" "+this))};function Ha(){}r.reduce=function(){return this};r.W=p(m);r.T=function(){return this};r.S=function(){return this};r.ha=p(m);r.cb=function(){return this.toString()};
r.Ca=function(){return this.gd||(this.gd=1+Math.random())};r.sa=function(b){return this===b};function Ma(b){var c=l;Na((new sa(b)).qa(),function(b,f){b&&g(b);c=f},k)||g((new Da).o());return c}
function Na(b,c,d){function f(c){return b.mb(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))},d)}function h(c){return b.nc(function(b,d){if(b)return void c(b);c(l,d===l?l:String.fromCharCode(d))})}function j(b){for(var c=k,d=m;c&&!d;)d=k,h(function(q,s){if(q)return void b(q);s===l||"\n"===s?b(l):"\r"===s?f(function(d,f){if(d)return void b(d);"\n"===f?h(function(c){if(c)return void b(c);b(l)})||(c=m):b(l)})||(c=m):(d=m,c||j(b))})||(c=m);return c}function q(b){for(var c=k,d=
m;c&&!d;)d=k,f(function(f,s){function F(f){if(f)return void b(f);d=m;c||q(b)}if(f)return void b(f);";"===s?j(F)||(c=m):s===l||/[^ \t\r\n]/.test(s)?b(l):h(F)||(c=m)})||(c=m);return c}function s(b,c){function d(f){var h=b.length-1,j=b[h];b="string"===typeof f&&j instanceof Oa?b.slice(0,h).concat([G(j.value()+f)]):"string"===typeof f?b.concat([G(f)]):b.concat([f]);N=m;Y||s(b,c)}function j(b){b===i&&(b=(new Da).o());c(b)}function F(){Ce(function(b,c){if(b)return j(b);q(function(b){if(b)return j(b);h(function(b,
f){if(b)return j(b);")"===f?d(c):j()})||(Y=m)})||(Y=m)})||(Y=m)}for(var Y=k,N=m;Y&&!N;)N=k,h(function(s,q){if(s)return j(s);q===l?j():'"'===q?c(l,b):"\\"===q?h(function(b,c){if(b)return j(b);'"'===c?d('"'):"\\"===c?d("\\"):"n"===c?d("\n"):"r"===c?d("\r"):"t"===c?d("\t"):"#"===c?h(function(b,c){if(b)return j(b);"("===c?d("#("):j()})||(Y=m):j()})||(Y=m):"#"===q?f(function(b,c){if(b)return j(b);if("("!==c)return void d("#");h(function(b){if(b)return j(b);F()})||(Y=m)})||(Y=m):d(q)})||(Y=m);return Y}
function F(b,c){function d(b){c(l,Pa(b))}for(var j=k,q=m;j&&!q;)q=k,f(function(f,s){if(f)return void c(f);s===l||/[^01-9a-zA-Z]/.test(s)?"newline"===b?d(10):"tab"===b?d(9):"space"===b?d(32):"return"===b?d(13):"null"===b?d(0):/^[01-9][01-9]+$/.test(b)?d(parseInt(b,10)):/^u[0-9a-f]+$/i.test(b)?d(parseInt(b.substring(1),16)):1===b.length?d(b.charCodeAt(0)):c((new Da).o()):h(function(d,f){if(d)return void c(d);q=m;b+=f;j||F(b,c)})||(j=m)})||(j=m);return j}function N(b,c){for(var d=k,j=m;d&&!j;)j=k,f(function(f,
q){if(f)return void c(f);if(q===l||/[^01-9a-fA-F]/.test(q)){if(""===b)return void c((new Da).o());c(l,H(parseInt(b,16)))}else h(function(f,h){if(f)return void c(f);j=m;b+=h;d||N(b,c)})||(d=m)})||(d=m);return d}function na(b,c){for(var d=k,f=m;d&&!f;)f=k,h(function(h,j){if(h)return void c(h);j===l?c((new Da).o()):"|"===j?c(l,Qa(b)):(f=m,b+=j,d||na(b,c))})||(d=m);return d}function Y(b,c,d){for(var j=k,s=m;j&&!s;)s=k,q(function(q){if(q)return void d(q);f(function(f,q){if(f)return void d(f);q===l?d((new Da).o()):
q===c?h(function(c){if(c)return void d(c);d(l,b)})||(j=m):Ce(function(f,h){if(f)return void d(f);s=m;b=b.concat([h]);j||Y(b,c,d)})||(j=m)})||(j=m)})||(j=m);return j}function db(b,c){for(var d=k,j=m;d&&!j;)j=k,f(function(f,q){if(f)return void c(f);var s=q!==l&&q.charCodeAt(0);if(q!==l&&(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(q)||128<=s&&65536>s))h(function(f,h){if(f)return void c(f);j=m;b+=h;d||db(b,c)})||(d=m);else if("\\"===q)h(function(f){if(f)return void c(f);h(function(f,h){if(f)return void c(f);
"|"===h?(j=m,b+="\\|",d||db(b,c)):c((new Da).o())})||(d=m)})||(d=m);else{var Y;/^-?[01-9]+\/[01-9]+$/.test(b)?c(l,Sa(b)):/^-?[01-9]+$/.test(b)?c(l,H(parseInt(b,10))):/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)?c(l,Ta(parseFloat(b))):"+inf.0"===b?c(l,new I(1/0)):"-inf.0"===b?c(l,new I(-1/0)):"+nan.0"===b?c(l,new I(0/0)):"+i"===b?c(l,new J(0,1)):"-i"===b?c(l,new J(0,-1)):(Y=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(b))?c(l,new J(Ta(parseFloat(Y[1])).value(),
Ta(parseFloat(Y[2]+(Y[3]||"1"))).value())):c(l,Qa(b))}})||(d=m);return d}function Ce(b){function c(){s([],function(c,d){if(c)return void b(c);0===d.length?b(l,G("")):1===d.length?b(l,d[0]):b(l,x([Qa("string")].concat(d)))})||(oa=m)}function d(){na("",function(c,d){if(c)return void b(c);b(l,Qa(d))})||(oa=m)}function j(){h(function(c,d){if(c)return void b(c);d!==l&&/x/i.test(d)?N("",b)||(oa=m):"\\"===d?h(function(c,d){if(c)return void b(c);if(/[^a-zA-Z]/.test(c))return void b(l,Pa(c.charCodeAt(0)));
F(d,b)||(oa=m)})||(oa=m):b((new Da).o())})||(oa=m)}function De(c){Ce(function(d,f){if(d)return void b(d);f===l?b((new Da).o()):b(l,x([K(c),f]))})||(oa=m)}function Fb(){f(function(c,d){if(c)return void b(c);d===l?b((new Da).o()):"@"===d?h(function(c){if(c)return void b(c);De("unquote-splicing")})||(oa=m):De("unquote")})||(oa=m)}function qk(){Y([],")",function(c,d){if(c)return void b(c);if(0===d.length)b(l,Ua);else{try{var f=d===l||0===d.length?C:d[0]===Va?Wa(d):A(new B,d[0],Xa(d.slice(1)))}catch(h){return void b(h)}b(l,
f)}})||(oa=m)}function rk(){Y([],"]",function(c,d){if(c)return void b(c);b(l,x([K("fn"),x([K("_")]),x(d)]))})||(oa=m)}var oa=k;q(function(f){if(f)return void b(f);h(function(f,h){if(f)return void b(f);h===l?b(l,l):'"'===h?c():"|"===h?d():"#"===h?j():"'"===h?De("quote"):","===h?Fb():"`"===h?De("quasiquote"):"("===h?qk():"["===h?rk():db(h,b)||(oa=m)})||(oa=m)})||(oa=m);return oa}return Ce(c)}function L(){}L.prototype=new y;r=L.prototype;r.className="Symbol";
function Ya(b,c,d){b.da=c;b.nd=d;b.hd=c;b.j=l;b.Bb=l;return b}r.g=function(b){b.push(new Za(this))};function K(b){var c=Qa(b);if(c instanceof L)return c;g(t(new u,"can't make symbol from \""+b+'"'))}
function Qa(b){if("t"===b)b=$a;else if("nil"===b)b=C;else{var c;if(!(c=ab.test(b))){a:if(/^-?[01-9]+\/[01-9]+$/.test(b)||/^-?[01-9]+$/.test(b)||/^[-+]?[01-9]*\.?[01-9]+(e-?[01-9]+)?$/.test(b)||"+inf.0"===b||"-inf.0"===b||"+nan.0"===b||"+i"===b||"-i"===b||/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.test(b)||/\\(?!\|)/.test(b))c=k;else{c=0;for(var d=b.length;c<d;c++){var f=b.charCodeAt(c);if(!(/^[-+$%&*\/<=>?^_~.!:01-9a-zA-Z]+$/.test(b.charAt(c))||128<=f&&65536>
f)){c=k;break a}}c=m}c=c||"."===b}b=c?bb(b,"|"+b+"|"):cb.test(b)?bb(b.replace(/\\\|/g,"|"),b):bb(b,b)}return b}r.cb=o("da");r.toString=o("nd");function bb(b,c){if("rainbow_"+b in eb.yc)return eb.get(b);var d=Ya(new L,b,c);eb.put(b,d);return d}r.name=o("da");r.ra=function(b){b instanceof L||g(new TypeError);return this.da.localeCompare(b.name)};r.type=function(){return fb};r.qa=function(){return this.name()};r.Ca=o("hd");r.sa=function(b){return this===b};
function gb(b,c){return c instanceof L&&c.name()===b}r.ga=function(b){var c=this.j;this.j=b;c!==l&&c.tc(this);b.$b(this)};r.value=function(){this.j===l&&g(t(new u,"Symbol "+this.da+" is not bound"));return this.j};r.bound=function(){return this.j!==l};function hb(b,c){try{return b instanceof L||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a Symbol, got "+b))}}function ib(b,c,d){if(b.Bb===l)b.Bb={};b.Bb[c.name()]=d}
var eb=(new Ca).o(),ab=/.*(["'; \t\n\)\(]|([^\\]|^)\|).*/,cb=/.*\\\|/,fb=K("sym"),Va=K("."),jb=K("!");function B(){}B.prototype=new y;r=B.prototype;r.className="Pair";function A(b,c,d){c===l&&g(t(new u,"Can't create Pair with null car: use NIL instead"));d===l&&g(t(new u,"Can't create Pair with null cdr: use NIL instead"));b.bb=c;b.ob=d;return b}r.d=function(b,c){var d=kb(c.a(),this);D(b,this.Fb(d.I()).a())};r.vc=o("bb");r.a=o("bb");r.b=o("ob");r.Pa=function(){this.bb!==l&&g(new Ha)};r.O=p(m);
r.Wb=function(b){return this.bb=b};r.qc=function(b,c){return this.Fb(lb(c,this).I()).Wb(b)};r.Dc=function(b){return b===this.bb};r.toString=function(){if(this.a()instanceof L&&this.a().name()in mb&&this.b()instanceof B&&1===this.b().size()){var b=this.a(),b=mb[b.name()],c=this.b();c instanceof B||g(new TypeError);return b+nb(c)}return"("+nb(this)+")"};function nb(b){for(var c=[];!b.O();)c.push(b.a()),b.b().O()||c.push(" "),b=b.b();b instanceof z||c.push(" . ",b);return c.join("")}r.Kc=ca("ob");
function Xa(b){if(0===b.length)return C;if(b[0]===Va)return 2===b.length?(b=b[1],b instanceof y||g(new TypeError),b):Wa(b);var c=b[0];c instanceof y||g(new TypeError);return A(new B,c,Xa(b.slice(1)))}function Wa(b){g(t(new u,'Error: illegal use of "." in '+b))}function ob(b,c,d){if(d===b.length)return c;var f=b[d];f instanceof y||g(new TypeError);return A(new B,f,ob(b,c,d+1))}function pb(b,c){return b===l||0===b.length?c:ob(b,c,0)}function x(b){return pb(b,C)}r.type=function(){return qb};r.ka=function(){return this.size()};
r.size=function(){if(this instanceof z)return 0;for(var b=1,c=this.ob;!(c instanceof z);)c.O()&&g(t(new u,"cannot take size: not a proper list: "+this)),b++,c=c.b();return b};r.ra=function(){g(t(new u,"Pair.compareTo:unimplemented"))};r.copyTo=function(b){b.push(this.a());if(this.b()instanceof z)return b;this.b()instanceof B||g(t(new u,"Not a list: "+this));this.b().copyTo(b);return b};
r.sa=function(b){if(this===b)return k;var c=this instanceof z;b instanceof y||g(new TypeError);var d=b instanceof z;if(c!==d)return m;if(c&&d)return k;return b instanceof B?(c=b.bb.sa(this.bb),b=b.ob.sa(this.ob),c&&b):m};r.Ca=function(){return this.a().Ca()+this.b().Ca()};r.Fb=function(b){try{for(var c,d=this,f=b;0<f;)d.b()instanceof z&&g((new rb).o()),d=d.b(),f--;c=d;c instanceof B||g(new TypeError);return c}catch(h){h instanceof rb||g(e),g(t(new u,"Error: index "+b+" too large for list "+this))}};
r.Cb=function(b){return this.b().Cb(b-1)};r.ic=function(b){return 0>b||this.b().ic(b-1)};r.Ta=function(){return"ref:"+this.type().toString()};function rb(){}rb.prototype=Error();rb.prototype.o=function(){return this};r=B.prototype;r.copy=function(){return this instanceof z?this:A(new B,this.a(),this.b().copy())};r.qa=function(){var b=[];sb(b,this);return b};r.Ha=function(b){return y.prototype.Ha.call(this,b)||this instanceof z&&b instanceof z};
function sb(b,c){if(!(c instanceof z)){b.push(c.a().qa());var d=c.b();d instanceof B||g(new TypeError);sb(b,d)}}function tb(b){var c=Array(~~b.size());ub(b,c,0);return c}function ub(b,c,d){if(d<c.length)c[d]=b.bb,b=b.ob,b instanceof B||g(new TypeError),b instanceof z||ub(b,c,d+1)}function vb(b,c){try{return b instanceof B||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a cons, got "+b))}}r.Eb=n();
r.add=function(b){if(b instanceof B){var c=[];this.copyTo(c);b.copyTo(c);return x(c)}g(t(new u,"+ : expects cons, got "+b.type()+" "+b))};r.k=function(b){b.za(this);for(var c=this;!c.O();)c.a().k(b),c=c.b();c instanceof z||c.k(b);b.Ka(this)};function Ga(){}var qb=K("cons"),mb={quasiquote:"`",quote:"'",unquote:",","unquote-splicing":",@"};function z(){}z.prototype=new B;r=z.prototype;r.className="Nil";function wb(b){var c=new z;c.bb=c.ob=l;c.xb=b;return c}r.g=function(b){b.push(new La(xb))};
r.d=function(b,c){g(t(new u,"Function dispatch on inappropriate object: "+this+" with args "+c))};r.Eb=n();r.Ia=p(k);r.ka=p(0);r.O=p(k);r.Pa=n();r.toString=o("xb");r.vc=function(){return this};r.a=function(){return this};r.b=function(){return this};r.Dc=p(m);r.Kc=function(){g(Error("can't set the cdr of "+this))};r.size=p(0);r.copyTo=aa();r.type=function(){return yb};r.Ca=p("nil");r.sa=function(b){if(this===b)return k;b instanceof y||g(new TypeError);return b instanceof z};r.qa=p(m);
r.Ha=function(b){return b instanceof z};r.Yc=aa();r.Cb=function(b){return 0===b};r.ic=function(b){return 0>b};var yb=fb,xb=wb("nil"),zb=wb("()");function Ab(){}var Bb={};Ab.prototype=new L;r=Ab.prototype;r.className="Truth";r.Ia=p(k);r.g=function(b){b.push(new La(Cb))};r.toString=p("t");r.ra=function(){g(t(new u,"Truth.compareTo:unimplemented"))};r.type=function(){return fb};function Db(b){return b?Cb:C}r.Ca=p("t");r.sa=function(b){return this===b};r.qa=p(k);r.ga=function(){g(t(new u,"error: can't rebind t!"))};
r.value=function(){return this};var Cb=Ya(new Ab,"t","t");function M(){}M.prototype=new y;r=M.prototype;r.Ob=m;r.gc=m;r.oa=m;r.Ea=m;r.className="Instruction";function O(b){b.xa=l}r.type=function(){return K("instruction")};r.fb=function(){return this.toString()};r.toString=function(){return"("+this.className+")"};r.c=i;r.l=ca("xa");r.k=function(b){b.Yb(this)};function Ja(){}Ja.prototype=new M;r=Ja.prototype;r.gc=k;r.className="ArcObject.ConvertError";
r.o=function(b,c,d){O(this);this.md=b;this.Jb=c;this.l(d);return this};r.xc=function(b){return b instanceof Error};r.c=function(b){var c=b.error();if(c!==l)b.Va=l,b.N=this.Jb,g(t(new u,"error invoking "+this.xa+" with args "+this.md+": "+c,c))};var Ea=K("call*"),C=xb,Ua=zb,$a=Cb;function Eb(){}Eb.prototype=new y;Eb.prototype.className="LiteralObject";Eb.prototype.Ia=p(k);Eb.prototype.g=function(b){b.push(new La(this))};Eb.prototype.Ta=function(){return"ref:"+this.type().toString()};
function Gb(){}Gb.prototype=new Eb;r=Gb.prototype;r.className="ArcCharacter";function Hb(b,c){b.j=c;return Ib[c]=b}function Pa(b){return Ib[b]===i?Hb(new Gb,b):Ib[b]}r.Ia=p(k);r.toString=function(){return"#\\"+String.fromCharCode(this.j)};r.ra=function(b){b instanceof Gb||g(new TypeError);return this.j-other.j};r.type=function(){return Jb};r.qa=function(){return this.value()};r.value=o("j");r.cb=function(){return String.fromCharCode(this.j)};r.Ca=function(){return this.cb()};
r.sa=function(b){return this===b||b instanceof Gb&&b.j===this.j};function Kb(b,c){try{return b instanceof Gb||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a character, got "+b))}}var Jb=K("char"),Ib=Array(65536);function Lb(){}Lb.prototype=new Gb;Lb.prototype.className="ArcCharacter.Anon_NULL_";Lb.prototype.o=function(){return Hb(this,0)};Lb.prototype.toString=p("#\\null");var Mb=(new Lb).o();function Nb(){}Nb.prototype=new Gb;
Nb.prototype.className="ArcCharacter.Anon_named_1_";Nb.prototype.o=function(){Hb(this,10)};Nb.prototype.toString=p("#\\newline");function Ob(){}Ob.prototype=new Gb;Ob.prototype.className="ArcCharacter.Anon_named_2_";Ob.prototype.o=function(){Hb(this,9)};Ob.prototype.toString=p("#\\tab");function Pb(){}Pb.prototype=new Gb;Pb.prototype.className="ArcCharacter.Anon_named_3_";Pb.prototype.o=function(){Hb(this,13)};Pb.prototype.toString=p("#\\return");function Qb(){}Qb.prototype=new Gb;
Qb.prototype.className="ArcCharacter.Anon_named_4_";Qb.prototype.o=function(){Hb(this,32)};Qb.prototype.toString=p("#\\space");(new Nb).o();(new Ob).o();(new Pb).o();(new Qb).o();function Oa(b){this.j=b}Oa.prototype=new Eb;r=Oa.prototype;r.className="ArcString";
r.d=function(b,c){Rb(c,this.className,1);var d=lb(c.a(),this);d.ma()||g(t(new u,"string-ref: expects exact integer: got "+d));d=~~d.I();0<=d||d<this.value.length()||g(t(new u,"string-ref: index "+d+" out of range [0, "+(this.j.length-1)+"] for string "+this.toString()));D(b,Pa(this.j.charCodeAt(d)))};r.value=o("j");r.cb=o("j");
r.toString=function(){var b=this.j,c=[];c.push('"');for(var d=0;d<b.length;d++)switch(b.charAt(d)){case '"':c.push('\\"');break;case "\\":c.push("\\\\");break;case "\n":c.push("\\n");break;case "\r":c.push("\\r");break;default:c.push(b.charAt(d))}c.push('"');return c.join("")};r.ra=function(b){b instanceof Oa||g(new TypeError);return this.j.localeCompare(b.j)};r.ka=function(){return this.j.length};r.Wb=function(b){var c=[Kb(b,this).cb()];c.push(this.value().substring(1));this.ga(c.join(""));return b};
r.qc=function(b,c){var d=Kb(b,Gb),f=lb(c,this),f=f.I();0<=f&&f<this.j.length||g(new RangeError);this.j=this.j.substring(0,f)+String.fromCharCode(d.value())+this.j.substring(f+1);return b};r.type=function(){return Sb};r.qa=function(){return this.value()};function G(b){return new Oa(b)}r.ga=ca("j");r.Ca=o("j");r.sa=function(b){return this===b||b instanceof Oa&&b.j===this.j};r.Ha=function(b){return this.sa(b)};
r.add=function(b){var c=[this.j];if(!(b instanceof Oa)){var d=b.type();d instanceof L||g(new TypeError);d=Tb.Bb[d]||l;d instanceof Ub||g(new TypeError);b=d.Kb(b);b instanceof Oa||g(new TypeError)}c.push(b.value());return G(c.join(""))};function Vb(b,c){try{return b instanceof Oa||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a string, got "+b))}}var Sb=K("string");function Ba(b,c,d){this.vb=c;this.wa=b;this.rd=d}Ba.prototype=new Eb;
Ba.prototype.className="ArcException";Ba.prototype.type=function(){return Wb};Ba.prototype.message=function(){return this.wa!==l?G(this.wa.message):Xb};Ba.prototype.toString=function(){return this.message().toString()};var Wb=K("exn"),Xb=G("no message");function P(){}P.prototype=new Eb;r=P.prototype;r.className="ArcNumber";r.ma=i;r.F=i;r.I=i;r.tb=i;r.round=i;r.oc=function(){g(t(new u,"round[closest] not implemented for "+this.className+"("+this+")"))};r.Ia=p(k);
r.ra=function(b){b instanceof P||g(new TypeError);b=b.F()-this.F();return 0>b?1:0===b?0:-1};r.type=function(){return this.ma()?Yb:Zb};r.Ha=function(b){return this.sa(b)};function kb(b,c){try{return b instanceof P||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a number, got "+b))}}r.Vc=function(){g(t(new u,"mod: not implemented for "+this.className+"("+this+")"))};var Yb=K("int"),Zb=K("num");function $b(){this.j=l}$b.prototype=new Eb;
$b.prototype.className="ArcThreadLocal";$b.prototype.set=ca("j");$b.prototype.get=o("j");$b.prototype.type=function(){return ac};function bc(b,c){try{return b instanceof $b||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a thread-local, got "+b))}}var ac=K("thread-local");function J(b,c){this.X=b;this.P=c}J.prototype=new P;r=J.prototype;r.className="Complex";
function cc(){var b;if("+i"===soFar)return new J(0,1);if("-i"===soFar)return new J(0,-1);if(b=/^([-+]?[01-9]*\.?[01-9]+(?:e-?[01-9]+)?)([-+])([01-9]*\.?[01-9]+(?:e-?[01-9]+)?)?i$/.exec(soFar))return new J(Ta(parseFloat(b[1])).value(),Ta(parseFloat(b[2]+(b[3]||"1"))).value());g((new Da).o())}r.ma=function(){return 0===this.P&&Math.floor(this.X)===real};r.F=function(){g(t(new u,"Cannot convert complex to double"))};r.I=function(){g(t(new u,"Cannot convert complex to int"))};
r.tb=function(){return new J(-this.X,-this.P)};r.toString=function(){return(new I(this.X)).toString()+(0>this.P?"":"+")+(new I(this.P)).toString()+"i"};function dc(b,c){try{return b instanceof J||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a complex number, got "+b))}}r.round=function(){return t(new u,"Can't convert "+this+" to integer")};function ec(b){var c=argument.F();return new J(b.X*c,b.P*c)}
r.multiply=function(b){if(b instanceof J)return fc(this,b);b instanceof P||g(new TypeError);b=b.F();return new J(this.X*b,this.P*b)};function fc(b,c){var d=b.X,f=c.X,h=b.P,j=c.P;return new J(d*f-h*j,d*j+f*h)}r.add=function(b){if(b instanceof J)return new J(this.X+b.X,this.P+b.P);if(b instanceof Q||b instanceof I)return new J(this.X+b.F(),this.P);g(t(new u,"+: expects a number, got "+b.type()+" "+b))};
r.log=function(){return new J(Math.log(Math.sqrt(this.X*this.X+this.P*this.P)),Math.atan2(this.P,this.X))};function gc(b,c){var d;if(c instanceof J)d=fc(b.log(),c).exp();else{d=b.log();var f=c.F();d=(new J(d.X*f,d.P*f)).exp()}return d}r.sqrt=function(){return gc(this,Ta(0.5))};r.exp=function(){var b=Math.exp(this.X);return new J(b*Math.cos(this.P),b*Math.sin(this.P))};r.ra=function(){g(t(new u,"Compare: complex numbers are unordered and cannot be compared"))};
r.Ha=function(b){return b instanceof J?b.X===this.X&&b.P===this.P:b instanceof P&&0===this.P&&b.F()===this.X};function Q(b,c){0===c&&0!==b&&g(t(new u,"/: division by zero"));var d=hc(this,b,c);this.ea=b/d;this.R=c/d}Q.prototype=new P;r=Q.prototype;r.className="Rational";function Sa(b){b=b.split("/");return new Q(parseInt(b[0],10),parseInt(b[1],10))}function H(b){return new Q(b,1)}r.toString=function(){return this.ea+(1===this.R?"":"/"+this.R)};r.ma=function(){return 1===this.R};
r.F=function(){return this.ea/this.R};r.I=function(){if(0===this.ea)return 0;var b=this.ea/this.R;return 0>b?Math.ceil(b):Math.floor(b)};function hc(b,c,d){return 0===d?c:hc(b,d,c%d)}r.Vc=function(b){(!this.ma()||!b.ma())&&g(t(new u,"modulo: expects integer, got ("+this+" "+b+")"));var b=b.I(),c=this.ea%b;0>c&&(c+=b);return H(c)};function ic(b,c){return new Q(b.ea*c.ea,b.R*c.R)}r.Tb=function(b){return new Q(this.ea*b.R+b.ea*this.R,this.R*b.R)};r.tb=function(){return new Q(-this.ea,this.R)};
r.qa=function(){return this.ma()?this.I():this.F()};r.Ca=function(){return this.ma()?this.I():this.F()};r.Ca=function(){return 37*this.ea+this.R+""};r.sa=function(b){return b instanceof Q&&this.ea===b.ea&&this.R===b.R};function lb(b,c){try{return b instanceof Q||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected a Rational, got "+b))}}
r.round=function(){if(1===this.R)return this;if(2===this.R){var b=this.ea/this.R,b=0>b?Math.ceil(b):Math.floor(b);return H(b+(1===b%2?1:0))}return H(Math.round(this.ea/this.R))};r.oc=function(){return 1===this.R?this:H(Math.round(this.ea/this.R))};r.stringify=function(b){var c=this.ea.toString(b.I());if(this.ma())return G(c);b=this.R.toString(b.I());return G(c+"/"+b)};r.sqrt=function(){var b=Math.sqrt(this.ea/this.R);return Math.floor(b)===b?H(b):Ta(b)};
r.multiply=function(b){if(b instanceof J)return ec(b);if(b instanceof I)return Ta(b.j*this.F());if(b instanceof Q)return ic(this,b);g(t(new u,"*: expects a number, got "+b.type()+" "+b))};r.add=function(b){if(b instanceof J)return new J(b.X+this.F(),b.P);if(b instanceof I)return b.Tb(this);if(b instanceof Q)return this.Tb(b);g(t(new u,"+: expects a number, got "+b.type()+" "+b))};var kc=H(0),lc=H(1),mc=H(10);function I(b){this.j=b}I.prototype=new P;r=I.prototype;r.className="Real";
function Ta(b){return new I(b)}r.toString=function(){return this.j===-1/0?"-inf.0":this.j===1/0?"+inf.0":this.j!==this.j?"+nan.0":""+this.j};r.qa=function(){this.ma();return this.value()};r.type=function(){return Zb};r.value=o("j");r.ma=function(){return Math.floor(this.j)===this.j};r.F=o("j");r.I=function(){return 0>this.j?Math.ceil(this.j):Math.floor(this.j)};r.tb=function(){return Ta(-this.j)};r.Ca=function(){return""+this.j};
r.sa=function(b){return b instanceof J?b.Ha(this):this===b||b instanceof I&&this.j===b.j};r.round=function(){var b=Math.round(this.j);return 0.5===Math.abs(this.j-b)&&1==b%2?b<this.j?H(b+1):H(b-1):H(b)};r.oc=function(){return H(Math.round(this.j))};r.Tb=function(b){return Ta(this.j+b.F())};r.sqrt=function(){return Ta(Math.sqrt(this.j))};r.multiply=function(b){if(b instanceof J)return ec(b);if(b instanceof P)return Ta(this.j*b.F());g(t(new u,"*: expects a number, got "+b.type()+" "+b))};
r.add=function(b){if(b instanceof J)return new J(b.X+this.F(),b.P);if(b instanceof Q||b instanceof I)return this.Tb(b);g(t(new u,"+: expects a number, got "+b.type()+" "+b))};function nc(b,c){this.Hb=b;this.xb=c}nc.prototype=new Eb;r=nc.prototype;r.className="Tagged";r.d=function(b,c){var d=Ea.value();d instanceof Fa||g(new TypeError);return d.value(this.Hb).d(b,A(new B,this.xb,c))};r.ra=p(0);r.type=o("Hb");function oc(b){return b instanceof nc&&"mac"===b.Hb.toString()?b.xb:l}r.toString=function(){return pc(this)};
function pc(b){if(!qc.bound())return"#<tagged "+b.Hb+" "+b.xb+">";var c=qc.value();c instanceof Fa||g(new TypeError);c=c.value(b.Hb);if(c instanceof z)return"#<tagged "+b.Hb+" "+b.xb+">";b=new rc;c.d(b,x([rep]));var d;sc(b,function(b,c){b&&g(b);d=c},k)||g(t(new u,"An asynchronous operation was attempted during a toString()."));return""+tc(d)}var qc=K("tagged-writers");function uc(b){this.Gc=b}uc.prototype=new Eb;r=uc.prototype;r.className="JsObject";r.type=function(){return vc};r.qa=o("Gc");
r.toString=function(){return""+this.Gc};function wc(b){var c=[];xc(c,b);return c}function xc(b,c){b.push(tc(c.a()));if(!(c.b()instanceof z)){var d=c.b();d instanceof B||g(new TypeError);xc(b,d)}}function tc(b){return b.qa()}
function yc(b){if(b===l)return C;if(b instanceof y)return b;var c=Object.prototype.toString.call(b);if("[object Number]"===c)return b*=1,b===Math.floor(b)?H(b):Ta(b);if("[object String]"===c)b=G(""+b);else if("[object Array]"===c||"[object Arguments]"===c){for(var c=Array(~~b.length),d=0;d<b.length;d++)c[d]=yc(b[d]);b=x(c)}else b="[object Boolean]"===c?b?$a:C:new uc(b);return b}r.close=function(){g(t(new u,"close: unexpected object: "+this))};var vc=K("java-object");
function Fa(){this.da=C;this.jc=(new Ca).o();this.rb=this.fc=l;this.kc=new zc;this.Uc=0}Fa.prototype=new Eb;r=Fa.prototype;r.className="Hash";r.tc=function(b){if(this.da===b)this.da=C,this.kc=new zc};r.$b=function(b){this.da=b;this.kc=new Ac(this)};r.ac=o("da");r.d=function(b,c){D(b,this.value(c.a()).Yc(c.b().a()))};r.toString=function(){return"#hash"+Bc(this)};function Bc(b){for(var c=[],d=b.fc;d!==l;d=d.next){var f=d.key,f=A(new B,f,A(new B,b.value(f),C));c.push(f)}return pb(c,Ua)}r.ka=function(){return this.size()};
r.qc=function(b,c){if(b instanceof z){var d=this.value(c),f=this.jc.get(c.Ca());if(f)for(var h=0,j=f.length;h<j;h++){var q=f[h];if(c.sa(q.key)){f.splice(h,1);if(q.Vb)q.Vb.next=q.next;if(q.next)q.next.Vb=q.Vb;if(this.fc===q)this.fc=q.next;if(this.rb===q)this.rb=q.Vb;this.ka--;break}}this.kc.Mc(d,c)}else{d=c.Ca();d=this.jc.get(d)||this.jc.put(d,[]);f=l;h=0;for(j=d.length;h<j;h++)if(q=d[h],c.sa(q.key)){f=q;break}f===l?(f=this.rb,this.rb={key:c,value:b,Vb:f,next:l},f===l?this.fc=this.rb:f.next=this.rb,
d.push(this.rb),this.Uc++):f.value=b;this.kc.name(b,c)}return b};r.value=function(b){var c=this.jc.get(b.Ca());if(!c)return C;for(var d=0,f=c.length;d<f;d++){var h=c[d];if(b.sa(h.key))return h.value}return C};r.ra=p(0);r.type=function(){return Cc};r.size=o("Uc");function Dc(){}Dc.prototype.name=i;Dc.prototype.Mc=i;function Ac(b){this.ad=b}Ac.prototype=new Dc;Ac.prototype.name=function(b,c){b.$b(A(new B,c,this.ad))};Ac.prototype.Mc=function(b,c){b.tc(A(new B,c,this.ad))};function zc(){}
zc.prototype=new Dc;zc.prototype.name=n();zc.prototype.Mc=n();var Cc=K("table");function rc(){this.Lc=Ec++;this.ba=Array(100);this.N=-1;this.pa=[];this.ja=Array(100);this.G=Array(100);this.h=-1;this.Va=this.Nb=this.s=l;this.qb=Fc;this.dc=m;this.Ga=0;this.Za=l;this.Pc=0;this.vb=l}rc.prototype=new y;r=rc.prototype;r.className="VM";
function sc(b,c,d){var f=b.Ga;b.Ga=b.h;var h=Gc(b,function(){b.Ga=f;if(b.Va===l)b.qb.end(b),c(l,R(b));else{var d=b.Va;b.Va=l;var h=d.rd,s="\nAt instruction "+d.vb;if(h!==l)for(var F=0,N=h.length;F<N;F++)s+="\n"+h[F].Ta();c(t(new u,"Unhandled exception on thread#"+b.Lc+": "+d.wa.message+s,d.wa))}},d);if(d&&!h)b.Ga=f;return h}
function Gc(b,c,d){function f(){for(;h.Ga<=h.h;)try{if(h.G[h.h]instanceof z)h.h--;else{h.s=h.ja[h.h];h.Nb=h.pa[h.h];var b=h.G[h.h].a();b instanceof M||g(new TypeError);h.vb=b;var s=h.G[h.h].b();s instanceof B||g(new TypeError);h.G[h.h]=s;if(h.vb.Ea){var F=k,F=h.vb.Ma(h,function(b){b?Hc(h,b):h.qb.jb(h);F||f()},d);if(!F){j=m;return}}else h.vb.c(h),h.qb.jb(h)}}catch(N){Hc(h,N)}c()}b.qb.jb(b);var h=b,j=k;f();return j}
function Hc(b,c){for(var d=[],f=[],h=[];b.Ga<=b.h;){var j=Ic(b).a();if(j.gc&&j.xc(c))break;j=Ic(b).a();j.Ob&&(f.push(Ic(b)),h.push(b.ja[b.h]));if(j instanceof M)j=Ic(b).a().xa,j!==l&&d.push(j);b.h--}b.Va=new Ba(c,b.vb,d);for(d=f.length-1;0<=d;d--)S(b,h[d],f[d])}r.error=o("Va");
r.show=function(){za("Thread Dump for thread#"+threadId);za(""+(this.N+1)+" args");for(var b=5<this.N?this.N-5:0;b<this.N+1;b++)za(""+b+". "+this.ba[b]);za();b=this.h+1;if(this.G[this.h]instanceof z)b=this.h;za(""+b+" instruction frames");for(var b=20<this.h?this.h-20:0,c=this.h;b<=c;c--)if(!(this.G[c]instanceof z)){var d=this.G[c],f=this.ja[c],h=this.pa[c];for(ya("\nInstruction Frame "+c+":");!(d instanceof z);){var j=d.a();j instanceof M||g(new TypeError);d=d.b();newInstructions instanceof B||g(new TypeError);
ya(j.fb(f));ya(" ")}ya("[");j=0;for(d=h.length;j<d;j++)ya(""+h[j]+" ");ya("]");ka.ab("\n")}};function E(b,c){b.Ga<=b.h&&Ic(b)instanceof z||(b.h++,0<=b.h&&b.h<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ja.length),Lc(b,2*b.pa.length)));b.G[b.h]=A(new B,c,C)}function S(b,c,d){b.Ga<=b.h&&Ic(b)instanceof z||(b.h++,0<=b.h&&b.h<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ja.length),Lc(b,2*b.pa.length)));b.G[b.h]=d;b.ja[b.h]=c}
function T(b,c,d,f){b.Ga<=b.h&&Ic(b)instanceof z||(b.h++,0<=b.h&&b.h<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ja.length),Lc(b,2*b.pa.length)));b.G[b.h]=d;b.ja[b.h]=c;b.pa[b.h]=f}function Mc(b,c){b.Ga<=b.h&&Ic(b)instanceof z?b.G[b.h]=c:(b.h++,0<=b.h&&b.h<b.G.length||(Jc(b,2*b.G.length),Kc(b,2*b.ja.length),Lc(b,2*b.pa.length)),b.G[b.h]=c,b.ja[b.h]=b.s,b.pa[b.h]=b.Nb)}function Ic(b){return b.G[b.h]}
function D(b,c){b.N++;if(!(0<=b.N&&b.N<b.ba.length)){var d=Array(~~(2*b.ba.length));Nc(b.ba,d);b.ba=d}b.ba[b.N]=c}function Oc(b){return b.ba[b.N]}function R(b){return b.ba[b.N--]}function Pc(b,c){for(var d=Ua,f=0;f<c;f++)d=A(new B,b.ba[b.N-f],d);b.N-=c;return d}function Qc(b,c){b.qb=c;c.Db(b)}r.type=function(){return Rc};r.copy=function(){var b=new rc;this.copyTo(b);return b};
r.copyTo=function(b){b.N=this.N;b.h=this.h;b.G.length<this.G.length?(b.G=this.G.slice(),b.ja=this.ja.slice(),b.pa=this.pa.slice()):(Nc(this.G,b.G),Nc(this.ja,b.ja),Nc(this.pa,b.pa));b.ba.length!==this.ba.length?b.ba=this.ba.slice():Nc(this.ba,b.ba);b.s=this.s;b.Va=this.Va;b.qb=this.qb;b.dc=this.dc;b.Ga=this.Ga};r.toString=function(){return"[thread#"+this.Lc+": instruction stack "+this.h+"; arg stack "+this.N+"]"};function Kc(b,c){var d=Array(~~c);Nc(b.ja,d);b.ja=d}
function Jc(b,c){var d=Array(~~c);Nc(b.G,d);b.G=d}function Lc(b,c){var d=Array(~~c);Nc(b.pa,d);b.pa=d}function Nc(b,c){for(var d=0,f=b.length;d<f;d++)c[d]=b[d]}function Sc(b){if(!(b.Ga<=b.h))return l;return b.G[b.h]instanceof z?(b.h--,Sc(b)):b.G[b.h].a()}var Rc=K("thread"),Ec=0;function Tc(){this.Oa=[];this.Tc=C}Tc.prototype=new y;r=Tc.prototype;r.className="ListBuilder";r.append=function(b){this.Oa.push(b)};r.Sc=ca("Tc");r.list=function(){return pb(this.Oa,this.Tc)};r.type=function(){return K("list-builder")};
r.toString=function(){return"ListBuilder:"+this.list().toString()};function Uc(){O(this)}Uc.prototype=new M;Uc.prototype.className="Append";Uc.prototype.c=function(b){var c=R(b),b=Oc(b);b instanceof Tc||g(new TypeError);b.append(c)};Uc.prototype.toString=p("(append)");function Vc(){O(this)}Vc.prototype=new M;Vc.prototype.className="AppendAll";Vc.prototype.c=function(b){var c=R(b),b=Oc(b);b instanceof Tc||g(new TypeError);c instanceof B||g(new TypeError);c.copyTo(b.Oa)};Vc.prototype.toString=p("(append-all)");
function Wc(){O(this)}Wc.prototype=new M;Wc.prototype.className="AppendDot";Wc.prototype.c=function(b){var c=R(b),b=Oc(b);b instanceof Tc||g(new TypeError);b.Sc(c)};Wc.prototype.toString=p("(append-dot)");function Xc(b,c){O(this);this.Xc=b;this.Jb=c}Xc.prototype=new M;r=Xc.prototype;r.gc=k;r.className="Catch";r.xc=p(k);r.c=function(b){var c=b.error();if(c!==l)b.Va=l,b.N=this.Jb,this.Xc.d(b,x([c]))};r.toString=function(){return"(catch "+this.Xc+")"};function Yc(b){O(this);this.Rc=b}Yc.prototype=new M;
Yc.prototype.className="Close_Instruction";Yc.prototype.c=function(b){D(b,new Zc(this.Rc,b.s))};Yc.prototype.toString=function(){return"(close "+this.Rc+")"};function $c(b){O(this);this.Nc=b}$c.prototype=new M;$c.prototype.Ob=k;$c.prototype.className="FinallyInvoke";$c.prototype.c=function(b){this.Nc.d(b,C)};$c.prototype.toString=function(){return"(finally:"+this.Nc+")"};function ad(){O(this)}ad.prototype=new M;ad.prototype.className="FinishList";
ad.prototype.c=function(b){var c=R(b);c instanceof Tc||g(new TypeError);D(b,c.list())};ad.prototype.toString=p("(finish-list)");function Za(b){O(this);this.$a=b}Za.prototype=new M;Za.prototype.className="FreeSym";Za.prototype.c=function(b){D(b,this.$a.value())};Za.prototype.toString=function(){return"(free-sym "+this.$a+")"};Za.prototype.fb=function(){return"(free-sym "+this.$a+" -> "+(sym.bound()?""+sym.value():"#unbound#")+")"};function bd(b){O(this);this.$a=b}bd.prototype=new M;
bd.prototype.className="LexSym";bd.prototype.c=function(b){D(b,this.$a.v(b.s))};bd.prototype.toString=function(){return"(lex-sym "+this.$a+")"};bd.prototype.fb=function(b){return"(lex-sym "+this.$a+" -> "+this.$a.v(b)+")"};function cd(b){O(this);this.$c=b}cd.prototype=new M;cd.prototype.className="Listify";cd.prototype.c=function(b){D(b,Pc(b,this.$c))};cd.prototype.toString=function(){return"(listify "+this.$c+")"};function La(b){O(this);this.Oc=b}La.prototype=new M;La.prototype.className="Literal";
La.prototype.c=function(b){D(b,this.Oc)};La.prototype.toString=function(){return"(literal "+this.Oc+")"};function dd(){O(this)}dd.prototype=new M;dd.prototype.className="NewList";dd.prototype.c=function(b){D(b,new Tc)};dd.prototype.toString=p("(new-list)");function ed(b){O(this);this.da=b}ed.prototype=new M;ed.prototype.className="PopArg";ed.prototype.c=function(b){R(b)};ed.prototype.toString=function(){return"(pop-arg:"+this.da+")"};function fd(b,c){O(this);this.td=b;this.j=c}fd.prototype=new M;
fd.prototype.Ob=k;fd.prototype.className="SetThreadLocal";fd.prototype.c=function(){this.td.value=this.j};function gd(b,c){O(this);this.$a=b;this.kb=c}gd.prototype=new M;gd.prototype.className="StackSym";gd.prototype.c=function(b){var c=this.kb;b.N++;if(!(0<=b.N&&b.N<b.ba.length)){var d=Array(~~(2*b.ba.length));Nc(b.ba,d);b.ba=d}b.ba[b.N]=b.Nb[c]};gd.prototype.toString=function(){return"(stack-bound symbol:"+this.$a+")"};function hd(b){O(this);this.Qc=b}hd.prototype=new M;hd.prototype.className="TableMapper";
hd.prototype.c=function(b){var c=R(b);c instanceof B||g(new TypeError);if(!(c instanceof z)){D(b,c.b());E(b,this);c=c.a();c instanceof B||g(new TypeError);var d=new ed("map-table-iterator");d.l(this);E(b,d);this.Qc.d(b,c)}};hd.prototype.toString=function(){return"(table-mapper "+this.Qc+")"};function id(b){O(this);this.name=b}id.prototype=new M;id.prototype.className="Assign_Lex";function jd(b,c){id.call(this,b);this.value=c}jd.prototype=new id;jd.prototype.className="Assign_Lex_Free";
jd.prototype.c=function(b){var c=this.value.value();kd(this.name,b.s,c);D(b,c)};jd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};function ld(b,c){jd.call(this,b,c)}ld.prototype=new jd;ld.prototype.className="Assign_Lex_Free.Intermediate";ld.prototype.c=function(b){kd(this.name,b.s,this.value.value())};function md(b,c){id.call(this,b);this.value=c}md.prototype=new id;md.prototype.className="Assign_Lex_Lex";
md.prototype.c=function(b){var c=this.value.v(b.s);kd(this.name,b.s,c);D(b,c)};md.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};md.prototype.fb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.v(b)+this.value+"--\>"+this.value.v(b)+")"};function nd(b,c){md.call(this,b,c)}nd.prototype=new md;nd.prototype.className="Assign_Lex_Lex.Intermediate";nd.prototype.c=function(b){kd(this.name,b.s,this.value.v(b.s))};function od(b,c){id.call(this,b);this.eb=c}
od.prototype=new id;od.prototype.className="Assign_Lex_Literal";od.prototype.c=function(b){kd(this.name,b.s,this.eb);D(b,this.eb)};od.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.eb+")"};function pd(b,c){od.call(this,b,c)}pd.prototype=new od;pd.prototype.className="Assign_Lex_Literal.Intermediate";pd.prototype.c=function(b){kd(this.name,b.s,this.eb)};function qd(b){id.call(this,b)}qd.prototype=new id;qd.prototype.className="Assign_Lex_Other";
qd.prototype.c=function(b){kd(this.name,b.s,Oc(b))};qd.prototype.toString=function(){return"(assign-lex "+this.name+")"};qd.prototype.fb=function(b){return"(assign-lex "+this.name+" -> "+this.name.v(b)+")"};function rd(b){id.call(this,b)}rd.prototype=new qd;rd.prototype.className="Assign_Lex_Other.Intermediate";rd.prototype.c=function(b){kd(this.name,b.s,R(b))};function sd(b,c){id.call(this,b);this.value=c}sd.prototype=new id;sd.prototype.className="Assign_Lex_Stack";
sd.prototype.c=function(b){var c=this.value.get(b);kd(this.name,b.s,c);D(b,c)};sd.prototype.toString=function(){return"(assign-lex "+this.name+" "+this.value+")"};sd.prototype.fb=function(b){return"(assign-lex "+this.name+"--\>"+this.name.v(b)+" <-- "+this.value+")"};function td(b,c){sd.call(this,b,c)}td.prototype=new sd;td.prototype.className="Assign_Lex_Stack.Intermediate";td.prototype.c=function(b){kd(this.name,b.s,this.value.get(b))};function ud(b){O(this);this.name=b}ud.prototype=new M;
ud.prototype.className="Assign_Free";function vd(b,c){ud.call(this,b);this.value=c}vd.prototype=new ud;vd.prototype.className="Assign_Free_Free";vd.prototype.c=function(b){var c=this.value.value();this.name.ga(c);D(b,c)};vd.prototype.toString=function(){return"(assign-free-free "+this.name+" "+this.value+")"};function wd(b,c){vd.call(this,b,c)}wd.prototype=new vd;wd.prototype.className="Assign_Free_Free.Intermediate";wd.prototype.c=function(){this.name.ga(this.value.value())};
function xd(b,c){ud.call(this,b);this.value=c}xd.prototype=new ud;xd.prototype.className="Assign_Free_Lex";xd.prototype.c=function(b){var c=this.value.v(b.s);this.name.ga(c);D(b,c)};xd.prototype.toString=function(){return"(assign-free-lex "+this.name+" "+this.value+")"};function yd(b,c){xd.call(this,b,c)}yd.prototype=new xd;yd.prototype.className="Assign_Free_Lex.Intermediate";yd.prototype.c=function(b){this.name.ga(this.value.v(b.s))};function zd(b,c){ud.call(this,b);this.eb=c}zd.prototype=new ud;
zd.prototype.className="Assign_Free_Literal";zd.prototype.c=function(b){this.name.ga(this.eb);D(b,this.eb)};zd.prototype.toString=function(){return"(assign-free-literal "+this.name+" "+this.eb+")"};function Ad(b,c){zd.call(this,b,c)}Ad.prototype=new zd;Ad.prototype.className="Assign_Free_Literal.Intermediate";Ad.prototype.c=function(){this.name.ga(this.eb)};function Bd(b){ud.call(this,b)}Bd.prototype=new ud;Bd.prototype.className="Assign_Free_Other";Bd.prototype.c=function(b){this.name.ga(Oc(b))};
Bd.prototype.toString=function(){return"(assign-free-other "+this.name+")"};Bd.prototype.fb=function(){return"(assign-free-other "+this.name+" -> "+(name.bound()?""+name.value():"#unbound#")+")"};function Cd(b){ud.call(this,b)}Cd.prototype=new Bd;Cd.prototype.className="Assign_Free_Other.Intermediate";Cd.prototype.c=function(b){this.name.ga(R(b))};function Dd(b,c){ud.call(this,b);this.value=c}Dd.prototype=new ud;Dd.prototype.className="Assign_Free_Stack";
Dd.prototype.c=function(b){var c=this.value.get(b);this.name.ga(c);D(b,c)};Dd.prototype.toString=function(){return"(assign-free-stack "+this.name+" "+this.value+")"};function Ed(b,c){Dd.call(this,b,c)}Ed.prototype=new Dd;Ed.prototype.className="Assign_Free_Stack.Intermediate";Ed.prototype.c=function(b){this.name.ga(this.value.get(b))};function Fd(b){O(this);this.name=b}Fd.prototype=new M;Fd.prototype.className="Assign_Stack";function Gd(b,c){Fd.call(this,b);this.value=c}Gd.prototype=new Fd;
Gd.prototype.className="Assign_Stack_Free";Gd.prototype.c=function(b){var c=this.value.value();this.name.set(b,c);D(b,c)};Gd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Hd(b,c){Gd.call(this,b,c)}Hd.prototype=new Gd;Hd.prototype.className="Assign_Stack_Free.Intermediate";Hd.prototype.c=function(b){this.name.set(b,this.value.value())};function Id(b,c){Fd.call(this,b);this.value=c}Id.prototype=new Fd;Id.prototype.className="Assign_Stack_Lex";
Id.prototype.c=function(b){var c=this.value.v(b.s);this.name.set(b,c);D(b,c)};Id.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Jd(b,c){Id.call(this,b,c)}Jd.prototype=new Id;Jd.prototype.className="Assign_Stack_Lex.Intermediate";Jd.prototype.c=function(b){this.name.set(b,this.value.v(b.s))};function Kd(b,c){Fd.call(this,b);this.value=c}Kd.prototype=new Fd;Kd.prototype.className="Assign_Stack_Literal";
Kd.prototype.c=function(b){this.name.set(b,this.value);D(b,this.value)};Kd.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};function Ld(b,c){Kd.call(this,b,c)}Ld.prototype=new Kd;Ld.prototype.className="Assign_Stack_Literal.Intermediate";Ld.prototype.c=function(b){this.name.set(b,this.value)};function Md(b){Fd.call(this,b)}Md.prototype=new Fd;Md.prototype.className="Assign_Stack_Other";Md.prototype.c=function(b){this.name.set(b,Oc(b))};
Md.prototype.toString=function(){return"(assign-stack "+this.name+")"};function Nd(b){Fd.call(this,b)}Nd.prototype=new Md;Nd.prototype.className="Assign_Stack_Other.Intermediate";Nd.prototype.c=function(b){this.name.set(b,R(b))};function Od(b,c){Fd.call(this,b);this.value=c}Od.prototype=new Fd;Od.prototype.className="Assign_Stack_Stack";Od.prototype.c=function(b){var c=this.value.get(b);this.name.set(b,c);D(b,c)};Od.prototype.toString=function(){return"(assign-free "+this.name+" "+this.value+")"};
function Pd(b,c){Od.call(this,b,c)}Pd.prototype=new Od;Pd.prototype.className="Assign_Stack_Stack.Intermediate";Pd.prototype.c=function(b){this.name.set(b,this.value.get(b))};function Qd(b,c){O(this);this.H=b;this.Ua=Rd(b);this.B=c;this.na=Rd(c)}Qd.prototype=new M;Qd.prototype.className="Cond";function Rd(b){var c=[];b.g(c);return x(c)}Qd.prototype.c=function(b){Mc(b,R(b)instanceof z?this.na:this.Ua)};Qd.prototype.k=function(b){M.prototype.k.call(this,b);this.Ua.k(b);this.na.k(b)};
Qd.prototype.toString=function(){return"(cond then:"+this.H+", else:"+this.B+")"};function Sd(b,c,d){O(this);this.ca=b;this.H=c;this.B=d}var Td={};v["rainbow.vm.instructions.cond.optimise.If_bound_bound_literal"]=Td;Sd.prototype=new M;Sd.prototype.className="If_bound_bound_literal";Sd.prototype.c=function(b){this.ca.v(b.s)instanceof z?D(b,this.B):D(b,this.H.v(b.s))};
Td.g=function(b,c,d,f){c instanceof U||g(new TypeError);d instanceof U||g(new TypeError);f instanceof Ud||g(new TypeError);Vd(c,d)?f.m instanceof z?c.g(b):b.push(new Wd(c,f.m)):b.push(new Sd(c,d,f.m))};Sd.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};function Wd(b,c){O(this);this.Ib=b;this.B=c}Wd.prototype=new M;Wd.prototype.className="If_bound_bound_literal.Or";Wd.prototype.c=function(b){var c=this.Ib.v(b.s);c instanceof z?D(b,this.B):D(b,c)};
Wd.prototype.toString=function(){return"(if[bbl$or] "+a+" "+a+" "+elseExpr+")"};function Xd(b,c,d){O(this);this.ca=b;this.H=c;this.na=Rd(d);this.B=d}var Yd={};v["rainbow.vm.instructions.cond.optimise.If_bound_bound_other"]=Yd;Xd.prototype=new M;Xd.prototype.className="If_bound_bound_other";Xd.prototype.c=function(b){this.ca.v(b.s)instanceof z?Mc(b,this.na):D(b,this.H.v(b.s))};
Yd.g=function(b,c,d,f){c instanceof U||g(new TypeError);d instanceof U||g(new TypeError);Vd(c,d)?b.push(new Zd(c,f)):b.push(new Xd(c,d,f))};Xd.prototype.k=function(b){M.prototype.k.call(this,b);this.na.k(b)};Xd.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};function Zd(b,c){O(this);this.Ib=b;this.na=Rd(c);this.B=c}Zd.prototype=new M;Zd.prototype.className="If_bound_bound_other.Or";Zd.prototype.c=function(b){var c=this.Ib.v(b.s);c instanceof z?Mc(b,this.na):D(b,c)};
Zd.prototype.k=function(b){M.prototype.k.call(this,b);this.na.k(b)};Zd.prototype.toString=function(){return"(if "+a+" "+a+" "+elseExpr+")"};function $d(b,c,d){O(this);this.ca=b;this.H=c;this.B=d}var ae={};v["rainbow.vm.instructions.cond.optimise.If_bound_literal_literal"]=ae;$d.prototype=new M;$d.prototype.className="If_bound_literal_literal";$d.prototype.c=function(b){this.ca.v(b.s)instanceof z?D(b,this.B):D(b,this.H)};$d.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};
ae.g=function(b,c,d,f){f instanceof Ud||g(new TypeError);c instanceof U||g(new TypeError);b.push(new $d(c,d,f.m))};function be(b,c,d){O(this);this.ca=b;this.H=c;this.Ua=Rd(c);this.B=d}var ce={};v["rainbow.vm.instructions.cond.optimise.If_bound_other_literal"]=ce;be.prototype=new M;be.prototype.className="If_bound_other_literal";be.prototype.c=function(b){this.ca.v(b.s)instanceof z?D(b,this.B):Mc(b,this.Ua)};be.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};
be.prototype.k=function(b){M.prototype.k.call(this,b);this.Ua.k(b)};ce.g=function(b,c,d,f){c instanceof U||g(new TypeError);f instanceof Ud||g(new TypeError);b.push(new be(c,d,f.m))};function de(b,c,d){O(this);this.ca=b;this.H=c;this.Ua=Rd(c);this.B=d;this.na=Rd(d)}var ee={};v["rainbow.vm.instructions.cond.optimise.If_bound_other_other"]=ee;de.prototype=new M;de.prototype.className="If_bound_other_other";de.prototype.c=function(b){this.ca.v(b.s)instanceof z?Mc(b,this.na):Mc(b,this.Ua)};
de.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};de.prototype.k=function(b){M.prototype.k.call(this,b);this.Ua.k(b)};ee.g=function(b,c,d,f){c instanceof U||g(new TypeError);b.push(new de(c,d,f))};function fe(b,c){O(this);this.na=Rd(c);this.H=b;this.B=c}var ge={};v["rainbow.vm.instructions.cond.optimise.If_other_bound_other"]=ge;fe.prototype=new M;fe.prototype.className="If_other_bound_other";fe.prototype.c=function(b){R(b)instanceof z?Mc(b,this.na):D(b,this.H.v(b.s))};
fe.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};fe.prototype.k=function(b){M.prototype.k.call(this,b);this.na.k(b)};ge.g=function(b,c,d,f){c.g(b);d instanceof U||g(new TypeError);b.push(new fe(d,f))};function he(b,c){O(this);this.Ua=Rd(b);this.H=b;this.B=c}var ie={};v["rainbow.vm.instructions.cond.optimise.If_other_other_literal"]=ie;he.prototype=new M;he.prototype.className="If_other_other_literal";he.prototype.c=function(b){R(b)instanceof z?D(b,this.B):Mc(b,this.Ua)};
he.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};he.prototype.k=function(b){M.prototype.k.call(this,b);this.Ua.k(b)};ie.g=function(b,c,d,f){f instanceof Ud||g(new TypeError);c.g(b);b.push(new he(d,f.m))};function je(b,c){O(this);this.H=b;this.B=c}var ke={};v["rainbow.vm.instructions.cond.optimise.If_other_stack_literal"]=ke;je.prototype=new M;je.prototype.className="If_other_stack_literal";je.prototype.c=function(b){R(b)instanceof z?D(b,this.B):D(b,this.H.get(b))};
je.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};ke.g=function(b,c,d,f){f instanceof Ud||g(new TypeError);c.g(b);d instanceof le||g(new TypeError);b.push(new je(d,f.m))};function me(b,c){O(this);this.H=b;this.na=Rd(c);this.B=c}var ne={};v["rainbow.vm.instructions.cond.optimise.If_other_stack_other"]=ne;me.prototype=new M;me.prototype.className="If_other_stack_other";me.prototype.c=function(b){R(b)instanceof z?Mc(b,this.na):D(b,this.H.get(b))};
me.prototype.toString=function(){return"(if ? "+this.H+" "+this.B+")"};me.prototype.k=function(b){M.prototype.k.call(this,b);this.na.k(b)};ne.g=function(b,c,d,f){c.g(b);d instanceof le||g(new TypeError);b.push(new me(d,f))};function oe(b,c,d){this.ca=b;this.H=c;this.B=d}var pe={};v["rainbow.vm.instructions.cond.optimise.If_stack_literal_free"]=pe;oe.prototype=new M;oe.prototype.className="If_stack_literal_free";oe.prototype.c=function(b){this.ca.get(b)instanceof z?D(b,this.B.value()):D(b,this.H)};
oe.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};pe.g=function(b,c,d,f){c instanceof le||g(new TypeError);f instanceof Ud||g(new TypeError);f=f.m;f instanceof L||g(new TypeError);b.push(new oe(c,d,f))};function qe(b,c,d){O(this);this.ca=b;this.H=c;this.B=d}var re={};v["rainbow.vm.instructions.cond.optimise.If_stack_stack_literal"]=re;qe.prototype=new M;qe.prototype.className="If_stack_stack_literal";
qe.prototype.c=function(b){this.ca.get(b)instanceof z?D(b,this.B):D(b,this.H.get(b))};qe.prototype.toString=function(){return"(if "+this.ca+" "+this.H+" "+this.B+")"};re.g=function(b,c,d,f){c instanceof le||g(new TypeError);d instanceof le||g(new TypeError);f instanceof Ud||g(new TypeError);se(c,d)?f.m instanceof z?c.g(b):b.push(new te(c,f.m)):b.push(new qe(c,d,f.m))};function te(b,c){O(this);this.Ib=b;this.B=c}te.prototype=new M;te.prototype.className="If_stack_stack_literal.Or";
te.prototype.c=function(b){var c=this.Ib.get(b);c instanceof z?D(b,this.B):D(b,c)};te.prototype.toString=function(){return"(if[ssl$or] "+a+" "+a+" "+elseExpr+")"};function ue(b){O(this);this.r=b}ue.prototype=new M;r=ue.prototype;r.oa=k;r.className="Invoke_0.Lex";r.c=function(b){this.r.v(b.s).d(b,C)};r.toString=function(){return"(invoke "+this.r+")"};r.ta=function(b){return this.r.v(b.s)};function ve(b){O(this);this.r=b}ve.prototype=new M;r=ve.prototype;r.oa=k;r.className="Invoke_0.Free";
r.c=function(b){this.r.value().d(b,C)};r.toString=function(){return"(invoke "+this.r+")"};r.ta=function(){return this.r.value()};function we(){O(this)}we.prototype=new M;r=we.prototype;r.oa=k;r.className="Invoke_0.Other";r.c=function(b){R(b).d(b,C)};r.toString=p("(invoke <0>)");r.ta=function(b){return Oc(b)};function xe(b){O(this);this.r=b}xe.prototype=new M;r=xe.prototype;r.oa=k;r.className="Invoke_1.Lex";r.c=function(b){this.r.v(b.s).d(b,A(new B,R(b),C))};
r.toString=function(){return"(invoke "+this.r+" <1>)"};r.ta=function(b){return this.r.v(b.s)};function ye(b){O(this);this.r=b}ye.prototype=new M;r=ye.prototype;r.oa=k;r.className="Invoke_1.Free";r.c=function(b){this.r.value().d(b,A(new B,R(b),C))};r.toString=function(){return"(invoke "+this.r+" <1>)"};r.ta=function(){return this.r.value()};function ze(){O(this)}ze.prototype=new M;r=ze.prototype;r.oa=k;r.className="Invoke_1.Other";r.c=function(b){R(b).d(b,A(new B,R(b),C))};r.toString=p("(invoke <1>)");
r.ta=function(b){return Oc(b)};function Ae(b){O(this);this.r=b}Ae.prototype=new M;r=Ae.prototype;r.oa=k;r.className="Invoke_2.Lex";r.c=function(b){var c=R(b),d=R(b);this.r.v(b.s).d(b,A(new B,d,A(new B,c,C)))};r.toString=function(){return"(invoke "+this.r+" <2>)"};r.fb=function(b){return"(invoke "+this.r+" -> "+this.r.v(b)+" <2>)"};r.ta=function(b){return this.r.v(b.s)};function Be(b){O(this);this.r=b}Be.prototype=new M;r=Be.prototype;r.oa=k;r.className="Invoke_2.Free";
r.c=function(b){var c=R(b),d=R(b);this.r.value().d(b,A(new B,d,A(new B,c,C)))};r.toString=function(){return"(invoke_2:free "+this.r+" <2>)"};r.fb=function(){return"(invoke_2:free "+this.r+" -> "+this.r.value()+" <2>)"};r.ta=function(){return this.r.value()};function Ee(){O(this)}Ee.prototype=new M;r=Ee.prototype;r.oa=k;r.className="Invoke_2.Other";r.c=function(b){var c=R(b),d=R(b),f=R(b);try{c.d(b,A(new B,f,A(new B,d,C)))}catch(h){h instanceof Error||g(h),Aa(h)}};r.toString=p("(invoke <2>)");
r.ta=function(b){return Oc(b)};function Fe(b){O(this);this.r=b}Fe.prototype=new M;r=Fe.prototype;r.oa=k;r.className="Invoke_3.Lex";r.c=function(b){var c=R(b),d=R(b),f=R(b);this.r.v(b.s).d(b,A(new B,f,A(new B,d,A(new B,c,C))))};r.toString=function(){return"(invoke "+this.r+" <3>)"};r.ta=function(b){return this.r.v(b.s)};function Ge(b){O(this);this.r=b}Ge.prototype=new M;r=Ge.prototype;r.oa=k;r.className="Invoke_3.Free";
r.c=function(b){var c=R(b),d=R(b),f=R(b);this.r.value().d(b,A(new B,f,A(new B,d,A(new B,c,C))))};r.toString=function(){return"(invoke_3:free "+this.r+" <3>)"};r.ta=function(){return this.r.value()};function He(){O(this)}He.prototype=new M;r=He.prototype;r.oa=k;r.className="Invoke_3.Other";r.c=function(b){var c=R(b),d=R(b),f=R(b),h=R(b);c.d(b,A(new B,h,A(new B,f,A(new B,d,C))))};r.toString=p("(invoke <3>)");r.ta=function(b){return Oc(b)};function Ie(b,c){O(this);this.r=b;this.gb=c}Ie.prototype=new M;
r=Ie.prototype;r.oa=k;r.className="Invoke_N.Lex";r.c=function(b){this.r.v(b.s).d(b,Pc(b,this.gb))};r.toString=function(){return"(invoke "+this.r+" <"+this.gb+">)"};r.ta=function(b){return this.r.v(b.s)};function Je(b,c){O(this);this.r=b;this.gb=c}Je.prototype=new M;r=Je.prototype;r.oa=k;r.className="Invoke_N.Free";r.c=function(b){this.r.value().d(b,Pc(b,this.gb))};r.toString=function(){return"(invoke "+this.r+" <"+this.gb+">)"};r.ta=function(){return this.r.value()};
function Ka(b){O(this);this.gb=b}Ka.prototype=new M;r=Ka.prototype;r.oa=k;r.className="Invoke_N.Other";r.c=function(b){R(b).d(b,Pc(b,this.gb))};r.toString=function(){return"(invoke <"+this.gb+">)"};r.ta=function(b){return Oc(b)};function le(b,c){this.name=b;this.kb=c}le.prototype=new y;r=le.prototype;r.className="StackSymbol";r.get=function(b){return b.Nb[this.kb]};r.set=function(b,c){b.pa[b.h][this.kb]=c};r.g=function(b){b.push(new gd(this.name,this.kb))};r.type=function(){return K("stack-symbol")};
r.toString=function(){return this.name.toString()};function se(b,c){return b.name===c.name&&b.kb===c.kb}r.S=function(b,c,d){return se(this,b)?c:d<this.kb?new le(this.name,this.index-1):this};function U(b,c,d){this.Qa=c;this.index=d;this.name=b}U.prototype=new y;r=U.prototype;r.className="BoundSymbol";function kd(b,c,d){c.Fb(b.Qa).set(b.index,d)}r.v=function(b){for(var c=this.Qa;0<c;)b=b.parent,c--;return b.ib[this.index]};r.g=function(b){b.push(new bd(this))};r.type=function(){return Ke};
r.toString=function(){return this.name.toString()};function Vd(b,c){return b.Qa===c.Qa&&b.name===c.name&&b.index===c.index}r.M=function(b){return b<=this.Qa?new U(this.name,this.Qa+1,this.index):this};function Le(b){return new U(b.name,b.Qa-1,b.index)}r.T=function(b,c,d,f,h){if(Vd(this,b))return c;return d?(0===this.Qa&&g(t(new u,"can't unnest "+this+", looking for "+b+" to inline with "+c)),Le(this)):f===this.Qa&&h<this.index?new U(this.name,this.Qa,this.index-1):this};r.k=function(b){b.wc(this)};
r.Y=function(b){b=b[this.name.name()];if(b===i)return Le(this);if(b===this.index)return new le(this.name,b);g(t(new u,"error: parameter index mismatch: expected "+b+", got "+this.index))};var Ke=K("bound-symbol");function Me(b){this.C=this.name=l;this.Ra=b}Me.prototype=new y;r=Me.prototype;r.className="SingleAssignment";r.Na=function(b){this.name===l?b instanceof L||b instanceof U?this.name=b:g(t(new u,"assign: can't assign to "+b)):this.C===l?this.C=b:this.Ra.Na(b)};
r.toString=function(){return""+this.name+" "+this.C};r.g=function(b){Ne(this,b,m);this.Ra.g(b)};
function Ne(b,c,d){if(b.name instanceof U){var f=b.name,b=b.C;b instanceof U?d?c.push(new md(f,b)):c.push(new nd(f,b)):b instanceof le?d?c.push(new sd(f,b)):c.push(new td(f,b)):b instanceof L?d?c.push(new jd(f,b)):c.push(new ld(f,b)):b.Ia()?d?c.push(new od(f,b)):c.push(new pd(f,b)):b instanceof Oe?(b=b.Gb,d?c.push(new od(f,b)):c.push(new pd(f,b))):(b.g(c),d?c.push(new qd(f)):c.push(new rd(f)))}else b.name instanceof le?(f=b.name,b=b.C,b instanceof U?d?c.push(new Id(f,b)):c.push(new Jd(f,b)):b instanceof
le?d?c.push(new Od(f,b)):c.push(new Pd(f,b)):b instanceof L?d?c.push(new Gd(f,b)):c.push(new Hd(f,b)):b.Ia()?d?c.push(new Kd(f,b)):c.push(new Ld(f,b)):b instanceof Oe?(b=b.Gb,d?c.push(new Kd(f,b)):c.push(new Ld(f,b))):(b.g(c),d?c.push(new Md(f)):c.push(new Nd(f)))):b.name instanceof L?(f=b.name,b=b.C,b instanceof U?d?c.push(new xd(f,b)):c.push(new yd(f,b)):b instanceof le?d?c.push(new Dd(f,b)):c.push(new Ed(f,b)):b instanceof L?d?c.push(new vd(f,b)):c.push(new wd(f,b)):b.Ia()?d?c.push(new zd(f,b)):
c.push(new Ad(f,b)):b instanceof Oe?(b=b.Gb,d?c.push(new zd(f,b)):c.push(new Ad(f,b))):(b.g(c),d?c.push(new Bd(f)):c.push(new Cd(f)))):g(t(new u,"what kind of symbol is "+b.name+"??"))}r.type=function(){return K("assignment")};r.ha=p(k);r.W=function(){return this.C instanceof V?Pe(this.C)||this.Ra.W():this.C.W()||this.Ra.W()};
r.T=function(b,c,d,f,h){var j=new Me(l);this.name instanceof U&&Vd(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));j.name=this.name;j.C=this.C.T(b,c,d,f,h);j.Ra=this.Fd(b,c,d,f,h);return j};r.S=function(b,c,d){var f=new Me(l);this.name instanceof le&&se(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name;f.C=this.C.S(b,c,d);f.Ra=this.Ed(b,c,d);return f};r.M=function(b){var c=new Me(l);c.name=this.name.M(b);c.C=this.C.M(b);c.Ra=this.Ra.M(b);return c};
r.Y=function(b){var c=new Me(l);c.name=this.name.Y(b);c.C=this.C.Y(b);b=this.Ra.Y(b);b instanceof Me||g(new TypeError);c.Ra=b;return c};r.k=function(b){b.za(this);this.name.k(b);this.C.k(b);this.Ra.k(b);b.Ka(this)};function Qe(){Me.call(this,l)}Qe.prototype=new Me(l);r=Qe.prototype;r.className="LastAssignment";r.Na=function(b){this.name===l?b instanceof L||b instanceof U?this.name=b:g(t(new u,"assign: can't assign to "+b)):this.C===l?this.C=b:g(t(new u,"assign: error: unexpected "+b))};
r.toString=function(){return""+this.name+" "+this.C};r.g=function(b){Ne(this,b,k)};r.W=function(){return this.C instanceof V?Pe(this.C):this.C.W()};r.T=function(b,c,d,f,h){var j=new Qe;this.name instanceof U&&Vd(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));j.name=this.name.T(b,c,d,f,h);j.C=this.C.T(b,c,d,f,h);return j};
r.S=function(b,c,d){var f=new Qe;this.name instanceof le&&se(b,this.name)&&g(t(new u,"Can't inline "+b+" -> "+c+"; assignment"));f.name=this.name.S(b,c,d);f.C=this.C.S(b,c,d);return f};r.M=function(b){var c=new Qe;c.name=this.name.M(b);c.C=this.C.M(b);return c};r.Y=function(b){var c=new Qe;c.name=this.name.Y(b);c.C=this.C.Y(b);return c};r.k=function(b){b.za(this);this.name.k(b);this.C.k(b);b.Ka(this)};function Re(){this.$=l}Re.prototype=new y;r=Re.prototype;r.className="Assignment";r.type=function(){return K("assignment")};
r.Na=function(b){this.$.Na(b)};r.g=function(b){this.$.g(b)};r.toString=function(){return"(assign "+this.$+")"};r.ha=function(b){return this.$.ha(b)};r.W=function(){return this.$.W()};r.T=function(b,c,d,f,h){var j=new Re;j.$=this.$.T(b,c,d,f,h);return j};r.S=function(b,c,d){var f=new Re;f.$=this.$.S(b,c,d);return f};r.M=function(b){var c=new Re;c.$=this.$.M(b);return c};r.k=function(b){b.za(this);this.$.k(b);b.Ka(this)};
r.Y=function(b){var c=new Re,b=this.$.Y(b);b instanceof Me||g(new TypeError);c.$=b;return c};function Ud(){this.m=l}Ud.prototype=new y;r=Ud.prototype;r.La=k;r.className="Else";r.type=function(){return K("else-clause")};r.add=function(b){g(t(new u,"Internal error: if clause: unexpected extra condition: "+b))};r.Na=function(b){this.m===l?this.m=b:g(t(new u,"Internal error: if clause: unexpected: "+b))};r.g=function(b){this.m.g(b)};r.reduce=function(){return this};r.toString=function(){return""+this.m};
r.ha=function(b){return this.m.ha(b)};r.W=function(){return this.m instanceof V?Pe(this.m):this.m.W()};r.T=function(b,c,d,f,h){var j=new Ud;j.m=this.m.T(b,c,d,f,h).reduce();return j};r.S=function(b,c,d){var f=new Ud;f.m=this.m.S(b,c,d).reduce();return f};r.M=function(b){var c=new Ud;c.m=this.m.M(b);return c};r.Y=function(b){var c=new Ud;c.m=this.m.Y(b);return c};r.k=function(b){b.za(this);this.m.k(b);b.Ka(this)};r.pc=function(){return"_"+Se(this.m)};function Te(){this.Z=l}Te.prototype=new y;r=Te.prototype;
r.className="IfClause";r.type=function(){return Ue};r.append=function(b){this.Z!==l?this.Z.add(b):this.Z=b};r.reduce=function(){var b=this.Z.reduce();b.La||g(new TypeError);this.Z=b;return b instanceof Ud?b.m:this};r.Na=function(b){this.Z.Na(b)};r.g=function(b){this.Z.g(b)};r.toString=function(){return"(if "+this.Z+")"};r.ha=function(b){return this.Z.ha(b)};r.W=function(){return this.Z.W()};r.T=function(b,c,d,f,h){var j=new Te,b=this.Z.T(b,c,d,f,h).reduce();b.La||g(new TypeError);j.Z=b;return j};
r.S=function(b,c,d){var f=new Te,b=this.Z.S(b,c,d).reduce();b.La||g(new TypeError);f.Z=b;return f};r.M=function(b){var c=new Te,b=this.Z.M(b);b.La||g(new TypeError);c.Z=b;return c};r.Y=function(b){var c=new Te,b=this.Z.Y(b);b.La||g(new TypeError);c.Z=b;return c};r.k=function(b){b.za(this);this.Z.k(b);b.Ka(this)};r.Q=function(){var b=this.Z;b instanceof Ve||g(new TypeError);return b.Q};var Ue=K("if-clause");function Ve(){this.next=this.Q=this.m=l}Ve.prototype=new y;r=Ve.prototype;r.La=k;
r.className="IfThen";r.type=function(){return K("if-then-clause")};r.add=function(b){this.next!==l?this.next.add(b):this.next=b};r.Na=function(b){this.m===l?this.m=b:this.Q===l?this.Q=b:this.next.Na(b)};
r.g=function(b){var c=this.pc(),d="rainbow.vm.instructions.cond.optimise.If"+c;try{if(d in We){var f=We[d];f===l?this.zc(b,c):f(b,this.m,this.Q,this.next)}else{var h=v[d];if(h===i)We[d]=l;else{var j=h.g;j===i&&g(t(new u,"couldn't find handler method 'addInstructions(List,ArcObject,ArcObject,ArcObject) on "+d));We[d]=j}this.g(b)}}catch(q){q instanceof Error||g(q),g(t(new u,"Couldn't instantiate "+d+": "+q,q))}};r.zc=function(b){this.m.g(b);b.push(new Qd(this.Q,this.next))};
r.reduce=function(){var b=this.next.reduce();b.La||g(new TypeError);this.next=b;if(this.m instanceof z)return this.next;!(this.m instanceof U)||!(this.Q instanceof U)||!(this.next instanceof Ud)?b=m:(b=this.next,b=Vd(this.m,this.Q)&&b.m instanceof z);if(!b)!(this.m instanceof le)||!(this.Q instanceof le)||!(this.next instanceof Ud)?b=m:(b=this.next,b=se(this.m,this.Q)&&b.m instanceof z);return b?(b=new Ud,b.Na(this.m),b):this};r.toString=function(){return""+this.m+" "+this.Q+" "+this.next};
r.ha=function(b){return this.m.ha(b)||this.Q.ha(b)||this.next.ha(b)};r.W=function(){return this.m instanceof V&&Pe(this.m)||this.Q instanceof V&&Pe(this.Q)?k:this.m.W()||this.Q.W()||this.next.W()};r.T=function(b,c,d,f,h){var j=new Ve;j.m=this.m.T(b,c,d,f,h).reduce();j.Q=this.Q.T(b,c,d,f,h).reduce();b=this.next.T(b,c,d,f,h).reduce();b.La||g(new TypeError);j.next=b;return j};
r.S=function(b,c,d){var f=new Ve;f.m=this.m.S(b,c,d).reduce();f.Q=this.Q.S(b,c,d).reduce();b=this.next.S(b,c,d).reduce();b.La||g(new TypeError);f.next=b;return f};r.M=function(b){var c=new Ve;c.m=this.m.M(b);c.Q=this.Q.M(b);b=this.next.M(b);b.La||g(new TypeError);c.next=b;return c};r.Y=function(b){var c=new Ve;c.m=this.m.Y(b);c.Q=this.Q.Y(b);b=this.next.Y(b);b.La||g(new TypeError);c.next=b;return c};r.k=function(b){b.za(this);this.m.k(b);this.Q.k(b);this.next.k(b);b.Ka(this)};
r.pc=function(){var b;b="_"+Se(this.m);b=b+"_"+Se(this.Q);return b=this.next instanceof Ud?b+"_"+Se(this.next.m):b+"_other"};var We={};function Oe(b){this.Gb=b}Oe.prototype=new y;r=Oe.prototype;r.className="Quotation";r.g=function(b){b.push(new La(this.Gb))};r.type=function(){return K("quotation")};r.v=o("Gb");r.toString=function(){return"'"+this.Gb};function Xe(b){this.A=b;this.cc={}}Xe.prototype=new y;r=Xe.prototype;r.className="Invocation";r.type=function(){return K("if-then-clause")};
r.toString=function(){return(this.A.a()instanceof V?Ye(Ze(this.A)):this.A).toString()};r.g=function(b){var c;1===this.A.ka()&&this.A.a()instanceof $e?(af(this.A.a(),b),c=k):c=m;c||bf(this,b)||this.zc(b)};
r.reduce=function(){if(this.A.ic(1)&&this.A.a()instanceof V){var b=this.A.a(),c=b.z;if(c.O()||!(c.a()instanceof L))return this;var c=c.a(),d=this.A.b().a();if(b.nb(c,d)){try{var f=b.pb(c,d,k)}catch(h){h instanceof Error||g(h),g(t(new u,"couldn't curry "+c+"->"+d+" for "+b+" in expression "+this+": "+h,h))}return(new Xe(A(new B,f,this.A.b().b()))).reduce()}}return this};
function bf(b,c){for(var d="",f=b.A;!(f instanceof z);)d+="_",d+=Se(f.a()),f=f.b(),f instanceof B||g(new TypeError);d="rainbow.vm.instructions.invoke.optimise.Invoke"+d;if(d in b.cc){f=b.cc[d];if(f===l)return m;try{var h=new f(b.A),j=b.A.b();for(j instanceof B||g(new TypeError);!(j instanceof z);)"other"===b.pc(j.a())&&j.a().g(c),j=j.b(),j instanceof B||g(new TypeError);"other"===b.pc(b.A.a())&&b.A.a().g(c);c.push(h);return k}catch(q){q instanceof Error||g(q),g(t(new u,"couldn't create optimiser "+
d,q))}}else{h=v[d];if(h===i)return b.cc[d]=l,m;b.cc[d]=h;return bf(b,c)}}function Se(b){return b instanceof U?"bound":b instanceof L?"free":b instanceof le?"stack":b.Ia()?"literal":b instanceof Oe?"quote":"other"}
r.zc=function(b){switch(this.A.ka()){case 1:var c=this.A.a();c instanceof U?b.push(new ue(c)):c instanceof L?b.push(new ve(c)):(c.g(b),b.push(new we));break;case 2:c=this.A.a();this.A.b().a().g(b);c instanceof U?b.push(new xe(c)):c instanceof L?b.push(new ye(c)):(c.g(b),b.push(new ze));break;case 3:var c=this.A.a(),d=this.A.b().a(),f=this.A.b().b().a();d.g(b);f.g(b);c instanceof U?b.push(new Ae(c)):c instanceof L?b.push(new Be(c)):(c.g(b),b.push(new Ee));break;case 4:var c=this.A.a(),d=this.A.b().a(),
f=this.A.b().b().a(),h=this.A.b().b().b().a();d.g(b);f.g(b);h.g(b);c instanceof U?b.push(new Fe(c)):c instanceof L?b.push(new Ge(c)):(c.g(b),b.push(new He));break;default:c=this.A.a();d=this.A.b();d instanceof B||g(new TypeError);for(f=d.ka();!(d instanceof z);)d.a().g(b),d=d.b(),d instanceof B||g(new TypeError);c instanceof U?b.push(new Ie(c,f)):c instanceof L?b.push(new Je(c,f)):(c.g(b),b.push(new Ka(f)))}return k};
r.ha=function(b){for(var c=this.A;!(c instanceof z);){if(c.a().ha(b))return k;c=c.b();c instanceof B||g(new TypeError)}return m};r.W=function(){for(var b=this.A;!(b instanceof z);){if(b.a()instanceof V){if(Pe(b.a()))return k}else if(b.a().W())return k;b=b.b();b instanceof B||g(new TypeError)}return m};
r.T=function(b,c,d,f,h){for(var j=this.A,q=[];!(j instanceof z);){try{q.push(j.a().T(b,c,d,f,h))}catch(s){s instanceof Error||g(s),g(t(new u,"couldn't inline "+b+"->"+c+"(unnest:"+d+";nesting:"+f+") in "+this+" : "+s,s))}j=j.b();j instanceof B||g(new TypeError)}return new Xe(x(q))};r.S=function(b,c,d){for(var f=this.A,h=[];!(f instanceof z);){try{h.push(f.a().S(b,c,d))}catch(j){j instanceof Error||g(j),g(t(new u,"couldn't inline "+b+"->"+c+") in "+this+" : "+j,j))}f=f.b();f instanceof B||g(new TypeError)}return new Xe(x(h))};
r.M=function(b){for(var c=this.A,d=[];!(c instanceof z);)d.push(c.a().M(b)),c=c.b(),c instanceof B||g(new TypeError);return new Xe(x(d))};r.Y=function(b){for(var c=this.A,d=[];!(c instanceof z);)d.push(c.a().Y(b)),c=c.b(),c instanceof B||g(new TypeError);return new Xe(x(d))};r.k=function(b){b.za(this);for(var c=this.A;!(c instanceof z);)c.a().k(b),c=c.b(),c instanceof B||g(new TypeError);b.Ka(this)};function cf(b){this.Ja=b}cf.prototype=new y;r=cf.prototype;r.className="QuasiQuotation";r.type=function(){return K("quasiquotation")};
r.g=function(b){df(this,b,this.Ja,1)};r.toString=function(){return"`"+this.Ja};function ef(b){var c=[];ff(b,c,b.Ja,1);return c}function ff(b,c,d,f){if(gf(d))1===f?c.push(d.b().a()):ff(b,c,d.b().a(),f-1);else if(hf(d))1===f?c.push(d.b().a()):ff(b,c,d.b().a(),f-1);else if(jf(d))ff(b,c,d.b().a(),f+1);else if(!d.O())for(;!d.O();)if(gf(d)||jf(d))ff(b,c,d,f),d=d.b().b();else{var h=d.a(),d=d.b();hf(h)?ff(b,c,h,f):(gf(h)||jf(h)||kf(h))&&ff(b,c,h,f)}}
function df(b,c,d,f){if(gf(d))1===f?d.b().a().g(c):(c.push(new La(lf)),df(b,c,d.b().a(),f-1),c.push(new cd(2)));else if(hf(d))1===f?(d.b().a().g(c),c.push(new Vc)):(c.push(new La(mf)),df(b,c,d.b().a(),f-1),c.push(new cd(2)),c.push(new Uc));else if(jf(d))c.push(new La(nf)),df(b,c,d.b().a(),f+1),c.push(new cd(2));else if(d.O())c.push(new La(d));else{for(c.push(new dd);!d.O();)if(gf(d)||jf(d))df(b,c,d,f),d=d.b().b(),c.push(new Wc);else{var h=d.a(),d=d.b();hf(h)?df(b,c,h,f):(gf(h)||jf(h)||kf(h)?df(b,
c,h,f):c.push(new La(h)),c.push(new Uc))}d instanceof z||(c.push(new La(d)),c.push(new Wc));c.push(new ad)}}function of(b,c){return b instanceof B&&b.Dc(c)&&b.b().b()instanceof z}function gf(b){return of(b,lf)}function hf(b){return of(b,mf)}function jf(b){return of(b,nf)}function kf(b){return b instanceof B}r.ha=function(b){for(var c=ef(this),d=0,f=c.length;d<f;d++)if(c[d].ha(b))return k;return m};r.W=function(){for(var b=ef(this),c=0,d=b.length;c<d;c++){var f=b[c];if(f instanceof V){if(Pe(f))return k}else if(f.W())return k}return m};
r.T=function(b,c,d,f,h){return new cf(pf(b,c,d,f,h,this.Ja,1))};
function pf(b,c,d,f,h,j,q){if(gf(j))return 1===q?x([lf,j.b().a().T(b,c,d,f,h)]):x([lf,pf(b,c,d,f,h,j.b().a(),q-1)]);if(hf(j))return 1===q?x([mf,j.b().a().T(b,c,d,f,h)]):x([mf,pf(b,c,d,f,h,j.b().a(),q-1)]);if(jf(j))return x([nf,pf(b,c,d,f,h,j.b().a(),q+1)]);if(j.O())return j;for(var s=[],F=C;!j.O();)if(gf(j)||jf(j))F=pf(b,c,d,f,h,j,q),j=j.b().b();else{var N=j.a(),j=j.b();hf(N)?s.push(pf(b,c,d,f,h,N,q)):gf(N)||jf(N)||kf(N)?s.push(pf(b,c,d,f,h,N,q)):s.push(N)}j instanceof z||(F=j);return pb(s,F)}
r.S=function(b,c,d){return new cf(qf(b,c,d,this.Ja,1))};
function qf(b,c,d,f,h){if(gf(f))return 1===h?x([lf,f.b().a().S(b,c,d)]):x([lf,pf(b,c,d,f.b().a(),h-1)]);if(hf(f))return 1===h?x([mf,f.b().a().S(b,c,d)]):x([mf,qf(b,c,d,f.b().a(),h-1)]);if(jf(f))return x([nf,qf(b,c,d,f.b().a(),h+1)]);if(f.O())return f;for(var j=[],q=C;!f.O();)if(gf(f)||jf(f))q=qf(b,c,d,f,h),f=f.b().b();else{var s=f.a(),f=f.b();hf(s)?j.push(qf(b,c,d,s,h)):gf(s)||jf(s)||kf(s)?j.push(qf(b,c,d,s,h)):j.push(s)}f instanceof z||(q=f);return pb(j,q)}
r.M=function(b){return new cf(rf(b,this.Ja,1))};function rf(b,c,d){if(gf(c))return 1===d?x([lf,c.b().a().M(b)]):x([lf,rf(b,c.b().a(),d-1)]);if(hf(c))return 1===d?x([mf,c.b().a().M(b)]):x([mf,rf(b,c.b().a(),d-1)]);if(jf(c))return x([nf,rf(b,c.b().a(),d+1)]);if(c.O())return c;for(var f=[],h=C;!c.O();)if(gf(c)||jf(c))h=rf(b,c,d),c=c.b().b();else{var j=c.a(),c=c.b();hf(j)||gf(j)||jf(j)||kf(j)?f.push(rf(b,j,d)):f.push(j)}c instanceof z||(h=c);return pb(f,h)}r.Y=function(b){return new cf(sf(b,this.Ja,1))};
function sf(b,c,d){if(gf(c))return 1===d?x([lf,c.b().a().Y(b)]):x([lf,sf(b,c.b().a(),d-1)]);if(hf(c))return 1===d?x([mf,c.b().a().Y(b)]):x([mf,sf(b,c.b().a(),d-1)]);if(jf(c))return x([nf,sf(b,c.b().a(),d+1)]);if(c.O())return c;for(var f=[],h=C;!c.O();)if(gf(c)||jf(c))h=sf(b,c,d),c=c.b().b();else{var j=c.a(),c=c.b();hf(j)||gf(j)||jf(j)||kf(j)?f.push(sf(b,j,d)):f.push(j)}c instanceof z||(h=c);return pb(f,h)}r.k=function(b){b.za(this);for(var c=ef(this),d=0,f=c.length;d<f;d++)c[d].k(b);b.Ka(this)};
function tf(){}r=tf.prototype;r.za=n();r.Ka=n();r.Zb=function(b){this.za(b)};r.wc=function(b){this.za(b)};r.Yb=function(b){this.za(b)};r.ec=function(b){this.Ka(b)};function uf(b){this.Rb=A(new B,b,C)}uf.prototype=new tf;uf.prototype.Zb=function(b){b.l(this.Rb.a());this.Rb=A(new B,b,this.Rb)};uf.prototype.ec=function(){this.Rb=this.Rb.b()};function vf(){this.yb=[];this.Jc=[];this.ub=0;this.Ic=-1}vf.prototype=new tf;r=vf.prototype;r.Zb=function(b){b.Qb()&&this.ub++};r.za=n();r.Ka=n();
r.ec=function(b){b.Qb()&&this.ub--};r.wc=function(b){b=b.Qa-this.ub;if(this.Ic<b)this.Ic=b};function wf(b){this.yb=[];this.Jc=[];this.Ja=b}wf.prototype=new tf;r=wf.prototype;r.Lb=function(){return this.Jc.length};r.Zb=function(b){this.yb.unshift(b);if(b.Qb())this.Ja=this.Ja.M(0)};r.za=function(b){this.yb.unshift(b)};r.Ka=function(){this.yb.shift()};r.ec=function(b){this.yb.shift();if(b.Qb())this.Ja=Le(this.Ja)};r.wc=function(b){Vd(b,this.Ja)&&0<this.yb.length&&this.Jc.push(this.yb[0])};
function xf(){this.name=this.target=l;this.sc=this.Wc=this.jd=0;this.children=[];this.parent=l;this.dd={};this.cd={}}function yf(b,c){var d=c.Ta(),f=b[d];if(f===i&&(f=new xf,f.target=c,f.name=d,b[d]=f,c instanceof V&&(d=c.hc,d!==l)))d=yf(b,d),d.children.push(f),f.parent=d;return f}function zf(b){this.target=b;this.Lb=0;this.key=b.Ta()}function Af(b,c){var d=b[c.Ta()];d===i&&(d=new zf(c),b[d.key]=d);return d}function Bf(){this.Cc={};this.Ad={};this.Ec=l;this.now=0}function Cf(){}Cf.prototype.jb=i;
Cf.prototype.end=i;Cf.prototype.Db=i;function Df(b){b.show();var c=prompt("q to resume execution, f to skip to the end of this frame, any other key to step");if(c!==l)if(/^q$/i.test(c))Qc(b,Fc);else if(/^f$/i.test(c))b.Pc=b.h-1,Qc(b,Ef)}function Ff(){}Ff.prototype=new Cf;Ff.prototype.jb=n();Ff.prototype.end=n();Ff.prototype.Db=n();var Fc=new Ff;function Gf(){}Gf.prototype=new Cf;Gf.prototype.jb=function(b){Df(b)};Gf.prototype.end=function(b){za("VM thread finished: returning.");Df(b)};
Gf.prototype.Db=n();var Hf=new Gf;function If(){}If.prototype=new Cf;If.prototype.jb=function(b){b.dc=k;for(var c=[],d=[];0<=b.h;)Ic(b).a().Ob&&(c.push(Ic(b)),d.push(b.ja[b.h])),b.h--;for(var f=c.length-1;0<=f;f--)S(b,d[f],c[f])};If.prototype.end=n();If.prototype.Db=n();var Jf=new If;function Kf(){}Kf.prototype=new Cf;Kf.prototype.jb=function(b){b.h<=b.Pc&&Qc(b,Hf)};Kf.prototype.end=n();Kf.prototype.Db=n();var Ef=new Kf;function Lf(){}Lf.prototype=new Cf;
Lf.prototype.jb=function(b){var c=b.Za.Ec;if(c!==l){var d=yf(b.Za.Cc,c),c=1E6*(new Date).getTime()-b.Za.now;d.Wc+=c;d.sc+=c;for(d=d.parent;d!==l;)d.sc+=c,d=d.parent}var f=Sc(b);if(f!==l)b.s=b.ja[b.h],b.Nb=b.pa[b.h],this.vd(f,b),f.oa?(c=f.ta(b),c instanceof Zc&&(c=c.r()),d=yf(b.Za.Cc,c),f=f.xa,f!==l&&Af(d.dd,f).Lb++,f=yf(b.Za.Cc,f),c!==l&&Af(f.cd,c).Lb++,d.jd++,b.Za.Ec=c):b.Za.Ec=f.xa!==l?f.xa:C,b.Za.now=1E6*(new Date).getTime()};Lf.prototype.end=n();
Lf.prototype.Db=function(b){b.Za=new Bf;b.Za.now=1E6*(new Date).getTime()};var Mf=new Lf;function Nf(b,c,d){O(this);this.bc=b;this.L=c;this.u=d;this.l(G("AssignmentBuilder.build"))}Nf.prototype=new M;Nf.prototype.className="AssignmentBuilder.BuildAssignment1";Nf.prototype.c=function(b){if(!(this.L instanceof z)){try{this.L.Eb()}catch(c){c instanceof Ga||g(c),g(t(new u,"assign: unexpected: "+this.L))}E(b,new Of(this.bc,this.L.b(),this.u));Pf(b,this.L.a(),this.u)}};
function Of(b,c,d){O(this);this.bc=b;this.L=c;this.u=d;this.l(G("AssignmentBuilder.build"))}Of.prototype=new M;Of.prototype.className="AssignmentBuilder.BuildAssignment2";Of.prototype.c=function(b){this.bc.Na(R(b).reduce());E(b,new Nf(this.bc,this.L,this.u))};var Qf=C,Rf=K("at-string");
function Pf(b,c,d){if(c instanceof z)D(b,c);else if(c instanceof Oa&&!(Qf instanceof z))E(b,new Sf(d)),Rf.bound()?Ia(Rf.value(),b,A(new B,c,C)):D(b,c);else if(c instanceof L&&Tf(c))Pf(b,Uf(hb(c,"ssexpand")),d);else if(c instanceof B){var f,h=c.a();f=!(h instanceof L)||!h.bound()?l:oc(h.value());if(f!==l)h=c.b(),h instanceof B||g(new TypeError),E(b,new Vf(d)),Ia(f,b,h);else if(f=c.a(),gb("quote",f))D(b,new Oe(c.b().a()));else if(f===nf)E(b,new Wf),Xf(b,c.b().a(),d,1);else if(gb("fn",f))h=c.b(),h instanceof
B||g(new TypeError),c=h,h=d,h===l&&g(new ReferenceError("can't have null lexical bindings!")),f={},d=c.a(),d instanceof z||(h=[f].concat(h)),E(b,new Yf(c,h,f)),d instanceof z?D(b,A(new B,C,C)):(c=h,Zf(d,c[0],[0],m),$f(b,d,c));else if(gb("if",f)){h=c=c.b();for(f=new Te;0<c.ka();)switch(c.ka()){case 0:break;case 1:f.append(new Ud);c=c.b();break;case 2:f.append(new Ve);c=c.b();c instanceof B||g(new TypeError);c.Kc(A(new B,C,C));c=c.b();break;default:f.append(new Ve),c=c.b().b()}c=h;E(b,new ag(f));E(b,
new bg(f,c,d))}else if(gb("assign",f)){c=c.b();h=new Re;f=c.ka();0!==f%2&&g(t(new u,"assign: requires even number of arguments"));f=f/2-1;0>f&&g(t(new u,"assign: nothing to assign"));for(h.$=new Qe;0<f;)h.$=new Me(h.$),f--;f=new La(h);f.l(G("AssignmentBuilder.build"));E(b,f);E(b,new Nf(h,c,d))}else gb("compose",f.vc())?(h=f.b(),h instanceof B||g(new TypeError),c=c.b(),c instanceof B||g(new TypeError),Pf(b,cg(h,c),d)):gb("complement",f.vc())?(h=c.b(),h instanceof B||g(new TypeError),c=Pf,f=f.b().a(),
h=A(new B,K("no"),A(new B,A(new B,f,h),C)),c(b,h,d)):f instanceof L&&Tf(f)?Pf(b,A(new B,Uf(hb(f,"ssexpand")),c.b()),d):E(b,new dg(c,d,c,[]))}else{if(c instanceof L)for(h=0;h<d.length;h++)if(c.name()in d[h]){d=d[h][c.name()];D(b,new U(c,h,d));return}D(b,c)}}function Sf(b){O(this);this.u=b;this.l(G("Compiler.compile"))}Sf.prototype=new M;Sf.prototype.className="Compiler.FinishAtString";Sf.prototype.c=function(b){var c=R(b);c instanceof Oa?D(b,c):Pf(b,c,this.u)};
function Vf(b){O(this);this.u=b;this.l(G("Compiler.compilePair"))}Vf.prototype=new M;Vf.prototype.className="Compiler.ThenCompile";Vf.prototype.c=function(b){Pf(b,R(b),this.u)};function Wf(){O(this);this.l(G("Compiler.compilePair"))}Wf.prototype=new M;Wf.prototype.className="Compiler.WrapQuasiQuotation";Wf.prototype.c=function(b){D(b,new cf(R(b)))};
function cg(b,c){var d=b.a();if(b.b()instanceof z)return A(new B,d,c);var f=b.b();f instanceof B||g(new TypeError);return A(new B,d,A(new B,cg(f,c),C))}function Yf(b,c,d){O(this);this.hb=b;this.u=c;this.Fc=d;this.l(G("FunctionBodyBuilder.build"))}Yf.prototype=new M;Yf.prototype.className="FunctionBodyBuilder.Intermediate";Yf.prototype.c=function(b){var c=R(b),d=c.a(),c=c.b(),f=this.hb.b();f instanceof B||g(new TypeError);E(b,new eg(c,this.Fc,f,d,b.N));E(b,new fg(f,this.u,[]))};
function eg(b,c,d,f,h){O(this);this.z=b;this.Fc=c;this.L=d;this.Aa=f;this.Jb=h;this.l(G("FunctionBodyBuilder.build"))}eg.prototype=new M;eg.prototype.gc=k;eg.prototype.className="FunctionBodyBuilder.Finish";eg.prototype.xc=function(b){return b instanceof Error};eg.prototype.c=function(b){var c=b.error();if(c!==l)b.Va=l,b.N=this.Jb,g(t(new u,"building function fn "+this.z+" "+this.L+": "+c,c));D(b,gg(this.z,this.Fc,R(b),this.Aa))};
function gg(b,c,d,f){var h="rainbow.function.interpreted.optimise.Bind"+hg(b,m),j=v[h];if(j===i)return f instanceof z?new ig(b,c,d):new jg(b,c,d);try{var q=j.va(b,c,d);q instanceof y||g(new TypeError);return q}catch(s){s instanceof Error||g(s),g(t(new u,"Couldn't instantiate "+h+": "+s,s))}}
function hg(b,c){if(b instanceof z)return"";if(b instanceof B){if(c){if(kg(b)){var d=b.b().b().a();return d.Ia()?"_Oliteral":d instanceof U?"_Obound":"_Oother"}d=b.a();return"_D"+hg(d,k)+hg(b.b(),m)+"_d"}return hg(b.a(),k)+hg(b.b(),m)}return c?"_A":"_R"}function lg(b,c,d){!(c instanceof z)&&c instanceof B&&(d&&kg(c)?c.b().b().a().k(b):(lg(b,c.a(),k),lg(b,c.b(),m)))}var mg=K("o"),ng=K("#NIL#");function $f(b,c,d){var f={value:C},h=[];E(b,new og(h,f));E(b,new pg(h,f,c,d))}
function og(b,c){O(this);this.K=b;this.Aa=c;this.l(G("FunctionParameterListBuilder.buildParams_"))}og.prototype=new M;og.prototype.className="FunctionParameterListBuilder.ReturnParams";og.prototype.c=function(b){if(0===this.K.length){var c;c=R(b)}else c=pb(this.K,R(b));c=A(new B,this.Aa.value,c);D(b,c)};function pg(b,c,d,f){O(this);this.K=b;this.Aa=c;this.ya=d;this.u=f;this.l(G("FunctionParameterListBuilder.buildParams_"))}pg.prototype=new M;pg.prototype.className="FunctionParameterListBuilder.BuildParams1";
pg.prototype.c=function(b){if(this.ya.O()){var c=new La(this.ya);c.l(this);E(b,c)}else{var c=this.ya.a(),d=this.ya.b();if(c instanceof B)if(c instanceof z)this.K.push(ng),E(b,new pg(this.K,this.Aa,d,this.u));else if(this.Aa.value=$a,kg(c)){var f=c.b().a();E(b,new qg(this.K,this.Aa,d,this.u,f));Pf(b,c.b().b().a(),this.u)}else E(b,new rg(this.K,this.Aa,d,this.u)),$f(b,c,this.u);else this.K.push(c),E(b,new pg(this.K,this.Aa,d,this.u))}};
function qg(b,c,d,f,h){O(this);this.K=b;this.Aa=c;this.ya=d;this.u=f;this.ld=h;this.l(G("FunctionParameterListBuilder.buildParams_"))}qg.prototype=new M;qg.prototype.className="FunctionParameterListBuilder.BuildParams2a";qg.prototype.c=function(b){this.K.push(x([mg,this.ld,R(b)]));E(b,new pg(this.K,this.Aa,this.ya,this.u))};function rg(b,c,d,f){O(this);this.K=b;this.Aa=c;this.ya=d;this.u=f;this.l(G("FunctionParameterListBuilder.buildParams_"))}rg.prototype=new M;rg.prototype.className="FunctionParameterListBuilder.BuildParams2b";
rg.prototype.c=function(b){this.K.push(R(b).b());E(b,new pg(this.K,this.Aa,this.ya,this.u))};function sg(b){for(;!b.O();){if(b.a()instanceof B)return $a;b=b.b()}return C}function Zf(b,c,d,f){b instanceof z||(b instanceof B?f&&kg(b)?Zf(b.b().a(),c,d,k):(f=b.a(),f instanceof z?(c[ng.name()]=d[0],d[0]++):Zf(f,c,d,k),Zf(b.b(),c,d,m)):(b instanceof L||g(new TypeError),c[b.name()]=d[0],d[0]++))}
function tg(b,c,d,f){var h=l;f instanceof L&&!f.Ha(b.name)?h=f:kg(f)&&!f.b().a().Ha(b.name)?h=x([mg,f.b().a(),f.b().b().a().S(b,c,d)]):!kg(f)&&f instanceof B&&(h=f);return h}function ug(b,c,d,f){var h=l;f instanceof L&&!f.Ha(b.name)?h=f:kg(f)&&!f.b().a().Ha(b.name)?h=x([mg,f.b().a(),f.b().b().a().T(b,c,m,0,d)]):!kg(f)&&f instanceof B&&(h=f);return h}function ag(b){O(this);this.zb=b;this.l(G("IfBuilder.build"))}ag.prototype=new M;ag.prototype.className="IfBuilder.Reduce";
ag.prototype.c=function(b){D(b,this.zb.reduce())};function bg(b,c,d){O(this);this.zb=b;this.L=c;this.u=d;this.l(G("IfBuilder.build"))}bg.prototype=new M;bg.prototype.className="IfBuilder.BuildIf1";bg.prototype.c=function(b){if(!(this.L instanceof z)){try{this.L.Eb()}catch(c){c instanceof Ga||g(c),g(t(new u,"if: unexpected: "+this.L))}E(b,new vg(this.zb,this.L.b(),this.u));Pf(b,this.L.a(),this.u)}};function vg(b,c,d){O(this);this.zb=b;this.L=c;this.u=d;this.l(G("IfBuilder.build"))}vg.prototype=new M;
vg.prototype.className="IfBuilder.BuildIf2";vg.prototype.c=function(b){this.zb.Na(R(b).reduce());E(b,new bg(this.zb,this.L,this.u))};function dg(b,c,d,f){O(this);this.L=b;this.u=c;this.wa=d;this.Oa=f;this.l(G("InvocationBuilder.build"))}dg.prototype=new M;dg.prototype.className="InvocationBuilder.BuildInvocation";
dg.prototype.c=function(b){if(this.L instanceof z)D(b,(new Xe(x(this.Oa))).reduce());else{try{this.L.Eb()}catch(c){c instanceof Ga||g(c),g(t(new u,"can't compile "+this.wa+"; not a proper list"))}E(b,new dg(this.L.b(),this.u,this.wa,this.Oa));E(b,new wg(this.Oa));Pf(b,this.L.a(),this.u)}};function wg(b){O(this);this.Oa=b;this.l(G("InvocationBuilder.build"))}wg.prototype=new M;wg.prototype.className="InvocationBuilder.ReducePush";wg.prototype.c=function(b){this.Oa.push(R(b).reduce())};
function fg(b,c,d){O(this);this.L=b;this.u=c;this.K=d;this.l(G("PairExpander.expand"))}fg.prototype=new M;fg.prototype.className="PairExpander.ExpandPair";fg.prototype.c=function(b){if(this.L instanceof z||!(this.L instanceof B))E(b,new xg(this.K)),Pf(b,this.L,this.u);else{E(b,new fg(this.L.b(),this.u,this.K));var c=this.L.a();E(b,new yg(this.K));Pf(b,c,this.u)}};function yg(b){O(this);this.Oa=b;this.l(G("PairExpander.expand"))}yg.prototype=new M;yg.prototype.className="PairExpander.ReducePush";
yg.prototype.c=function(b){this.Oa.push(R(b).reduce())};function xg(b){O(this);this.K=b;this.l(G("PairExpander.expand"))}xg.prototype=new M;xg.prototype.className="PairExpander.FinishPair";xg.prototype.c=function(b){var c=pb(this.K,R(b).reduce());c instanceof B||g(new TypeError);D(b,c)};var nf=K("quasiquote"),lf=K("unquote"),mf=K("unquote-splicing");function Xf(b,c,d,f){c.O()?D(b,c):gf(c)?zg(b,lf,c,f,d):hf(c)?zg(b,mf,c,f,d):jf(c)?(E(b,new Ag(nf)),Xf(b,c.b().a(),d,f+1)):E(b,new Bg([],c,d,f))}
function Bg(b,c,d,f){O(this);this.K=b;this.Ba=c;this.u=d;this.ub=f;this.l(G("QuasiQuoteCompiler.compile"))}Bg.prototype=new M;Bg.prototype.className="QuasiQuoteCompiler.CompileQuasiQuote";Bg.prototype.c=function(b){if(this.Ba.O())E(b,new Cg(this.K)),Xf(b,this.Ba,this.u,this.ub);else{var c=this.Ba.a();E(b,new Bg(this.K,this.Ba.b(),this.u,this.ub));c.O()?this.K.push(c):(E(b,new Dg(this.K)),Xf(b,c,this.u,this.ub))}};function Cg(b){O(this);this.K=b;this.l(G("QuasiQuoteCompiler.compile"))}
Cg.prototype=new M;Cg.prototype.className="QuasiQuoteCompiler.FinishQuasiQuote";Cg.prototype.c=function(b){D(b,pb(this.K,R(b)))};function Dg(b){O(this);this.K=b;this.l(G("QuasiQuoteCompiler.compile"))}Dg.prototype=new M;Dg.prototype.className="QuasiQuoteCompiler.Push";Dg.prototype.c=function(b){this.K.push(R(b))};function zg(b,c,d,f,h){d=d.b().a();E(b,new Ag(c));1===f?Pf(b,d,h):Xf(b,d,h,f-1)}function Ag(b){O(this);this.od=b;this.l(G("QuasiQuoteCompiler.compile"))}Ag.prototype=new M;
Ag.prototype.className="QuasiQuoteCompiler.Prefix";Ag.prototype.c=function(b){D(b,x([this.od,R(b)]))};var Eg={},Fg=K("let"),Gg=K("self"),Hg=K("it");K("afn");var Ig=K("do"),Jg=K("with"),Kg=K("aif");
function Ye(b){if(b.a()===Fg)a:{b=b.b();if(b.a()===Hg){var c=b.b().a(),d=b.b().b();if(d.b()instanceof z&&d.a()instanceof Te&&(d=d.a(),!(d.Z instanceof Ve)?0:"it"===d.Z.m.toString())){b=d.Q();d=d.Z;d instanceof Ve||g(new TypeError);b=x([Kg,c,b,d.next]);break a}}else if(b.a()===Gg&&b.b().a()instanceof z&&(d=b.b().b(),d.a()instanceof Re&&d.b()instanceof z)){c=d.a();var d=c.$,f="self";if(d.name instanceof L)d=d.name.name()===f;else{if(!(d.name instanceof le))f=d.name,f instanceof U||g(new TypeError);
d=d.name.name.name()===f}if(d&&c.$.C instanceof V&&c.$ instanceof Qe){b=Eg.Dd(c.$.C);break a}}b=A(new B,Fg,b)}return b}function Ze(b){var c=b.a(),d=b.b(),f=c.z;if(d.ka()===f.ka())if(0===d.ka())c=x([Ig].concat(c.body));else if(1===d.ka())c=x([Fg,f.a(),d.a()].concat(c.body));else{b=d;for(d=[];!(f instanceof z);)d.push(f.a()),d.push(b.a()),f=f.b(),b=b.b();c=x([Jg,x(d)].concat(c.body))}else c=b;return c}function W(){}W.prototype=new y;r=W.prototype;r.className="Builtin";
function X(b,c){b.da=c;K(c).ga(b)}r.i=function(b){g(t(new u,"Builtin:invoke(args):provide implementation! "+this.name()+" args "+b))};r.d=function(b,c){D(b,this.i(c))};r.ra=p(0);r.type=function(){return Lg};function Rb(b,c,d){d<b.ka()&&(za(c+" got args "+b+" was expecting expecting at most "+d),g(t(new u,c.toLowerCase()+" expects at most "+d+" arguments: given "+b)))}function Mg(b,c,d){b.ka()!==c&&g(t(new u,d.toLowerCase()+" expects "+c+" arguments: given "+b))}
r.toString=function(){return"[builtin:"+(this.da===l||0===this.da.length?this.className:this.da)+"]"};r.Ta=function(){return this.toString()};r.name=function(){return""===this.da?this.className.toLowerCase():this.da};var Lg=K("fn");function Zc(b,c){this.Ba=b;this.ia=c}Zc.prototype=new y;r=Zc.prototype;r.className="Closure";r.ua=function(b){this.Ba.la(b,this.ia)};r.t=function(b,c){this.Ba.w(b,this.ia,c)};r.U=function(b,c,d){this.Ba.Fa(b,this.ia,c,d)};r.d=function(b,c){this.Ba.D(b,this.ia,c)};
r.type=function(){return Lg};r.toString=function(){return this.Ba.toString()};r.Ta=function(){return this.Ba.Ta()};r.r=o("Ba");function Ng(b){return 0===b.length?m:b.charCodeAt(0)===Og?Ng(b.substring(1)):b.charAt(b.length-1)===Og?Ng(b.substring(0,b.length-1)):-1!==b.indexOf(Pg)}function V(){}V.prototype=new y;r=V.prototype;r.J=V;r.className="InterpretedFunction";function Z(b,c,d,f){b.name=C;b.z=c;b.p=d;b.body=tb(f);b.n=l;b.hc=l;b.aa=l;b.wb=l;b.Cd=l;Qg(b);return b}
r.tc=function(b){if(this.name===b)this.name=C};r.$b=function(b){this.name=b;for(var b=new uf(this),c=0,d=this.body.length;c<d;c++)this.body[c].k(b)};r.ac=o("name");r.Ta=function(){if(this.wb!==l)return this.wb;this.name instanceof z?(this.wb=this.toString(),this.hc!==l&&(this.wb+=" in "+this.hc.Ta())):this.wb=this.ac().toString();return this.wb};
r.reduce=function(){var b;if(Rg&&!this.W()&&!(this.z instanceof z)){var c="rainbow.function.interpreted.optimise.stack.Stack"+hg(this.z,m),d=v[c];if(d===i)b=this;else try{var f=d.Sa(this);f instanceof y||g(new TypeError);b=f}catch(h){h instanceof Error||g(h),g(t(new u,"Couldn't instantiate "+c+": "+h,h))}}else b=this;return b};function Qg(b){var c=[];af(b,c);b.n=x(c);b.n.k(new Sg(b))}r.l=ca("hc");function Sg(b){this.xa=b}Sg.prototype=new tf;Sg.prototype.Yb=function(b){b.l(this.xa)};
function af(b,c){if(0===b.body.length)c.push(new La(C));else for(var d=0;d<b.body.length;d++){var f=d===b.body.length-1;b.body[d].g(c);f||c.push(new ed("intermediate-fn-expression"))}}r=V.prototype;r.nb=function(b,c){return 1===this.body.length&&this.Bc(b,c)&&!this.ha(0)&&!this.W()};
r.Bc=function(b,c){var d=this.p[b.name()],d=new U(b,0,d),f;if(!(f=c.Ia()))if(!(f=c instanceof Oe))if(!(f=c instanceof L))if(!(f=c instanceof U)){d=new wf(d);f=0;for(var h=this.body.length;f<h;f++)this.body[f].k(d);f=1>=d.Lb()}return f};r.W=function(){for(var b=0,c=this.body.length;b<c;b++){var d=this.body[b];if(d instanceof V){if(Pe(d))return k}else if(d.W())return k}return m};function Tg(b,c){for(var d=0,f=b.body.length;d<f;d++)if(b.body[d].ha(c))return k;return m}
r.Qb=function(){return!(this.z instanceof z)};r.ha=function(b){return this.z instanceof z?Tg(this,b):Tg(this,b+1)};r.ua=function(b){return this.la(b,l)};r.la=function(b,c){return this.D(b,c,C)};r.t=function(b,c){return this.w(b,l,c)};r.w=function(b,c,d){return this.D(b,c,A(new B,d,C))};r.U=function(b,c,d){return this.Fa(b,l,c,d)};r.Fa=function(b,c,d,f){return this.D(b,c,A(new B,d,A(new B,f,C)))};r.Xa=function(b,c,d,f){return this.Pb(b,l,c,d,f)};
r.Pb=function(b,c,d,f,h){return this.D(b,c,A(new B,d,A(new B,f,A(new B,h,C))))};r.d=function(b,c){return this.D(b,l,c)};r.D=function(){g(t(new u,"error: invoke(vm, lc, args) not implemented in "+this.className+"; "+this))};r.g=function(b){Pe(this)?b.push(new Yc(this)):b.push(new La(this))};r.Ia=function(){return!Pe(this)};function Pe(b){var c=new vf;b.k(c);return-1<c.Ic}r.k=function(b){b.Zb(this);lg(b,this.z,m);for(var c=0,d=this.body.length;c<d;c++)this.body[c].k(b);b.ec(this);this.aa!==l&&this.aa.k(b)};
r.ra=function(b){g(t(new u,"Can't compare "+this+" to "+b))};r.toString=function(){if(this.z instanceof B&&this.z.a()===K("_")&&this.z.b()instanceof z&&1===this.body.length&&!(this.body[0]instanceof Eb)){if(this.body[0]instanceof z)return"[]";var b=this.body[0].toString();return"["+b.substring(1,b.length-1)+"]"}return x([K("fn"),this.z].concat(this.body)).toString()};r.type=function(){return Lg};r.Fb=function(b){return this.body[b]};r.Sc=function(){return this.body[this.body.length-1]};r.length=function(){return this.body.length};
function Ug(b,c,d){try{c.b().Pa()}catch(f){f instanceof Ga||g(f),Vg(b,d)}}function Vg(b,c){g(t(new u,"args "+c+" doesn't match signature for "+b))}
r.pb=function(b,c,d){var f=this.p[b.name()];f===i&&g(new ReferenceError);var b=new U(b,0,f),h;for(var j=this.z,q=c,s=C,F=[];!j.O();){var N=ug(b,q,f,j.a());N!==l&&F.push(N);j=j.b()}j instanceof L&&(q=ug(b,q,f,j),q!==l&&(s=q));try{h=pb(F,s)}catch(na){na instanceof Error||g(na),g(t(new u,"couldn't curry params "+j+", got list "+F+" and last "+s))}j={};Zf(h,j,[0],m);s=h instanceof z;!s&&d&&(c=c.M(0));d=[];for(F=0;F<this.body.length;F++)d.push(this.body[F].T(b,c,s,0,f).reduce());c=x(d);f=sg(h);return gg(h,
j,c,f)};r.T=function(b,c,d,f,h){for(var b=this.z instanceof z?b:b.M(0),d=Wg(this),j=[],q=0;q<this.body.length;q++)j.push(this.body[q].T(b,c,m,f+1,h).reduce());b=x(j);d.body=tb(b);Qg(d);return d};r.S=function(b,c,d){if(!(this.z instanceof z))return this;for(var f=Wg(this),h=[],j=0;j<this.body.length;j++)h.push(this.body[j].S(b,c,d).reduce());b=x(h);f.body=tb(b);Qg(f);return f};
r.M=function(b){this.z instanceof z||b++;for(var c=Wg(this),d=[],f=0;f<this.body.length;f++)d.push(this.body[f].M(b));b=x(d);c.body=tb(b);Qg(c);return c};function Wg(b){var c=new b.J,d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function Xg(b,c,d){d.Cb(c)||g(t(new u,"error: "+b+" expects "+c+" args, got "+d))}function ig(b,c,d){Z(this,b,c,d)}ig.prototype=new V;ig.prototype.J=ig;ig.prototype.className="SimpleArgs";
ig.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;f=c=(new w).o(f,c);for(h=this.z;!(h instanceof z);)if(h instanceof L){f.add(d);break}else f.add(d.a()),d=d.b(),h=h.b();S(b,c,this.n)};function jg(b,c,d){Z(this,b,c,d)}jg.prototype=new V;jg.prototype.J=jg;jg.prototype.className="ComplexArgs";jg.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);E(b,new Yg(c,this.n,this));E(b,new Zg(c,this.z,d,this))};function Yg(b,c,d){O(this);this.ia=b;this.n=c;this.l(d)}
Yg.prototype=new M;Yg.prototype.className="ComplexArgs.Run";Yg.prototype.c=function(b){S(b,this.ia,this.n)};function Zg(b,c,d,f){O(this);this.ia=b;this.ya=c;this.hb=d;this.l(f)}Zg.prototype=new M;Zg.prototype.className="ComplexArgs.BuildComplex";
Zg.prototype.c=function(b){if(this.ya.O())this.ya instanceof L&&this.ia.add(this.hb);else{var c=this.ya.a(),d=this.hb.a();E(b,new Zg(this.ia,this.ya.b(),this.hb.b(),this.xa));if(c instanceof L)this.ia.add(d);else if(kg(c))if(c=c.b(),c instanceof B||g(new TypeError),this.hb instanceof z){E(b,new $g(this.ia,this));var d=this.ia,f=[];c.b().a().g(f);S(b,d,x(f))}else this.ia.add(d);else{try{d.Eb()}catch(h){h instanceof Ga||g(h),g(t(new u,"Expected list argument for destructuring parameter "+c+", got "+
d))}E(b,new Zg(this.ia,c,d,this.xa))}this.ya=this.ya.b();this.hb=this.hb.b()}};function $g(b,c){O(this);this.ia=b;this.l(c)}$g.prototype=new M;$g.prototype.className="ComplexArgs.AddToLc";$g.prototype.c=function(b){this.ia.add(R(b))};function kg(b){return!(b instanceof B)?m:b.a()===ah}var ah=K("o");function bh(){}bh.prototype=new V;r=bh.prototype;r.J=bh;r.className="StackFunctionSupport";r.nb=function(b,c){return this.Bc(b,c)&&!this.ha(0)};
r.Bc=function(b,c){var d=this.p[b.name()],d=new le(b,d);return c.Ia()||c instanceof Oe||c instanceof L||1===this.body.length&&this.body[0]instanceof le&&se(d,this.body[0])};r.Qb=p(m);
r.pb=function(b,c){var d=this.p[b.name()],f=new le(b,d),h;for(var j=this.z,q=C,s=[];!j.O();){var F=tg(f,c,d,j.a());F!==l&&s.push(F);j=j.b()}j instanceof L&&(F=tg(f,c,d,j),F!==l&&(q=F));try{h=pb(s,q)}catch(N){N instanceof Error||g(N),g(t(new u,"couldn't curry params "+j+", got list "+s+" and last "+q))}j={};Zf(h,j,[0],m);q=[];for(s=0;s<this.body.length;s++)q.push(this.body[s].S(f,c,d).reduce());var d=x(q),f=sg(h),na;q=hg(h,m);if(""===q)na=gg(h,j,d,f);else{f="rainbow.function.interpreted.optimise.stack.Stack"+
q;q=v[f];q===i&&g(t(new u,"no stack-based function implementation for "+h+"; couldn't find "+f));try{var Y=q.fa(h,j,d);Y instanceof y||g(new TypeError);na=Y}catch(db){db instanceof Error||g(db),g(t(new u,"Couldn't instantiate "+f+": "+db,db))}}return na};function ch(b,c){for(var d=Array(~~c.length),f=0;f<c.length;f++)d[f]=c[f].Y(b);return x(d)}function $e(){}var dh={};v["rainbow.function.interpreted.optimise.Bind"]=dh;$e.prototype=new V;$e.prototype.J=$e;$e.prototype.className="Bind";
dh.va=function(b,c,d){return Z(new $e,b,c,d)};$e.prototype.la=function(b,c){S(b,c,this.n)};$e.prototype.D=function(b,c,d){try{d.Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 args, got "+d))}S(b,c,this.n)};function eh(){}var fh={};v["rainbow.function.interpreted.optimise.Bind_A"]=fh;eh.prototype=new V;eh.prototype.J=eh;eh.prototype.className="Bind_A";fh.va=function(b,c,d){return Z(new eh,b,c,d)};eh.prototype.la=function(){g(t(new u,"function "+this+" expects 1 arg, got none"))};
eh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);S(b,c,this.n)};eh.prototype.D=function(b,c,d){d instanceof z&&this.la(b,c);try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 1 arg, got "+d+" calling "+this))}this.w(b,c,d.a())};function gh(){}var hh={};v["rainbow.function.interpreted.optimise.Bind_A_A"]=hh;gh.prototype=new V;gh.prototype.J=gh;gh.prototype.className="Bind_A_A";hh.va=function(b,c,d){return Z(new gh,b,c,d)};
gh.prototype.la=function(){g(t(new u,"error: expected 2 args, got none"))};gh.prototype.w=function(b,c,d){g(t(new u,"error: expected 2 args, got 1: "+d))};gh.prototype.Fa=function(b,c,d,f){var h=0,j;for(j in this.p)h++;c=(new w).o(h,c);c.add(d);c.add(f);S(b,c,this.n)};gh.prototype.D=function(b,c,d){try{d.b().b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 2 args, got "+d))}this.Fa(b,c,d.a(),d.b().a())};function ih(){}var jh={};v["rainbow.function.interpreted.optimise.Bind_A_A_A"]=jh;
ih.prototype=new V;ih.prototype.J=ih;ih.prototype.className="Bind_A_A_A";jh.va=function(b,c,d){return Z(new ih,b,c,d)};ih.prototype.Pb=function(b,c,d,f,h){var j=0,q;for(q in this.p)j++;c=(new w).o(j,c);c.add(d);c.add(f);c.add(h);S(b,c,this.n)};ih.prototype.D=function(b,c,d){Ug(this,d.b().b().b(),d);this.Pb(b,c,d.a(),d.b().a(),d.b().b().a())};function kh(){}var lh={};v["rainbow.function.interpreted.optimise.Bind_A_A_R"]=lh;kh.prototype=new V;kh.prototype.J=kh;kh.prototype.className="Bind_A_A_R";
lh.va=function(b,c,d){return Z(new kh,b,c,d)};kh.prototype.la=function(){g(t(new u,"error: expected at least 2 arg, got none"))};kh.prototype.w=function(b,c,d){g(t(new u,"error: expected at least 2 args, got one: "+d))};kh.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d.a());c.add(d.b().a());c.add(d.b().b());S(b,c,this.n)};function mh(){}var nh={};v["rainbow.function.interpreted.optimise.Bind_A_Obound"]=nh;mh.prototype=new V;mh.prototype.J=mh;
mh.prototype.className="Bind_A_Obound";nh.va=function(b,c,d){c=Z(new mh,b,c,d);d=b.b().a().b().b().a();d instanceof U||g(new TypeError);c.V=d;b=b.b().a().b().a();b instanceof L||g(new TypeError);if(c.nb(b,c.V))try{var f=c.pb(b,c.V,m);f instanceof V||g(new TypeError);c.aa=f}catch(h){h instanceof Error||g(h),Aa(h)}return c};mh.prototype.w=function(b,c,d){if(this.aa!==l)this.aa.w(b,c,d);else{var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);c.add(this.V.v(c));S(b,c,this.n)}};
mh.prototype.Fa=function(b,c,d,f){var h=0,j;for(j in this.p)h++;c=(new w).o(h,c);c.add(d);c.add(f);S(b,c,this.n)};mh.prototype.D=function(b,c,d){d instanceof z&&Vg(this,d);var f=d.a(),h=d.b();h instanceof z?this.w(b,c,f):(Ug(this,h.b(),d),this.Fa(b,c,f,h.a()))};function oh(){}var ph={};v["rainbow.function.interpreted.optimise.Bind_A_Oliteral"]=ph;oh.prototype=new V;oh.prototype.J=oh;oh.prototype.className="Bind_A_Oliteral";
ph.va=function(b,c,d){c=Z(new oh,b,c,d);c.V=b.b().a().b().b().a();b=b.b().a().b().a();b instanceof L||g(new TypeError);if(c.nb(b,c.V))try{var f=c.pb(b,c.V,m);f instanceof V||g(new TypeError);c.aa=f}catch(h){h instanceof Error||g(h),Aa(h)}return c};oh.prototype.w=function(b,c,d){if(this.aa!==l)this.aa.w(b,c,d);else{var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);c.add(this.V);S(b,c,this.n)}};
oh.prototype.Fa=function(b,c,d,f){var h=0,j;for(j in this.p)h++;c=(new w).o(h,c);c.add(d);c.add(f);S(b,c,this.n)};oh.prototype.D=function(b,c,d){d instanceof z&&Vg(this,d);var f=d.a(),h=d.b();h instanceof z?this.w(b,c,f):(Ug(this,h.b(),d),this.Fa(b,c,f,h.a()))};function qh(){}var rh={};v["rainbow.function.interpreted.optimise.Bind_A_Oother"]=rh;qh.prototype=new V;qh.prototype.J=qh;qh.prototype.className="Bind_A_Oother";
rh.va=function(b,c,d){c=Z(new qh,b,c,d);d=[];b.b().a().b().b().a().g(d);c.Hc=x(d);return c};qh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);E(b,new sh(c,this.n,this));S(b,c,this.Hc)};qh.prototype.Fa=function(b,c,d,f){var h=0,j;for(j in this.p)h++;c=(new w).o(h,c);c.add(d);c.add(f);S(b,c,this.n)};qh.prototype.D=function(b,c,d){d instanceof z&&Vg(this,d);var f=d.a(),h=d.b();h instanceof z?this.w(b,c,f):(Ug(this,h.b(),d),this.Fa(b,c,f,h.a()))};function th(){}
var uh={};v["rainbow.function.interpreted.optimise.Bind_A_R"]=uh;th.prototype=new V;th.prototype.J=th;th.prototype.className="Bind_A_R";uh.va=function(b,c,d){return Z(new th,b,c,d)};th.prototype.la=function(){g(t(new u,"error: expected at least 1 arg, got none"))};th.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d.a());c.add(d.b());S(b,c,this.n)};function vh(){}var wh={};v["rainbow.function.interpreted.optimise.Bind_D_A_A_A_d"]=wh;vh.prototype=new V;
vh.prototype.J=vh;vh.prototype.className="Bind_D_A_A_A_d";wh.va=function(b,c,d){return Z(new vh,b,c,d)};vh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);d instanceof B||g(new TypeError);c.add(d.a());d=d.b();d instanceof B||g(new TypeError);c.add(d.a());d=d.b();d instanceof B||g(new TypeError);c.add(d.a());S(b,c,this.n)};
vh.prototype.D=function(b,c,d){try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 1 arg, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())};function xh(){}var yh={};v["rainbow.function.interpreted.optimise.Bind_D_A_A_d"]=yh;xh.prototype=new V;xh.prototype.J=xh;xh.prototype.className="Bind_D_A_A_d";yh.va=function(b,c,d){return Z(new xh,b,c,d)};
xh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);d instanceof B||g(new TypeError);c.add(d.a());d=d.b();d instanceof B||g(new TypeError);c.add(d.a());S(b,c,this.n)};xh.prototype.D=function(b,c,d){Ug(this,d.b(),d);this.w(b,c,d.a())};function zh(){}var Ah={};v["rainbow.function.interpreted.optimise.Bind_Obound"]=Ah;zh.prototype=new V;zh.prototype.J=zh;zh.prototype.className="Bind_Obound";
Ah.va=function(b,c,d){c=Z(new zh,b,c,d);b=b.a();b instanceof B||g(new TypeError);b=b.b().b().a();b instanceof U||g(new TypeError);c.kd=b;return c};zh.prototype.la=function(b,c){var d=0,f;for(f in this.p)d++;c=(new w).o(d,c);c.add(this.kd.v(c));S(b,c,this.n)};zh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);S(b,c,this.n)};
zh.prototype.D=function(b,c,d){if(d instanceof z)this.la(b,c);else{try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())}};function Bh(){}var Ch={};v["rainbow.function.interpreted.optimise.Bind_Oliteral"]=Ch;Bh.prototype=new V;Bh.prototype.J=Bh;Bh.prototype.className="Bind_Oliteral";
Ch.va=function(b,c,d){c=Z(new Bh,b,c,d);c.V=b.a().b().b().a();b=b.a().b().a();b instanceof L||g(new TypeError);if(c.nb(b,c.V))b=c.pb(b,c.V,m),b instanceof V||g(new TypeError),c.aa=b;return c};Bh.prototype.la=function(b,c){if(this.aa!==l)this.aa.la(b,c);else{var d=0,f;for(f in this.p)d++;c=(new w).o(d,c);c.add(this.V);S(b,c,this.n)}};Bh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);S(b,c,this.n)};
Bh.prototype.D=function(b,c,d){if(d instanceof z)this.la(b,c);else{try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())}};function Dh(){}var Eh={};v["rainbow.function.interpreted.optimise.Bind_Oother"]=Eh;Dh.prototype=new V;Dh.prototype.J=Dh;Dh.prototype.className="Bind_Oother";Eh.va=function(b,c,d){c=Z(new Dh,b,c,d);c.V=b.a().b().b().a();b=[];c.V.g(b);c.Hc=x(b);return c};
Dh.prototype.la=function(b,c){var d=0,f;for(f in this.p)d++;c=(new w).o(d,c);E(b,new sh(c,this.n,this));S(b,c,this.Hc)};Dh.prototype.w=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);S(b,c,this.n)};Dh.prototype.D=function(b,c,d){if(d instanceof z)this.la(b,c);else{try{d.b().Pa()}catch(f){f instanceof Ha||g(f),g(t(new u,"expected 0 or 1 args, got extra "+d.b()+" calling "+this))}this.w(b,c,d.a())}};function Fh(){}var Gh={};v["rainbow.function.interpreted.optimise.Bind_R"]=Gh;
Fh.prototype=new V;Fh.prototype.J=Fh;Fh.prototype.className="Bind_R";Gh.va=function(b,c,d){return Z(new Fh,b,c,d)};Fh.prototype.D=function(b,c,d){var f=0,h;for(h in this.p)f++;c=(new w).o(f,c);c.add(d);S(b,c,this.n)};function Hh(){}var Ih={};v["rainbow.function.interpreted.optimise.stack.Stack_A"]=Ih;Hh.prototype=new bh;Hh.prototype.J=Hh;Hh.prototype.className="Stack_A";Ih.Sa=function(b){return Ih.fa(b.z,b.p,ch(b.p,b.body))};Ih.fa=function(b,c,d){return Z(new Hh,b,c,d)};
Hh.prototype.t=function(b,c){T(b,l,this.n,[c])};Hh.prototype.w=function(b,c,d){T(b,c,this.n,[d])};Hh.prototype.d=function(b,c){Xg(this,1,c);this.t(b,c.a())};Hh.prototype.D=function(b,c,d){Xg(this,1,d);this.w(b,c,d.a())};function Jh(){}var Kh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A"]=Kh;Jh.prototype=new bh;Jh.prototype.J=Jh;Jh.prototype.className="Stack_A_A";Kh.Sa=function(b){return Kh.fa(b.z,b.p,ch(b.p,b.body))};Kh.fa=function(b,c,d){return Z(new Jh,b,c,d)};
Jh.prototype.U=function(b,c,d){T(b,l,this.n,[c,d])};Jh.prototype.Fa=function(b,c,d,f){T(b,c,this.n,[d,f])};Jh.prototype.d=function(b,c){Xg(this,2,c);this.U(b,c.a(),c.b().a())};Jh.prototype.D=function(b,c,d){Xg(this,2,d);this.Fa(b,c,d.a(),d.b().a())};function Lh(){}var Mh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_A"]=Mh;Lh.prototype=new bh;Lh.prototype.J=Lh;Lh.prototype.className="Stack_A_A_A";Mh.Sa=function(b){return Mh.fa(b.z,b.p,ch(b.p,b.body))};
Mh.fa=function(b,c,d){return Z(new Lh,b,c,d)};Lh.prototype.Xa=function(b,c,d,f){T(b,l,this.n,[c,d,f])};Lh.prototype.Pb=function(b,c,d,f,h){T(b,c,this.n,[d,f,h])};Lh.prototype.d=function(b,c){Xg(this,3,c);this.Xa(b,c.a(),c.b().a(),c.b().b().a())};Lh.prototype.D=function(b,c,d){Xg(this,3,d);this.Pb(b,c,d.a(),d.b().a(),d.b().b().a())};function Nh(){}var Oh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_A_A"]=Oh;Nh.prototype=new bh;Nh.prototype.J=Nh;Nh.prototype.className="Stack_A_A_A_A";
Oh.Sa=function(b){return Oh.fa(b.z,b.p,ch(b.p,b.body))};Oh.fa=function(b,c,d){return Z(new Nh,b,c,d)};Nh.prototype.d=function(b,c){Xg(this,4,c);var d=c.a(),f=c.b().a(),h=c.b().b().a(),j=c.b().b().b().a();T(b,l,this.n,[d,f,h,j])};Nh.prototype.D=function(b,c,d){Xg(this,4,d);var f=d.a(),h=d.b().a(),j=d.b().b().a(),d=d.b().b().b().a();T(b,c,this.n,[f,h,j,d])};function Ph(){}var Qh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_A_R"]=Qh;Ph.prototype=new bh;Ph.prototype.J=Ph;
Ph.prototype.className="Stack_A_A_R";Qh.Sa=function(b){return Qh.fa(b.z,b.p,ch(b.p,b.body))};Qh.fa=function(b,c,d){return Z(new Ph,b,c,d)};Ph.prototype.D=function(b,c,d){T(b,c,this.n,[d.a(),d.b().a(),d.b().b()])};function Rh(){}var Sh={};v["rainbow.function.interpreted.optimise.stack.Stack_A_R"]=Sh;Rh.prototype=new bh;Rh.prototype.J=Rh;Rh.prototype.className="Stack_A_R";Sh.Sa=function(b){return Sh.fa(b.z,b.p,ch(b.p,b.body))};Sh.fa=function(b,c,d){return Z(new Rh,b,c,d)};
Rh.prototype.D=function(b,c,d){T(b,c,this.n,[d.a(),d.b()])};function Th(){}var Uh={};v["rainbow.function.interpreted.optimise.stack.Stack_R"]=Uh;Th.prototype=new bh;Th.prototype.J=Th;Th.prototype.className="Stack_R";Uh.Sa=function(b){return Uh.fa(b.z,b.p,ch(b.p,b.body))};Uh.fa=function(b,c,d){return Z(new Th,b,c,d)};Th.prototype.D=function(b,c,d){T(b,c,this.n,[d])};function Vh(){}var Wh={};v["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_A_A_d"]=Wh;Vh.prototype=new bh;Vh.prototype.J=Vh;
Vh.prototype.className="Stack_D_A_A_A_A_d";Wh.Sa=function(b){return Wh.fa(b.z,b.p,ch(b.p,b.body))};Wh.fa=function(b,c,d){return Z(new Vh,b,c,d)};Vh.prototype.t=function(b,c){T(b,l,this.n,[c.a(),c.b().a(),c.b().b().a(),c.b().b().b().a()])};Vh.prototype.w=function(b,c,d){T(b,c,this.n,[d.a(),d.b().a(),d.b().b().a(),d.b().b().b().a()])};Vh.prototype.d=function(b,c){Xg(this,1,c);this.t(b,c.a())};Vh.prototype.D=function(b,c,d){Xg(this,1,d);this.w(b,c,d.a())};function Xh(){}var Yh={};
v["rainbow.function.interpreted.optimise.stack.Stack_D_A_A_d"]=Yh;Xh.prototype=new bh;Xh.prototype.J=Xh;Xh.prototype.className="Stack_D_A_A_d";Yh.Sa=function(b){return Yh.fa(b.z,b.p,ch(b.p,b.body))};Yh.fa=function(b,c,d){return Z(new Xh,b,c,d)};Xh.prototype.t=function(b,c){T(b,l,this.n,[c.a(),c.b().a()])};Xh.prototype.w=function(b,c,d){T(b,c,this.n,[d.a(),d.b().a()])};Xh.prototype.d=function(b,c){Xg(this,1,c);this.t(b,c.a())};Xh.prototype.D=function(b,c,d){Xg(this,1,d);this.w(b,c,d.a())};
function Zh(){}var $h={};v["rainbow.function.interpreted.optimise.stack.Stack_A_Oliteral"]=$h;Zh.prototype=new bh;Zh.prototype.J=Zh;Zh.prototype.className="Stack_A_Oliteral";$h.Sa=function(b){var c=new Zh,d=ch(b.p,b.body),b=Z(c,b.z,b.p,d);b.V=b.z.b().a().b().b().a();c=b.z.b().a().b().a();c instanceof L||g(new TypeError);if(b.nb(c,b.V))c=b.pb(c,b.V,m),c instanceof V||g(new TypeError),b.aa=c;return b};$h.fa=function(b,c,d){c=Z(new Zh,b,c,d);c.V=b.a().b().b().a();return c};r=Zh.prototype;
r.t=function(b,c){this.aa!==l?this.aa.t(b,c):T(b,l,this.n,[c,this.V])};r.U=function(b,c,d){T(b,l,this.n,[c,d])};r.w=function(b,c,d){this.aa!==l?this.aa.w(b,c,d):T(b,c,this.n,[d,this.V])};r.Fa=function(b,c,d,f){T(b,c,this.n,[d,f])};r.d=function(b,c){if(c instanceof z)Vg(this,c);else{var d=c.a();c.b()instanceof z?this.t(b,d):this.U(b,d,c.b().a())}};r.D=function(b,c,d){if(d instanceof z)Vg(this,d);else{var f=d.a();d.b()instanceof z?this.w(b,c,f):this.Bd(b,c,f,d.b().a())}};function ai(){}var bi={};
v["rainbow.function.interpreted.optimise.stack.Stack_Oliteral"]=bi;ai.prototype=new bh;ai.prototype.J=ai;ai.prototype.className="Stack_Oliteral";bi.Sa=function(b){var c=new ai,d=ch(b.p,b.body),b=Z(c,b.z,b.p,d);b.V=b.z.a().b().b().a();c=b.z.a().b().a();c instanceof L||g(new TypeError);if(b.nb(c,b.V))c=b.pb(c,b.V,m),c instanceof V||g(new TypeError),b.aa=c;return b};bi.fa=function(b,c,d){c=Z(new ai,b,c,d);c.V=b.a().b().b().a();return c};r=ai.prototype;
r.ua=function(b){this.aa!==l?this.aa.ua(b):T(b,l,this.n,[this.V])};r.t=function(b,c){T(b,l,this.n,[c])};r.la=function(b,c){this.aa!==l?this.aa.w(b,c):T(b,c,this.n,[this.V])};r.w=function(b,c,d){T(b,c,this.n,[d])};r.d=function(b,c){c instanceof z?this.ua(b):(Xg(this,1,c),this.t(b,c.a()))};r.D=function(b,c,d){d instanceof z?this.la(b):(Xg(this,1,d),this.w(b,c,d.a()))};function ci(){X(this,"macex")}ci.prototype=new W;ci.prototype.className="Macex";
ci.prototype.d=function(b,c){if(c instanceof z)D(b,C);else{var d=c.a();if(d instanceof B){var f=d.a();f instanceof L?f.bound()?(f=f.value(),f=oc(f),f===l?D(b,d):(d=d.b(),d instanceof B||g(new TypeError),E(b,new di(this)),Ia(f,b,d))):D(b,d):D(b,d)}else D(b,d)}};function di(b){O(this);this.l(b)}di.prototype=new M;di.prototype.className="Macex.Again";di.prototype.c=function(b){this.xa.d(b,A(new B,R(b),C))};function ei(){X(this,"uniq")}ei.prototype=new W;ei.prototype.className="Uniq";
ei.prototype.ua=function(b){D(b,K("gs"+ ++fi))};ei.prototype.i=function(b){try{b.Pa()}catch(c){c instanceof Ha||g(t(new u,"uniq: expects no args, got "+b))}return K("gs"+ ++fi)};var fi=0;function gi(){X(this,"details")}gi.prototype=new W;gi.prototype.className="Details";gi.prototype.i=function(b){var c;b=b.a();try{b instanceof Ba||g(new TypeError),c=b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+this+" expected an exception, got "+b))}return c.message()};
function hi(){X(this,"err")}hi.prototype=new W;hi.prototype.className="Err";hi.prototype.i=function(b){g(t(new u,Vb(b.a(),this).value()))};function ii(){X(this,"on-err")}ii.prototype=new W;ii.prototype.className="OnErr";ii.prototype.d=function(b,c){var d=new Xc(c.a(),b.N);d.l(this);E(b,d);c.b().a().d(b,C)};function ji(){X(this,"protect");this.ud=new ki(this)}ji.prototype=new W;ji.prototype.className="Protect";function ki(b){this.sd=b}ki.prototype=new tf;ki.prototype.Yb=function(b){b.l(this.sd)};
ji.prototype.d=function(b,c){var d=A(new B,new $c(c.b().a()),A(new B,new ed("clear up 'protect/after' return value"),C));d.k(this.ud);S(b,l,d);c.a().d(b,C)};function li(){X(this,"apply")}li.prototype=new W;r=li.prototype;r.className="Apply";r.ua=function(){g(t(new u,"apply: expects at least 2 args, got none"))};r.t=function(b,c){g(t(new u,"apply: expects at least 2 args, got "+c))};r.U=function(b,c,d){d instanceof B||g(new TypeError);c.d(b,d)};r.Xa=function(b,c,d,f){c.d(b,A(new B,d,f))};
r.d=function(b,c){var d=c.a(),f=c.b();f instanceof B||g(new TypeError);d.d(b,mi(this,f))};function mi(b,c){return c.b()instanceof z?vb(c.a(),b):A(new B,c.a(),mi(b,vb(c.b(),b)))}function ni(){X(this,"eval")}ni.prototype=new W;ni.prototype.className="Eval";ni.prototype.d=function(b,c){E(b,new oi(this));Pf(b,c.a(),[])};function oi(b){O(this);this.l(b)}oi.prototype=new M;oi.prototype.className="Eval.ReduceAndExecute";oi.prototype.c=function(b){var c=[];R(b).reduce().g(c);S(b,l,x(c))};
function pi(){X(this,"ssexpand")}pi.prototype=new W;pi.prototype.className="SSExpand";pi.prototype.i=function(b){return Uf(hb(b.a(),this))};
function Uf(b){b=b.name();if(/:/.test(b)||/^~/.test(b)){b=b.split(":");if(1===b.length)b=qi(b[0]);else{for(var c=[K("compose")],d=0,f=b.length;d<f;d++)c.push(qi(b[d]));b=pb(c,C)}return b}if(Ng(b)){c=[K("andf")];b=ri(b);d=0;for(f=b.length;d<f;d++){var h=Qa(b[d]);h instanceof L||g(new TypeError);c.push(si(h))}return x(c)}if(/[.!]/.test(b)){for(var c=b.replace(/#/g,"#h").replace(/%/g,"#p").replace(/([.!])/g,"%$1%").split(/%+/),d=[],f=m,h=0,j=c.length;h<j;h++)if(""!==c[h]){var q=Qa(c[h].replace(/#p/g,
"%").replace(/#h/g,"#"));q===Va||q===jb?(f&&g(t(new u,"Bad syntax "+b)),f=k):f=m;d.unshift(q)}f&&d.unshift(K("#<eof>"));return ti(d,0)}g(t(new u,"Unknown syntax "+b))}function ri(b){if(0===b.length)return[""];if(b.charCodeAt(0)===Og)return b=ri(b.substring(1)),b[0]=Pg+b[0],b;return b.charCodeAt(b.length-1)===Og?(b=ri(b.substring(0,b.length-1)),b[b.length-1]+=Pg,b):b.split(Pg)}
function ti(b,c){var d=si(b[c++]),f=l;c<b.length&&(f=b[c++],f instanceof L||g(new TypeError));d=f===jb?x([K("quote"),d]):d;return c<b.length?x([ti(b,c),d]):f!==l?x([K("get"),d]):d}function ui(b){try{return Ma(b)}catch(c){c instanceof Da||g(c),g(t(new u,"Couldn't read value of symbol: "+b,c))}}function si(b){if(b instanceof z)return b;b instanceof L||g(new TypeError);return ui(b.name())}function qi(b){return/^~/.test(b)?x([K("complement"),ui(b.substring(1))]):ui(b)}var Pg="&",Og=38;
function vi(){X(this,"ssyntax")}vi.prototype=new W;vi.prototype.className="SSyntax";vi.prototype.i=function(b){return b.a()instanceof L&&Tf(b.a())?$a:C};function Tf(b){var c;c=b.name();if(!(c=/:/.test(c)||/^~/.test(c)))if(!(c=Ng(b.name())))c=/[.!]/.test(b.name());return c}function wi(){X(this,"java-debug")}wi.prototype=new W;wi.prototype.className="JavaDebug";wi.prototype.i=function(b){return b.a()};function xi(){X(this,"java-invoke")}xi.prototype=new W;xi.prototype.className="JavaInvoke";
xi.prototype.i=function(b){var c;var d=b.a();try{d instanceof uc||g(new TypeError),c=d}catch(f){f instanceof TypeError||g(f),g(t(new u,"Wrong argument type: "+this+" expected a java-object, got "+d))}var d=hb(b.b().a(),this).name(),h=b.b().b().a();h instanceof B||g(new TypeError);b=yc;c=c.Gc;var j=Object(c)[d];"[object Function]"!==Object.prototype.toString.call(j)&&g(t(new u,"Field "+d+" is not a method on "+c));d=j.apply(c,wc(h));return b(d)};function yi(){X(this,"car")}yi.prototype=new W;
yi.prototype.className="Car";yi.prototype.t=function(b,c){D(b,c.a())};yi.prototype.i=function(b){Mg(b,1,this.className);return b.a().a()};function zi(){X(this,"cdr")}zi.prototype=new W;zi.prototype.className="Cdr";zi.prototype.t=function(b,c){D(b,c.b())};zi.prototype.i=function(b){Mg(b,1,this.className);return b.a().b()};function Ai(){X(this,"cons")}Ai.prototype=new W;Ai.prototype.className="Cons";Ai.prototype.U=function(b,c,d){D(b,A(new B,c,d))};
Ai.prototype.i=function(b){Mg(b,2,this.className);return A(new B,b.a(),b.b().a())};function Bi(){X(this,"len")}Bi.prototype=new W;Bi.prototype.className="Len";Bi.prototype.i=function(b){Rb(b,this.className,1);return new Q(b.a().ka(),1)};function Ci(){X(this,"newstring")}Ci.prototype=new W;Ci.prototype.className="NewString";
Ci.prototype.i=function(b){var c=b.a();c instanceof P||g(new TypeError);var d=Mb;b.b()instanceof z||(d=b.b().a(),d instanceof Gb||g(new TypeError));for(var b=[],f=0;f<c.I();f++)b.push(d.value());return G(b.join(""))};function Di(){X(this,"scar")}Di.prototype=new W;Di.prototype.className="Scar";Di.prototype.U=function(b,c,d){D(vm,c.Wb(d))};Di.prototype.i=function(b){return b.a().Wb(b.b().a())};function Ei(){X(this,"scdr")}Ei.prototype=new W;Ei.prototype.className="Scdr";
Ei.prototype.i=function(b){var c=b.a();c instanceof B||g(new TypeError);b=b.b().a();c.Kc(b);return b};function Fi(){X(this,"acos")}Fi.prototype=new W;Fi.prototype.className="Acos";Fi.prototype.i=function(b){Rb(b,this.className,1);b=Math.acos(kb(b.a(),this).F());return new I(b)};function Gi(){X(this,"+")}Gi.prototype=new W;r=Gi.prototype;r.className="Add";r.ua=function(b){D(b,kc)};r.t=function(b,c){D(b,c)};r.U=function(b,c,d){D(b,c.add(d))};r.Xa=function(b,c,d,f){D(b,c.add(d).add(f))};
r.i=function(b){if(b instanceof z)return kc;for(var c=b.a(),b=b.b();!(b instanceof z);)c=c.add(b.a()),b=b.b();return c};function Hi(){X(this,"asin")}Hi.prototype=new W;Hi.prototype.className="Asin";Hi.prototype.i=function(b){Rb(b,this.className,1);b=Math.asin(kb(b.a(),this).F());return new I(b)};function Ii(){X(this,"atan")}Ii.prototype=new W;Ii.prototype.className="Atan";Ii.prototype.i=function(b){Rb(b,this.className,1);b=Math.atan(kb(b.a(),this).F());return new I(b)};
function Ji(){X(this,"complex-parts")}Ji.prototype=new W;Ji.prototype.className="ComplexParts";Ji.prototype.i=function(b){Rb(b,this.className,1);b=dc(b.a(),this);return x([new I(b.X),new I(b.P)])};function Ki(){X(this,"cos")}Ki.prototype=new W;Ki.prototype.className="Cosine";Ki.prototype.i=function(b){Rb(b,this.className,1);b=Math.cos(kb(b.a(),this).F());return new I(b)};function Li(){X(this,"/")}Li.prototype=new W;Li.prototype.className="Divide";
Li.prototype.i=function(b){b instanceof z&&g(t(new u,"Function `/` expected at least 1 arg"));return Mi(b).Ac(b)};function Ni(){X(this,"expt")}Ni.prototype=new W;Ni.prototype.className="Expt";Ni.prototype.i=function(b){Rb(b,this.className,2);var c=b.a();c instanceof P||g(new TypeError);b=b.b().a();b instanceof P||g(new TypeError);if(c instanceof J)return gc(c,b);if(b instanceof J)return gc(new J(c.F(),0),b);c=c.F();b=b.F();return new I(Math.pow(c,b))};function Oi(){X(this,"log")}Oi.prototype=new W;
Oi.prototype.className="Logarithm";Oi.prototype.i=function(b){Rb(b,this.className,1);b=kb(b.a(),this);return b instanceof J?b.log():new I(Math.log(b.F()))};function Pi(){X(this,"make-complex")}Pi.prototype=new W;Pi.prototype.className="MakeComplex";Pi.prototype.i=function(b){Rb(b,this.className,2);var c=kb(b.a(),this),b=kb(b.b().a(),this);return new J(c.F(),b.F())};function Qi(){for(;;){var b=Math.floor(9007199254740992*Math.pd());if(9007199254740992>b)return b}}
function Mi(b){if(b instanceof z)return Ri;if(b.a()instanceof I)return Si;if(b.a()instanceof J)return complexOps;b.b()instanceof B||g(new TypeError);return Mi(b.b())}function Ti(){}Ti.prototype.rc=i;Ti.prototype.multiply=i;Ti.prototype.Ac=i;function Ui(){}Ui.prototype=new Ti;Ui.prototype.rc=function(b){return Ta(Vi(this,b))};function Vi(b,c){if(c instanceof z)return 0;var d=c.a();d instanceof P||g(new TypeError);var d=d.F(),f=c.b();f instanceof B||g(new TypeError);return d+Vi(b,f)}
Ui.prototype.multiply=function(b){return Ta(Wi(this,b))};Ui.prototype.Ac=function(b){var c=b.b(),d=b.a();d instanceof P||g(new TypeError);c=c instanceof z?1/d.F():d.F();b=b.b();b instanceof B||g(new TypeError);return Ta(c/Wi(this,b))};function Wi(b,c){if(c instanceof z)return 1;var d=c.a();d instanceof P||g(new TypeError);var d=d.F(),f=c.b();f instanceof B||g(new TypeError);f=Wi(b,f);return d*f}var Si=new Ui;function Xi(){}Xi.prototype=new Ti;
Xi.prototype.rc=function(b){if(b instanceof z)return kc;var c=b.a();c instanceof Q||g(new TypeError);b=b.b();b instanceof B||g(new TypeError);return c.Tb(this.rc(b))};Xi.prototype.multiply=function(b){if(b instanceof z)return lc;var c=b.a();c instanceof Q||g(new TypeError);b=b.b();b instanceof B||g(new TypeError);return ic(c,this.multiply(b))};
Xi.prototype.Ac=function(b){var c=b.b(),d=b.a();d instanceof Q||g(new TypeError);c=c instanceof z?new Q(d.R,d.ea):d;b=b.b();b instanceof B||g(new TypeError);b=this.multiply(b);b=new Q(b.R,b.ea);return ic(c,b)};var Ri=new Xi;function Yi(){X(this,"mod")}Yi.prototype=new W;Yi.prototype.className="Mod";Yi.prototype.U=function(b,c,d){c instanceof P||g(new TypeError);d instanceof P||g(new TypeError);D(b,c.Vc(d))};Yi.prototype.d=function(b,c){Rb(c,this.className,2);this.U(b,c.a(),c.b().a())};
function Zi(){X(this,"*")}Zi.prototype=new W;r=Zi.prototype;r.className="Multiply";r.ua=function(b){D(b,lc)};r.t=function(b,c){D(b,c)};r.U=function(b,c,d){D(b,c.multiply(d))};r.Xa=function(b,c,d,f){D(b,c.multiply(d).multiply(f))};r.i=function(b){if(b instanceof z)return lc;for(var c=b.a(),b=b.b();!(b instanceof z);)c=c.multiply(b.a()),b=b.b();return c};function $i(){X(this,"polar-coordinates")}$i.prototype=new W;$i.prototype.className="PolarCoordinates";
$i.prototype.i=function(b){Rb(b,this.className,1);b=dc(b.a(),this);return x([new I(Math.sqrt(b.X*b.X+b.P*b.P)),new I(Math.atan2(b.P,b.X))])};function aj(){X(this,"quotient")}aj.prototype=new W;aj.prototype.className="Quotient";aj.prototype.i=function(b){Mg(b,2,this.className);var c=lb(b.a(),this),d=lb(b.b().a(),this);(!c.ma()||!d.ma())&&g(t(new u,"Type error: "+this+" : expected integer, got "+b));b=c.I()/d.I();return H(0>b?Math.ceil(b):Math.floor(b))};function bj(){X(this,"rand")}bj.prototype=new W;
bj.prototype.className="Rand";bj.prototype.i=function(b){if(b instanceof z)return new I(Math.pd());var c=b.a();c instanceof P||g(new TypeError);c.ma()||g(t(new u,"rand: requires one exact integer argument, got "+b));return new Q(Math.abs(Qi()%c.I()),1)};function cj(){X(this,"sin")}cj.prototype=new W;cj.prototype.className="Sine";cj.prototype.i=function(b){Rb(b,this.className,1);b=Math.sin(kb(b.a(),this).F());return new I(b)};function dj(){X(this,"sqrt")}dj.prototype=new W;dj.prototype.className="Sqrt";
dj.prototype.t=function(b,c){D(b,c.sqrt())};dj.prototype.d=function(b,c){Mg(c,1,this.className);this.t(b,c.a())};function ej(){X(this,"-")}ej.prototype=new W;r=ej.prototype;r.className="Subtract";r.t=function(){g(t(new u,"- : expected at least 1 arg"))};r.t=function(b,c){c instanceof P||g(new TypeError);D(b,c.tb())};r.U=function(b,c,d){d instanceof P||g(new TypeError);D(b,c.add(d.tb()))};
r.i=function(b){b instanceof z&&g(t(new u,"Function `-` expected at least 1 arg"));var c=b.a();c instanceof P||g(new TypeError);c=c.tb();b=b.b();b instanceof B||g(new TypeError);b instanceof z?b=c:(b=A(new B,c,b),b=Mi(b).rc(b).tb());return b};function fj(){X(this,"tan")}fj.prototype=new W;fj.prototype.className="Tangent";fj.prototype.i=function(b){Rb(b,this.className,1);b=Math.tan(kb(b.a(),this).F());return new I(b)};function gj(){X(this,"trunc")}gj.prototype=new W;gj.prototype.className="Trunc";
gj.prototype.i=function(b){Rb(b,this.className,1);b=b.a();b instanceof P||g(new TypeError);b=b.F();return new Q(Math.floor(b),1)};function hj(){X(this,"bound")}hj.prototype=new W;hj.prototype.className="Bound";hj.prototype.ua=function(){g(t(new u,"bound: requires 1 arg"))};hj.prototype.t=function(b,c){c instanceof L||g(new TypeError);D(b,Db(c.bound()))};hj.prototype.i=function(b){Rb(b,this.className,1);b=hb(b.a(),this);return Db(b.bound())};function ij(){X(this,"exact")}ij.prototype=new W;
ij.prototype.className="Exact";ij.prototype.i=function(b){b=kb(b.a(),this);return Db(b instanceof Q&&b.ma())};function jj(){X(this,">")}jj.prototype=new W;r=jj.prototype;r.className="GreaterThan";r.ua=function(b){D(b,$a)};r.t=function(b){D(b,$a)};r.U=function(b,c,d){D(b,0>=c.ra(d)?C:$a)};r.i=function(b){if(2>b.ka())return $a;var c=b.a(),b=b.b();for(b instanceof B||g(new TypeError);!(b instanceof z);){var d=b.a();if(0>=c.ra(d))return C;c=d;b=b.b();b instanceof B||g(new TypeError)}return $a};
function kj(){X(this,"is")}kj.prototype=new W;r=kj.prototype;r.className="Is";r.ua=function(b){D(b,$a)};r.t=function(b){D(b,$a)};r.U=function(b,c,d){D(b,Db(c.Ha(d)))};r.i=function(b){return lj(this,b.a(),b.b())};function lj(b,c,d){return d instanceof z?$a:!c.Ha(d.a())?C:lj(b,c,d.b())}function mj(){X(this,"<")}mj.prototype=new W;r=mj.prototype;r.className="LessThan";r.ua=function(b){D(b,$a)};r.t=function(b){D(b,$a)};r.U=function(b,c,d){D(b,0>c.ra(d)?$a:C)};
r.i=function(b){var c=b.a(),b=b.b();for(b instanceof B||g(new TypeError);!(b instanceof z);){var d=b.a();if(0<=c.ra(d))return C;c=d;b=b.b();b instanceof B||g(new TypeError)}return $a};function nj(){X(this,"rainbow-debug")}nj.prototype=new W;nj.prototype.className="RainbowDebug";nj.prototype.d=function(b){Qc(b,Hf);D(b,K(this.da))};function oj(){X(this,"rainbow-profile")}oj.prototype=new W;oj.prototype.className="RainbowProfile";oj.prototype.ua=function(b){this.profile(b);D(b,C)};
oj.prototype.t=function(b,c){c instanceof rc||g(new TypeError);this.profile(c);D(b,C)};oj.prototype.profile=function(b){Qc(b,Mf)};function pj(){X(this,"rainbow-profile-report")}pj.prototype=new W;pj.prototype.className="RainbowProfileReport";pj.prototype.ua=function(b){D(b,this.qd(b))};pj.prototype.t=function(b,c){c instanceof rc||g(new TypeError);D(b,this.qd(b))};function qj(){X(this,"current-gc-milliseconds")}qj.prototype=new W;qj.prototype.className="CurrentGcMilliseconds";
qj.prototype.d=function(b){D(b,H(1))};function rj(){X(this,"current-process-milliseconds")}rj.prototype=new W;rj.prototype.className="CurrentProcessMilliseconds";rj.prototype.d=function(b){D(b,H(1))};function sj(){X(this,"declare")}sj.prototype=new W;sj.prototype.className="Declare";sj.prototype.U=function(b,c,d){c===tj?(c=Qf,Qf=d,D(b,c)):D(b,C)};sj.prototype.d=function(b,c){this.U(b,c.a(),c.b().a())};var tj=K("atstrings");function uj(){X(this,"msec")}uj.prototype=new W;uj.prototype.className="MSec";
uj.prototype.i=function(){return H((new Date).getTime())};function vj(){X(this,"seconds")}vj.prototype=new W;vj.prototype.className="Seconds";vj.prototype.i=function(){var b=(new Date).getTime()/1E3;return H(0>b?Math.ceil(b):Math.floor(b))};function wj(){X(this,"maptable")}wj.prototype=new W;wj.prototype.className="MapTable";wj.prototype.U=function(b,c,d){D(b,d);d instanceof Fa||g(new TypeError);D(b,Bc(d));c=new hd(c);c.l(this);E(b,c)};
wj.prototype.d=function(b,c){Mg(c,2,this.className);this.U(b,c.a(),c.b().a())};function xj(){X(this,"sref")}xj.prototype=new W;xj.prototype.className="Sref";xj.prototype.Xa=function(b,c,d,f){D(b,c.qc(d,f))};xj.prototype.d=function(b,c){Mg(c,3,this.className);this.Xa(b,c.a(),c.b().a(),c.b().b().a())};function yj(){X(this,"table")}yj.prototype=new W;yj.prototype.className="Table";
yj.prototype.d=function(b,c){var d=new Fa;D(b,d);if(!(c instanceof z)){var f=new ed("table-initialiser");f.l(this);E(b,f);c.a().d(b,x([d]))}};function zj(){X(this,"atomic-invoke")}zj.prototype=new W;zj.prototype.className="AtomicInvoke";zj.prototype.t=function(b,c){for(;b!==Aj&&Aj!==l;);Aj=b;Bj++;var d=new Cj;d.l(this);E(b,d);c.d(b,C)};zj.prototype.d=function(b,c){this.t(b,c.a())};function Cj(){O(this)}Cj.prototype=new M;Cj.prototype.className="AtomicInvoke.ReleaseLock";
Cj.prototype.c=function(){Bj--;0===Bj&&(Aj=l)};var Aj=l,Bj=0;function Dj(){X(this,"break-thread")}Dj.prototype=new W;Dj.prototype.className="BreakThread";Dj.prototype.i=function(b){b=b.a();b instanceof rc||g(new TypeError);Qc(b,Jf);return C};function Ej(){X(this,"ccc")}Ej.prototype=new W;Ej.prototype.className="CCC";Ej.prototype.t=function(b,c){c instanceof z&&g(t(new u,"Can't ccc nil!"));var d=new Fj(b);c.t(b,d)};Ej.prototype.d=function(b,c){Rb(c,this.className,1);this.t(b,c.a())};
function Fj(b){this.Xb=b.copy();this.zd=m}Fj.prototype=new y;r=Fj.prototype;r.className="CCC.ContinuationWrapper";r.t=function(b,c){var d;a:{for(d=0;d<b.h;d++)if(b.G[d]!==this.Xb.G[d]){d-=1;break a}d=b.h}for(var f=[],h=[];d<b.h;)Ic(b).a().Ob&&(f.push(Ic(b)),h.push(b.ja[b.h])),b.h--;d=[f,h];this.Xb.copyTo(b);D(b,c);for(f=d[0].length-1;0<=f;f--)h=d[1][f],h instanceof w||g(new TypeError),d[0][f]instanceof B||g(new TypeError),S(b,h,instructions)};r.d=function(b,c){this.t(b,c.a())};r.type=function(){return Lg};
r.toString=function(){return"#<continuation ip:"+this.Xb.h+";ap:"+this.Xb.N+";VM#"+this.Xb.Lc+">"};function Gj(){X(this,"dead")}Gj.prototype=new W;Gj.prototype.className="Dead";Gj.prototype.d=function(b,c){var d=c.a();d instanceof rc||g(new TypeError);D(b,Db(d.dc))};function Hj(){X(this,"kill-thread")}Hj.prototype=new W;Hj.prototype.className="KillThread";Hj.prototype.d=function(b,c){var d=c.a();d instanceof rc||g(new TypeError);Qc(d,Jf);D(b,C)};function Ij(){X(this,"thread-local")}Ij.prototype=new W;
Ij.prototype.className="NewThreadLocal";Ij.prototype.i=function(){return new $b};function Jj(){X(this,"thread-local-ref")}Jj.prototype=new W;Jj.prototype.className="ThreadLocalGet";Jj.prototype.i=function(b){return bc(b.a(),this).get()};function Kj(){X(this,"thread-local-set")}Kj.prototype=new W;Kj.prototype.className="ThreadLocalSet";Kj.prototype.i=function(b){var c=bc(b.a(),this),b=b.b().a();c.set(b);return b};function Lj(){X(this,"annotate")}Lj.prototype=new W;Lj.prototype.className="Annotate";
Lj.prototype.i=function(b){var c=b.a(),b=b.b().a();return c===b.type()?b:new nc(c,b)};function Mj(){X(this,"coerce");Nj()}Mj.prototype=new W;Mj.prototype.className="Coerce";Mj.prototype.U=function(b,c,d){var f=c.type();if(f===d)D(b,c);else try{d instanceof L||g(new TypeError),f instanceof L||g(new TypeError),(d.Bb[f]||l).t(b,c)}catch(h){h instanceof Oj&&g(t(new u,"Can't coerce "+c+" to "+d)),g(t(new u,"Can't coerce "+c+" ( a "+c.type()+" ) to "+d,h))}};
Mj.prototype.Xa=function(b,c,d,f){var h=c.type();if(h===d)D(b,c);else try{d instanceof L||g(new TypeError),h instanceof L||g(new TypeError),(d.Bb[h]||l).U(b,c,f)}catch(j){j instanceof Oj&&g(t(new u,"Can't coerce "+c+" to "+d)),g(t(new u,"Can't coerce "+c+" ( a "+c.type()+" ) to "+d,j))}};Mj.prototype.d=function(b,c){c.Cb(2)?this.U(b,c.a(),c.b().a()):c.Cb(3)?this.Xa(b,c.a(),c.b().a(),c.b().b().a()):g(t(new u,"coerce expects 2 or 3 args, got "+c))};function Pj(){X(this,"rep")}Pj.prototype=new W;
Pj.prototype.className="Rep";Pj.prototype.i=function(b){var c=b.a(),d;if(c instanceof nc){b=b.a();try{b instanceof nc||g(new TypeError),d=b}catch(f){f instanceof TypeError||g(f),g(t(new u,"Wrong argument type: "+this+" expected a Tagged, got "+b))}d=d.xb}else d=c;return d};function Qj(){X(this,"type")}Qj.prototype=new W;Qj.prototype.className="Type";Qj.prototype.t=function(b,c){D(b,c.type())};Qj.prototype.i=function(b){Rb(b,this.className,1);return b.a().type()};
var Tb=K("string"),Rj=K("sym"),Sj=K("int"),Tj=K("num"),Uj=K("cons"),Vj=K("char");
function Nj(){ib(Uj,Tb,new Ub("string-cons",function(b){b instanceof Oa||g(new TypeError);for(var b=b.value(),c=[],d=0;d<b.length;d++)c.push(Pa(b.charCodeAt(d)));return x(c)}));ib(Tb,Uj,new Ub("cons-string",function(b){b instanceof B||g(new TypeError);for(var c=[];!(b instanceof z);)c.push(b.a().cb()),b=b.b(),b instanceof B||g(new TypeError);return G(c.join(""))}));ib(Tb,Sj,new Ub("int-string",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||g(new TypeError);b instanceof P||g(new TypeError);
var d;b instanceof J?d=G(b.toString()):(b instanceof I&&10!==c.I()&&g(new Oj),d=b instanceof Q?b.stringify(c):Wj(b,c));return d}));ib(Tb,Tj,new Ub("num-string",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||g(new TypeError);b instanceof P||g(new TypeError);var d;b instanceof J?d=G(b.toString()):(b instanceof I&&10!==c.I()&&g(new Oj),d=b instanceof Q?b.stringify(c):Wj(b,c));return d}));ib(Rj,Tb,new Ub("string-sym",function(b){b instanceof Oa||g(new TypeError);return Qa(b.value())}));
ib(Tb,Rj,new Ub("sym-string",function(b){return b instanceof z?G(""):G(b.cb())}));ib(Sj,Vj,new Ub("char-int",function(b){b instanceof Gb||g(new TypeError);b=b.value();return H(b)},function(b){return this.Kb(b)}));ib(Sj,Tj,new Ub("num-int",function(b){b instanceof P||g(new TypeError);return b.round()},function(b){return this.Kb(b)}));ib(Tj,Sj,new Ub("int-num",aa()));ib(Vj,Sj,new Ub("int-char",function(b){b instanceof P||g(new TypeError);b.ma()||g(new Oj);return Pa(b.I())}));ib(Tb,Vj,new Ub("char-string",
function(b){b instanceof Gb||g(new TypeError);b=b.value();return G(String.fromCharCode(b))}));ib(Rj,Vj,new Ub("char-sym",function(b){b instanceof Gb||g(new TypeError);b=b.value();return Qa(String.fromCharCode(b))}));ib(Tj,Tb,new Ub("string-num",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||g(new TypeError);b instanceof Oa||g(new TypeError);var d=b.value().toLowerCase();if("+inf.0"===d)d=new I(1/0);else if("-inf.0"===d)d=new I(-1/0);else if("+nan.0"===d)d=new I(0/0);else{var f;if(/i$/i.test(d))try{f=
cc()}catch(h){h instanceof Da||g(h),g(new Oj)}else/\./.test(d)||15>c.I()&&/.e./.test(d)?d=Xj(d,c.I()):/\//.test(d)?d=Yj(d,c.I()):(f=c.I(),d=H(parseInt(d,~~f))),f=d;d=f}return d}));ib(Sj,Tb,new Ub("string-int",function(b){return this.Ab(b,mc)},function(b,c){c instanceof P||g(new TypeError);b instanceof Oa||g(new TypeError);var d=b.value().toLowerCase();("+inf.0"===d||"-inf.0"===d||"+nan.0"===d||/i$/i.test(d))&&g(new Oj);if(/\./.test(d)||15>c.I()&&/.e./i.test(d))return d=Xj(d,c.I()),d instanceof I||
g(new TypeError),d.oc();if(/\//.test(d))return d=Yj(d,c.I()),d instanceof Q||g(new TypeError),d.oc();var f=c.I();return H(parseInt(d,~~f))}))}function Wj(b,c){if(10===c.I())return G(b.toString());var d=b.I().toString(~~c.I());return G(""+d+".0")}function Yj(b,c){var d=b.split(/\//g);2<d.length&&g(new Oj);return new Q(parseInt(d[0],~~c),parseInt(d[1],~~c))}
function Xj(b,c){var d=m;/^-/.test(b)&&(d=k,b=b.substring(1));b=b.toUpperCase();/E/.test(b)||(b+="E0");if(/\./.test(b))/^\./.test(b)&&(b="0"+b);else var f=b.split(/E/g),b=f[0]+".0E"+f[1];var f=b.split(/\./g),h=parseInt(f[0],~~c),f=f[1].split(/E/g);/^\+/.test(f[1])&&(f[1]=f[1].substring(1));f=(h+parseInt(f[0],~~c)/Math.pow(c,f[0].length))*Math.pow(c,parseInt(f[1],~~c));d&&(f=-f);return Ta(f)}function Ub(b,c,d){this.da=b;if(c!==i)this.Kb=c;if(d!==i)this.Ab=d}Ub.prototype=new y;r=Ub.prototype;
r.className="Typing.Coercion";r.type=function(){return K("fn")};r.Kb=function(){g(t(new u,"not implemented: "+name+".coerce 1 arg"))};r.Ab=function(){g(t(new u,"not implemented: "+name+".coerce 2 args"))};r.t=function(b,c){D(b,this.Kb(c))};r.U=function(b,c,d){D(b,this.Ab(c,d))};function Oj(){}Oj.prototype=Error();function Zj(b){this.wa=b}Zj.prototype=new Eb;r=Zj.prototype;r.className="Input";
r.mc=function(b,c){return this.wa.mc(function(c,f){return c?b(t(new u,"Cannot read byte from "+this,c)):f===l?b(l,C):b(l,H(f))},c)};function $j(b,c,d){return b.wa.nc(function(b,d){return b?c(t(new u,"reading character: "+b)):d===l?c(l,C):c(l,Pa(d))},d)}function ak(b,c,d,f){return Na(b.wa,function(b,f){return b?d(t(new u,"Can't parse input: "+b,b)):f===l?d(l,c):d(l,f)},f)}r.type=function(){return bk};r.qa=o("wa");r.close=function(){this.yd=k;this.wa.close()};
function ck(b,c){try{return b instanceof Zj||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected input-port, got "+b))}}var bk=K("input");function dk(b){this.lb=b}dk.prototype=new Eb;r=dk.prototype;r.className="Output";r.write=function(b){this.lb.ab(""+b)};r.type=function(){return ek};r.qa=o("lb");r.close=function(){this.lb.close()};r.uc=function(b){this.lb.uc(b)};
function fk(b,c){try{return b instanceof dk||g(new TypeError),b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+c+" expected output-port, got "+b))}}r.flush=function(){this.lb.flush()};var ek=K("output");
function sa(b){function c(){if(b.length<=h)return m;var c=b.charCodeAt(h++);f.push(c>>>8&255,c&255);return k}function d(){return 0!==f.length||c()?f.shift():l}var f=[],h=0;Zj.call(this,{mc:function(b){b(l,d());return k},nc:function(b){var c=d(),f=d();b(l,f===l?l:c<<8|f);return k},mb:function(b){b(l,2<=f.length||c()?f[0]<<8|f[1]:l);return k},close:n()})}sa.prototype=new Zj(i);sa.prototype.className="StringInputPort";
function gk(){var b=this;b.Sb=[];b.sb=l;dk.call(this,{ab:function(c){if(b.sb===l)b.Sb.push(c);else for(var d=0,f=c.length;d<f;d++){var h=c.charCodeAt(d);b.Sb.push(String.fromCharCode(b.sb<<8|h>>>8&255));b.sb=h&255}},uc:function(c){b.sb===l?b.sb=c:(b.Sb.push(String.fromCharCode(b.sb<<8|c)),b.sb=l)},close:n(),flush:n()})}gk.prototype=new dk(i);gk.prototype.className="StringOutputPort";gk.prototype.value=function(){var b=this.Sb.join("");this.Sb=[b];return G(b)};gk.prototype.toString=p("#<string-output-port>");
function hk(){this.lb=ka}hk.prototype=new dk(i);hk.prototype.className="IO.Anon_STD_OUT_";hk.prototype.close=n();hk.prototype.toString=p("IO.STD_OUT");var ik=new hk;function jk(){this.lb=la}jk.prototype=new dk(i);jk.prototype.className="IO.Anon_STD_ERR_";jk.prototype.close=n();jk.prototype.toString=p("IO.STD_ERR");var kk=new jk;function lk(){this.wa=ja}lk.prototype=new Zj(i);lk.prototype.className="IO.Anon_STD_IN_";lk.prototype.close=n();lk.prototype.toString=p("IO.STD_IN");
var mk={value:new lk},nk={value:ik};function ok(b,c){return b instanceof z?nk.value:fk(b,c)}function pk(b,c){return b instanceof z?mk.value:ck(b,c)}function sk(b){for(;!(b instanceof z);){var c=b.a();c instanceof Zj?c.close():c instanceof dk?c.close():c instanceof uc?c.close():g(t(new u,"close: expected Input or Output object; got "+c));b=b.b();b instanceof B||g(new TypeError)}return C}function tk(){X(this,"close")}tk.prototype=new W;tk.prototype.className="Close_Builtin";tk.prototype.i=function(b){return sk(b)};
function uk(){X(this,"disp")}uk.prototype=new W;uk.prototype.className="Disp";uk.prototype.t=function(b,c){nk.value.write(c.cb());D(b,C)};uk.prototype.i=function(b){var c=ok(b.b().a(),this),b=b.a();c.write(b.cb());return C};function vk(){X(this,"flushout")}vk.prototype=new W;vk.prototype.className="FlushOut";vk.prototype.i=function(){nk.value.flush();return $a};function wk(){X(this,"force-close")}wk.prototype=new W;wk.prototype.className="ForceClose";wk.prototype.i=function(b){return sk(b)};
function xk(){X(this,"stderr")}xk.prototype=new W;xk.prototype.className="StdErr";xk.prototype.i=function(){return kk};function yk(){X(this,"stdin")}yk.prototype=new W;yk.prototype.className="StdIn";yk.prototype.i=function(b){Mg(b,0,this.className);return mk.value};function zk(){X(this,"stdout")}zk.prototype=new W;zk.prototype.className="StdOut";zk.prototype.i=function(){return nk.value};function Ak(){X(this,"write")}Ak.prototype=new W;Ak.prototype.className="Write";
Ak.prototype.i=function(b){ok(b.b().a(),this).write(b.a());return C};function Bk(){X(this,"writeb")}Bk.prototype=new W;Bk.prototype.className="WriteB";Bk.prototype.i=function(b){var c=ok(b.b().a(),this),b=lb(b.a(),this);b.ma()||g(t(new u,"write byte: expected byte, got "+b));c.uc(b.I());return C};function Ck(){X(this,"writec")}Ck.prototype=new W;Ck.prototype.className="WriteC";Ck.prototype.i=function(b){var c=ok(b.b().a(),this),d=Kb(b.a(),this);c.lb.ab(String.fromCharCode(d.value()));return b.a()};
function Dk(){X(this,"instring")}Dk.prototype=new W;Dk.prototype.className="InString";Dk.prototype.i=function(b){return new sa(Vb(b.a(),this).value())};function Ek(){X(this,"inside")}Ek.prototype=new W;Ek.prototype.className="Inside";Ek.prototype.i=function(b){var c;b=b.a();try{b instanceof gk||g(new TypeError),c=b}catch(d){d instanceof TypeError||g(d),g(t(new u,"Wrong argument type: "+this+" expected a StringOutputPort, got "+b))}return c.value()};function Fk(){X(this,"outstring")}Fk.prototype=new W;
Fk.prototype.className="OutString";Fk.prototype.i=function(){return new gk};function Gk(){X(this,"call-w/stdin")}Gk.prototype=new W;Gk.prototype.className="CallWStdIn";Gk.prototype.d=function(b,c){var d=new fd(mk,mk.value);d.l(this);E(b,d);mk.value=ck(c.a(),this);c.b().a().d(b,C)};function Hk(){X(this,"call-w/stdout")}Hk.prototype=new W;Hk.prototype.className="CallWStdOut";Hk.prototype.d=function(b,c){var d=new fd(nk,nk.value);d.l(this);E(b,d);nk.value=fk(c.a(),this);c.b().a().d(b,C)};
function Ik(){X(this,"readb")}Ik.prototype=new W;Ik.prototype.className="ReadB";Ik.prototype.t=function(b,c){E(b,new Jk(pk(c,this),this))};Ik.prototype.d=function(b,c){E(b,new Jk(pk(c.a(),this),this))};function Jk(b,c){O(this);this.Ub=b;this.l(c)}Jk.prototype=new M;Jk.prototype.Ea=k;Jk.prototype.className="ReadB.Go";Jk.prototype.Ma=function(b,c,d){return this.Ub.mc(function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Jk.prototype.c=function(){g(Error())};function Kk(){X(this,"readc")}
Kk.prototype=new W;Kk.prototype.className="ReadC";Kk.prototype.t=function(b,c){E(b,new Lk(pk(c,this),this))};Kk.prototype.d=function(b,c){E(b,new Lk(pk(c.a(),this),this))};function Lk(b,c){O(this);this.Ub=b;this.l(c)}Lk.prototype=new M;Lk.prototype.Ea=k;Lk.prototype.className="ReadC.Go";Lk.prototype.Ma=function(b,c,d){return $j(this.Ub,function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Lk.prototype.c=function(){g(Error())};function Mk(){X(this,"sread")}Mk.prototype=new W;
Mk.prototype.className="Sread";Mk.prototype.d=function(b,c){E(b,new Nk(ck(c.a(),this),c.b().a(),this))};function Nk(b,c,d){O(this);this.Ub=b;this.fd=c;this.l(d)}Nk.prototype=new M;Nk.prototype.Ea=k;Nk.prototype.className="Sread.Go";Nk.prototype.Ma=function(b,c,d){return ak(this.Ub,this.fd,function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Nk.prototype.c=function(){g(Error())};function Ok(){X(this,"dir")}Ok.prototype=new W;Ok.prototype.className="Dir";
Ok.prototype.d=function(b,c){E(b,new Pk(Vb(c.a(),this).value(),this))};function Pk(b,c){O(this);this.Ya=b;this.l(c)}Pk.prototype=new M;Pk.prototype.Ea=k;Pk.prototype.className="Dir.Go";Pk.prototype.Ma=function(b,c){return ma(function(d,f){if(d)return void c(d);D(b,f);c(l)})};Pk.prototype.c=function(){g(Error())};function Qk(){X(this,"dir-exists")}Qk.prototype=new W;Qk.prototype.className="DirExists";Qk.prototype.d=function(b,c){E(b,new Rk(c.a(),this))};
function Rk(b,c){O(this);this.Ya=b;this.l(c)}Rk.prototype=new M;Rk.prototype.Ea=k;Rk.prototype.className="DirExists.Go";Rk.prototype.Ma=function(b,c){return pa(Vb(this.Ya,this.xa).value(),function(d,f){if(d)return void c(d);D(b,f?this.Ya:C);c(l)})};Rk.prototype.c=function(){g(Error())};function Sk(){X(this,"file-exists")}Sk.prototype=new W;Sk.prototype.className="FileExists";Sk.prototype.d=function(b,c){E(b,new Tk(c.a(),this))};function Tk(b,c){O(this);this.Ya=b;this.l(c)}Tk.prototype=new M;
Tk.prototype.Ea=k;Tk.prototype.className="FileExists.Go";Tk.prototype.Ma=function(b,c,d){return qa(Vb(this.Ya,this.xa).value(),function(d,h){if(d)return void c(d);D(b,h);c(l)},d)};Tk.prototype.c=function(){g(Error())};function Uk(){X(this,"infile")}Uk.prototype=new W;Uk.prototype.className="InFile";Uk.prototype.d=function(b,c){E(b,new Vk(Vb(c.a(),this).value(),this))};function Vk(b,c){O(this);this.Ya=b;this.l(c)}Vk.prototype=new M;Vk.prototype.Ea=k;Vk.prototype.className="InFile.Go";
Vk.prototype.Ma=function(b,c,d){return ra(this.Ya,function(d,h){if(d)return void c(d);D(b,new Zj(h));c(l)},d)};Vk.prototype.c=function(){g(Error())};function Wk(){X(this,"outfile")}Wk.prototype=new W;Wk.prototype.className="OutFile";Wk.prototype.d=function(b,c){var d=Vb(c.a(),this).value(),f=c.b().a(),f=!(f instanceof z)&&"append"===hb(f,this).name();E(b,new Xk(d,f,this))};function Xk(b,c,d){O(this);this.da=b;this.wd=c;this.l(d)}Xk.prototype=new M;Xk.prototype.Ea=k;Xk.prototype.className="OutFile.Go";
Xk.prototype.Ma=function(b,c){return ta(function(d,f){if(d)return void c(d);D(b,new dk(f));c(l)})};Xk.prototype.c=function(){g(Error())};function Yk(){X(this,"make-directory")}Yk.prototype=new W;Yk.prototype.className="MakeDirectory";Yk.prototype.d=function(b,c){E(b,new Zk(Vb(c.a(),this).value(),this))};function Zk(b,c){O(this);this.Ya=b;this.l(c)}Zk.prototype=new M;Zk.prototype.Ea=k;Zk.prototype.className="MakeDirectory.Go";
Zk.prototype.Ma=function(b,c){return ua(function(d,f){if(d)return void c(d);D(b,f?Cb:Bb.bd);c(l)})};Zk.prototype.c=function(){g(Error())};function $k(){X(this,"make-directory*")}$k.prototype=new W;$k.prototype.className="MakeDirectories";$k.prototype.d=function(b,c){E(b,new al(Vb(c.a(),this).value(),this))};function al(b,c){O(this);this.Ya=b;this.l(c)}al.prototype=new M;al.prototype.Ea=k;al.prototype.className="MakeDirectories.Go";
al.prototype.Ma=function(b,c){return va(function(d,f){if(d)return void c(d);D(b,f?Cb:Bb.bd);c(l)})};al.prototype.c=function(){g(Error())};function bl(){X(this,"mvfile")}bl.prototype=new W;bl.prototype.className="MvFile";bl.prototype.d=function(b,c){E(b,new cl(Vb(c.a(),this).value(),Vb(c.b().a(),this).value(),this))};function cl(b,c,d){O(this);this.Hd=b;this.Gd=c;this.l(d)}cl.prototype=new M;cl.prototype.Ea=k;cl.prototype.className="MvFile.Go";
cl.prototype.Ma=function(b,c){return wa(function(d){if(d)return void c(d);D(b,C);c(l)})};cl.prototype.c=function(){g(Error())};function dl(){X(this,"rmfile")}dl.prototype=new W;dl.prototype.className="RmFile";dl.prototype.d=function(b,c){E(b,new el(Vb(c.a(),this).value(),this))};function el(b,c){O(this);this.Ya=b;this.l(c)}el.prototype=new M;el.prototype.Ea=k;el.prototype.className="RmFile.Go";el.prototype.Ma=function(b,c){return xa(function(d){if(d)return void c(d);D(b,C);c(l)})};
el.prototype.c=function(){g(Error())};var Rg=k;
function fl(b){var c={noLibs:k,e:['(assign load-from-web  (fn ()    ( (fn (eof f loop)        (assign loop          (fn ()            ( (fn (command)              (if (is command eof)                (eval                  \'(do (load "strings.arc")                       (load "lib/bag-of-tricks.arc")                       (load "rainbow/rainbow.arc")                       (load "rainbow/rainbow-libs.arc")                       ))                ( (fn ()                  eval.command                  (loop)                ) ))            ) (sread f eof))))        (loop)    ) (uniq) (infile "arc.arc") nil)))'].concat("#libs"!==location.hash?
[]:["(load-from-web)"])},d=(new Date).getTime(),f=c.ARC_PATH||[];-1===f.indexOf(".")&&(f=["."].concat(f));var h=gl(c.args||[]);c.nosf&&(Rg=m);new uj;new vj;new rj;new qj;new sj;K("pi").ga(new I(Math.PI));K("e").ga(new I(Math.E));new gj;new Ni;new bj;new dj;new aj;new Yi;new Gi;new ej;new Zi;new Li;new cj;new Ki;new fj;new Hi;new Fi;new Ii;new Oi;new Ji;new Pi;new $i;new Qj;new Lj;new Pj;new Mj;new xi;new wi;new hl;new Hj;new Dj;new Gj;new zj;new Ej;new Ij;new Jj;new Kj;new ei;new ci;new ji;new hi;
new ii;new gi;new Ci;new yi;new zi;new Di;new Ei;new Ai;new Bi;new hj;new mj;new jj;new ij;new kj;new li;new ni;new pi;new vi;new yj;new wj;new xj;new Fa;new Gk;new Hk;new yk;new zk;new xk;new uk;new Ak;new Mk;new Bk;new Ck;new Ik;new Kk;new vk;new tk;new wk;new Wk;new Uk;new Qk;new Sk;new Ok;new dl;new bl;new Yk;new $k;new Dk;new Fk;new Ek;new nj;new oj;new pj;var j=new rc;K("*argv*").ga(x(h));K("call*").ga(new Fa);K("sig").ga(new Fa);il(j,f,(c.noLibs?[]:["arc","strings","lib/bag-of-tricks","rainbow/rainbow",
"rainbow/rainbow-libs"]).concat(c.f||[]),function(f){if(f)return void b(f);jl(j,c.e||[],function(f){if(f)return void b(f);c.q?b():(za("repl in "+((new Date).getTime()-d)+"ms"),kl(j,b,i))})})}function gl(b){for(var c=[],d=0,f=b.length;d<f;d++){var h=b[d];"[object String]"!==Object.prototype.toString.call(h)&&g(new TypeError);c.push(Ma(""+h))}return c}function il(b,c,d,f){var h=i;function j(s){s===q?f():ll(b,c,d[s],function(b){if(b)return void f(b);j(s+1)},h)}var q=d.length;j(0)}
function jl(b,c,d){var f=i;function h(c,j){if(c)return void d(c);if(j===l)return void d();ml(b,j,function(b){if(b)return void d(b);Na(N,h,f)},f)}for(var j=[],q=0,s=c.length;q<s;q++){var F=c[q];"[object String]"!==Object.prototype.toString.call(F)&&g(new TypeError);j.push(F+" ")}var N=(new sa(j.join(""))).qa();Na(N,h,f)}
function kl(b,c,d){ya("arc> ");for(var f=k,h=m;!h;)if(Na(ja,function(j,q){if(j){if(!(j instanceof Da))return void c(j);Aa(j);f||kl(b,c,d)}else q===l?(h=k,f||c()):ml(b,q,function(h){if(h)return void c(h);f||kl(b,c,d)},d)||(f=m)},d)||(f=m),!f)return;c()}function ml(b,c,d,f){return nl(b,c,function(b,c){if(b){if(!(b instanceof u))return void d(b);za("Message    : "+b.message);ya("Java stack : ");Aa(b,ka)}else za(c);d()},f)}
function ol(b,c,d,f){function h(q){if(q===N)d(Error("Could not find "+c+" under "+JSON.stringify(b)));else{var s=j[q];qa(s,function(b,c){if(b)return void d(b);if(c)return void d(l,s);h(q+1)},f)}}for(var j=[],q=b.length,s=0;s<q;s++){var F=""+b[s]+"/"+c;j.push(F,F+".arc")}var N=j.length;h(0)}function ll(b,c,d,f,h){function j(c){ra(c,function(c,d){if(c)return void f(c);pl(b,d,f,h)},h)}qa(d,function(b,s){if(b)return void f(b);s?j(d):ol(c,d,function(b,c){if(b)return void f(b);j(c)},h)},h)}
function pl(b,c,d,f){var h=k;Na(c,function(j,q){if(j)return void d(j);if(q===l)return void d();nl(b,q,function(j){if(j)return void d(j);pl(b,c,d,f)||(h=m)},f)||(h=m)},f)||(h=m);return h}function ql(b){this.xa=b}ql.prototype=new tf;ql.prototype.className="Console.Anon_mkVisitor_";ql.prototype.Yb=function(b){b.l(this.xa)};function nl(b,c,d,f){E(b,new rl(c));return sc(b,d,f)}function rl(b){O(this);this.Ba=b;this.l(G("Console.compileAndEvalAsync_"))}rl.prototype=new M;rl.prototype.className="Console.CompileAndEval";
rl.prototype.c=function(b){E(b,new sl);Pf(b,this.Ba,[])};function sl(){O(this);this.l(G("Console.compileAndEvalAsync_"))}sl.prototype=new M;sl.prototype.className="Console.AndEval";sl.prototype.c=function(b){var c=R(b).reduce(),d=[];c.g(d);d=x(d);d.k(new ql(c));S(b,l,d)};function hl(){X(this,"new-thread")}hl.prototype=new W;hl.prototype.className="NewThread";hl.prototype.i=function(){g(t(new u,"Rainbow.js doesn't support new-thread."))};function sh(b,c,d){O(this);this.ia=b;this.n=c;this.l(d)}
sh.prototype=new M;sh.prototype.className="BindAndRun";sh.prototype.c=function(b){this.ia.add(R(b));S(b,this.ia,this.n)};Qa("window").ga(new uc(window));ea(window,"hashchange",function(){location.reload(m)});
ea(window,"load",function(){function b(){var b=F.value+"\n";F.value="";fa.lc.ab(b)}function c(b){if(b.Zc!==i)return b.Zc();for(var c=[],d=k;d;)b.nc(function(b,f){b&&g(b);f!==l?d=m:c.push(String.fromCharCode(f))},k)||(d=m);return c.join("")}function d(b){s.appendChild(document.createTextNode(b));na||(na=k,setTimeout(function(){na=m;s.scrollTop=s.scrollHeight},0))}function f(b){b&&g(b);b=c(fa.Wa);""!==b&&(d(b),ga.lc.ab(b),fa.Wa.mb(f))}function h(b){b&&g(b);b=c(ha.Wa);""!==b&&(d(b),ha.Wa.mb(h))}function j(b){b&&
g(b);b=c(ia.Wa);""!==b&&(d(b),ia.Wa.mb(j))}var q=document.getElementById("repl"),s=document.createElement("pre");s.className="scrollback";s.appendChild(document.createTextNode(""));q.appendChild(s);var F=document.createElement("textarea");F.className="prompt";ea(F,"keydown",function(b){if(13===(b.which||b.keyCode))b.preventDefault?b.preventDefault():b.returnValue=m});ea(F,"keyup",function(c){13===(c.which||c.keyCode)&&b()});q.appendChild(F);var N=document.createElement("button");N.className="eval";
N.appendChild(document.createTextNode("Eval"));ea(N,"click",function(){b()});q.appendChild(N);var na=m;fa.Wa.mb(f);ha.Wa.mb(h);ia.Wa.mb(j);fl(n())});
